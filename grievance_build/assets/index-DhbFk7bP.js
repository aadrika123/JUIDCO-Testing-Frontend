import{c as ed,d as dd,z as ad,b as rd,o as ld,j as e,F as cd,C as sd,a0 as xd,A as nd,B as id,g as w,_ as g,s as Ve,a3 as a,x as N,a4 as f,a5 as u,a6 as v,I as x,a7 as b,a8 as od,a9 as td,G as hd,k as jd}from"./index-x5K3To9x.js";import{P as Nd}from"./index-C7uy_qK7.js";import{g as fd}from"./services-KQnp_8oA.js";import{R as ud}from"./refresh-ccw-BQCuiKKk.js";import{I as vd,F as Ze}from"./info-C6JU3Cpn.js";import{M as De,p as bd}from"./module.config-B4zAVPDx.js";import{M as yd}from"./move-right-DNqcI6jO.js";const gd=ed().shape({comment:dd().required("Write comment")});function wd({complaintData:l}){const h=ad({}),n=rd({resolver:ld(gd)}),y=async s=>{var o,t;let i={complaintId:(t=(o=l==null?void 0:l.data)==null?void 0:o.data)==null?void 0:t._id,comment:s==null?void 0:s.comment};try{const r=await h.mutateAsync({api:w.reopenComplaint,data:i});r.data.success?(g.success(r.data.message),l==null||l.refetch()):g.error(r.data.message)}catch(r){g.error(fd(r))}};return e.jsx(cd,{methods:n,onSubmit:n.handleSubmit(y),children:e.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[e.jsxs("div",{children:[e.jsx(sd,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:e.jsx(ud,{className:"inline"})})," Re-Open Grievance"]})}),e.jsxs(xd,{className:"opacity-70 flex items-center",children:[e.jsx("div",{children:e.jsx(vd,{size:20,className:"inline mr-1"})}),e.jsx("div",{children:"Enter, why do you want to reopen this grievance?"})]}),e.jsx(nd,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(id,{isLoading:n.formState.isSubmitting,type:"submit",className:" w-full",children:"Submit Re-Open"})})]})})}function md(){var o,t,r,m,p,T,k,A,C,S,R,U,P,B,F,L,G,_,I,M,W,O,Y,$,z,E,H,q,Q,X,J,K,V,Z,D,ss,es,ds,as,rs,ls,cs,xs,ns,is,os,ts,hs,js,Ns,fs,us,vs,bs,ys,gs,ws,ms,ps,Ts,ks,As,Cs,Ss,Rs,Us,Ps,Bs,Fs,Ls,Gs,_s,Is,Ms,Ws,Os,Ys,$s,zs,Es,Hs,qs,Qs,Xs,Js,Ks,Vs,Zs,Ds,se,ee,de,ae,re,le,ce,xe,ne,ie,oe,te,he,je,Ne,fe,ue,ve,be,ye,ge,we,me,pe,Te,ke,Ae,Ce,Se,Re,Ue,Pe,Be,Fe,Le,Ge,_e,Ie,Me,We,Oe,Ye,$e,ze,Ee,He,qe;const h=new URLSearchParams(jd().search),n=h.get("complaintRefNo"),y=h.get("complaintId"),s=Ve({api:`${w.getComplaintDetailsByComplaintNo}/${n}`,key:"ComplaintDetails",options:{enabled:!0}}),i=Ve({api:`${w.complaintApplicationLog}/${y}`,key:"complaintApplicationLog",options:{enabled:!0}});return e.jsx("div",{className:"",children:e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto bg-background shadow-lg rounded-lg p-8",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:["Grievance No : ",(t=(o=s==null?void 0:s.data)==null?void 0:o.data)==null?void 0:t.complaintRefNo]}),((p=(m=(r=s==null?void 0:s.data)==null?void 0:r.data)==null?void 0:m.workflow)==null?void 0:p.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),(A=(k=(T=s==null?void 0:s.data)==null?void 0:T.data)==null?void 0:k.workflow)==null?void 0:A.workFlowName," Workflow"]}),!((R=(S=(C=s==null?void 0:s.data)==null?void 0:C.data)==null?void 0:S.workflow)!=null&&R.workFlowName)&&e.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[e.jsx("span",{className:"opacity-60",children:"Current Stage : "}),((P=(U=s==null?void 0:s.data)==null?void 0:U.data)==null?void 0:P.currentUser)&&`${(L=(F=(B=s==null?void 0:s.data)==null?void 0:B.data)==null?void 0:F.currentUser)==null?void 0:L.fullName} `,((_=(G=s==null?void 0:s.data)==null?void 0:G.data)==null?void 0:_.currentWorkflow)&&`(${(W=(M=(I=s==null?void 0:s.data)==null?void 0:I.data)==null?void 0:M.currentWorkflow)==null?void 0:W.workFlowName})`,!((Y=(O=s==null?void 0:s.data)==null?void 0:O.data)!=null&&Y.currentWorkflow)&&!((z=($=s==null?void 0:s.data)==null?void 0:$.data)!=null&&z.currentUser)&&((H=(E=s==null?void 0:s.data)==null?void 0:E.data)==null?void 0:H.moduleId)===De&&"State GRO",!((Q=(q=s==null?void 0:s.data)==null?void 0:q.data)!=null&&Q.currentWorkflow)&&!((J=(X=s==null?void 0:s.data)==null?void 0:X.data)!=null&&J.currentUser)&&((V=(K=s==null?void 0:s.data)==null?void 0:K.data)==null?void 0:V.moduleId)!==De&&"ULB GRO"]}),e.jsx("h1",{className:"text-md font-bold  mb-6 flex items-center",children:e.jsxs("span",{children:["Status -",((D=(Z=s==null?void 0:s.data)==null?void 0:Z.data)==null?void 0:D.wf_status)===0&&e.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending"}),((es=(ss=s==null?void 0:s.data)==null?void 0:ss.data)==null?void 0:es.wf_status)===1&&e.jsx(a,{className:"bg-green-500 ml-2",children:"Resolved"}),((as=(ds=s==null?void 0:s.data)==null?void 0:ds.data)==null?void 0:as.wf_status)===2&&e.jsx(a,{className:"bg-red-500 ml-2",children:"Rejected"}),((ls=(rs=s==null?void 0:s.data)==null?void 0:rs.data)==null?void 0:ls.wf_status)===3&&e.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending(re-opened)"}),((xs=(cs=s==null?void 0:s.data)==null?void 0:cs.data)==null?void 0:xs.wf_status)===4&&e.jsx(a,{className:"bg-red-500 ml-2",children:"Closed"})]})})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Registered on ",N((is=(ns=s==null?void 0:s.data)==null?void 0:ns.data)==null?void 0:is.createdAt).format("DD-MM-YYYY")]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsxs("div",{className:"mt-4  grid grid-cols-1 md:grid-cols-3   space-y-4",children:[e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Full Name : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((ts=(os=s==null?void 0:s.data)==null?void 0:os.data)==null?void 0:ts.citizenName)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Mobile No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((js=(hs=s==null?void 0:s.data)==null?void 0:hs.data)==null?void 0:js.mobileNo)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Email : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((fs=(Ns=s==null?void 0:s.data)==null?void 0:Ns.data)==null?void 0:fs.email)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"ULB : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((bs=(vs=(us=s==null?void 0:s.data)==null?void 0:us.data)==null?void 0:vs.ulb)==null?void 0:bs.ulbName)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((ws=(gs=(ys=s==null?void 0:s.data)==null?void 0:ys.data)==null?void 0:gs.problemType)==null?void 0:ws.problem)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Word No. : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((ps=(ms=s==null?void 0:s.data)==null?void 0:ms.data)==null?void 0:ps.wardNo)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Area : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((ks=(Ts=s==null?void 0:s.data)==null?void 0:Ts.data)==null?void 0:ks.area)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Consumer No : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((Cs=(As=s==null?void 0:s.data)==null?void 0:As.data)==null?void 0:Cs.consumerNo)||"N/A"})," "]})]}),e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Location : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((Rs=(Ss=s==null?void 0:s.data)==null?void 0:Ss.data)==null?void 0:Rs.grievanceLocation)||"N/A"})," "]})]}),((Ps=(Us=s==null?void 0:s.data)==null?void 0:Us.data)==null?void 0:Ps.fixedNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Fs=(Bs=s==null?void 0:s.data)==null?void 0:Bs.data)==null?void 0:Fs.fixedNoLabel,"Fixed No : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Gs=(Ls=s==null?void 0:s.data)==null?void 0:Ls.data)==null?void 0:Gs.fixedNo})," "]})]}),((Is=(_s=s==null?void 0:s.data)==null?void 0:_s.data)==null?void 0:Is.tempNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Ws=(Ms=s==null?void 0:s.data)==null?void 0:Ms.data)==null?void 0:Ws.tempNoLabel,"Temp No : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ys=(Os=s==null?void 0:s.data)==null?void 0:Os.data)==null?void 0:Ys.tempNo})," "]})]}),((zs=($s=s==null?void 0:s.data)==null?void 0:$s.data)==null?void 0:zs.holdingNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Hs=(Es=s==null?void 0:s.data)==null?void 0:Es.data)==null?void 0:Hs.tempNoLabel,"Holding No : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Qs=(qs=s==null?void 0:s.data)==null?void 0:qs.data)==null?void 0:Qs.holdingNo})," "]})]}),((Js=(Xs=s==null?void 0:s.data)==null?void 0:Xs.data)==null?void 0:Js.safNo)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsxs("div",{className:"font-semibold",children:[(Vs=(Ks=s==null?void 0:s.data)==null?void 0:Ks.data)==null?void 0:Vs.tempNoLabel,"Saf No : "]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(Ds=(Zs=s==null?void 0:s.data)==null?void 0:Zs.data)==null?void 0:Ds.safNo})," "]})]}),(((ee=(se=s==null?void 0:s.data)==null?void 0:se.data)==null?void 0:ee.wf_status)===0||((ae=(de=s==null?void 0:s.data)==null?void 0:de.data)==null?void 0:ae.wf_status)===3)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Pending From : "}),e.jsxs("div",{children:[e.jsxs("p",{className:"opacity-90",children:[N().diff(N((le=(re=s==null?void 0:s.data)==null?void 0:re.data)==null?void 0:le.createdAt),"days")," days"]})," "]})]}),((xe=(ce=s==null?void 0:s.data)==null?void 0:ce.data)==null?void 0:xe.priorityType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Priority Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((oe=(ie=(ne=s==null?void 0:s.data)==null?void 0:ne.data)==null?void 0:ie.priorityType)==null?void 0:oe.priorityName)||"N/A"})," "]})]}),((he=(te=s==null?void 0:s.data)==null?void 0:te.data)==null?void 0:he.targetType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Target Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((fe=(Ne=(je=s==null?void 0:s.data)==null?void 0:je.data)==null?void 0:Ne.targetType)==null?void 0:fe.targetType)||"N/A"})," "]})]}),((ve=(ue=s==null?void 0:s.data)==null?void 0:ue.data)==null?void 0:ve.complaintType)&&e.jsxs("div",{className:"flex space-x-4  items-center",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Type : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((ge=(ye=(be=s==null?void 0:s.data)==null?void 0:be.data)==null?void 0:ye.complaintType)==null?void 0:ge.complaintTypeName)||"N/A"})," "]})]}),e.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:((me=(we=s==null?void 0:s.data)==null?void 0:we.data)==null?void 0:me.complaintDescription)||"N/A"})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Grievance Document "}),e.jsxs(f,{children:[e.jsx(u,{}),e.jsx(v,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:(Te=(pe=s==null?void 0:s.data)==null?void 0:pe.data)!=null&&Te.imgUrl&&((Ae=(ke=s==null?void 0:s.data)==null?void 0:ke.data)!=null&&Ae.imgUrl.includes(".pdf"))?e.jsx("iframe",{src:(Se=(Ce=s==null?void 0:s.data)==null?void 0:Ce.data)==null?void 0:Se.imgUrl,width:"100%",height:"400px",title:"Document Preview"}):e.jsx(x,{src:(Ue=(Re=s==null?void 0:s.data)==null?void 0:Re.data)==null?void 0:Ue.imgUrl,className:"w-80"})})}),e.jsx(b,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer",children:(Be=(Pe=s==null?void 0:s.data)==null?void 0:Pe.data)!=null&&Be.imgUrl&&((Le=(Fe=s==null?void 0:s.data)==null?void 0:Fe.data)!=null&&Le.imgUrl.includes(".pdf"))?e.jsxs("div",{className:"w-20 h-20  flex justify-center items-center",children:["  ",e.jsx(Ze,{className:"w-20 h-20 "})]}):e.jsx(x,{src:(_e=(Ge=s==null?void 0:s.data)==null?void 0:Ge.data)==null?void 0:_e.imgUrl,className:"w-40"})})})]})]}),((Me=(Ie=s==null?void 0:s.data)==null?void 0:Ie.data)==null?void 0:Me.wf_status)===1&&Array.isArray((Oe=(We=s==null?void 0:s.data)==null?void 0:We.data)==null?void 0:Oe.resolveDocs)&&s.data.data.resolveDocs.length>0&&e.jsxs("div",{className:"col-span-1 md:col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Resolve Document:"}),e.jsxs(f,{children:[e.jsx(b,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer",children:s.data.data.resolveDocs.map((d,c)=>typeof d=="string"&&d.endsWith(".pdf")?e.jsxs("div",{className:"flex items-center gap-2 border p-2 rounded cursor-pointer",children:[e.jsx(Ze,{className:"w-12 h-12 text-red-600"}),e.jsx("span",{className:"text-sm font-semibold",children:"PDF Document"})]},c):e.jsx(x,{src:d,className:"w-40 rounded cursor-pointer"},c))})}),e.jsxs(v,{className:"sm:max-w-[500px]",children:[e.jsx(u,{children:e.jsx(od,{className:"absolute right-4 top-4 text-red-600 hover:text-gray-900",children:e.jsx(td,{className:"w-6 h-6"})})}),e.jsx("div",{className:"py-4",children:s.data.data.resolveDocs.map((d,c)=>typeof d=="string"&&d.endsWith(".pdf")?e.jsx("div",{className:"w-full h-[500px] border rounded overflow-hidden",children:e.jsx("iframe",{src:d,className:"w-full h-full"})},c):e.jsx(x,{src:d,className:"w-80 rounded"},c))})]})]})]})]}),e.jsxs("section",{className:"mt-8",children:[((($e=(Ye=s==null?void 0:s.data)==null?void 0:Ye.data)==null?void 0:$e.wf_status)===1||((Ee=(ze=s==null?void 0:s.data)==null?void 0:ze.data)==null?void 0:Ee.wf_status)===2)&&e.jsxs(f,{children:[e.jsx(u,{}),e.jsxs(v,{className:"sm:max-w-[500px]",children:[e.jsx(sd,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:"Grievance Re-Open"}),e.jsx("div",{className:"py-4",children:e.jsx(wd,{complaintData:s})})]}),e.jsx(b,{asChild:!0,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"Grievance Flow History"})}),e.jsx("div",{children:e.jsx(hd,{variant:"secondary",children:"Re-Open Grievance"})})]})})]}),e.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),e.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:(qe=(He=i==null?void 0:i.data)==null?void 0:He.data)==null?void 0:qe.map((d,c)=>{var j,Qe,Xe,Je,Ke;return e.jsxs("div",{className:"flex space-x-4 items-center",children:[e.jsx("div",{children:c+1}),e.jsxs("div",{children:[(d==null?void 0:d.actionStatus)===0&&e.jsx(a,{className:"bg-gray-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===1&&e.jsx(a,{className:"bg-green-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===2&&e.jsx(a,{className:"bg-red-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===3&&e.jsx(a,{children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===4&&e.jsx(a,{className:"bg-amber-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===5&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===6&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===7&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===8&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===9&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===10&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===11&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===12&&e.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),e.jsx("div",{className:"text-xs text-gray-600 font-semibold mt-1",children:N((Qe=(j=s==null?void 0:s.data)==null?void 0:j.data)==null?void 0:Qe.createdAt).format("DD-MM-YYYY hh:mm a")})]}),e.jsx(yd,{}),e.jsxs("div",{children:[e.jsxs(f,{children:[e.jsx(u,{}),e.jsx(v,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4",children:e.jsx(x,{src:(Xe=d==null?void 0:d.actionBy)==null?void 0:Xe.fullImgUrl,className:"w-60"})})}),e.jsx(b,{asChild:!0,children:e.jsx("div",{className:"w-10 h-10 rounded-full border overflow-hidden cursor-pointer",children:e.jsx(x,{src:((Je=d==null?void 0:d.actionBy)==null?void 0:Je.fullImgUrl)||bd,className:"w-10 cursor-pointer hover:scale-105"})})})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:["Action by ",e.jsx("span",{className:"font-semibold text-black text-md",children:(d==null?void 0:d.actionByUserId)===null?"Direct Citizen":(Ke=d==null?void 0:d.actionBy)==null?void 0:Ke.fullName})]})]})]})})})]})]})})})}function Ud(){return e.jsx(Nd,{title:"Grievance Details",subTitle:"Manage all the Grievance here",children:e.jsx("div",{className:"",children:e.jsx(md,{})})})}export{Ud as default};
