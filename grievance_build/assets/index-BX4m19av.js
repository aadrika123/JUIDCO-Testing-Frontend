import{u as X,bd as os,r as h,a as u,b as rs,o as xs,j as s,D as ns,B as M,F as hs,C as ss,a0 as js,R as ps,t as Ns,v as fs,H as N,w as bs,S as vs,a3 as j,L as ys,G as Ss,c as Es,d as ws,g as L,_ as r,I as Cs}from"./index-x5K3To9x.js";import{g as Ts}from"./services-KQnp_8oA.js";import{T as Rs,a as Os,b as g,c as x,d as _s,e as n}from"./table-BluvXNrN.js";const Fs=Es().shape({complaintNo:ws().required("Complaint No. is Required")});function Bs(){var v,y,S,E,w,C,T,R,O,_,F,B,I,P,A,D,H,$,G,k,V,z,q,U,W,Y,Z,J,K;X({});const d=X({}),a=os(),[es,f]=h.useState(!1),[as,ls]=h.useState(!1),[ds,is]=h.useState(!0),[b,ts]=h.useState(""),{currentLanguage:e}=u(),p=rs({resolver:xs(Fs)});console.log(as);const cs=async t=>{var c,m,o;try{const l=await a.mutateAsync({api:`${L.getComplaintDetailsByComplaintNo}/${t==null?void 0:t.complaintNo}`});(c=l.data)!=null&&c.success?r.success((m=l==null?void 0:l.data)==null?void 0:m.message):r.error((o=l==null?void 0:l.data)==null?void 0:o.message)}catch(l){console.log(l)}},ms=async()=>{var t,c,m,o,l,Q;try{const i=await d.mutateAsync({api:L.verifyEmailOtp,data:{otp:b,email:(m=(c=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:c.data)==null?void 0:m.email}});(o=i==null?void 0:i.data)!=null&&o.success?(r.success((l=i==null?void 0:i.data)==null?void 0:l.message),f(!1),is(!0)):r.error((Q=i==null?void 0:i.data)==null?void 0:Q.message)}catch(i){r.error(Ts(i.message))}};return s.jsxs(s.Fragment,{children:[s.jsx(ns,{open:es,setOpen:f,title:"OTP Send to your Registered Email",setEdit:ls,children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter OTP"}),s.jsxs("form",{onSubmit:t=>t.preventDefault(),children:[s.jsx("input",{value:b,onChange:t=>ts(t.target.value),type:"text",placeholder:"Enter OTP",className:"input-field w-full border border-gray-300 rounded-md p-2"}),s.jsx("div",{children:s.jsx(M,{type:"button",onClick:ms,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Verify OTP"})})]})]})}),s.jsx(hs,{methods:p,onSubmit:p.handleSubmit(cs),children:s.jsxs("div",{className:"md:px-24 space-y-4",children:[s.jsxs(ss,{className:"text-xl text-primary font-bold",children:[e==null?void 0:e.SEND_REM," "]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"md:w-4/12",children:[s.jsx(js,{htmlFor:"complaintNo",children:e==null?void 0:e.GN}),s.jsx(ps,{className:"bg-background",name:"complaintNo",placeholder:""})]}),s.jsx("div",{className:"col-span-3 mt-7",children:s.jsx(M,{isLoading:p.formState.isSubmitting,type:"submit",className:"w-auto rounded-xl px-10 float-right",children:e==null?void 0:e.SUBMIT})})]})]})}),((y=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:y.success)&&ds&&s.jsx("div",{className:"mt-20 md:px-24",children:s.jsxs(Ns,{children:[s.jsx(fs,{className:"px-7",children:s.jsx(N,{children:e==null?void 0:e.GL})}),s.jsx(bs,{children:a.isPending?s.jsx("div",{className:"flex h-32 items-center justify-center",children:s.jsx(vs,{})}):s.jsxs(Rs,{children:[s.jsx(Os,{children:s.jsxs(g,{children:[s.jsxs(x,{children:[e==null?void 0:e.GRIEVANCE_NO,"."]}),s.jsx(x,{children:e==null?void 0:e.CITIZEN_NAME}),s.jsxs(x,{children:[e==null?void 0:e.MOBILE_NO,"."]}),s.jsx(x,{children:e==null?void 0:e.STATUS}),s.jsx(x,{children:e==null?void 0:e.VIEW})]})}),s.jsx(_s,{children:s.jsxs(g,{children:[s.jsx(n,{children:(w=(E=(S=a==null?void 0:a.data)==null?void 0:S.data)==null?void 0:E.data)==null?void 0:w.complaintRefNo}),s.jsx(n,{children:(R=(T=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:T.data)==null?void 0:R.citizenName}),s.jsx(n,{children:(F=(_=(O=a==null?void 0:a.data)==null?void 0:O.data)==null?void 0:_.data)==null?void 0:F.mobileNo}),s.jsxs(n,{children:[((P=(I=(B=a==null?void 0:a.data)==null?void 0:B.data)==null?void 0:I.data)==null?void 0:P.wf_status)===3&&s.jsx(j,{className:"bg-amber-400 text-white",children:e==null?void 0:e.PR}),((H=(D=(A=a==null?void 0:a.data)==null?void 0:A.data)==null?void 0:D.data)==null?void 0:H.wf_status)===2&&s.jsx(j,{variant:"destructive",children:e==null?void 0:e.R}),((k=(G=($=a==null?void 0:a.data)==null?void 0:$.data)==null?void 0:G.data)==null?void 0:k.wf_status)===1&&s.jsxs(j,{variant:"success",children:[e==null?void 0:e.RS," "]}),((q=(z=(V=a==null?void 0:a.data)==null?void 0:V.data)==null?void 0:z.data)==null?void 0:q.wf_status)===0&&s.jsx(j,{variant:"secondary",children:e==null?void 0:e.P})]}),s.jsx(n,{children:s.jsx(ys,{to:`/grievance/citizen/complaint-details?complaintRefNo=${(Y=(W=(U=a==null?void 0:a.data)==null?void 0:U.data)==null?void 0:W.data)==null?void 0:Y.complaintRefNo}&complaintId=${(K=(J=(Z=a==null?void 0:a.data)==null?void 0:Z.data)==null?void 0:J.data)==null?void 0:K._id}`,children:s.jsx(Ss,{className:"bg-primary",children:e==null?void 0:e.VIEW})})})]})})]})})]})})]})}function Ds(){const{currentLanguage:d}=u();return s.jsxs("div",{className:"grid sm:grid-cols-4 grid-cols-1",children:[s.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 hidden sm:block",children:[s.jsx(ss,{className:"text-xl text-primary font-bold",children:d==null?void 0:d.SEND_REM}),s.jsx(Cs,{src:"/images/complain_boy.png",className:"w-40"}),s.jsx(N,{className:"text-center",children:d==null?void 0:d.FF_FB}),s.jsx(N,{className:"text-center",children:d==null?void 0:d.YF_FB})]}),s.jsx("div",{className:"col-span-4 md:col-span-3 p-2 sm:p-10 bg-gray-50 h-screen",children:s.jsx(Bs,{})})]})}export{Ds as default};
