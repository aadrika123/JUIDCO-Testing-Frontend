import{u as g,bd as hs,r as j,a as es,b as ns,o as js,j as s,D as Ns,B as u,F as fs,C as ds,a0 as ps,R as bs,t as vs,v as ys,H as f,w as Cs,S as Ss,a3 as o,L as ws,G as Ts,c as Rs,d as Es,g as ss,_ as x,I as Os}from"./index-x5K3To9x.js";import{g as _s}from"./services-KQnp_8oA.js";import{T as Fs,a as Bs,b as as,c as h,d as Is,e as n}from"./table-BluvXNrN.js";const Ps=Rs().shape({complaintNo:Es().required("Complaint No. is Required")});function As(){var v,y,C,S,w,T,R,E,O,_,F,B,I,P,A,G,D,H,$,k,V,z,q,K,U,W,Y,Z,J,Q,X,M;g({});const l=g({}),e=hs(),[ls,p]=j.useState(!1),[is,ts]=j.useState(!1),[cs,ms]=j.useState(!0),[b,rs]=j.useState(""),{currentLanguage:a}=es(),N=ns({resolver:js(Ps)});console.log(is);const os=async t=>{var c,m,r;try{const d=await e.mutateAsync({api:`${ss.getComplaintDetailsByComplaintNo}/${t==null?void 0:t.complaintNo}`});(c=d.data)!=null&&c.success?x.success((m=d==null?void 0:d.data)==null?void 0:m.message):x.error((r=d==null?void 0:d.data)==null?void 0:r.message)}catch(d){console.log(d)}},xs=async()=>{var t,c,m,r,d,L;try{const i=await l.mutateAsync({api:ss.verifyEmailOtp,data:{otp:b,email:(m=(c=(t=e==null?void 0:e.data)==null?void 0:t.data)==null?void 0:c.data)==null?void 0:m.email}});(r=i==null?void 0:i.data)!=null&&r.success?(x.success((d=i==null?void 0:i.data)==null?void 0:d.message),p(!1),ms(!0)):x.error((L=i==null?void 0:i.data)==null?void 0:L.message)}catch(i){x.error(_s(i.message))}};return s.jsxs(s.Fragment,{children:[s.jsx(Ns,{open:ls,setOpen:p,title:"OTP Send to your Registered Email",setEdit:ts,children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter OTP"}),s.jsxs("form",{onSubmit:t=>t.preventDefault(),children:[s.jsx("input",{value:b,onChange:t=>rs(t.target.value),type:"text",placeholder:"Enter OTP",className:"input-field w-full border border-gray-300 rounded-md p-2"}),s.jsx("div",{children:s.jsx(u,{type:"button",onClick:xs,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Verify OTP"})})]})]})}),s.jsx(fs,{methods:N,onSubmit:N.handleSubmit(os),children:s.jsxs("div",{className:"md:px-24 space-y-4",children:[s.jsxs(ds,{className:"text-xl text-primary font-bold",children:[a==null?void 0:a.TRACK_GR," "]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"md:w-4/12",children:[s.jsx(ps,{htmlFor:"complaintNo",children:a==null?void 0:a.GN}),s.jsx(bs,{className:"bg-background",name:"complaintNo",placeholder:""})]}),s.jsx("div",{className:"col-span-3 mt-7",children:s.jsx(u,{isLoading:N.formState.isSubmitting,type:"submit",className:"w-auto rounded-xl px-10 float-right",children:a==null?void 0:a.SUBMIT})})]})]})}),((y=(v=e==null?void 0:e.data)==null?void 0:v.data)==null?void 0:y.success)&&cs&&s.jsx("div",{className:"mt-20 md:px-24",children:s.jsxs(vs,{children:[s.jsx(ys,{className:"px-7",children:s.jsx(f,{children:a==null?void 0:a.GL})}),s.jsx(Cs,{children:e.isPending?s.jsx("div",{className:"flex h-32 items-center justify-center",children:s.jsx(Ss,{})}):s.jsxs(Fs,{children:[s.jsx(Bs,{children:s.jsxs(as,{children:[s.jsxs(h,{children:[a==null?void 0:a.GRIEVANCE_NO,"."]}),s.jsx(h,{children:a==null?void 0:a.CITIZEN_NAME}),s.jsxs(h,{children:[a==null?void 0:a.MOBILE_NO,"."]}),s.jsx(h,{children:a==null?void 0:a.STATUS}),s.jsx(h,{children:a==null?void 0:a.VIEW})]})}),s.jsx(Is,{children:s.jsxs(as,{children:[s.jsx(n,{children:(w=(S=(C=e==null?void 0:e.data)==null?void 0:C.data)==null?void 0:S.data)==null?void 0:w.complaintRefNo}),s.jsx(n,{children:(E=(R=(T=e==null?void 0:e.data)==null?void 0:T.data)==null?void 0:R.data)==null?void 0:E.citizenName}),s.jsx(n,{children:(F=(_=(O=e==null?void 0:e.data)==null?void 0:O.data)==null?void 0:_.data)==null?void 0:F.mobileNo}),s.jsxs(n,{children:[((P=(I=(B=e==null?void 0:e.data)==null?void 0:B.data)==null?void 0:I.data)==null?void 0:P.wf_status)===3&&s.jsx(o,{className:"bg-amber-400 text-white",children:a==null?void 0:a.PR}),((D=(G=(A=e==null?void 0:e.data)==null?void 0:A.data)==null?void 0:G.data)==null?void 0:D.wf_status)===2&&s.jsx(o,{variant:"destructive",children:a==null?void 0:a.R}),((k=($=(H=e==null?void 0:e.data)==null?void 0:H.data)==null?void 0:$.data)==null?void 0:k.wf_status)===1&&s.jsxs(o,{variant:"success",children:[a==null?void 0:a.RS," "]}),((q=(z=(V=e==null?void 0:e.data)==null?void 0:V.data)==null?void 0:z.data)==null?void 0:q.wf_status)===0&&s.jsx(o,{variant:"secondary",children:a==null?void 0:a.P}),((W=(U=(K=e==null?void 0:e.data)==null?void 0:K.data)==null?void 0:U.data)==null?void 0:W.wf_status)===4&&s.jsx(o,{className:"bg-red-500 ml-2",children:a==null?void 0:a.CLOSED})]}),s.jsx(n,{children:s.jsx(ws,{to:`/grievance/citizen/complaint-details?complaintRefNo=${(J=(Z=(Y=e==null?void 0:e.data)==null?void 0:Y.data)==null?void 0:Z.data)==null?void 0:J.complaintRefNo}&complaintId=${(M=(X=(Q=e==null?void 0:e.data)==null?void 0:Q.data)==null?void 0:X.data)==null?void 0:M._id}`,children:s.jsx(Ts,{className:"bg-primary",children:a==null?void 0:a.VIEW})})})]})})]})})]})})]})}function $s(){const{currentLanguage:l}=es();return s.jsxs("div",{className:"grid sm:grid-cols-4 grid-cols-1",children:[s.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 hidden sm:block",children:[s.jsx(ds,{className:"text-xl text-primary font-bold",children:l==null?void 0:l.TRACK_GR}),s.jsx(Os,{src:"/images/Searching.svg",className:"w-45"}),s.jsx(f,{className:"text-center",children:l==null?void 0:l.FF_FB}),s.jsx(f,{className:"text-center",children:l==null?void 0:l.YF_FB})]}),s.jsx("div",{className:"col-span-4 md:col-span-3 p-2 sm:p-10 bg-gray-50 h-screen",children:s.jsx(As,{})})]})}export{$s as default};
