import{a as b,f as R,r as d,u as x,b as _,o as A,j as e,D as T,B as u,F as I,R as F,L as p,c as M,d as o,h as C,g as f,_ as i}from"./index-x5K3To9x.js";import{G as U,L as k}from"./GoogleLogin-CzhJc44F.js";import{g as h}from"./services-KQnp_8oA.js";import{R as j}from"./RHFPasswordField-DP_rmqjy.js";const D=M({email:o().required("Email is required").email("Invalid email"),password:o().min(3).required("Password is required"),roleId:o(),confirmPassword:o().oneOf([C("password")],"Passwords must match").required("Confirm password is required").min(3,"Password must be at least 3 characters")});function V(){const{currentLanguage:s}=b(),w=R(),[g,c]=d.useState(!1),[v,N]=d.useState(!1),[n,y]=d.useState(""),E=x({}),O=x({}),r=_({defaultValues:{email:"",roleId:"66d2a49adcdbb5c654b983cc",password:"",confirmPassword:""},resolver:A(D)});console.log(v);const P=async a=>{var l,m;try{const t=await E.mutateAsync({api:f.citizenRegistration,data:{email:a.email,roleId:a.roleId,password:a.password}});(l=t==null?void 0:t.data)!=null&&l.success?(c(!0),i.success("OTP sent to your email.")):i.error((m=t==null?void 0:t.data)==null?void 0:m.message)}catch(t){i.error(h(t)),console.log("Error sending OTP",t)}},S=async()=>{var a;try{const l=await O.mutateAsync({api:f.verifyOtp,data:{otp:n,email:r.getValues("email")}});(a=l==null?void 0:l.data)!=null&&a.success?(w("/grievance/citizen-dashboard/home"),i.success("Sing Up successful!")):i.error("Invalid OTP.")}catch(l){i.error(h(l.message))}};return e.jsxs(e.Fragment,{children:[e.jsx(T,{open:g,setOpen:c,title:"OTP Verification",setEdit:N,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter OTP"}),e.jsxs("form",{onSubmit:a=>a.preventDefault(),children:[e.jsx("input",{value:n,onChange:a=>y(a.target.value),type:"text",placeholder:"Enter OTP",className:"input-field w-full border border-gray-300 rounded-md p-2"}),e.jsx("div",{children:e.jsx(u,{type:"button",onClick:S,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Verify OTP"})})]})]})}),e.jsx(I,{methods:r,onSubmit:r.handleSubmit(P),children:e.jsxs("div",{className:"space-y-4 max-w-sm mx-auto",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(F,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"email",inputValidation:["removeSpace"],placeholder:s==null?void 0:s.ENTER_YOUR_EMAIL})}),e.jsx("div",{className:"space-y-2",children:e.jsx(j,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"password",placeholder:s==null?void 0:s.ENTER_YOUR_PASSWORD})}),e.jsx("div",{className:"space-y-2",children:e.jsx(j,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"confirmPassword",placeholder:s==null?void 0:s.ENTER_YOUR_CONFIRM_PASSWORD})}),e.jsx("div",{children:e.jsx(u,{type:"submit",isLoading:r.formState.isSubmitting,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:s==null?void 0:s.SU})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("hr",{className:"flex-1"}),e.jsx("span",{children:"or"}),e.jsx("hr",{className:"flex-1"})]}),e.jsx("div",{children:e.jsx(U,{})}),e.jsx("div",{children:e.jsx(p,{to:"https://epramaan.meripehchaan.gov.in/",children:e.jsx("div",{className:"flex cursor-pointer text-lg font-medium text-white bg-white shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:e.jsx("span",{className:"border px-2 w-full justify-center bg-[rgb(38,204,204)] flex items-center text-white py-1.5",children:s==null?void 0:s.SIGN_UP_WITH_EPRAMAAN})})})}),e.jsx("div",{className:"text-center  flex justify-center",children:e.jsx(p,{to:"/grievance/auth/citizen-login",children:e.jsxs("span",{className:"text-base flex",children:[s==null?void 0:s.ALREADY_HAVE_ACCOUNT_LOGIN,"   ",e.jsx("p",{className:"text-blue-800 ml-1  text-base",children:" Login"})]})})})]})})]})}function z(){const{currentLanguage:s}=b();return e.jsx("div",{className:"bg-gradient-to-r from-blue-200 via-blue-300 to-blue-400 min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/90 xl:mx-56 border shadow-lg mx-auto rounded-lg w-full max-w-6xl p-6 md:p-8 lg:p-12 backdrop-blur-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-center pb-6 text-gray-800",children:s==null?void 0:s.SIGN_UP_GRIEVANCE_REDRESSAL_SYSTEM}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full",children:[e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(V,{})})}),e.jsx("div",{className:"flex-1 flex justify-center items-center bg-gray-100 rounded-lg p-6 shadow-inner sm:block hidden",children:e.jsx("div",{className:"w-full max-w-md text-center",children:e.jsx(k,{})})})]})]})})}export{z as default};
