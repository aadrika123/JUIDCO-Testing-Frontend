import{r as i,c as j,a as D,e as n,j as I}from"./index-faef4408.js";import{A as S}from"./ApiHeader-6d683756.js";import{B}from"./BarLoader-56cc2b49.js";import{P as E}from"./ProjectApiList-919c817c.js";import{A as P}from"./AxiosInterceptors-06ddb7df.js";function q(){const{api_getFreeMenuList:g}=E(),{setmenuList:L,setuserDetails:x}=i.useContext(j),e=D(),[A,u]=i.useState(!1);i.useEffect(()=>{let a=window.localStorage.getItem("token");if(u(!0),a==null){e("/");return}h()},[]);const h=()=>{let a={moduleId:10};P.post(g,a,S()).then(function(t){var r,o,f,c,d,m,l,s;t.data.status==!0&&(n("menuList",(o=(r=t==null?void 0:t.data)==null?void 0:r.data)==null?void 0:o.permission),n("userDetails",(c=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:c.userDetails),L((m=(d=t==null?void 0:t.data)==null?void 0:d.data)==null?void 0:m.permission),x((s=(l=t==null?void 0:t.data)==null?void 0:l.data)==null?void 0:s.userDetails),e("/home"))}).catch(function(t){}).finally(()=>u(!1))};if(A)return I.jsx(B,{})}export{q as default};
