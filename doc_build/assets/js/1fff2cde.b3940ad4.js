"use strict";(self.webpackChunkcollibet=self.webpackChunkcollibet||[]).push([[5178],{9735:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var r=a(6540),t=a(2379),i=a(4335);const o="https://aadrikainfomedia.com/",n=i.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});n.interceptors.request.use((e=>{const s=localStorage.getItem("authToken");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),(e=>Promise.reject(e)));var l=a(6347),d=a(4848);const c=()=>{const e=(0,l.W6)(),[s,a]=(0,r.useState)("");(0,r.useEffect)((()=>{localStorage.getItem("authToken")&&e.push("/")}),[e]);const n=(0,t.Wx)({initialValues:{email:"",password:""},validate:e=>{const s={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(s.email="Invalid email address"):s.email="Email Required",e.password?e.password.length<6&&(s.password="Must be at least 6 characters"):s.password="Password Required",s},onSubmit:async(s,r)=>{let{setSubmitting:t,setErrors:n}=r;try{const a=await(l="devdoc-api/user/login",d=s,i.A.post(`${o}${l}`,d,{headers:{"Content-Type":"application/json"}}));localStorage.setItem("authToken",a?.data?.token),200===a?.status&&e.push("/")}catch(c){c.response&&c.response.data?a(c.response.data.message||"Invalid credentials"):a("An unexpected error occurred. Please try again."),n({email:"Invalid credentials"})}finally{t(!1)}var l,d}});return(0,d.jsxs)("div",{className:"login-container",children:[(0,d.jsx)("h2",{children:"Login"}),s&&(0,d.jsx)("p",{className:"error-message text-danger",children:s}),(0,d.jsxs)("form",{onSubmit:n.handleSubmit,children:[(0,d.jsx)("input",{type:"email",placeholder:"Email",...n.getFieldProps("email"),required:!0}),n.errors.email&&(0,d.jsx)("p",{className:"error-message text-danger",children:n.errors.email}),(0,d.jsx)("input",{type:"password",placeholder:"Password",...n.getFieldProps("password"),required:!0}),n.errors.password&&(0,d.jsx)("p",{className:"error-message text-danger",children:n.errors.password}),(0,d.jsx)("button",{type:"submit",disabled:n.isSubmitting,children:n.isSubmitting?"Logging in...":"Login"})]})]})}}}]);