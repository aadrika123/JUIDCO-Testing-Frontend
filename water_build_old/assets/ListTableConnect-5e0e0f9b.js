import{k as c,o as F,j as t,l as i,I as T,J as X,K as p,M as ee,N as te,O as ae,D as le,q as Y,A as Z}from"./index-e0cf29e0.js";function ne({filter:e,setFilter:r}){return c(F,{children:["Search : "," ",t("input",{className:"border-2 border-gray-600 px-2 bg-gray-200",type:"text",value:e||"",onChange:h=>r(h.target.value)})]})}function ce(e){console.log("enter in normal table");const[r,h]=i.useState("hidden"),y=i.useMemo(()=>e.columns,[]),b=i.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[s,A]=i.useState(1),[L,x]=i.useState(!0),[o,f]=i.useState(!0),[S,k]=i.useState(e==null?void 0:e.perPage),[C,w]=i.useState();console.log("object",S),i.useEffect(()=>{A(1),w(0),k(e==null?void 0:e.perPage)},[e==null?void 0:e.totalCount]),i.useEffect(()=>{x(!0),f(!0);let n=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?E(parseInt(n)+1):E(parseInt(n)),l==s&&x(!1),(l==s||s==1)&&f(!1)},[e==null?void 0:e.totalCount]);const{getTableProps:R,getTableBodyProps:P,headerGroups:N,page:M,nextPage:D,previousPage:v,canNextPage:G,canPreviousPage:_,prepareRow:I,pageOptions:J,gotoPage:K,pageCount:V,setPageSize:E,state:O,rows:H,setGlobalFilter:j}=T.useTable({columns:y,data:b,initialState:{pageIndex:0}},T.useGlobalFilter,T.useSortBy,T.usePagination),{globalFilter:q,pageIndex:$,pageSize:l}=O,a=()=>{if(parseInt(C)>0&&parseInt(C)<=parseInt(e==null?void 0:e.lastPage))e==null||e.gotoPage(parseInt(C));else return!1},g=()=>{(e==null?void 0:e.lastPage)!=(e==null?void 0:e.currentPage)&&(f(!0),e.nextPage()),(e==null?void 0:e.lastPage)==(e==null?void 0:e.currentPage)&&x(!1)},m=()=>{(e==null?void 0:e.currentPage)!=1&&(x(!0),e.prevPage()),(e==null?void 0:e.currentPage)==1&&f(!1)};return c(F,{children:[(e==null?void 0:e.search)==!1?c("div",{className:"absolute -mt-[6.5vh] right-[2vw]",children:[t("div",{className:"flex-initial ml-2",children:c("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>h(""),onMouseLeave:()=>h("hidden"),onClick:e.exportDataF,children:["Export",t("div",{className:r+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t(X,{})})]})}),t("div",{className:"flex-1",children:e.children})]}):c("div",{className:"flex mb-2 pb-2",children:[t("div",{className:"flex-initial opacity-50",children:t(ne,{filter:q,setFilter:j})}),t("div",{className:"flex-initial ml-2",children:c("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>h(""),onMouseLeave:()=>h("hidden"),onClick:e.exportDataF,children:["Export",t("div",{className:r+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t(X,{})})]})}),t("div",{className:"flex-1",children:e.children}),t("div",{className:"flex-1",children:e.children})]}),t("div",{className:"flex w-full",children:c("div",{className:"flex-1",children:[t("span",{className:"opacity-50",children:"Total Result : "}),t("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),(e==null?void 0:e.feedback)!=null&&t("div",{children:c("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[t(p,{className:"inline text-xs text-gray-400 mr-2"}),e.feedback]})}),t("div",{className:" py-2 overflow-x-auto bg-white",children:c("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[c("table",{...P,className:"min-w-full leading-normal",id:"printableArea",children:[t("thead",{className:"font-bold text-left text-sm bg-sky-50",children:N==null?void 0:N.map(n=>t("tr",{...n.getHeaderGroupProps(),children:n.headers.map(u=>c("th",{...u.getHeaderProps(u.getSortByToggleProps()),className:(u==null?void 0:u.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[u.render("Header"),t("span",{children:u.isSorted?u.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),c("tbody",{...P(),className:"text-sm",children:[H.map((n,u)=>(I(n),c("tr",{...n.getRowProps(),className:"bg-white shadow-lg border-b border-gray-200",children:[t("td",{...n.cells[0].getCellProps(),className:"px-2 py-2 text-sm text-left",children:(e==null?void 0:e.startSerialNumber)+u}),n==null?void 0:n.cells.slice(1).map((d,B)=>t("td",{...d.getCellProps(),className:"px-2 py-2 text-sm text-left",children:d.render("Cell")}))]}))),t("tr",{children:t("td",{})})]})]}),c("div",{className:"mt-3 grid grid-cols-12 items-center",children:[c("div",{className:"sm:col-span-2 col-span-3 flex w-full ml-1 pr-10",children:[t("span",{children:t("input",{className:"h-10 w-[90%] placeholder:text-gray-600 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-1 ",type:"number",onChange:n=>{w(n.target.value)},placeholder:"Go to page..."})}),c("abbr",{className:"cursor-pointer flex items-center w-[15%] no-underline",title:"Go",onClick:()=>a(),children:[" ",t("span",{className:"font-bold bg-green-300 text-xl px-2 pb-1 rounded-full hover:text-white hover:bg-green-500",children:"⇨"})," "]})]}),t("div",{className:"col-span-2",children:t("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:S,onChange:n=>{e==null||e.perPageC(Number(n.target.value)),k(Number(n.target.value))},children:[5,10,25,50].map(n=>c("option",{value:n,children:["show ",n]},n))})}),c("div",{className:"col-span-3 sm:col-span-4 text-center sm:col-start-5 col-start-7",children:["   ",c("span",{children:["page ","",c("strong",{children:[e==null?void 0:e.currentPage," of ",e==null?void 0:e.lastPage]}),""]})]}),c("div",{className:"col-span-3 sm:col-span-4 text-right",children:[t("abbr",{title:"First Page",children:c("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goFirst(),f(!1),x(!0)),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:[t(ee,{})," "]})}),t("abbr",{title:"Previous Page",children:t("button",{className:((e==null?void 0:e.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>m(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:"⬅️"})}),t("abbr",{title:"Next Page",children:t("button",{className:((e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>g(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:"➡️"})}),t("abbr",{title:"Last Page",children:c("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goLast(),x(!1),f(!0)),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:["  ",t(te,{})]})})]})]})]})})]})}const de=e=>{const[r,h]=i.useState(10),[y,b]=i.useState(1),[s,A]=i.useState(0),[L,x]=i.useState(0),[o,f]=i.useState(0),[S,k]=i.useState(),[C,w]=i.useState(!1),[R,P]=i.useState(!1),[N,M]=i.useState([]),[D,v]=i.useState(!0),[G,_]=i.useState(1),I=()=>{P(!1),v(!0);const l=(y-1)*r+1;_(l),console.log(`data before hitting api (${e==null?void 0:e.api}) => `,{...e==null?void 0:e.requestBody,perPage:r,page:y}),Y.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:r,page:y},Z()).then(a=>{var g,m,n,u,d,B,z,Q,U,W;((g=a==null?void 0:a.data)==null?void 0:g.status)==!0?(console.log("search success => ",a),e!=null&&e.getData&&(e==null||e.allData((m=a==null?void 0:a.data)==null?void 0:m.data)),M((u=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:u.data),f((B=(d=a==null?void 0:a.data)==null?void 0:d.data)==null?void 0:B.total),A((Q=(z=a==null?void 0:a.data)==null?void 0:z.data)==null?void 0:Q.current_page),x((W=(U=a==null?void 0:a.data)==null?void 0:U.data)==null?void 0:W.last_page),P(!1)):(console.log("error while search => ",a),P(!0),M([]))}).catch(a=>(console.log("error while search => ",a),P(!0))).finally(()=>{v(!1),P(!1)})},J=()=>{b(s+1)},K=()=>{b(s-1)},V=l=>{let a=parseInt(o/l),g=parseInt(o%l);if(g==0){a<s&&b(a),h(l);return}if(g!=0){a+1<s&&b(a+1),h(l);return}h(l)},E=()=>{b(1)},O=()=>{b(L)},H=l=>{b(l)},j=l=>(console.log(e==null?void 0:e.columns),l==null?void 0:l.map((g,m)=>{var u;const n=(u=e==null?void 0:e.columns)==null?void 0:u.map((d,B)=>(d==null?void 0:d.Header)!="Action"&&{[d==null?void 0:d.Header]:d!=null&&d.accessor?g[d==null?void 0:d.accessor]:m+1});return Object.assign({},...n)})),q=()=>{v(!0),w(!1),Y.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:o},Z()).then(l=>{var a,g,m;((a=l==null?void 0:l.data)==null?void 0:a.status)==!0&&(k(j((m=(g=l==null?void 0:l.data)==null?void 0:g.data)==null?void 0:m.data)),$()),v(!1)}).catch(l=>{v(!1)})},$=()=>{w(!0)};return i.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(b(1),h(10),I())},[e==null?void 0:e.changeData]),i.useEffect(()=>{v(!0),I()},[y,r]),c(F,{children:[R&&c("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t("strong",{className:"font-bold",children:"Sorry! "}),t("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),t("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),C&&t(ae,{data:S}),D&&t(le,{}),!D&&(N==null?void 0:N.length)>0?t(F,{children:t(ce,{search:e==null?void 0:e.search,currentPage:s,lastPage:L,goFirst:E,goLast:O,count1:o,columns:e==null?void 0:e.columns,dataList:N,exportStatus:!0,perPage:r,perPageC:V,totalCount:o,nextPage:J,prevPage:K,exportDataF:q,exportData:S,gotoPage:l=>H(l),startSerialNumber:G})}):t(F,{children:!D&&t("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:t("span",{className:"block sm:inline",children:"No data Found."})})})]})};export{de as L};
