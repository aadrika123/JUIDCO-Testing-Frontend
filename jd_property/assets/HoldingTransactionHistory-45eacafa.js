import{r as i,k as C,bu as I,u as k,l as B,m as j,o as R,a$ as u,A as v,aH as $,j as e,B as q,S as U,n as r,aX as E,bB as M}from"./index-259f1e14.js";import{T as V}from"./TopTabs-3d667027.js";function X(L){var N,b;const[o,_]=i.useState([]),[w,n]=i.useState(!1),[s,S]=i.useState(),[Y,H]=i.useState(!0),[Q,d]=i.useState(!1),[T,h]=i.useState(!1);C("Holding Payment History");const{id:a}=I(),p=k(),{api_getSpecificHoldingTranscationHistory:f}=E(),{api_getPropHoldingDetailsById:z}=M(),c={api:{api_getTranscationHistory:{method:"get",url:f}},transactionInfo:{title:""},tableColumns:[{Header:"#",Cell:({row:t})=>e.jsx("div",{className:"pr-2",children:t.index+1})},{Header:"Application No.",accessor:"saf_no"},{Header:"Transaction No.",accessor:"tran_no"},{Header:"Payment Mode",accessor:"payment_mode"},{Header:"Transaction Date",accessor:"created_at"},{Header:"Amount",accessor:"amount"}],filters:{applicationNo:!0}};[...c==null?void 0:c.tableColumns];const A=B({fromDate:j().required("Select from date"),toDate:j().required("Select to date")}),y=R({initialValues:{fromDate:u(new Date).format("yy-MM-DD"),toDate:u(new Date).format("yy-MM-DD"),consumerCategory:"",consumerType:"",buildingType:"",paymentMode:"",wardNo:"",tcId:""},onSubmit:t=>{H(!1),g(y.values.fromDate,y.values.toDate)},validationSchema:A});i.useEffect(()=>{g()},[]);const g=()=>{d(!1),h(!1),n(!0);let t={propId:a};v.post(f,t,$()).then(function(x){var l,m;(l=x==null?void 0:x.data)!=null&&l.status&&(_((m=x==null?void 0:x.data)==null?void 0:m.data),d(!0)),n(!1)}).catch(function(x){d(!0),h(!0),n(!1)})},P=()=>{n(!0);const x={headers:{Authorization:`Bearer ${window.localStorage.getItem("token")}`,Accept:"application/json"}};v.post(`${z}`,{propertyId:a},x).then(function(l){var m;S((m=l==null?void 0:l.data)==null?void 0:m.data),n(!1)}).catch(function(l){n(!1)})};return i.useEffect(()=>{P()},[]),w?e.jsx(e.Fragment,{children:e.jsx(q,{})}):T?e.jsx(U,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-ful md:px-10 md:pt-5 mx-auto",children:[(c==null?void 0:c.transactionInfo.title)!="",e.jsx("div",{className:"max-sm:flex max-sm:m-10",children:e.jsx(V,{title:"Payment History",type:"holding",id:a,safNo:"",active:"payment"})}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-lg p-4 ",children:[e.jsxs("div",{className:"flex justify-start space-x-2 pl-4 max-sm:pl-0 ",children:[e.jsxs("div",{className:"flex-1 mb-5",children:[e.jsx("div",{className:"font-bold text-sm max-sm:text-[12px]",children:r(s==null?void 0:s.holding_no)}),e.jsx("div",{className:"text-gray-500 text-xs max-sm:text-[11px]",children:"Holding No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm max-sm:text-[12px]",children:r(s==null?void 0:s.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs max-sm:text-[11px]",children:"Ward No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm max-sm:text-[12px]",children:r(s==null?void 0:s.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs max-sm:text-[11px]",children:"New Ward No"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm max-sm:text-[12px]",children:r(s==null?void 0:s.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-sm max-sm:text-[11px]",children:"Ownership Type"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm max-sm:text-[11px]",children:r(s==null?void 0:s.property_type)}),e.jsx("div",{className:"text-gray-500 text-sm max-sm:text-[11px]",children:"Property Type"})]})]}),e.jsxs("div",{className:"flex space-x-2 pl-4 max-sm:pl-0 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm max-sm:text-[11px]",children:r(s==null?void 0:s.is_mobile_tower)}),e.jsx("div",{className:"text-gray-500 text-sm max-sm:text-[11px]",children:"Property has Mobile Tower(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-sm max-sm:text-[11px]",children:[r(s==null?void 0:s.is_hoarding_board)," "]}),e.jsx("div",{className:"text-gray-500 text-xs max-sm:text-[11px]",children:"Property has Hoarding Board(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm max-sm:text-[11px]",children:r(s==null?void 0:s.is_petrol_pump)}),e.jsx("div",{className:"text-gray-500 text-xs max-sm:text-[11px]",children:"Is property a Petrol Pump ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm max-sm:text-[11px]",children:r(s==null?void 0:s.is_water_harvesting)}),e.jsx("div",{className:"text-gray-500 text-sm max-sm:text-[11px]",children:"Rainwater harvesting provision ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm max-sm:text-[11px]",children:r(s==null?void 0:s.holding_type)}),e.jsx("div",{className:"text-gray-500 text-xs max-sm:text-[11px]",children:"Holding Type"})]})]})]})}),(o==null?void 0:o.length)==0&&e.jsx("div",{className:"text-center mt-10",children:e.jsxs("span",{className:"text-red-600 font-bold text-lg px-4 py-2 border border-red-500  shadow-xl ",children:[" ","No Payments Found Yet"]})}),(o==null?void 0:o.length)!=0&&e.jsx("div",{className:"mt-10 bg-white shadow-xl  rounded-lg",children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"min-w-full leading-normal mt-2",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-white text-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"#"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Tansaction No"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Date"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"From Qtr/Year"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Upto Qtr/Year"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Amount"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Receipt1"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Receipt2"})]})}),e.jsxs("tbody",{className:"text-sm",children:[(N=o==null?void 0:o.Holding)==null?void 0:N.map((t,x)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:x+1}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(t==null?void 0:t.tran_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(t==null?void 0:t.payment_mode)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(t==null?void 0:t.tran_date)}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(t==null?void 0:t.from_qtr),"/",r(t==null?void 0:t.from_fyear)]}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(t==null?void 0:t.to_qtr),"/",r(t==null?void 0:t.to_fyear)]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(t==null?void 0:t.amount)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:e.jsx("button",{onClick:()=>p(`/paymentReceipt/${encodeURIComponent(t==null?void 0:t.tran_no)}/holding`),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:e.jsx("button",{onClick:()=>p(`/rmc-reciept/${encodeURIComponent(t==null?void 0:t.tran_no)}`),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"ULB Receipt"})})]})),(b=o==null?void 0:o.Saf)==null?void 0:b.map((t,x)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:x+1}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(t==null?void 0:t.tran_no),e.jsx("span",{className:"bg-indigo-500 text-white text-xs px-2 rounded-sm ml-2",children:"SAF"})]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(t==null?void 0:t.payment_mode)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(t==null?void 0:t.tran_date)}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(t==null?void 0:t.from_qtr),"/",r(t==null?void 0:t.from_fyear)]}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(t==null?void 0:t.to_qtr),"/",r(t==null?void 0:t.to_fyear)]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(t==null?void 0:t.amount)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",colSpan:2,children:e.jsx("button",{onClick:()=>p(`/paymentReceipt/${encodeURIComponent(t==null?void 0:t.tran_no)}/saf`),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})})]}))]})]})})}),e.jsx("div",{className:"w-full mt-52"})]})})}export{X as default};
