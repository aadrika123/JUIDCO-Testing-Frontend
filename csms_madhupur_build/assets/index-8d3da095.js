import{j as t,cE as F,cI as N,cB as H,cF as I,T as w,r as u,u as z,c as M,a as y,b as R,aa as D,ab as Y,A as j,e as b,g as U}from"./index-21aade66.js";import{M as f}from"./MenuItem-d38a9826.js";function G(a){const{formik:l,feeHeadTypeList:d,financialList:i,classList:n}=a;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"px-10 mt-2 grid grid-cols-12 gap-4",children:[t.jsx("div",{className:"mt-4  col-span-8 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.fyId&&!!l.errors.fyId,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{mt:-1},children:"Select Financial Year"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Financial Year",...l.getFieldProps("fyId"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),i&&(i==null?void 0:i.map(s=>t.jsx(f,{value:s==null?void 0:s.fy,children:s==null?void 0:s.fy})))]}),t.jsx(I,{children:l.touched.fyId&&l.errors.fyId})]})}),t.jsx("div",{className:"mt-4 col-span-8 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.classId&&!!l.errors.classId,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{m:-1},children:"Select Class"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Class",...l.getFieldProps("classId"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),n&&(n==null?void 0:n.map(s=>t.jsx(f,{value:s==null?void 0:s.id,children:s==null?void 0:s.class_name})))]}),t.jsx(I,{children:l.touched.classId&&l.errors.classId})]})}),t.jsx("div",{div:!0,className:"mt-4 col-span-4 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.feeHeadType&&!!l.errors.feeHeadType,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{m:-1},children:"Select Fee Head Type"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Fee Head Type",...l.getFieldProps("feeHeadType"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),d&&(d==null?void 0:d.map(s=>t.jsx(f,{value:s==null?void 0:s.id,children:s==null?void 0:s.fee_head_type})))]}),t.jsx(I,{children:l.touched.feeHeadType&&l.errors.feeHeadType})]})})]})})}function J(a){const{formik:l,feeHeadNameList:d}=a;return t.jsx("div",{className:" block w-full",children:t.jsxs("div",{className:"px-10 mt-2 grid grid-cols-12   gap-4",children:[t.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.feeHeadName&&!!l.errors.feeHeadName,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{mt:-1},children:"Select Fee Head Name"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Fee Head Name",...l.getFieldProps("feeHeadName"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),d&&(d==null?void 0:d.map(i=>t.jsx(f,{value:i==null?void 0:i.id,children:i==null?void 0:i.fee_head_name})))]}),t.jsx(I,{children:l.touched.feeHeadName&&l.errors.feeHeadName})]})}),t.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:t.jsx(w,{type:"text",...l.getFieldProps("feeAmount"),label:"Fee Amount",fullWidth:!0,size:"small",error:l.touched.feeAmount&&!!l.errors.feeAmount,helperText:l.touched.feeAmount&&l.errors.feeAmount})}),t.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:t.jsx(w,{type:"text",...l.getFieldProps("description"),label:"Description",fullWidth:!0,size:"small",error:l.touched.description&&!!l.errors.description,helperText:l.touched.description&&l.errors.description})})]})})}function K(a){const{formik:l,months:d}=a;u.useEffect(()=>{l.setFieldValue("datas",d.map(s=>(console.log(s),{...s,inputValue:0})))},[d]),console.log(l.values.datas);const i=()=>{var o,h;const s=(h=(o=l==null?void 0:l.values)==null?void 0:o.datas)==null?void 0:h.map(x=>({...x,inputValue:1}));l.setFieldValue("datas",s)},n=()=>{var o,h;const s=(h=(o=l==null?void 0:l.values)==null?void 0:o.datas)==null?void 0:h.map(x=>({...x,inputValue:0}));l.setFieldValue("datas",s)};return t.jsx(t.Fragment,{children:d.length>0?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"border border-gray-300 mx-3 py-5 my-10 flex items-center justify-center flex-wrap",children:[l.values.datas.map((s,o)=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex w-[40vh] my-4",children:[t.jsx("h1",{className:"text-[1.8vh] mx-4 px-4  bg-gradient-to-r from-[#ccfbf1] w-[15vh]",children:s==null?void 0:s.month_name}),t.jsxs("h1",{children:[t.jsx("input",{...l.getFieldProps(`datas.${o}.inputValue`),value:s==null?void 0:s.datas,checked:l.values.datas[o].inputValue===1,onChange:()=>l.setFieldValue(`datas.${o}.inputValue`,s!=null&&s.inputValue?0:1),type:"checkbox",className:"h-6 w-6 m-1  bg-gradient-to-r from-indigo-300"})," "]})]})})),t.jsxs("div",{className:"flex items-center justify-center mt-6 w-full",children:[t.jsx("button",{onClick:i,className:"px-5 py-2 border border-[#059669] text-white rounded-[10px] bg-[#059669] mx-4",children:"Check All"}),t.jsx("button",{onClick:n,className:"px-5 py-2 border border-gray-400 text-[#059669] rounded-[10px] bg-white mx-4",children:"Clear All"})]})]})}):null})}function X(){const{api_fetcHeadTypeActiveList:a,api_fetcActiveHeadList:l,api_getactiveClassData:d,api_finance_year:i,api_classfeeadd:n}=U(),s=z(),[o,h]=u.useState(),[x,A]=u.useState([]),[S,v]=u.useState(),[T,C]=u.useState(),[_,k]=u.useState(),[O,g]=u.useState(!1),E=M({fyId:y().required("Required"),classId:y().required("Required"),feeHeadType:y().required("Required"),feeHeadName:y().required("Required"),feeAmount:y().required("Required")}),p=R({initialValues:{fyId:"",classId:"",feeHeadType:"",feeHeadName:"",feeAmount:"",description:"",datas:[]},onSubmit:async e=>{console.log("at submit",e);let c=e==null?void 0:e.datas.map(r=>({monthId:r==null?void 0:r.id,isMothChecked:r==null?void 0:r.inputValue,monthName:r==null?void 0:r.month_name,fyId:e==null?void 0:e.fyId,classId:e==null?void 0:e.classId,feeHeadTypeId:e==null?void 0:e.feeHeadType,feeHeadId:e==null?void 0:e.feeHeadName,feeAmount:(r==null?void 0:r.inputValue)===1?e.feeAmount:0,description:e==null?void 0:e.description}));console.log("hello",c),L(c)},validationSchema:E}),L=async e=>{try{(await j.post(`${n}`,{datas:e},b())).status==200&&s("/csms/fee/table-view")}catch(c){console.log(c)}},q=()=>{j.post(a,{},b()).then(function(e){var c,r,m;(c=e==null?void 0:e.data)!=null&&c.status?h((r=e==null?void 0:e.data)==null?void 0:r.data):console.log(!0,`${(m=e==null?void 0:e.data)==null?void 0:m.message}`),g(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data.")})},W=()=>{j.post(a,{},b()).then(function(e){var c,r,m;(c=e==null?void 0:e.data)!=null&&c.status?v((r=e==null?void 0:e.data)==null?void 0:r.data):console.log(!0,`${(m=e==null?void 0:e.data)==null?void 0:m.message}`),g(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data.")})},P=()=>{j.post(d,{},b()).then(function(e){var c,r,m;(c=e==null?void 0:e.data)!=null&&c.status?(console.log((r=e==null?void 0:e.data)==null?void 0:r.data),k((m=e==null?void 0:e.data)==null?void 0:m.data)):console.log(!0,"Error occured while fetching data."),g(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data.")})},$=()=>{g(!0),j.post(i,{},b()).then(function(e){e!=null&&e.data?(console.log(e==null?void 0:e.data),C(e==null?void 0:e.data)):console.log(!0,"Error occured while fetching data."),g(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data."),g(!1)})},B=async()=>{try{const e=await j.post(`${api_fetchmonth}`,{},b());e.data.status==200&&(console.log(e.data),A(e.data.data))}catch(e){console.log(e)}};return console.log(x),u.useEffect(()=>{q(),W(),P(),$(),B()},[]),console.log(o,x),t.jsx(t.Fragment,{children:t.jsx("div",{className:"p-5 w-full h-full",children:t.jsxs("div",{className:"flex border border-gray-300 py-5  w-full  h-full relative mt-5",children:[t.jsx("h1",{className:" absolute mt-[-4vh] flex items-center justify-center ml-6 font-bold text-[2.5vh] px-1 bg-white ",children:"Add Fee"}),t.jsx(D,{value:p,children:t.jsxs(Y,{autoComplete:"off",onSubmit:p.handleSubmit,children:[t.jsx(G,{formik:p,feeHeadTypeList:o,financialList:T,classList:_}),t.jsx(J,{formik:p,feeHeadNameList:S}),t.jsx(K,{formik:p,months:x}),t.jsxs("div",{className:"flex items-center justify-center mt-1 w-full",children:[t.jsx("button",{type:"submit",className:"px-5 py-2 border border-indigo-500 text-indigo-500 rounded-[10px] bg-white mx-4 hover:text-white hover:bg-indigo-500",children:"Save"}),t.jsx("button",{type:"cancel",onClick:()=>p.resetForm(),className:"px-5 py-2 border border-red-400 text-red-400 rounded-[10px] bg-white mx-4 hover:text-white hover:bg-red-400",children:"Cancel"})]})]})})]})})})}export{X as default};
