import{r as i,s as at,c as lt,a as p,b as st,j as t,C as ot,n as x,aa as it,ab as ct,T as k,P as rt,B as dt,D as nt,t as ut,U as mt,A as w,e as P,Q as m,_ as B,$ as ht,S as xt,x as ft,l as bt,g as gt}from"./index-21aade66.js";const yt=()=>{var V,M,z,R,U,W,Y,J,K,Q,G,X,Z,ee,te,ae,le,se,oe,ie;i.useState([]);const[b,F]=i.useState([]),[j,S]=i.useState(!1),[pe,je]=i.useState(null),[C,vt]=i.useState(!0),[ye,De]=i.useState([]),[ke,we]=i.useState(!1),[Pe,d]=i.useState(!1),[Be,E]=i.useState(!1),[Nt,_]=i.useState(!1),[n,Se]=i.useState(),[pt,_e]=i.useState(null),[u,A]=i.useState(null),[$e,$]=i.useState(!1),[I,Fe]=i.useState(),[f,O]=i.useState(1),[g,Ce]=i.useState(10),[Ee,L]=i.useState(),[q,T]=i.useState(),[Ae,Ie]=i.useState(),{api_getebookById:H,api_getebookData:Oe,api_searchebookData:Le,api_postebookData:qe,api_editebookData:Te,api_deleteebookData:He}=gt();at("E-Book Master");const v=[{id:1,fee_head:10,fee_head_type:10,desc:"hello"},{id:2,fee_head:10,fee_head_type:10,desc:"hello"},{id:3,fee_head:10,fee_head_type:10,desc:"hello"},{id:4,fee_head:10,fee_head_type:10,desc:"hello"},{id:5,fee_head:10,fee_head_type:10,desc:"hello"}],Ve=lt({bookName:p().required("Book Name is Required"),authorName:p().required("Author name is Required"),publishBy:p().required("Publisher Name is Required"),price:p().required("Price is Required"),ebookDocs:p().required("E-book document is Required"),coverPicDocs:p().required("Cover Pic is Required")}),a=st({initialValues:{bookName:"",authorName:"",publishBy:"",publishedDate:"",price:"",ebookDocs:"",coverPicDocs:""},onSubmit:(e,o)=>{console.log("at submit ",e),Qe(e),a.resetForm()},validationSchema:Ve}),N=e=>{console.log(e);let o,s;e===void 0?(s={perPage:g,page:f},o=Oe):(s={search:e,search:e,perPage:g,page:f},o=Le),d(!0),w.post(o,s,P()).then(function(l){var r,c,h,y,D,ce,re,de,ne,ue,me,he,xe,fe,be,ge,ve,Ne;((r=l==null?void 0:l.data)==null?void 0:r.status)===!0?((h=(c=l==null?void 0:l.data)==null?void 0:c.data)==null?void 0:h.total)===0?(m.error("Data not Found"),F((D=(y=l==null?void 0:l.data)==null?void 0:y.data)==null?void 0:D.data),L((re=(ce=l==null?void 0:l.data)==null?void 0:ce.data)==null?void 0:re.last_page),T((ne=(de=l==null?void 0:l.data)==null?void 0:de.data)==null?void 0:ne.total),S(!1)):(console.log("Class data",(me=(ue=l==null?void 0:l.data)==null?void 0:ue.data)==null?void 0:me.data),F((xe=(he=l==null?void 0:l.data)==null?void 0:he.data)==null?void 0:xe.data),L((be=(fe=l==null?void 0:l.data)==null?void 0:fe.data)==null?void 0:be.last_page),T((ve=(ge=l==null?void 0:l.data)==null?void 0:ge.data)==null?void 0:ve.total),S(!1)):m.error(`${(Ne=l==null?void 0:l.data)==null?void 0:Ne.message}`),d(!1)}).catch(function(l){m.warning("Error occured while fetching data."),d(!1)})};console.log(q);const Me=b;console.log(b);const ze=e=>{Ce(parseInt(e)),S(!0)},Re=e=>{O(e-1)},Ue=e=>{O(e+1)};i.useEffect(()=>{f&&j&&N()},[f,j]),i.useEffect(()=>{g&&j&&N()},[g,j]);const We=[{Header:"Sl No.",Cell:({cell:e})=>t.jsxs("span",{children:[" ",(f-1)*g+e.row.index+1," "]})},{Header:"Book Name",accessor:"book_name"},{Header:"Author Name",accessor:"author_name"},{Header:"Price",accessor:"price"},{Header:"View",Cell:({cell:e})=>{var o;return t.jsx("a",{href:`${B}/api/${(o=e.row.original)==null?void 0:o.ebook_docs}`,target:"_blank",className:"text-xl text-red-700 ",children:t.jsx(ht,{className:"text-red bg-red w-8 h-8"})})}},{Header:"Created Date & Time",Cell:({cell:e})=>{var o,s;return t.jsxs("span",{children:[x((o=e.row.original)==null?void 0:o.date)," |"," ",x((s=e.row.original)==null?void 0:s.time)]})}},{Header:"Status",Cell:({cell:e})=>{var o,s;return t.jsx("span",{className:((o=e.row.original)==null?void 0:o.status)==="Active"?"text-[green]":"text-[red]",children:x((s=e.row.original)==null?void 0:s.status)})}},{Header:"Action",Cell:({cell:e})=>{var o,s;return t.jsxs("div",{className:"flex",children:[t.jsx("button",{onClick:()=>{xt.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(l=>{var r,c;l.value&&(A((r=e.row.original)==null?void 0:r.id),Je((c=e.row.original)==null?void 0:c.id))})},className:"edit-button-master",children:t.jsx("a",{title:"edit",children:t.jsx(ft,{size:23})})}),t.jsx("button",{onClick:()=>{var l,r;je((l=e.row.original)==null?void 0:l.id),Fe(((r=e.row.original)==null?void 0:r.status)==="Active"?"deactive":"active"),$(!0)},className:`${((o=e.row.original)==null?void 0:o.status)=="Active"?"deactivate-button-master":"deactivate-second-button-master"}`,children:((s=e.row.original)==null?void 0:s.status)==="Active"?"Deactivate":"Activate"}),t.jsx("button",{onClick:()=>{var l;return Ye((l=e.row.original)==null?void 0:l.id)},className:"view-button-master",children:"View"})]})}}];console.log(f);const Ye=e=>{d(!0);let o={id:e};w.post(H,o,P()).then(function(s){var l,r,c;console.log("fetch fee master view data response..",(l=s==null?void 0:s.data)==null?void 0:l.data),(r=s==null?void 0:s.data)!=null&&r.status?(Se((c=s==null?void 0:s.data)==null?void 0:c.data),E(!0)):Ze(!0,"Error occured in submitting deactivation application. Please try again later."),d(!1)}).catch(function(s){console.log("= edit data error...",s),_(!0),d(!1)})},Je=e=>{d(!0);let o={id:e};w.post(H,o,P()).then(function(s){var l,r,c,h;console.log("fetch edit data response..",(l=s==null?void 0:s.data)==null?void 0:l.data),(r=s==null?void 0:s.data)!=null&&r.status?Ke((c=s==null?void 0:s.data)==null?void 0:c.data):m.error(`${(h=s==null?void 0:s.data)==null?void 0:h.message}`),d(!1)}).catch(function(s){console.log("= edit data error...",s),_(!0),d(!1)})},Ke=e=>{console.log("existing property details in prop address...",e),a.setFieldValue("id",e==null?void 0:e.id),a.setFieldValue("bookName",e==null?void 0:e.book_name),a.setFieldValue("authorName",e==null?void 0:e.author_name),a.setFieldValue("publishBy",e==null?void 0:e.publish_by),a.setFieldValue("publishedDate",e==null?void 0:e.published_date),a.setFieldValue("price",e==null?void 0:e.price),a.setFieldValue("ebookDocs",new File([`${B}/api/${e==null?void 0:e.ebook_docs}`],`${B}/api/${e==null?void 0:e.ebook_docs}`,{type:"application/pdf"})),a.setFieldValue("coverPicDocs",new File([`${B}/api/${e==null?void 0:e.cover_pic_docs}`],`${B}/api/${e==null?void 0:e.cover_pic_docs}`,{type:"application/pdf"}))};console.log(u);const Qe=e=>{const o=new FormData;o.append("bookName",e.bookName),o.append("authorName",e.authorName),o.append("publishBy",e.publishBy),o.append("publishedDate",e.publishedDate),o.append("price",e.price),o.append("ebookDocs",e.ebookDocs),o.append("coverPicDocs",e.coverPicDocs),console.log(e),d(!0);let s,l,r=o;u!==null?(s=Te,l=r,l.id=o.append("id",u)):(e==null?void 0:e.bookName)!==""&&(e==null?void 0:e.authorName)!==""&&(e==null?void 0:e.publishBy)!==""&&(e==null?void 0:e.publishedDate)!==""&&(e==null?void 0:e.price)!==""&&(e==null?void 0:e.ebookDocs)!==""&&(e==null?void 0:e.coverPicDocs)!==""&&u==null&&(s=qe,l=r),w.post(s,l,P()).then(function(c){var h,y,D;console.log("bank master..",(h=c==null?void 0:c.data)==null?void 0:h.data),((y=c==null?void 0:c.data)==null?void 0:y.status)===!0?(m.success(u!==null?"Data Updated Successfully!":"Data Added Successfully"),N(),A(null)):m.error(`${(D=c==null?void 0:c.data)==null?void 0:D.message}`),d(!1)}).catch(function(c){console.log("==2 error list...",c),m.warning("Error occured in submitting form."),d(!1)})},Ge=()=>{d(!0),$(!1);let e={id:pe,status:I};w.post(He,e,P()).then(function(o){var s,l;((s=o==null?void 0:o.data)==null?void 0:s.status)===!0?(N(),(e==null?void 0:e.status)=="active"?m.success("Activated Successfully"):m.error("Deactivated Successfully")):m.error(`${(l=o==null?void 0:o.data)==null?void 0:l.message}`),d(!1)}).catch(function(o){m.warning("Error occured in deletion."),d(!1)})};i.useEffect(()=>{N()},[]);const Xe=e=>{e.target.name,e.target.value},Ze=(e,o)=>{_e(o),_(e)},et=[{title:"Book Name",feild:"book_name"},{title:"Author Name",feild:"author_name"},{title:"Publish By",feild:"publish_by"},{title:"Published Date",feild:"published_date"},{title:"Price  ",feild:"price"},{title:"E Book ",feild:"ebook_docs"},{title:"Created Date ",feild:"date"},{title:"Created Time ",feild:"time"},{title:"Status",feild:"status"}],tt=()=>{const e=new bt;e.text("E-Book Details",10,10),e.autoTable({theme:"grid",columns:et.map(o=>({...o,dataKey:o.feild})),body:b}),e.save("E-Books.pdf")};return i.useEffect(()=>{const e=b.map(o=>{const{id:s,...l}=o;return l});console.log(e),De(e)},[b]),console.log(a.values.ebookDocs,a.values.coverPicDocs,u),t.jsxs(t.Fragment,{children:[Be&&t.jsx(ot,{children:t.jsxs("div",{className:"w-full bg-[#ddf8f6] shadow-xl mb-6 relative",children:[t.jsx("button",{onClick:()=>E(!1),type:"button",class:"absolute top-3 right-10 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:t.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:t.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),t.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-8",children:[t.jsx("div",{className:"font-semibold text-lg px-2 mb-5 text-[#1d807b]",children:"E-Book Details"}),t.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-gray-500 text-xs",children:"Book Name"}),t.jsx("div",{className:"font-bold text-sm",children:x(n==null?void 0:n.book_name)})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-gray-500 text-xs",children:"Author Name"}),t.jsx("div",{className:"font-bold text-sm",children:x(n==null?void 0:n.author_name)})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-gray-500 text-xs",children:"Publish By"}),t.jsx("div",{className:"font-bold text-sm",children:x(n==null?void 0:n.publish_by)})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-gray-500 text-xs",children:"Published Date"}),t.jsx("div",{className:"font-bold text-sm",children:x(n==null?void 0:n.date)})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-gray-500 text-xs",children:"Price"}),t.jsx("div",{className:"font-bold text-sm",children:x(n==null?void 0:n.price)})]})]})]})]})}),t.jsxs("div",{className:"w-full h-[72vh] lg:h-auto overflow-auto ",children:[t.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"E-Book Details"}),t.jsx("h1",{className:"text-gray-600 text-sm",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),t.jsx("div",{className:" mt-1 ml-3 mr-3 ",children:t.jsx("div",{className:"flex h-auto  items-start justify-start w-full",children:t.jsxs("div",{className:"grid grid-cols-12 w-full  ml-3 mr-3 ",children:[t.jsx("div",{className:"col-span-12  lg:col-span-4 w-full flex justify-center",children:t.jsxs("div",{className:"mt-8 border w-full  rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"Add"})]}),t.jsxs("div",{className:"w-full mb-6 mt-[6vh] pb-10  ",children:[t.jsx(it,{value:a,children:t.jsxs(ct,{autoComplete:"off",onChange:Xe,onSubmit:a.handleSubmit,children:[t.jsx("div",{className:"my-3 px-10 flex w-full",children:t.jsx(k,{...a.getFieldProps("bookName"),id:"bookName",name:"bookName",label:"Book Name",fullWidth:!0,size:"small",type:"text",error:a.touched.bookName&&!!a.errors.bookName,helperText:a.touched.bookName&&a.errors.bookName})}),t.jsx("div",{className:"my-3 px-10 flex w-full",children:t.jsx(k,{...a.getFieldProps("authorName"),id:"authorName",name:"authorName",label:"Author Name",fullWidth:!0,size:"small",type:"text",error:a.touched.authorName&&!!a.errors.authorName,helperText:a.touched.authorName&&a.errors.authorName})}),t.jsx("div",{className:"my-3  px-10 flex w-full",children:t.jsx(k,{...a.getFieldProps("publishBy"),id:"publishBy",name:"publishBy",label:"Publish By",fullWidth:!0,size:"small",type:"text",error:a.touched.publishBy&&!!a.errors.publishBy,helperText:a.touched.publishBy&&a.errors.publishBy})}),t.jsx("div",{className:"my-3  px-10 flex w-full",children:t.jsx(k,{...a.getFieldProps("publishedDate"),id:"publishedDate",name:"publishedDate",fullWidth:!0,size:"small",type:"date",error:a.touched.publishedDate&&!!a.errors.publishedDate,helperText:a.touched.publishedDate&&a.errors.publishedDate})}),t.jsx("div",{className:"my-3  px-10 flex w-full",children:t.jsx(k,{...a.getFieldProps("price"),id:"price",name:"price",label:"Price",fullWidth:!0,size:"small",type:"text",error:a.touched.price&&!!a.errors.price,helperText:a.touched.price&&a.errors.price})}),t.jsx("div",{className:"form-group grid-cols-12 mt-6",children:t.jsx("div",{className:" col-span-12 lg:col-span-3",children:t.jsxs("div",{className:"block justify-start px-10",children:[t.jsx("label",{htmlFor:"ebookDocs",className:"orm-control h-10 block w-full border border-gray-400 px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose Book"}),t.jsx("input",{className:"sr-only ",name:"ebookDocs",id:"ebookDocs",type:"file",accept:".pdf",onChange:e=>{a.setFieldValue("ebookDocs",e.target.files[0])}}),a.values.ebookDocs&&u!==null?`${(V=a.values.ebookDocs)==null?void 0:V.name}`.slice(`${(M=a.values.ebookDocs)==null?void 0:M.name}`.lastIndexOf("-")+1||`${(z=a.values.ebookDocs)==null?void 0:z.name}`.lastIndexOf("/")+1||`${(R=a.values.ebookDocs)==null?void 0:R.name}`.lastIndexOf("\\")+1||`${(U=a.values.ebookDocs)==null?void 0:U.name}`.lastIndexOf(".")+1||`${(W=a.values.ebookDocs)==null?void 0:W.name}`.lastIndexOf(" ")+1||`${(Y=a.values.ebookDocs)==null?void 0:Y.name}`.lastIndexOf(",")+1||`${(J=a.values.ebookDocs)==null?void 0:J.name}`.lastIndexOf("?")+1,`${(K=a.values.ebookDocs)==null?void 0:K.name}`.length):a.values.ebookDocs&&u===null?(Q=a.values.ebookDocs)==null?void 0:Q.name:"No file selected",t.jsx("br",{}),t.jsx("span",{className:"text-red-600  text-xs",children:a.touched.ebookDocs&&a.errors.ebookDocs?a.errors.ebookDocs:null})]})})}),t.jsx("div",{className:"form-group grid-cols-12 mt-6",children:t.jsx("div",{className:" col-span-12 lg:col-span-3",children:t.jsxs("div",{className:"block justify-start px-10",children:[t.jsx("label",{htmlFor:"coverPicDocs",className:"form-control h-15 block w-full border border-gray-400 px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose Cover Page"}),t.jsx("input",{className:"sr-only ",name:"coverPicDocs",id:"coverPicDocs",type:"file",accept:".jpg,.jpeg",onChange:e=>{a.setFieldValue("coverPicDocs",e.target.files[0])}}),a.values.coverPicDocs&&u!==null?`${(G=a.values.coverPicDocs)==null?void 0:G.name}`.slice(`${(X=a.values.coverPicDocs)==null?void 0:X.name}`.lastIndexOf("-")+1||`${(Z=a.values.coverPicDocs)==null?void 0:Z.name}`.lastIndexOf("/")+1||`${(ee=a.values.coverPicDocs)==null?void 0:ee.name}`.lastIndexOf("\\")+1||`${(te=a.values.coverPicDocs)==null?void 0:te.name}`.lastIndexOf(".")+1||`${(ae=a.values.coverPicDocs)==null?void 0:ae.name}`.lastIndexOf(" ")+1||`${(le=a.values.coverPicDocs)==null?void 0:le.name}`.lastIndexOf(",")+1||`${(se=a.values.coverPicDocs)==null?void 0:se.name}`.lastIndexOf("?")+1,`${(oe=a.values.coverPicDocs)==null?void 0:oe.name}`.length):a.values.coverPicDocs&&u===null?(ie=a.values.coverPicDocs)==null?void 0:ie.name:"No file selected",t.jsx("br",{}),t.jsx("span",{className:"text-red-600  text-xs",children:a.touched.coverPicDocs&&a.errors.coverPicDocs?a.errors.coverPicDocs:null})]})})}),t.jsx("div",{className:"mt-7",children:t.jsx("button",{type:"submit",className:"px-9 py-2.5 bg-[#6AB783] text-white font-medium text-sm leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out",children:u!==null?"Update":"Save"})})]})}),t.jsx("div",{className:"flex justify-center items lg:ml-16 mt-11 text-[1.5vh]",children:t.jsxs("h1",{className:"text-red-600",children:["Note : (*) is a mandatory field"," "]})})]})]})}),t.jsx("div",{className:" col-span-12 md:col-span-12 lg:col-span-8 w-full lg:ml-2 ",children:t.jsxs("div",{className:"mt-8 border   rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"View List"})]}),t.jsx("div",{className:"mt-5  ",children:t.jsx(rt,{generatePdf:tt,enable:ke,setenable:we,csvdata:ye,readymadeListData:b,fetchMasterList:N,setSearchTableData:Ie,searchTableData:Ae})}),t.jsx("div",{className:"-mt-5 main-div",children:t.jsxs("div",{className:" rounded-md h-[80vh] 2xl:p-6 p-4 overflow-y-auto",children:[Pe&&t.jsx(dt,{}),$e&&t.jsx(nt,{setdeleteStatus:$,deleteItem:Ge,deactivate:I}),t.jsxs("div",{className:"h-[57vh] overflow-auto max-[1004px]:h-full",children:[C&&(v==null?void 0:v.length)!=0&&t.jsx(ut,{filter:!1,exportStatus:!1,assessmentType:!1,columns:We,dataList:Me,pageNumber:q}),t.jsx(mt,{ChangePage:ze,number:f,lastPage:Ee,nextPage:Ue,prevPage:Re,postperpage:g,blockToast:j,setBlockToast:S})]}),C&&(v==null?void 0:v.length)==0&&t.jsx("div",{className:"data-not-found",children:"Data Not Found"})]})})]})})]})})})]})]})};export{yt as default};
