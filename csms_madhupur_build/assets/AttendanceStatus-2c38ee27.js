import{r as a,c as xt,a as m,b as ht,j as e,aa as ft,ab as jt,cE as u,cI as g,cB as y,cF as x,T as gt,U as yt,A as h,e as f,Q as N,g as Nt}from"./index-21aade66.js";import{N as vt}from"./nodata-040bca7f.js";import"./iconify-1f600ab3.js";import"./lodash-fd0ed28e.js";import{M as d}from"./MenuItem-d38a9826.js";const Ct=()=>{const[O,v]=a.useState([]),[b,I]=a.useState(1),[S,U]=a.useState(10),[Q,F]=a.useState(),[bt,w]=a.useState(),[V,j]=a.useState(!1),[G,K]=a.useState(!1),X=xt({fy:m().required("Required"),classId:m().required("Required"),sectionId:m().required("Required"),date:m().required("Required")}),c=ht({initialValues:{fy:"",classId:"",sectionId:"",date:""},validationSchema:X,onSubmit:async t=>{console.log("at submit ",t),ut(t),c.resetForm(),j(!1)}}),Z=O,D=t=>{U(parseInt(t))},tt=t=>{I(t-1)},et=t=>{I(t+1)},[E,lt]=a.useState([]),[o,ct]=a.useState([]),[n,at]=a.useState([]),[It,i]=a.useState(!1),{api_finance_year:it,api_getactiveClassData:dt,api_section_group_map:st,api_attendance_report:rt}=Nt(),ot=()=>{h.post(dt,{},f()).then(function(t){var l,s,r;(l=t==null?void 0:t.data)!=null&&l.status?(console.log((s=t==null?void 0:t.data)==null?void 0:s.data),ct((r=t==null?void 0:t.data)==null?void 0:r.data)):activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)}).catch(function(t){console.log("==2 error list...",t),activateBottomErrorCard(!0,"Error occured while fetching data.")})},nt=t=>{i(!0),h.post(st,{classId:t},f()).then(function(l){l!=null&&l.data?(console.log(l==null?void 0:l.data),at(l==null?void 0:l.data.data)):activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)}).catch(function(l){console.log("==2 error list...",l),activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)})},mt=()=>{i(!0),h.post(it,{},f()).then(function(t){t!=null&&t.data?(console.log(t==null?void 0:t.data),lt(t==null?void 0:t.data)):activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)}).catch(function(t){console.log("==2 error list...",t),activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)})},ut=t=>{i(!0),h.post(rt,{fy:t.fy,classId:t.classId,sectionId:t.sectionId,date:t.date},f()).then(function(l){var s,r,_,C,P,p,B,L,A,q,W,M,R,k,z,T,Y,$,H,J;((s=l==null?void 0:l.data)==null?void 0:s.status)===!0?((_=(r=l==null?void 0:l.data)==null?void 0:r.data)==null?void 0:_.total)===0||((P=(C=l==null?void 0:l.data)==null?void 0:C.data)==null?void 0:P.data.length)===0?(N.error("Data not Found"),v((B=(p=l==null?void 0:l.data)==null?void 0:p.data)==null?void 0:B.data),F((A=(L=l==null?void 0:l.data)==null?void 0:L.data)==null?void 0:A.last_page),w((W=(q=l==null?void 0:l.data)==null?void 0:q.data)==null?void 0:W.total),j(!1),K(!0)):(console.log("class section map data",(R=(M=l==null?void 0:l.data)==null?void 0:M.data)==null?void 0:R.data),v((z=(k=l==null?void 0:l.data)==null?void 0:k.data)==null?void 0:z.data),F((Y=(T=l==null?void 0:l.data)==null?void 0:T.data)==null?void 0:Y.last_page),w((H=($=l==null?void 0:l.data)==null?void 0:$.data)==null?void 0:H.total),j(!0)):N.error(`${(J=l==null?void 0:l.data)==null?void 0:J.message}`),i(!1)}).catch(function(l){console.log("==2 error list...",l),N.warning("Error occured in submitting form."),i(!1)})};return a.useEffect(()=>{mt(),ot()},[]),a.useEffect(()=>{c.values.classId&&nt(c.values.classId)},[c.values.classId]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"h-[77vh] lg:h-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[e.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"Attendance Status"}),e.jsx("h1",{className:"common-header-smalltext",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),e.jsx(ft,{value:c,children:e.jsx(jt,{autoComplete:"off",children:e.jsxs("div",{className:"grid grid-cols-12 gap-5 ml-[4vh] mr-[4vh] mt-[2vh]",children:[e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsxs(u,{fullWidth:!0,error:c.touched.fy&&!!c.errors.fy,children:[e.jsx(g,{id:"demo-simple-select-label",sx:{padding:0},children:"Financial year"}),e.jsxs(y,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Menu",...c.getFieldProps("fy"),fullWidth:!0,size:"small",children:[e.jsx(d,{value:"",children:"Select"}),E&&E.map((t,l)=>e.jsx(d,{value:t==null?void 0:t.fy,children:t==null?void 0:t.fy}))]}),e.jsx(x,{children:c.touched.fy&&c.errors.fy})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsxs(u,{fullWidth:!0,error:c.touched.classId&&!!c.errors.classId,children:[e.jsx(g,{id:"demo-simple-select-label",sx:{padding:0},children:"Select Class"}),e.jsxs(y,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Menu",...c.getFieldProps("classId"),fullWidth:!0,size:"small",children:[e.jsx(d,{value:"",children:"Select"}),o&&(o==null?void 0:o.map(t=>e.jsx(d,{value:t==null?void 0:t.id,children:t==null?void 0:t.class_name})))]}),e.jsx(x,{children:c.touched.classId&&c.errors.classId})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsxs(u,{fullWidth:!0,error:c.touched.sectionId&&!!c.errors.sectionId,children:[e.jsx(g,{id:"demo-simple-select-label",sx:{padding:0},children:"Select Section"}),e.jsxs(y,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Menu",...c.getFieldProps("sectionId"),fullWidth:!0,size:"small",children:[e.jsx(d,{value:"",children:"Select"}),n&&(n==null?void 0:n.map(t=>e.jsx(d,{value:t==null?void 0:t.id,children:t==null?void 0:t.section_name})))]}),e.jsx(x,{children:c.touched.sectionId&&c.errors.sectionId})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-2",children:e.jsxs(u,{fullWidth:!0,children:[e.jsx(gt,{labelId:"demo-simple-select-label",id:"demo-simple-select",...c.getFieldProps("date"),fullWidth:!0,size:"small",type:"date"}),e.jsx(x,{children:c.touched.date&&c.errors.date})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-1",children:e.jsx("button",{type:"submit",className:"  save-button",children:"Search"})})]})})}),V?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative overflow-auto  w-[150vw] lg:w-[95%] ml-[2vw] shadow-md mt-[2vh]   sm:rounded-lg",children:[e.jsxs("table",{className:"w-full text-sm text-left ",id:"myTable",children:[e.jsx("thead",{className:"text-md ",children:e.jsxs("tr",{className:"text-white bg-[#3f7772]",children:[e.jsx("th",{scope:"col",className:" py-5  text-center ",children:"Sl No."}),e.jsx("th",{scope:"col",className:" py-5  text-center ",children:"Admission No"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Full Name"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Financial Year"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Class"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Section"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Attendance Status"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Description"})]})}),Z.map((t,l)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-white border-b  hover:bg-slate-100 ",children:[e.jsx("td",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap  text-center",children:(b-1)*S+l+1}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.admission_no}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.first_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.academic_year}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.class_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.section_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.attendance_status}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.description})]})})}))]}),e.jsx(yt,{ChangePage:D,number:b,lastPage:Q,nextPage:et,prevPage:tt,postperpage:S})]})}):G?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:vt,alt:""})})}):null]})})};export{Ct as default};
