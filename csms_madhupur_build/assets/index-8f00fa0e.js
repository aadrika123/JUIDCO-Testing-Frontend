import{r as n,u as S,c as C,a as E,N as B,b as P,j as a,B as A,A as b,e as h,Q as o,g as F}from"./index-21aade66.js";function _(){const[e,I]=n.useState(JSON.parse(sessionStorage.getItem("loginInfo")));n.useState(!1),n.useState(null);const[f,d]=n.useState(!1),{api_aadrikaChangePassword:y,api_passwordChangeUserData:w}=F(),g=S(),k=C({password:E().required("Enter Password").matches(B,"Please Enter Valid password")});e==null||e.token;const p=e==null?void 0:e.name;e==null||e.schoolName,e==null||e.email,e.userName;const x=e==null?void 0:e.roleId,t=P({initialValues:{email:"",password:"",userName:""},onSubmit:s=>{x===1?N(s):x===2&&j(s)},validationSchema:k}),N=s=>{d(!0);let l,i,u={email:s.email,password:s==null?void 0:s.password};l=y,i=u,b.post(l,i,h()).then(function(r){var m,c;console.log("Login.....",r==null?void 0:r.data),((m=r==null?void 0:r.data)==null?void 0:m.status)===!0?(g("/"),o.success("Password changed Successfully")):o.error(`${(c=r==null?void 0:r.data)==null?void 0:c.message}`),d(!1)}).catch(function(r){console.log("==2 error list...",r),o.warning("Error occured in submitting form."),d(!1)})},j=s=>{d(!0);let l,i,u={userName:s==null?void 0:s.userName,password:s==null?void 0:s.password};l=w,i=u,b.post(l,i,h()).then(function(r){var m,c;console.log("Login.....",r==null?void 0:r.data),((m=r==null?void 0:r.data)==null?void 0:m.status)===!0?(g("/"),o.success("Password changed Successfully")):o.error(`${(c=r==null?void 0:r.data)==null?void 0:c.message}`),d(!1)}).catch(function(r){console.log("==2 error list...",r),o.warning("Error occured in submitting form."),d(!1)})};return a.jsxs(a.Fragment,{children:[f&&a.jsx(A,{}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"flex flex-col items-center justify-center px-6 mx-auto md:h-screen lg:py-0",children:a.jsxs("div",{className:"w-full p-6 bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md dark:bg-gray-800 dark:border-gray-700 sm:p-8",children:[a.jsx("h2",{className:"mb-1 text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Change Password"}),a.jsxs("form",{className:"mt-4 space-y-4 lg:mt-5 md:space-y-5",onSubmit:t.handleSubmit,children:[a.jsx("div",{children:p==="Aadrika"?a.jsxs(a.Fragment,{children:[a.jsxs("label",{for:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:[" ","Your email"]}),a.jsx("input",{type:"email",name:"email",id:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:t.handleChange,value:t.values.email}),a.jsx("br",{}),a.jsx("span",{className:"text-red-600 text-xs",children:t.touched.email&&t.errors.email?t.errors.email:null})]}):a.jsxs(a.Fragment,{children:[a.jsx("label",{for:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your User Name"}),a.jsx("input",{type:"text",name:"userName",id:"userName",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:t.handleChange,value:t.values.userName}),a.jsx("br",{}),a.jsx("span",{className:"text-red-600 text-xs",children:t.touched.userName&&t.errors.userName?t.errors.userName:null})]})}),a.jsxs("div",{children:[a.jsx("label",{for:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"New Password"}),a.jsx("input",{type:"password",name:"password",id:"password",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:t.handleChange,value:t.values.password}),a.jsx("br",{}),a.jsx("span",{className:"text-red-600 text-xs",children:t.touched.password&&t.errors.password?t.errors.password:null})]}),a.jsx("button",{type:"submit",className:"w-full text-white bg-indigo-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Reset passwod"})]})]})})})]})}export{_ as default};
