import{r as m,u as C,O as L,c as q,a as A,W as M,b as $,j as t,B as I,A as h,e as x,K as P,o as O,g as R}from"./index-21aade66.js";import{B as J}from"./BottomErrorCard-c4e8289a.js";import{T as K}from"./Tabs-65330aff.js";const z=()=>{const[f,v]=m.useState(!1),[b,N]=m.useState(null),[p,o]=m.useState(!1),[U,j]=m.useState([]),{api_getvehicleTypeDataById:T,api_postvehicleTypeData:S,api_editvehicleTypeData:E,api_getvehicleTypeData:F}=R(),u=C(),{id:r}=L(),V=q({vehiclesTypeName:A().required("Vehicle Type name is required feild"),maxSeatingNo:M().required("Max Seating is required feild")}),i=$({initialValues:{vehiclesTypeName:"",maxSeatingNo:""},onSubmit:(e,a)=>{console.log("at submit ",e),k(e)},validationSchema:V}),k=e=>{o(!0);let a,s,c={vehiclesTypeName:e.vehiclesTypeName,maxSeatingNo:e.maxSeatingNo};r!==void 0?(a=E,s=c,s.id=r):(a=S,s=c),h.post(a,s,x()).then(function(l){var n,g,y;console.log("vehicle type master..",(n=l==null?void 0:l.data)==null?void 0:n.data),((g=l==null?void 0:l.data)==null?void 0:g.status)===!0?u("/vehicle-type"):d(!0,`${(y=l==null?void 0:l.data)==null?void 0:y.message}`),o(!1)}).catch(function(l){console.log("==2 error list...",l),d(!0,"Error occured in submitting form."),o(!1)})},B=()=>{o(!0);let e={id:r};h.post(T,e,x()).then(function(a){var s,c,l,n;console.log("fetch edit data response..",(s=a==null?void 0:a.data)==null?void 0:s.data),(c=a==null?void 0:a.data)!=null&&c.status?w((l=a==null?void 0:a.data)==null?void 0:l.data):d(!0,`${(n=a==null?void 0:a.data)==null?void 0:n.message}`),o(!1)}).catch(function(a){console.log("= edit data error...",a),v(!0),o(!1)})},w=e=>{console.log("existing property details in prop address...",e),i.setFieldValue("id",e==null?void 0:e.id),i.setFieldValue("vehiclesTypeName",e==null?void 0:e.vehicle_type_name),i.setFieldValue("maxSeatingNo",e==null?void 0:e.max_seating_no)},D=()=>{h.post(F,{},x()).then(function(e){var a,s,c;(a=e==null?void 0:e.data)!=null&&a.status?j((s=e==null?void 0:e.data)==null?void 0:s.data):d(!0,`${(c=e==null?void 0:e.data)==null?void 0:c.message}`),o(!1)}).catch(function(e){console.log("==2 error list...",e),d(!0,"Error occured while fetching data.")})};m.useEffect(()=>{D(),r!==void 0&&B()},[]);const _=e=>{let a=e.target.name,s=e.target.value;a=="vehiclesTypeName"&&i.setFieldValue("vehiclesTypeName",P(s,i.values.vehiclesTypeName,50)),a=="maxSeatingNo"&&i.setFieldValue("maxSeatingNo",O(s,i.values.maxSeatingNo,3))},d=(e,a)=>{N(a),v(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[p&&t.jsx(I,{}),f&&t.jsx(J,{activateBottomErrorCard:d,errorTitle:b}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Vehicle Type Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>u("/vehicle-type-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),r!==void 0?"":t.jsx(K,{listRoute:"/vehicle-type",formRoute:"/vehicle-type-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Vehicle type"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:i.handleSubmit,onChange:_,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Vehicle Type Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...i.getFieldProps("vehiclesTypeName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter vehicle type name"}),t.jsx("span",{className:"text-red-600  text-xs",children:i.touched.vehiclesTypeName&&i.errors.vehiclesTypeName?i.errors.vehiclesTypeName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Max Seating Capacity",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...i.getFieldProps("maxSeatingNo"),type:"number",onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault(),className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter max seating capacity"}),t.jsx("span",{className:"text-red-600 text-xs",children:i.touched.maxSeatingNo&&i.errors.maxSeatingNo?i.errors.maxSeatingNo:null})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>u("/vehicle-type"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})};export{z as default};
