import{R as g,j as e,aB as M,A as L,e as A,g as F,a0 as R,E as y,r as x,u as B,b as U,S as u,B as _,aa as I,ab as D,ac as T}from"./index-21aade66.js";import{H as O}from"./Navbar-f3b6ce22.js";import{u as H}from"./useCommonApi-1bf6b879.js";import{u as Y}from"./useErrorAutoFocusField-39db6dc1.js";import{a as k,T as l,C as J,P as q}from"./OutLineTextField-7556c55f.js";import{B as K}from"./BottomErrorCard-c4e8289a.js";import"./LOGO-e1ab5032.js";function V({formik:o,getPublicMiscellaneous:w,setisLoading:S,activateBottomErrorCard:C}){const[p,m]=g.useState(""),[f,n]=g.useState(!1),{api_school_master_search_username:b}=F(),j=s=>{console.log("checkUsername",s),n(!0),L.post(b,{userName:s},A()).then(function(a){var t,r,d;console.log("section Data..",(t=a==null?void 0:a.data)==null?void 0:t.data),(r=a==null?void 0:a.data)!=null&&r.status?m((d=a==null?void 0:a.data)==null?void 0:d.data):m(""),n(!1)}).catch(function(a){console.log("==2 error list...",a),n(!1)})},N=(s,a)=>{let t;return function(){const r=this,d=arguments;clearTimeout(t),t=setTimeout(()=>s.apply(r,d),a)}},P=g.useCallback(N(s=>j(s),1e3),[]),c=s=>{m(s.target.value),P(s.target.value)};return e.jsxs("div",{children:[e.jsx("div",{className:"mt-8",children:e.jsx("h1",{className:" flex items-start justify-start pt-2 my-1 font-bold text-[2.5vh]  text-[#6b7280]  bg-white w-full ",children:e.jsxs("div",{className:"flex",children:[e.jsx(M,{className:"mr-3 w-10 h-10 opacity-80 text-blue-500"}),e.jsx("span",{className:"flex items-center justify-center mt-2 text-[22px]",children:"School Details"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 text-start mt-3 border p-2",children:[e.jsx("div",{children:e.jsx(k,{label:"User Name",name:"userName",formik:o,placeholder:"User Name",isRequiredLabel:!0,isUserExits:p,onInput:c,isLoading:f})}),e.jsx("div",{children:e.jsx(l,{label:"School Name",name:"schoolName",formik:o,placeholder:"School Name",isRequiredLabel:!0})}),e.jsx("div",{children:e.jsx(l,{label:"Contact Person Name",name:"contactPersonName",formik:o,placeholder:"Contact Person Name",isRequiredLabel:!0})}),e.jsx("div",{children:e.jsx(l,{type:"number",label:"Contact Person Mobile",name:"contactPersonMobile",formik:o,placeholder:"Contact Person Mobile",isRequiredLabel:!0,onKeyDown:s=>["e","E","+","-"," "].includes(s.key)&&s.preventDefault(),onInput:s=>{s.target.value=Math.max(0,parseInt(s.target.value,10)).toString().slice(0,10)}})}),e.jsx("div",{children:e.jsx(l,{label:"Contact Person Email",name:"contactPersonEmail",formik:o,placeholder:"Contact Person Email",isRequiredLabel:!0,type:"email"})}),e.jsx("div",{children:e.jsx(l,{label:"Address",name:"schoolAddress",formik:o,placeholder:"Address",isRequiredLabel:!0})}),e.jsx("div",{children:e.jsx(l,{type:"number",label:"Pincode",name:"pinCode",formik:o,placeholder:"Pincode",onKeyDown:s=>["e","E","+","-"," "].includes(s.key)&&s.preventDefault(),onInput:s=>{s.target.value=Math.max(0,parseInt(s.target.value,10)).toString().slice(0,6)}})}),e.jsx("div",{children:e.jsx(l,{label:"School Code",name:"schoolCode",formik:o,placeholder:"School Code"})}),e.jsx("div",{children:e.jsx(l,{label:"Fax",name:"fax",formik:o,placeholder:"Fax"})}),e.jsx("div",{children:e.jsx(J,{formik:o,name:"schoolLogo",label:"Upload photo",accept:".jpg,.jpeg,.png"})}),e.jsx("div",{children:e.jsx(q,{formik:o,name:"password",label:"Password",placeholder:"Password",isRequiredLabel:!0})}),e.jsx("div",{children:e.jsx(q,{formik:o,name:"confirmPassword",label:"Confirm Password",placeholder:"Confirm Password",isRequiredLabel:!0})})]})]})}function G(){return{schoolName:"",schoolCode:"",fax:"",contactPersonName:"",contactPersonMobile:"",contactPersonEmail:"",schoolAddress:"",pinCode:"",userName:"",password:"",confirmPassword:"",schoolLogo:""}}const X=o=>o.object({schoolName:o.string().required("School Name is required"),contactPersonName:o.string().required("Contact Person Name is required"),contactPersonMobile:o.string().matches(R,"Mobile number is not valid").required("Mobile number is required"),contactPersonEmail:o.string().matches(y,"Email is not valid").required("Email is required"),schoolAddress:o.string().required("School Address is required"),pinCode:o.string().required("Pin Code is required"),userName:o.string().required("User Name is required"),password:o.string().required("Password is required"),confirmPassword:o.string().oneOf([o.ref("password"),null],"Passwords must match").required("Confirm Password is required")});function te(){const[o,w]=x.useState(!0),S=B(),{api_school_master_registration:C}=F(),{AutoFocusErrorField:p}=Y();x.useState(!1);const{getPublicMiscellaneous:m}=H(),[f,n]=x.useState(!1),[b,j]=x.useState(!1),[N,P]=x.useState(null),c=U({initialValues:G(),validationSchema:X(T),onSubmit:t=>{console.log(t);const r=new FormData;r.append("schoolName",t==null?void 0:t.schoolName),r.append("schoolCode",t==null?void 0:t.schoolCode),r.append("contactPersonName",t==null?void 0:t.contactPersonName),r.append("contactPersonMobile",t==null?void 0:t.contactPersonMobile),r.append("contactPersonEmail",t==null?void 0:t.contactPersonEmail),r.append("userName",t==null?void 0:t.userName),r.append("address",t==null?void 0:t.schoolAddress),r.append("pincode",t==null?void 0:t.pinCode),r.append("password",t==null?void 0:t.password),r.append("confirmPassword",t==null?void 0:t.confirmPassword),r.append("schoolLogo",t==null?void 0:t.schoolLogo),u.fire({title:"Are you sure?",text:"You want to submit this form?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, submit it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(d=>{d.isConfirmed?(n(!0),L.post(C,r,A()).then(function(i){var h,E;console.log("Student Reg..",i),(h=i==null?void 0:i.data)!=null&&h.status?(localStorage.setItem("school_reg_no",t==null?void 0:t.userName),S("/school-registration-success"),n(!1),u.fire({icon:"success",title:"Added",text:"Information Added Successfully.",showConfirmButton:!1,timer:1500}),console.log("==1 response list...",i)):(a(!0,(E=i==null?void 0:i.data)==null?void 0:E.message),n(!1)),n(!1)}).catch(function(i){var h;console.log("==2 error list...",i),a(!0,((h=response==null?void 0:response.data)==null?void 0:h.message)??"Something went wrong"),n(!1)})):d.dismiss===u.DismissReason.cancel&&u.fire({title:"Cancelled",text:"Form not submitted :)",icon:"error",showConfirmButton:!1,timer:1500})})}}),{handleSubmit:s}=c,a=(t,r)=>{P(r),j(t)};return g.useEffect(()=>{const{isValid:t,submitCount:r,isSubmitting:d,errors:i}=c;p({isValid:t,submitCount:r,isSubmitting:d,errors:i})},[c.errors,c.submitCount,c.isSubmitting]),e.jsxs(e.Fragment,{children:[f&&e.jsx(_,{}),b&&e.jsx(K,{activateBottomErrorCard:a,errorTitle:N}),e.jsx(O,{isModelOpen:o}),e.jsx("div",{className:"w-full col-span-10 2xl:py-3 2xl:px-52 px-6 py-2 mt-24",children:e.jsxs("div",{className:"border-[2px] border-gray-200 rounded-md h-[80vh] 2xl:p-6 p-4 overflow-y-auto",children:[e.jsx("div",{className:"",children:e.jsx("div",{className:"flex w-full justify-between items-center max-[870px]:block",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-3xl text-center font-semibold text-gray-600 flex flex-start",children:"School Registration Form"}),e.jsx("span",{className:"text-sm text-center font-medium text-gray-400",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})})}),e.jsx(I,{value:c,children:e.jsxs(D,{onSubmit:s,children:[e.jsx(V,{formik:c,getPublicMiscellaneous:m,activateBottomErrorCard:a,setisLoading:n}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6",children:e.jsx("div",{children:e.jsx("div",{className:" text-right col-span-12 mt-10",children:e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"SUBMIT"})})})})]})})]})})]})}export{te as default};
