import{r as d,u as p,O as w,c as q,a as M,Z as R,b as T,j as t,B as $,A as u,e as x,K as O,g as P}from"./index-21aade66.js";import{B as V}from"./BottomErrorCard-c4e8289a.js";import{T as I}from"./Tabs-65330aff.js";function Z(){const[b,f]=d.useState(!1),[N,g]=d.useState(null),[j,o]=d.useState(!1),[U,S]=d.useState([]),{api_getSectionData:y,api_editSectionData:E,api_postSectionData:B,api_getSectionDataByID:C}=P(),m=p(),{id:n}=w(),F=q({sectionName:M().matches(R,"Please Enter value between A-Z to a-z").required("Section is required feild")}),c=T({initialValues:{sectionName:""},onSubmit:(e,a)=>{k(e)},validationSchema:F}),k=e=>{o(!0);let a,i,l={sectionName:e.sectionName};n!==void 0?(a=E,i=l,i.id=n):(a=B,i=l),u.post(a,i,x()).then(function(s){var h,v;((h=s==null?void 0:s.data)==null?void 0:h.status)===!0?m("/section"):r(!0,`${(v=s==null?void 0:s.data)==null?void 0:v.message}`),o(!1)}).catch(function(s){r(!0,"Error occured in submitting form."),o(!1)})},A=()=>{o(!0);let e={id:n};u.post(C,e,x()).then(function(a){var i,l,s;(i=a==null?void 0:a.data)!=null&&i.status?D((l=a==null?void 0:a.data)==null?void 0:l.data):r(!0,`${(s=a==null?void 0:a.data)==null?void 0:s.message}`),o(!1)}).catch(function(a){f(!0),o(!1)})},D=e=>{c.setFieldValue("id",e==null?void 0:e.id),c.setFieldValue("sectionName",e==null?void 0:e.section_name)},L=()=>{u.post(y,{},x()).then(function(e){var a,i,l;(a=e==null?void 0:e.data)!=null&&a.status?S((i=e==null?void 0:e.data)==null?void 0:i.data):r(!0,`${(l=e==null?void 0:e.data)==null?void 0:l.message}`),o(!1)}).catch(function(e){r(!0,"Error occured while fetching data.")})};d.useEffect(()=>{L(),n!==void 0&&A()},[]);const _=e=>{let a=e.target.name,i=e.target.value;a=="sectionName"&&c.setFieldValue("sectionName",O(i.toUpperCase().trim(),c.values.sectionName,1))},r=(e,a)=>{g(a),f(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[j&&t.jsx($,{}),b&&t.jsx(V,{activateBottomErrorCard:r,errorTitle:N}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Section Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),n===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>m("/section-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),n!==void 0?"":t.jsx(I,{listRoute:"/section",formRoute:"/section-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Section "})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:c.handleSubmit,onChange:_,children:t.jsxs("div",{className:"form",children:[t.jsx("div",{className:"col-span-4 grid grid-cols-12",children:t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Section Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...c.getFieldProps("sectionName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter section"}),t.jsx("span",{className:"text-red-600 text-xs flex items-center ml-8",children:c.touched.sectionName&&c.errors.sectionName?c.errors.sectionName:null})]})}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>m("/section"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:n!==void 0?"Update":"Save"})})]})]})})})]})})})}export{Z as default};
