import{r as d,u as V,O as q,c as M,a as N,b as P,j as e,B as T,A as x,e as h,K as O,g as R}from"./index-21aade66.js";import{B as $}from"./BottomErrorCard-c4e8289a.js";import{T as H}from"./Tabs-65330aff.js";function Y(){const[v,f]=d.useState(!1),[j,p]=d.useState(null),[S,r]=d.useState(!1),[m,E]=d.useState([]),{api_editStateData:F,api_postStateData:I,api_getStateDataById:B,api_getCountryData:k}=R(),u=V(),{id:o}=q(),w=M({countryId:N().required("Select Country."),stateName:N().required("Enter state name")}),s=P({initialValues:{countryId:"",stateName:""},onSubmit:(t,a)=>{console.log("at submit ",t),C(t)},validationSchema:w}),C=t=>{r(!0);let a,l,n={countryId:t.countryId,stateName:t==null?void 0:t.stateName};o!==void 0?(a=F,l=n,l.id=o):(a=I,l=n),x.post(a,l,h()).then(function(i){var b,g,y;console.log("view State master..",(b=i==null?void 0:i.data)==null?void 0:b.data),(g=i==null?void 0:i.data)!=null&&g.status?u("/state"):c(!0,`${(y=i==null?void 0:i.data)==null?void 0:y.message}`),r(!1)}).catch(function(i){console.log("==2 error list...",i),c(!0,"Error occured in submitting form."),r(!1)})},_=()=>{r(!0);let t={id:o};x.post(B,t,h()).then(function(a){var l,n,i;console.log("fetch edit data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(n=a==null?void 0:a.data)!=null&&n.status?D((i=a==null?void 0:a.data)==null?void 0:i.data):c(!0,"Error occured in submitting deactivation application. Please try again later."),r(!1)}).catch(function(a){console.log("= edit data error...",a),f(!0),r(!1)})},D=t=>{console.log("existing property details in prop address...",t),s.setFieldValue("id",t==null?void 0:t.id),s.setFieldValue("countryId",t==null?void 0:t.country_id),s.setFieldValue("countryName",t==null?void 0:t.country_name),s.setFieldValue("stateName",t==null?void 0:t.state_name)},A=()=>{x.post(k,{},h()).then(function(t){var a,l;(a=t==null?void 0:t.data)!=null&&a.status?E((l=t==null?void 0:t.data)==null?void 0:l.data):c(!0,"Error occured while fetching data."),r(!1)}).catch(function(t){console.log("==2 error list...",t),c(!0,"Error occured while fetching data.")})};d.useEffect(()=>{A(),o!==void 0&&_()},[]);const L=t=>{let a=t.target.name,l=t.target.value;a=="stateName"&&s.setFieldValue("stateName",O(l,s.values.stateName,50))},c=(t,a)=>{p(a),f(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-div",children:e.jsxs("div",{className:"main-inner-div",children:[S&&e.jsx(T,{}),v&&e.jsx($,{activateBottomErrorCard:c,errorTitle:j}),e.jsxs("div",{className:"main-sub-div",children:[e.jsx("div",{className:"main-sub-inner-div",children:e.jsxs("div",{className:"text-div",children:[e.jsx("div",{className:"big-text",children:"State Master Form"}),e.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),o===void 0?e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"add-button-master-div",children:e.jsxs("button",{onClick:()=>u("/state-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),o!==void 0?"":e.jsx(H,{listRoute:"/state",formRoute:"/state-form"}),e.jsx("div",{className:"details-div",children:e.jsx("span",{className:"detailes",children:"Details of State"})}),e.jsx("div",{className:"form-div",children:e.jsx("form",{onSubmit:s.handleSubmit,onChange:L,children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Country",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...s.getFieldProps("countryId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select country",children:[e.jsx("option",{value:"",children:"Select"}),m==null?void 0:m.map((t,a)=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.country_name}))]}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.countryId&&s.errors.countryId?s.errors.countryId:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["State",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...s.getFieldProps("stateName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter state"}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.stateName&&s.errors.stateName?s.errors.stateName:null})]})]}),e.jsxs("div",{className:"cancel-button-div",children:[e.jsx("div",{className:"    ",children:e.jsx("button",{onClick:()=>u("/state"),type:"button",className:"cancel-button",children:"Back to List"})}),e.jsx("div",{className:"submit-button-div",children:e.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:o!==void 0?"Update":"Save"})})]})]})})})]})})})}export{Y as default};
