import{r as c,u as V,O as T,c as I,a as m,b as O,j as t,B as R,A as f,e as x,g as U}from"./index-21aade66.js";import{B as $}from"./BottomErrorCard-c4e8289a.js";import{T as J}from"./Tabs-65330aff.js";function G(){const[y,h]=c.useState(!1),[j,N]=c.useState(null),[v,i]=c.useState(!1),[K,F]=c.useState([]),[u,w]=c.useState(),{api_getBusFeeFineData:A,api_postBusFeeFineData:D,api_editBusFeeFineData:E,api_getBusFeeFineDataById:B,api_getadmissionMonthtypeData:k}=U(),g=V(),{id:d}=T(),S=I({monthName:m().required("month Id is required feild"),dueDate:m().required("due date is required feild"),actualFineAmount:m().required("actual fine amount is required feild"),fineAmount:m().required("fine amount is required feild")}),o=O({initialValues:{monthName:"",dueDate:"",actualFineAmount:"",fineAmount:""},onSubmit:(e,a)=>{console.log("at submit ",e),_(e)},validationSchema:S}),_=e=>{i(!0);let a,s,n={monthName:e.monthName,dueDate:e.dueDate,actualFineAmount:e.actualFineAmount,fineAmount:e.fineAmount};d!==void 0?(a=E,s=n,s.id=d):(a=D,s=n),f.post(a,s,x()).then(function(r){var b,p;console.log("Bus fee fine master..",(b=r==null?void 0:r.data)==null?void 0:b.data),((p=r==null?void 0:r.data)==null?void 0:p.status)===!0?g("/busfeefine"):l(!0,"Error occured in submitting form."),i(!1)}).catch(function(r){console.log("==2 error list...",r),l(!0,"Error occured in submitting form."),i(!1)})},q=()=>{i(!0);let e={id:d};f.post(B,e,x()).then(function(a){var s,n;console.log("qwerty",a),(s=a==null?void 0:a.data)!=null&&s.status?C((n=a==null?void 0:a.data)==null?void 0:n.data):l(!0,"Error occured in submitting deactivation application. Please try again later."),i(!1)}).catch(function(a){console.log("= edit data error...",a),h(!0),i(!1)})},L=()=>{i(!0),f.post(k,{},x()).then(function(e){var a,s,n;console.log(e),((a=e==null?void 0:e.data)==null?void 0:a.status)===!0?w((s=e==null?void 0:e.data)==null?void 0:s.data):l(!0,`${(n=e==null?void 0:e.data)==null?void 0:n.message}`),i(!1)}).catch(function(e){l(!0,"Error occured while fetching data."),i(!1)})};console.log(u);const C=e=>{console.log("existing property details in prop address...",e),o.setFieldValue("id",e==null?void 0:e.id),o.setFieldValue("monthName",e==null?void 0:e.month_name),o.setFieldValue("dueDate",e==null?void 0:e.due_date),o.setFieldValue("actualFineAmount",e==null?void 0:e.actual_fine_amount),o.setFieldValue("fineAmount",e==null?void 0:e.fine_amount)},M=()=>{f.post(A,{},x()).then(function(e){var a,s;(a=e==null?void 0:e.data)!=null&&a.status?F((s=e==null?void 0:e.data)==null?void 0:s.data):l(!0,"Error occured while fetching data."),i(!1)}).catch(function(e){console.log("==2 error list...",e),l(!0,"Error occured while fetching data.")})};c.useEffect(()=>{L()},[]),c.useEffect(()=>{M(),d!==void 0&&q()},[]);const P=e=>{e.target.name,e.target.value},l=(e,a)=>{N(a),h(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"w-full col-span-10 2xl:py-3 2xl:px-4 px-4 py-2",children:t.jsxs("div",{className:"border-[2px] border-gray-200 rounded-md h-[84.2vh] 2xl:p-6 p-4 overflow-y-auto",children:[v&&t.jsx(R,{}),y&&t.jsx($,{activateBottomErrorCard:l,errorTitle:j}),t.jsxs("div",{className:"flex mb-10  items-start justify-start  max-[870px]:block",children:[t.jsx("div",{className:"flex-1 flex justify-start",children:t.jsxs("div",{className:"block",children:[t.jsx("div",{className:"text-4xl font-semibold text-gray-700 flex justify-start",children:"Bus Fee Fine Master List"}),t.jsx("div",{className:"text-gray-600 text-sm",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),d===void 0?t.jsx("div",{className:"flex-1 justify-end",children:t.jsx("div",{className:"flex justify-end items-end",children:t.jsxs("button",{onClick:()=>g("/busfeefine-form"),type:"submit",className:" px-6 py-2.5 w-auto bg-indigo-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:["Add"," "]})})}):null]}),d!==void 0?"":t.jsx(J,{listRoute:"/busfeefine",formRoute:"/busfeefine-form"}),t.jsx("div",{className:"mt-6 border-b",children:t.jsxs("span",{className:"text-lg font-noarml text-gray-500",children:["Details of Bus Fee Fine"," "]})}),t.jsx("div",{className:"w-full mb-6 mt-6 pb-10",children:t.jsx("form",{onSubmit:o.handleSubmit,onChange:P,children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-14",children:[t.jsxs("label",{for:"exampleEmail",className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Month Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("br",{}),t.jsxs("select",{name:"monthName",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",type:"select",onChange:o.handleChange,value:o.values.monthName,children:[t.jsx("option",{value:"",children:"Select"}),u==null?void 0:u.map(e=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.month_name}))]}),t.jsx("p",{className:"text-red-500 text-sm flex items-start justify-start ml-[40px]",children:o.touched.monthName&&o.errors.monthName?o.errors.monthName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Due Date",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...o.getFieldProps("dueDate"),type:"date",max:new Date().toISOString().split("T")[0],className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter due date"}),t.jsx("span",{className:"text-red-600  text-xs",children:o.touched.dueDate&&o.errors.dueDate?o.errors.dueDate:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Actual Fine Amount",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...o.getFieldProps("actualFineAmount"),type:"number",onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault(),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter actual fine amount"}),t.jsx("span",{className:"text-red-600  text-xs",children:o.touched.actualFineAmount&&o.errors.actualFineAmount?o.errors.actualFineAmount:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Fine Amount",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...o.getFieldProps("fineAmount"),type:"number",onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault(),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter action fine amount"}),t.jsx("span",{className:"text-red-600 text-xs",children:o.touched.fineAmount&&o.errors.fineAmount?o.errors.fineAmount:null})]})]}),t.jsxs("div",{className:"col-span-4 grid grid-cols-2 mt-10",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>g("/busfeefine"),type:"button",className:" px-6 py-2.5 bg-gray-200 hover:bg-gray-400 text-gray-700 font-medium text-xs leading-tight uppercase rounded shadow-md hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out",children:"Back to List"})}),t.jsx("div",{className:"md:px-10 text-right",children:t.jsx("button",{type:"submit",className:"cypress_next2_button px-6 py-2.5 bg-[#6AB783] text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out",children:d!==void 0?"Update":"Save"})})]})]})})})]})})})}export{G as default};
