import{j as e}from"./mui-8bd1858b.js";import{f as qe,r as m,u as Fe}from"./router-56e993c5.js";import{B as Te}from"./BarLoader-29e6d937.js";import{c as De,d as h,u as Ee,b as B,ad as Me,ab as u,C as ze,af as ie,G as Be,A as re,Q as Ue,B as Oe,n as p}from"./index-48939ba9.js";import{h as Ye}from"./useRazorPayForApp-00a62b48.js";import{a as Re}from"./axios-ab7cc016.js";import"./RazorpayPaymentScreen-157b41ea.js";import{b as Le}from"./ValidationFunction-10ed4d73.js";import{B as Ve}from"./BottomErrorCard-d92abeba.js";import{U as $e}from"./UseRazorpay-4579b10c.js";import"./CommonModal-6dd116f2.js";import{S as Qe}from"./ServerErrorCard-b2b9e929.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-98468b5d.js";import"./moment-a9aaa855.js";import"./redux-a3f69129.js";import"./i18next-2edfafb0.js";import"./index-1cc92de0.js";const Z=localStorage.getItem("citizenName"),J=localStorage.getItem("citizenMobile");function He(t){var I,A,D,y,c,f,g,i,N,U,R,q,F,T,z,C,E,xe,ue,be;const{handlePayment:K}=$e(),{propertyGenerateOrderId:v,propertyGenerateHoldingOrderId:X,propertyGenerateOrderIdDirect:k,api_getTransactionNoForReceipt:l,api_postPropertyPayment:de,api_postSafPayment:Ce,api_generatedreceipt:O}=ze(),{id:_,moduleType:r,userType:Y}=qe(),[ee,ce]=m.useState(""),[ae,b]=m.useState(!1),x=Fe();m.useState(!1);const[w,te]=m.useState(),[me,se]=m.useState(!1),[le,L]=m.useState(null),[ne,oe]=m.useState(!1),[V,$]=m.useState(null);let P;(r=="holding"||r=="direct")&&(P=De({paymentUptoYear:h().required("Select Payment upto year"),paymentUptoQuarter:h().required("Select payment upt quarter"),paymentMode:h(),remarks:h().required("Enter remarks"),payAdvance:h(),advanceAmount:h().when("payAdvance",{is:!0,then:h().required("Enter advance amount")})})),r=="saf"&&(P=De({paymentUptoYear:h(),paymentUptoQuarter:h(),paymentMode:h(),remarks:h(),payAdvance:h(),advanceAmount:h()}));const s=Ee({initialValues:{paymentUptoYear:"",paymentUptoQuarter:"",paymentMode:"ONLINE",remarks:"",payAdvance:"",advanceAmount:""},onSubmit:(a,d)=>{console.log("values at submit payment",a),W(a)},validationSchema:P}),Q=a=>{let d=a.target.name,n=a.target.value;d=="paymentMode"&&te(n),d=="payAdvance"&&se(a.target.checked),d=="paymentUptoQuarter"&&(t==null||t.fetchDemandDetail(n,s.values.paymentUptoYear)),d=="remarks"&&s.setFieldValue("remarks",ie(n,s.values.remarks,100)),d=="bankName"&&s.setFieldValue("bankName",ie(n,s.values.bankName,100)),d=="branchName"&&s.setFieldValue("branchName",ie(n,s.values.branchName,100)),d=="cheque_dd_no"&&s.setFieldValue("cheque_dd_no",Be(n,s.values.cheque_dd_no,20)),d=="advanceAmount"&&s.setFieldValue("advanceAmount",Le(n,s.values.advanceAmount,10))},H=async a=>{console.log("generateReceipt",a),console.log(a);let d={applicationId:a==null?void 0:a.applicationId,departmentId:a==null?void 0:a.departmentId,status:"",captured:"1",card_id:"",amount:a==null?void 0:a.amount,payment_method:"upi/netbanking",workflow_id:a==null?void 0:a.workflowId,user_id:a==null?void 0:a.user_id,ulb_id:a==null?void 0:a.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:a==null?void 0:a.razorpay_order_id,payment_id:a==null?void 0:a.razorpay_payment_id,created_at:""};console.log("Receipt",a),re.post(O,d,B()).then(n=>{var j;console.log("genereted receipt",n),n.data.status==!0?(console.log("Oder ID Generated ++++dddddddddddddddddddddddd+++++",n.data),G({orderId:a==null?void 0:a.razorpay_order_id,paymentId:a==null?void 0:a.razorpay_payment_id}),x(`/paymentReceipt/${(j=n==null?void 0:n.data)==null?void 0:j.data}/${r}`,{replace:!0})):Ue.error(n.data.message,"error")}).catch(n=>{console.log("Error genrating order id",n),Ue.error(n.message,"error")})},G=a=>{let d={orderId:a==null?void 0:a.razorpay_order_id,paymentId:a==null?void 0:a.razorpay_payment_id};Re.post(l,d,B()).then(function(n){var j,M;L((M=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:M.transaction_no),console.log("transaction no get response...",n==null?void 0:n.data),b(!1)}).catch(function(n){console.log("transaction no get error...",n),b(!1)})};console.log("demand details => ",(I=t==null?void 0:t.safPaymentDetailsData)==null?void 0:I.isPayable);const W=async a=>{var j,M,he;b(!0);let d,n;r=="holding"&&(d=X,n={propId:_,amount:(j=t==null?void 0:t.paymentDetails)==null?void 0:j.payableAmount,name:Z,contact:J,qtr:a==null?void 0:a.paymentUptoQuarter,fYear:a==null?void 0:a.paymentUptoYear}),r=="saf"&&(d=v,n={id:_,amount:(M=t==null?void 0:t.safPaymentDetailsData)==null?void 0:M.payableAmount,name:Z,contact:J}),r=="direct"&&(d=k,n={propId:_,amount:(he=t==null?void 0:t.paymentDetails)==null?void 0:he.payableAmount,name:Z,contact:J,qtr:a==null?void 0:a.paymentUptoQuarter,fYear:a==null?void 0:a.paymentUptoYear}),console.log("name....",Z,"....mobile..",J),console.log("orderidpayload at payment before...",n,"moduleId..",r),Re.post(d,n,B()).then(o=>{var fe,ge,pe,ye,Ne,je,ve,we,_e,Pe,ke,Se,Ie,Ae;console.log("Order Id Response ",o==null?void 0:o.data),window.ReactNativeWebView?Ye({generatedOrder:(fe=o==null?void 0:o.data)==null?void 0:fe.data,payload:{applicationId:(pe=(ge=o==null?void 0:o.data)==null?void 0:ge.data)==null?void 0:pe.applicationId,departmentId:(Ne=(ye=o==null?void 0:o.data)==null?void 0:ye.data)==null?void 0:Ne.departmentId,status:"",captured:"1",card_id:"",amount:(ve=(je=o==null?void 0:o.data)==null?void 0:je.data)==null?void 0:ve.amount,payment_method:"upi/netbanking",workflow_id:(_e=(we=o==null?void 0:o.data)==null?void 0:we.data)==null?void 0:_e.workflowId,user_id:(ke=(Pe=o==null?void 0:o.data)==null?void 0:Pe.data)==null?void 0:ke.userId,ulb_id:(Ie=(Se=o==null?void 0:o.data)==null?void 0:Se.data)==null?void 0:Ie.ulbId,user_id:localStorage.getItem("citizenId"),created_at:""},api:O,returnUrl:"/citizen/paymentReceipt",isParam:!1,moduleType:r}):K((Ae=o==null?void 0:o.data)==null?void 0:Ae.data,H),b(!1)}).catch(o=>{S(!0,"Error occured. Please try again later."),console.log("ERROR :-  Unable to Generate Order Id ",o),b(!1)})},S=(a,d)=>{$(d),oe(a)};return ee==!0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your payment has been successfully done !"}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>x(`/paymentReceipt/${le}/${r=="saf"?"saf":"holding"}`),children:"View Receipt"}),r!="direct"&&e.jsx("button",{className:"mr-4 max-sm:mt-2 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>x(`/propApplicationDetails/${_}`),children:"View Application"})]})]})})}):e.jsxs(e.Fragment,{children:[ae&&e.jsx(Te,{}),ne&&e.jsx(Ve,{activateBottomErrorCard:S,errorTitle:V}),e.jsx(Me,{position:"top-right",autoClose:2e3}),e.jsx("div",{className:" block p-4 mt-4 w-full md:py-4 md:px-40 md:pb-0 md:pt-0 rounded-lg shadow-lg bg-white md:w-full mx-auto  overflow-x-auto mb-20 ",children:e.jsx("div",{className:" block md:p-4 w-full md:py-6 rounded-lg bg-white mx-auto ",children:e.jsx("form",{onSubmit:s.handleSubmit,onChange:Q,className:"md:p-4 relative",children:e.jsxs("div",{className:"grid grid-cols-12",children:[r!="saf"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Upto Year"]}),e.jsxs("select",{...s.getFieldProps("paymentUptoYear"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(D=(A=t==null?void 0:t.paymentDetails)==null?void 0:A.paymentUptoYrs)==null?void 0:D.map((a,d)=>e.jsx("option",{selected:d==0,value:a,children:a}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentUptoYear&&s.errors.paymentUptoYear?s.errors.paymentUptoYear:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Upto Quarter"]}),e.jsxs("select",{...s.getFieldProps("paymentUptoQuarter"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(c=(y=t==null?void 0:t.paymentDetails)==null?void 0:y.paymentUptoQtrs)==null?void 0:c.map((a,d)=>e.jsx("option",{selected:d==0,value:a,children:a}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentUptoQuarter&&s.errors.paymentUptoQuarter?s.errors.paymentUptoQuarter:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),e.jsx("select",{...s.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:e.jsx("option",{value:"ONLINE",children:"Online"})}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentMode&&s.errors.paymentMode?s.errors.paymentMode:null})]}),Y!="direct"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Remarks"]}),e.jsx("input",{...s.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.remarks&&s.errors.remarks?s.errors.remarks:null})]}),(w=="CHEQUE"||w=="DD")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e.jsx("input",{...s.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.bankName&&s.errors.bankName?s.errors.bankName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e.jsx("input",{...s.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.branchName&&s.errors.branchName?s.errors.branchName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e.jsx("input",{...s.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.cheque_dd_no&&s.errors.cheque_dd_no?s.errors.cheque_dd_no:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e.jsx("input",{...s.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.cheque_dd_date&&s.errors.cheque_dd_date?s.errors.cheque_dd_date:null})]})]})]}),e.jsx("div",{className:"col-span-12"}),r!="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200 max-sm:px-2",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Total Tax :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((f=t==null?void 0:t.paymentDetails)==null?void 0:f.totalDues)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Advance Amount Paid :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((g=t==null?void 0:t.paymentDetails)==null?void 0:g.advanceAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((i=t==null?void 0:t.paymentDetails)==null?void 0:i.rebateAmt)})]}),r=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Late Assessment Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((N=t==null?void 0:t.paymentDetails)==null?void 0:N.lateAssPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Special Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((U=t==null?void 0:t.paymentDetails)==null?void 0:U.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"1% Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((R=t==null?void 0:t.paymentDetails)==null?void 0:R.onePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsx("span",{children:"Total Payable Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:u((q=t==null?void 0:t.paymentDetails)==null?void 0:q.payableAmount)})]})})]}),r=="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Total Tax :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((F=t==null?void 0:t.safPaymentDetailsData)==null?void 0:F.totalTax)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((T=t==null?void 0:t.safPaymentDetailsData)==null?void 0:T.rebateAmt)})]}),r=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Late Assessment Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((z=t==null?void 0:t.safPaymentDetailsData)==null?void 0:z.lateAssessmentPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Special Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((C=t==null?void 0:t.safPaymentDetailsData)==null?void 0:C.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"1% Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((E=t==null?void 0:t.safPaymentDetailsData)==null?void 0:E.totalOnePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsx("span",{children:"Total Payable Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:u((xe=t==null?void 0:t.safPaymentDetailsData)==null?void 0:xe.payableAmount)})]})})]}),e.jsxs("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[e.jsx("div",{className:""}),e.jsx("div",{className:"md:pl-10 text-right",children:e.jsxs("button",{type:"submit",className:"md:ml-4 font-bold px-6 py-2 bg-indigo-500 text-white  text-sm leading-tight uppercase rounded  hover:bg-indigo-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out shadow-xl border border-white",children:[e.jsx("span",{className:"mr-2",children:"Pay"}),r=="saf"&&u((ue=t==null?void 0:t.safPaymentDetailsData)==null?void 0:ue.payableAmount),r!="saf"&&u((be=t==null?void 0:t.paymentDetails)==null?void 0:be.payableAmount)]})})]})]})})})})]})}function xa(t){var V,$,P,s,Q,H,G,W,S,I,A,D;const[K,v]=m.useState(!1),[X,k]=m.useState(!1);m.useState();const[l,de]=m.useState(),[Ce,O]=m.useState();m.useState(!1);const[_,r]=m.useState(!1),[Y,ee]=m.useState(null),[ce,ae]=m.useState(null),{id:b,moduleType:x}=qe(),w=Fe(),{zeroDemandPayment:te,api_getDirectHoldingDemandById:me,api_getHoldingDemandById:se,api_getsafDemandById:le}=ze(),L=(y=null,c=null)=>{r(!1);let f,g;x=="holding"&&(f=se,g={propId:b,fYear:c,qtr:y}),x=="saf"&&(f=le,g={id:b}),x=="direct"&&(f=me,g={propId:b,fYear:c,qtr:y}),y!==null?k(!0):v(!0),console.log("before hit => ",g,f),re.post(f,g,B()).then(function(i){var N,U,R,q,F,T,z,C,E;console.log("payment details data...",i==null?void 0:i.data),de((N=i==null?void 0:i.data)==null?void 0:N.data),O(i==null?void 0:i.data),((R=(U=i==null?void 0:i.data)==null?void 0:U.data)==null?void 0:R.paymentStatus)==1&&w(`/viewDemand/${b}`),y!==null?k(!1):v(!1),ae((T=(F=(q=i==null?void 0:i.data)==null?void 0:q.data)==null?void 0:F.amounts)==null?void 0:T.isPayable),((E=(C=(z=i==null?void 0:i.data)==null?void 0:z.data)==null?void 0:C.amounts)==null?void 0:E.isPayable)==!1&&ne()}).catch(function(i){console.log("payment details error...",i),r(!0),y!==null?k(!1):v(!1)})},ne=()=>{v(!0),r(!1);let y={id:b,paymentMode:"Online"};re.post(te,y,B()).then(c=>{var f,g,i,N;console.log("response zero payment => ",c),(f=c==null?void 0:c.data)!=null&&f.status?(console.log("response zero payment => ",(g=c==null?void 0:c.data)==null?void 0:g.data),ee((N=(i=c==null?void 0:c.data)==null?void 0:i.data)==null?void 0:N.TransactionNo)):(console.log("false status response zero payment => ",c),r(!0))}).catch(c=>{console.log("error zero payment => ",c),r(!0)}).finally(()=>v(!1))};if(m.useEffect(()=>{L()},[b,x]),K)return e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),e.jsx("div",{className:"min-h-screen"})]});if(_)return e.jsx(Qe,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"});const oe=()=>{x!="direct"&&w(`/paymentReceipt/${Y}/${x=="saf"?"saf":"holding"}`),x=="direct"&&w(`/paymentReceipt/direct/${Y}/${x=="saf"?"saf":"holding"}`)};return e.jsxs(e.Fragment,{children:[X&&e.jsx(Te,{}),e.jsxs("div",{className:x=="direct"&&" p-4 mt-10",children:[e.jsx("div",{className:"w-full bg-white shadow-xl mb-6",children:e.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[x!="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((V=l==null?void 0:l.basicDetails)==null?void 0:V.holding_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Holding No."})]}),x=="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p(($=l==null?void 0:l.basicDetails)==null?void 0:$.saf_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Application No.(Saf No)"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((P=l==null?void 0:l.basicDetails)==null?void 0:P.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:p((s=l==null?void 0:l.basicDetails)==null?void 0:s.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"New Ward No"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:p((Q=l==null?void 0:l.basicDetails)==null?void 0:Q.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((H=l==null?void 0:l.basicDetails)==null?void 0:H.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((G=l==null?void 0:l.basicDetails)==null?void 0:G.zone_mstr_id)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Zone"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((W=l==null?void 0:l.basicDetails)==null?void 0:W.is_mobile_tower)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Mobile Tower(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-md",children:[p((S=l==null?void 0:l.basicDetails)==null?void 0:S.is_hoarding_board)," "]}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Hoarding Board(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:p((I=l==null?void 0:l.basicDetails)==null?void 0:I.is_petrol_pump)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Is property a Petrol Pump ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((A=l==null?void 0:l.basicDetails)==null?void 0:A.is_water_harvesting)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Rainwater harvesting provision ?"})]})]})]})}),e.jsx("div",{children:ce==!1?e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your application is successfully submitted !"}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>oe(),children:"View Receipt"}),x!="direct"&&e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>w(`/propApplicationDetails/${b}`),children:"View Application"})]})]})}):e.jsx(He,{fetchDemandDetail:L,safPaymentDetailsData:l==null?void 0:l.amounts,paymentDetails:l==null?void 0:l.duesList,ulbId:(D=l==null?void 0:l.basicDetails)==null?void 0:D.ulb_id})})]}),e.jsx("div",{className:"w-full h-40 md:none"})]})}export{xa as default};
