import{j as t,I as W}from"./mui-8bd1858b.js";import{r as d,u as de}from"./router-56e993c5.js";import{am as Oe,M as ie,B as me,an as Te,ao as Re,A as p,b as S,C as Ce}from"./index-48939ba9.js";import"./sweetalert2.esm.all-93f49e75.js";/* empty css              */import{w as ne,t as He,a as Ee,s as De,b as Ge,p as Ve}from"./septic-92c6194c.js";import{m as We,b as Me}from"./marriage-98e794b9.js";import{G as ze}from"./reactIcons-d26c0b2d.js";import{l as Ue}from"./lodge-40c4a41c.js";import{h as Fe}from"./useRazorPayForApp-00a62b48.js";import{U as Be}from"./UseRazorpay-4579b10c.js";import{a as he}from"./redux-a3f69129.js";import{a as Le}from"./index.esm-79e01f48.js";import{u as qe}from"./useSetLogout-ae72bfe3.js";import{l as $e}from"./localstorage-fbfe5679.js";import{P as Je}from"./PetRegAPIList-2ce7efbe.js";import"./axios-ab7cc016.js";import"./materialTailwind-98468b5d.js";import"./moment-a9aaa855.js";import"./i18next-2edfafb0.js";import"./index-1cc92de0.js";const Ye="/assets/rigmachine-fbcb41f9.jpeg",Ke="/assets/grievancelogo-44b8f316.svg",ce="/assets/property-fbb4f386.png";function Qe(n){return ze({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"}}]})(n)}const Xe="/assets/finesimg-e530d190.jpg",Ze="/assets/swm-1b451a03.png";function et(n){d.useState(!1);const g=()=>{n.navCloseStatus||(n.NAV_CLOSE(),n.NAV_CLOSE_ORIGINAL_STATUS()),n.navCloseStatus&&(n.NAV_OPEN(),n.NAV_OPEN_ORIGINAL_STATUS())};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full",children:[t.jsx("div",{className:"cursor-pointer bg-gray-100 p-2 rounded-lg",onClick:g,children:t.jsx(Oe,{color:"black",size:16})}),t.jsx("div",{className:"col-span-10",children:t.jsx("h4",{className:"text-white font-bold text-sm text-xl text-center",children:"JUIDCO"})})]})})}const tt=n=>({navCloseStatus:n.navCloseStatus}),at=n=>({NAV_OPEN:g=>n({type:"NAV_OPEN"}),NAV_CLOSE:g=>n({type:"NAV_CLOSE"}),NAV_OPEN_ORIGINAL_STATUS:g=>n({type:"NAV_OPEN_ORIGINAL_STATUS"}),NAV_CLOSE_ORIGINAL_STATUS:g=>n({type:"NAV_CLOSE_ORIGINAL_STATUS"})});he(tt,at)(et);const st={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};ie.setAppElement("#root");function rt(n){const[g,I]=d.useState(!1),[M,T]=d.useState(!0),[R,A]=d.useState(!1);setTimeout(()=>{T(!1)},1e4);function C(){I(!0)}function P(){I(!1)}const z=de(),H=()=>{!n.RightNavCloseStatus&&n.RIGHT_NAV_CLOSE(),n.RightNavCloseStatus&&n.RIGHT_NAV_OPEN()},U=()=>{A(!1),$e(),n.LOGOUT(),z("/")},E=()=>{qe(U)};return t.jsxs(t.Fragment,{children:[R&&t.jsx(me,{}),t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full pr-12",children:[t.jsx("div",{className:"cursor-pointer",children:t.jsx("div",{onClick:C,className:"bg-gray-100 p-2 rounded-lg relative",children:t.jsx(Te,{color:"black",size:16})})}),t.jsx("div",{className:"cursor-pointer",onClick:H,children:t.jsx("div",{className:"bg-gray-100 p-2 rounded-lg ml-16",children:t.jsx(Re,{color:"black",size:16})})})]}),t.jsx(ie,{isOpen:g,onRequestClose:P,style:st,contentLabel:"Example Modal",children:t.jsxs("div",{class:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[t.jsx("button",{onClick:P,type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:t.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:t.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),t.jsxs("div",{class:"p-6 text-center",children:[t.jsxs("div",{className:"w-full flex h-10",children:[" ",t.jsx("span",{className:"mx-auto",children:t.jsx(Le,{size:30})})]}),t.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure you want to logout ?"}),t.jsx("button",{type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:E,children:"Yes, I'm sure"})]})]})})]})}const lt=n=>({RightNavCloseStatus:n.RightNavCloseStatus,isLoggedIn:n.isLoggedIn}),ot=n=>({RIGHT_NAV_OPEN:g=>n({type:"RIGHT_NAV_OPEN"}),LOGOUT:g=>n({type:"LOGOUT"}),RIGHT_NAV_CLOSE:g=>n({type:"RIGHT_NAV_CLOSE"})});he(lt,ot)(rt);const Ot=()=>{var L,q,$,J,Y,K,Q,X,Z;const n=de(),{post_citizenDashboard:g,api_getProfileDetails:I,api_applicationCount:M,api_allModulePayment:T,generateDashboardOrderId:R,generateDashboardReceipt:A}=Ce(),{header:C}=Je(),{handlePayment:P}=Be(),[z,H]=d.useState([]),[U,E]=d.useState(null),[l,ge]=d.useState([]),[s,ue]=d.useState([]),[xe,c]=d.useState(!1),[fe,w]=d.useState(0),[F,be]=d.useState(!1),[y,D]=d.useState([]),[v,G]=d.useState([]),[Ne,nt]=d.useState([]),[k,V]=d.useState([]),[ct,B]=d.useState(),je=()=>{c(!0),p.post(g,{},S()).then(e=>{var o,r,a;(o=e==null?void 0:e.data)!=null&&o.status&&(H((a=(r=e==null?void 0:e.data)==null?void 0:r.data)==null?void 0:a.property),c(!1)),c(!1)}).catch(e=>console.error(e)),c(!1)},ye=()=>{c(!0),p.post(T,{},S()).then(e=>{var o,r,a;console.log((o=e==null?void 0:e.data)==null?void 0:o.data),(r=e==null?void 0:e.data)!=null&&r.status&&(ue((a=e==null?void 0:e.data)==null?void 0:a.data),c(!1)),c(!1)}).catch(e=>console.error(e)),c(!1)},pe=()=>{c(!0),p.post(I,{},S()).then(e=>{var o,r;(o=e==null?void 0:e.data)!=null&&o.status&&E((r=e==null?void 0:e.data)==null?void 0:r.data),c(!1),console.log("Getting Citizen details",e)}).catch(e=>console.error(e)),c(!1)},we=()=>{c(!0),p.post(M,{},S()).then(function(e){var o,r,a;console.log("fetched application count...",(o=e==null?void 0:e.data)==null?void 0:o.data),(r=e==null?void 0:e.data)!=null&&r.status&&(ge((a=e==null?void 0:e.data)==null?void 0:a.data),c(!1)),c(!1)}).catch(function(e){console.log("notification error......",e),c(!1)})};d.useEffect(()=>{je(),pe(),we(),ye()},[]);let _=[{navigation:"/propertyDashboard",image:ce,total:(l==null?void 0:l.propDetails)??0,name:"Property",isHref:!1},{navigation:"/water-dashboard",image:ne,total:(l==null?void 0:l.waterDetails)??0,name:"Water Connection(s)",isHref:!1},{navigation:"/trade-dashboard",image:He,total:(l==null?void 0:l.tradeDetails)??0,name:"Trade License(s)",isHref:!1},{navigation:"/fines",image:Xe,total:(l==null?void 0:l.finesDetails)??0,name:"Fines & Penalties",isHref:!1},{navigation:"/advertisement-dashboard",image:Ee,total:(l==null?void 0:l.advertisementDetails)??0,name:"Advertisement",isHref:!1},{name:"Lodge & Banquet Registration",navigation:"/marketingDashboard",image:Ue,total:(l==null?void 0:l.lodgeBanquetDetails)??0,isHref:!1},{navigation:"/marriage-index",image:We,total:(l==null?void 0:l.marriageDetails)??0,name:"Marriage Registration",isHref:!1},{navigation:"/septicTankDashboard",image:De,total:(l==null?void 0:l.septicTankerDetails)??0,name:"Septic Tank",isHref:!1},{navigation:"/waterTankerDashboard",image:Ge,total:(l==null?void 0:l.waterTankerDetails)??0,name:"Water Tank",isHref:!1},{navigation:"/pet-registration-dashboard",image:Ve,total:(l==null?void 0:l.petDetails)??0,name:"Pet Registration",isHref:!1},{navigation:"/vehicle-registration-dashboard",image:Ye,total:(l==null?void 0:l.rigDetails)??0,name:"Rig Registration",isHref:!1},{navigation:`${window.location.origin}/grievance/citizen-dashboard/home`,image:Ke,total:(l==null?void 0:l.grievanceDetails)??0,name:"Grievance",isHref:!0}];console.log("module data===>",l);const O=(e,o,r)=>{const a=e.reduce((x,i)=>{var u;const m=(u=s==null?void 0:s.propDetails)==null?void 0:u.find(b=>b.id===i),f=parseFloat(m==null?void 0:m.total_demand_amount)||0;return x+f},0),h=o.reduce((x,i)=>{var u;const m=(u=s==null?void 0:s.waterDetails)==null?void 0:u.find(b=>b.id===i),f=parseFloat(m==null?void 0:m.total_demand_amount)||0;return x+f},0),N=r.reduce((x,i)=>{var u;const m=(u=s==null?void 0:s.swmDetails)==null?void 0:u.find(b=>b.id===i),f=parseFloat(m==null?void 0:m.amount)||0;return x+f},0),j=a+h+N;return Number(j).toFixed(2)},ve=()=>{var o,r,a;const e=!F;if(be(e),e){const h=((o=s==null?void 0:s.propDetails)==null?void 0:o.map(i=>i.id))||[],N=((r=s==null?void 0:s.waterDetails)==null?void 0:r.map(i=>i.id))||[],j=((a=s==null?void 0:s.swmDetails)==null?void 0:a.map(i=>i.id))||[];D(h),G(N),V(j);const x=O(h,N,j);w(x)}else D([]),G([]),V([]),w("0.00")},_e=e=>{D(o=>{const r=o.includes(e)?o.filter(h=>h!==e):[...o,e],a=O(r,v,k);return w(a),r})},Se=e=>{G(o=>{const r=o.includes(e)?o.filter(h=>h!==e):[...o,e],a=O(y,r,k);return w(a),r})},Ie=e=>{V(o=>{const r=o.includes(e)?o.filter(h=>h!==e):[...o,e],a=O(y,v,r);return w(a),r})},Ae=()=>{var o,r;(o=(s==null?void 0:s.propDetails)||[])==null||o.filter(a=>y.includes(a.id));const e=(r=(s==null?void 0:s.waterDetails)||[])==null?void 0:r.filter(a=>v.includes(a.id));Pe(e)},Pe=e=>{c(!0);const o=e.map(a=>({consumerId:a.consumer_id,amount:a.total_demand_amount,paymentMode:"Online",demandFrom:a.demand_from,demandUpto:a.demand_upto,remarks:"Ok"}));let r={propId:y,consumerDetails:o};console.log(r),p.post(R,r,S()).then(function(a){var h,N,j,x,i,m,f,u,b,ee,te,ae,se,re,le,oe;console.log("fetched application count...",a),(h=a==null?void 0:a.data)!=null&&h.status?(c(!1),window.ReactNativeWebView?Fe({generatedOrder:(N=a==null?void 0:a.data)==null?void 0:N.data,payload:{applicationId:(x=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:x.applicationId,departmentId:(m=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:m.departmentId,status:"",captured:"1",card_id:"",amount:(u=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:u.amount,payment_method:"upi/netbanking",workflow_id:(ee=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:ee.workflowId,user_id:(ae=(te=a==null?void 0:a.data)==null?void 0:te.data)==null?void 0:ae.userId,ulb_id:(re=(se=a==null?void 0:a.data)==null?void 0:se.data)==null?void 0:re.ulbId,created_at:""},api:A,returnUrl:"/citizen/dashboardPaymentHistory",isParam:!0}):(P((le=a==null?void 0:a.data)==null?void 0:le.data,ke),c(!1),console.log((oe=a==null?void 0:a.data)==null?void 0:oe.data))):c(!1)}).catch(function(a){console.log("notification error......",a),c(!1)})},ke=async e=>{console.log(e,"generateReceipt"),c(!0);let o={applicationId:e==null?void 0:e.applicationId,departmentId:e==null?void 0:e.departmentId,status:"",captured:"1",card_id:"",amount:e==null?void 0:e.amount,payment_method:"upi/netbanking",workflow_id:e==null?void 0:e.workflowId,user_id:e==null?void 0:e.user_id,ulb_id:e==null?void 0:e.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:e==null?void 0:e.orderId,payment_id:e==null?void 0:e.razorpay_payment_id,created_at:""};console.log("Receipt",e),p.post(A,o,C).then(r=>{console.log("genereted receipt",r),B(!1),r.data.status==!0?(console.log("Oder ID Generated +++++++++",r.data),n("/dashboardPaymentHistory"),c(!1)):(notify(r.data.message,"error"),c(!1))}).catch(r=>{B(!1),console.log("Error genrating order id",r),notify(r.message,"error"),c(!1)})};return t.jsxs(t.Fragment,{children:[xe&&t.jsx(me,{}),t.jsxs("div",{className:"grid grid-cols-12 h-screen bg-white mx-4 md:mx-0",children:[t.jsxs("div",{className:" md:ml-11 mt-12 col-span-12 md:col-span-8 order-last md:order-first",children:[t.jsx("h1",{className:"text-2xl font-semibold max-sm:text-center",children:"All E-Governance Services"}),t.jsxs("div",{className:"flex flex-wrap gap-x-[4rem] gap-y-3 mt-10 bg-white  max-sm:justify-center max-sm:mb-20",children:[console.log("Line 170",_),Array.isArray(_)&&(_==null?void 0:_.map(e=>t.jsx("div",{onClick:()=>{e.isHref?window.location.href=e.navigation:n(e==null?void 0:e.navigation)},className:"md:w-40 h-26 bg-white rounded-lg shadow-sm max-sm:w-full cursor-pointer",children:t.jsx("div",{className:"md:w-52 max-sm:w-full h-28 bg-white rounded-lg shadow-xl pl-2",children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsxs("div",{className:"col-span-3 ",children:[t.jsx("div",{className:"w-10 h-10 rounded-full m-2 flex justify-center items-center",children:t.jsx("img",{src:e.image,alt:"",className:"w-8 h-8 rounded-full"})}),t.jsx("div",{className:"w-10 h-10 rounded-full mt-4 font-semibold flex justify-center items-center",children:(e==null?void 0:e.total)==0?"":e==null?void 0:e.total})]}),t.jsx("div",{className:"col-span-9 ml-4 ",children:t.jsx("h1",{className:"font-semibold text-sm mt-1 cursor-pointer",children:e.name})})]})})},e.id))),t.jsx("div",{className:"w-52 h-28shadow-xl pl-2",children:t.jsx("div",{className:"flex justify-center items-center w-full h-full ",children:t.jsxs("span",{className:"hover:bg-gray-200 p-6 rounded-full cursor-pointer",onClick:()=>n("/propertyDashboard"),children:[" ",t.jsx(Qe,{className:"text-3xl"})]})})})]})]}),t.jsxs("div",{className:"col-span-12 md:col-span-4 order-1 md:order-last pr-10 pt-5 ml-[2rem]",children:[t.jsx("div",{className:"flex justify-center items-center w-full mt-10 font-semibold text-xl",children:t.jsxs("div",{className:"w-full bg-white shadow-lg rounded-md px-4 py-2",children:[t.jsxs("div",{className:"bg-blue-500 px-4 py-2 rounded-lg text-white flex items-center justify-center space-x-2",children:[t.jsx("img",{src:Me,alt:"Bell Icon",className:"w-6 h-6"}),t.jsx("h1",{className:"text-lg font-semibold",children:"Pending Demands"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:ce,alt:"Property Icon",className:"w-6 h-6 mr-2"}),"Property"]}),((L=s==null?void 0:s.propDetails)==null?void 0:L.length)!=0&&((q=s==null?void 0:s.waterDetails)==null?void 0:q.length)!=0&&(($=s==null?void 0:s.swmData)==null?void 0:$.length)!=0&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{htmlFor:"selectAll",className:"font-semibold mr-2 text-lg",children:"Select All"}),t.jsx("input",{type:"checkbox",id:"selectAll",checked:F,onChange:ve,className:"w-6 h-4"})]})]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Holding No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((J=s==null?void 0:s.propDetails)==null?void 0:J.length)>0?(Y=s==null?void 0:s.propDetails)==null?void 0:Y.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.holding_no}),t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.total_demand_amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:y.includes(e.id),onChange:()=>_e(e.id,e.total_demand_amount)})})]},e.id)):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(W,{})," No Pending Dues"]})})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:ne,alt:"Water Icon",className:"w-6 h-6 mr-2"}),"Water"]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Consumer No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((K=s==null?void 0:s.waterDetails)==null?void 0:K.length)>0?t.jsx(t.Fragment,{children:(Q=s==null?void 0:s.waterDetails)==null?void 0:Q.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.consumer_no}),t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.total_demand_amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:v.includes(e.id)||Ne.includes(e),onChange:()=>Se(e.id,e.total_demand_amount)})})]},e.id))}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(W,{})," No Pending Dues"]})})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:Ze,alt:"SWM Icon",className:"w-6 h-6 mr-2"}),"SWM"]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center ",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Consumer No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((X=s==null?void 0:s.swmDetails)==null?void 0:X.length)>0?t.jsx(t.Fragment,{children:(Z=s==null?void 0:s.swmDetails)==null?void 0:Z.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e.consumerNo}),t.jsx("td",{className:"border border-gray-500 ",children:e.amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:k.includes(e.id),onChange:()=>Ie(e.id,e.amount)})})]},e.id))}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(W,{})," No Pending Dues"]})})})]})]}),(y.length>0||v.length>0||k.length>0)&&t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("p",{className:"font-semibold text-lg",children:["Total Amount : ",fe]}),t.jsx("button",{onClick:Ae,className:"bg-green-500 text-white px-2 py-1 rounded-lg hover:bg-green-600 ",children:"Pay Now"})]})]})}),t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx("button",{onClick:()=>n("/dashboardPaymentHistory"),className:"bg-blue-500 px-3 py-1.5 rounded-md text-white text-sm font-medium shadow-md hover:bg-blue-600 active:bg-blue-700 transition duration-200",children:"Payment History"})})]})]})]})};export{Ot as default};
