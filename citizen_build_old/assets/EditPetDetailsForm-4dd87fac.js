import{j as t}from"./mui-8bd1858b.js";import{b as M,r as c,f as I,u as C}from"./router-56e993c5.js";import{M as v,o as k,W as z,b as $,c as D,d as l,u as Z,A as H,Y as U}from"./index-48939ba9.js";import{P as W}from"./PetRegAPIList-2ce7efbe.js";import{a as Y}from"./axios-ab7cc016.js";const J="/assets/pet-house-eb86d7fa.png",Q={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",background:"transparent"}},e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"};v.setAppElement("#root");function ie(d){var f,j;const o=d==null?void 0:d.applicationData,[O,b]=M.useState(!1);c.useState(),c.useState();const[n,R]=c.useState();c.useState(!1);const[S,m]=c.useState(!1),[V,N]=c.useState(!1),{notify:g}=c.useContext(k);c.useState(),c.useState();const{id:q,appId:X}=I();console.log("pet data in Edit pet details"),C();const{api_PetRegistrationApplyForm:y,api_PetRegistrationMaster:w,api_peteditdetails:P,api_ListOfSafHolding:ee,api_getUserDetailsByHoldingSaf:te,header1:L}=W();z();const _=$();function T(){b(!0)}c.useEffect(()=>{T()},[]);function A(){}function u(){b(!1),d.clear()}c.useEffect(()=>{s.setFieldValue("petType",o==null?void 0:o.pet_type),s.setFieldValue("petName",o==null?void 0:o.pet_name),s.setFieldValue("petGender",o==null?void 0:o.sex),s.setFieldValue("petBirthDate",o==null?void 0:o.dob),s.setFieldValue("breed",o==null?void 0:o.breed),s.setFieldValue("color",o==null?void 0:o.color),s.setFieldValue("doctorName",o==null?void 0:o.vet_doctor_name),s.setFieldValue("doctorRegNo",o==null?void 0:o.doctor_registration_no),s.setFieldValue("dateOfRabies",o==null?void 0:o.rabies_vac_date),s.setFieldValue("dateOfLepVaccine",o==null?void 0:o.leptospirosis_vac_date),s.setFieldValue("petFrom",o==null?void 0:o.occurrence_type_id)},[o]);const B=D({petType:l().required("Kindly enter a value."),petName:l().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:l().required("Kindly enter a value."),petBirthDate:l().required("Kindly enter a value."),breed:l().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:l().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:l().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:l().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:l().required("Kindly enter a value."),dateOfLepVaccine:l().required("Kindly enter a value."),petFrom:l().required("Kindly enter a value.")}),s=Z({initialValues:{petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(r,i)=>{K(r),E(r)},validationSchema:B}),G=r=>{r.target.name,r.target.value,N(!1)},E=r=>{m(!0);const i={id:q,petType:r.petType,petName:r.petName,petGender:r.petGender,petBirthDate:r.petBirthDate,breed:r.breed,color:r.color,doctorName:r.doctorName,doctorRegNo:r.doctorRegNo,dateOfRabies:r.dateOfRabies,dateOfLepVaccine:r.dateOfLepVaccine,petFrom:r.petFrom};Y.post(P,i,_).then(a=>{var p,x,h;m(!1),a.data.status?(console.log("Form updated successfully"),u(),g((p=a==null?void 0:a.data)==null?void 0:p.message,"success"),window.location.reload(),d.data(a.data.data),console.log("Updated data:",a.data.data),d.screen(2),u()):(g((x=a==null?void 0:a.data)==null?void 0:x.message,"error"),N((h=a==null?void 0:a.data)==null?void 0:h.message),console.log("Failed to update pet details"))}).catch(a=>{var p,x,h,F;N((x=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:x.error),m(!1),console.log("Error while updating pet details:",(F=(h=a==null?void 0:a.response)==null?void 0:h.data)==null?void 0:F.error)})},K=r=>{m(!0);const i={petType:r==null?void 0:r.petType,petName:r==null?void 0:r.petName,petGender:r==null?void 0:r.petGender,petBirthDate:r==null?void 0:r.petBirthDate,breed:r==null?void 0:r.breed,color:r==null?void 0:r.color,doctorName:r==null?void 0:r.doctorName,doctorRegNo:r==null?void 0:r.doctorRegNo,dateOfRabies:r==null?void 0:r.dateOfRabies,dateOfLepVaccine:r==null?void 0:r.dateOfLepVaccine,petFrom:r==null?void 0:r.petFrom};return console.log("complete upload payload",i),m(!1)};return c.useEffect(()=>{H.post(w,{},L).then(r=>{r.data.status?(R(r.data.data),console.log("pet master data",r.data)):console.log("Error fetching pet master list")}).catch(r=>{console.log("Error while getting pet master list")})},[]),t.jsx("div",{className:"overflow-auto",children:t.jsx(v,{isOpen:O,onAfterOpen:A,onRequestClose:u,style:Q,contentLabel:"Example Modal",children:t.jsxs("div",{className:"bg-white shadow-xl max-sm:h-[35rem] p-4 border border-gray-200 my-3 relative rounded-md overflow-auto",children:[t.jsx("div",{onClick:()=>u(),className:"absolute top-2 right-3 cursor-pointer hover:underline",children:t.jsx(U,{className:"text-2xl hover:bg-slate-300 shadow-lg"})}),t.jsxs("h1",{className:"px-1 font-semibold font-serif text-xs mt-2 text-[#37517e]",children:[t.jsx("img",{src:J,alt:"Pet Detail",className:"w-5 inline text-[#37517e]"})," Pet Details"]}),t.jsxs("form",{onSubmit:s.handleSubmit,onChange:G,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 py-2",children:[t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petType",children:["Pet Type",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsxs("select",{...s.getFieldProps("petType"),type:"text",name:"petType",className:e==null?void 0:e.textFiled,children:[t.jsx("option",{value:"",children:"Select"}),t.jsx("option",{value:"1",children:"Dog"})]}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petType&&s.errors.petType?s.errors.petType:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petName",children:["Name of Pet",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:e==null?void 0:e.textFiled}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petName&&s.errors.petName?s.errors.petName:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petGender",children:["Gender",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsxs("select",{...s.getFieldProps("petGender"),type:"text",name:"petGender",className:e==null?void 0:e.textFiled,children:[t.jsx("option",{value:"",children:"Select"}),(f=n==null?void 0:n.petGender)==null?void 0:f.map((r,i)=>t.jsx("option",{value:r.id,children:r.pet_gender},i))]}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petGender&&s.errors.petGender?s.errors.petGender:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petBirthDate",children:["Date of Birth",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petBirthDate&&s.errors.petBirthDate?s.errors.petBirthDate:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"breed",children:["Breed",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("breed"),type:"text",maxLength:"20",name:"breed",className:e==null?void 0:e.textFiled}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.breed&&s.errors.breed?s.errors.breed:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"color",children:["Color",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("color"),type:"text",maxLength:"20",name:"color",className:e==null?void 0:e.textFiled}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.color&&s.errors.color?s.errors.color:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorName",children:["Veterinary Doctor Name",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("doctorName"),type:"text",maxLength:"70",name:"doctorName",className:e==null?void 0:e.textFiled}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.doctorName&&s.errors.doctorName?s.errors.doctorName:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorRegNo",children:["Doctorâ€™s MSVC/VCI number ",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("doctorRegNo"),type:"text",maxLength:"70",name:"doctorRegNo",className:e==null?void 0:e.textFiled}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.doctorRegNo&&s.errors.doctorRegNo?s.errors.doctorRegNo:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfRabies",children:["Date of Rabies",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("dateOfRabies"),type:"date",name:"dateOfRabies",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.dateOfRabies&&s.errors.dateOfRabies?s.errors.dateOfRabies:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfLepVaccine",children:["Leptospirosis Vaccination Date",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsx("input",{...s.getFieldProps("dateOfLepVaccine"),type:"date",name:"dateOfLepVaccine",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.dateOfLepVaccine&&s.errors.dateOfLepVaccine?s.errors.dateOfLepVaccine:null})]}),t.jsxs("div",{className:"m-3",children:[t.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petFrom",children:["Pet From",t.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),t.jsxs("select",{...s.getFieldProps("petFrom"),name:"petFrom",className:e==null?void 0:e.textFiled,children:[t.jsx("option",{value:"",children:"Select"}),(j=n==null?void 0:n.occurenceType)==null?void 0:j.map((r,i)=>t.jsx("option",{value:r.id,children:r.occurrence_types},i))]}),t.jsx("p",{className:"text-red-500 text-xs",children:s.touched.petFrom&&s.errors.petFrom?s.errors.petFrom:null})]})]}),t.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:V}),t.jsx("div",{className:"flex justify-center my-5",children:S?t.jsx("p",{children:"Form Submitting.."}):t.jsx("button",{type:"submit",className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow",children:"Submit Application"})})]})]})})})}export{ie as E,J as p};
