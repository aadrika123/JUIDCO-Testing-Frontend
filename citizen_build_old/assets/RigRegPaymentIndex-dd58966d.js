import{j as e}from"./mui-8bd1858b.js";import{r as x,u as de,f as ne}from"./router-56e993c5.js";import{P as xe}from"./PetRegAPIList-2ce7efbe.js";import{o as re,w as ce,R as ie,A as o}from"./index-48939ba9.js";import{S as J}from"./ShimmerEffectInline-8a93c570.js";import{h as ae}from"./moment-a9aaa855.js";import"./RazorpayPaymentScreen-157b41ea.js";import{U as le}from"./UseRazorpay-4579b10c.js";import{h as oe}from"./useRazorPayForApp-00a62b48.js";import"./axios-ab7cc016.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-98468b5d.js";import"./redux-a3f69129.js";import"./i18next-2edfafb0.js";import"./index-1cc92de0.js";const Re=()=>{var g,b,y,p,_,u,w,I,A,P,R,k,C,S,M,E,O;const{handlePayment:K}=le(),[s,m]=x.useState(),[h,l]=x.useState(!1),[Q,N]=x.useState(!1),[X,r]=x.useState();x.useState();const{notify:a}=x.useContext(re),c=de(),{id:f}=ne(),{api_RigApplicationDetailsById:Z,api_RigOrderIdGenerate:D,api_RigPaymentSaveResponse:me,header1:F,header:j,api_generatedreceipt:v}=xe(),ee=()=>{l(!0),o.post(Z,{applicationId:f},F).then(t=>{l(!1),t.data.status?(m(t.data.data),console.log(t.data.data)):(N(!0),m(null),console.log("Failed to fetch application data"))}).catch(t=>{l(!1),N(!0),console.log("Error while getting application data")})};x.useEffect(()=>{ee()},[]);const se=async t=>{console.log(t);let d={applicationId:t==null?void 0:t.applicationId,departmentId:t==null?void 0:t.departmentId,status:"",captured:"1",card_id:"",amount:t==null?void 0:t.amount,payment_method:"upi/netbanking",workflow_id:t==null?void 0:t.workflowId,user_id:t==null?void 0:t.user_id,ulb_id:t==null?void 0:t.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:t==null?void 0:t.orderId,payment_id:t==null?void 0:t.razorpay_payment_id,created_at:""};console.log("Receipt",t),o.post(v,d,j).then(n=>{var i;console.log("genereted receipt",n),r(!1),n.data.status==!0?(console.log("Oder ID Generated +++++++++",n.data),c(`/vehicle-payment-receipt/${(i=n==null?void 0:n.data)==null?void 0:i.data}`)):a(n.data.message,"error")}).catch(n=>{r(!1),console.log("Error genrating order id",n),a(n.message,"error")})},te=()=>{r(!0);const t={applicationId:f};console.log("Payment Button Clicked..",t),o.post(D,t,j).then(d=>{var n,i,U,W,z,G,T,Y,L,H,V,$,B,q;console.log("Oder ID Generated",d),r(!1),d.data.status==!0?window.ReactNativeWebView?oe({generatedOrder:(n=d==null?void 0:d.data)==null?void 0:n.data,payload:{applicationId:(U=(i=d==null?void 0:d.data)==null?void 0:i.data)==null?void 0:U.applicationId,departmentId:(z=(W=d==null?void 0:d.data)==null?void 0:W.data)==null?void 0:z.departmentId,status:"",captured:"1",card_id:"",amount:(T=(G=d==null?void 0:d.data)==null?void 0:G.data)==null?void 0:T.amount,payment_method:"upi/netbanking",workflow_id:(L=(Y=d==null?void 0:d.data)==null?void 0:Y.data)==null?void 0:L.workflowId,user_id:(V=(H=d==null?void 0:d.data)==null?void 0:H.data)==null?void 0:V.userId,ulb_id:(B=($=d==null?void 0:d.data)==null?void 0:$.data)==null?void 0:B.ulbId,created_at:""},api:v,returnUrl:"/citizen/vehicle-payment-receipt",isParam:!1}):K((q=d==null?void 0:d.data)==null?void 0:q.data,se):a(d.data.message,"error")}).catch(d=>{r(!1),console.log("Error genrating order id",d),a(d.message,"error")})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-12 mb-20",children:e.jsxs("div",{className:"rounded-md col-span-12",children:[e.jsxs("p",{className:"text-center text-xl font-semibold mx-5 text-gray-700",children:[" ","YOUR APPLICATION No : ",(s==null?void 0:s.application_no)||"N/A"," "]}),Q==!0?e.jsx("p",{className:"m-auto mt-10 font-semibold border border-gray-300 text-red-700 bg-red-100 px-5 py-2 rounded shadow w-fit",children:"Failed to Get Data"}):e.jsxs("div",{className:"overflow-y-auto",children:[e.jsx("div",{className:"bg-white shadow-xl p-4 border border-gray-200 my-3",children:h?e.jsx(J,{}):e.jsxs("div",{className:"mt-2 space-y-5 max-sm:flex max-sm:flex-col",children:[e.jsxs("div",{className:"flex space-x-10 pl-4  max-sm:space-x-0 max-sm:flex-col max-sm:space-y-2",children:[e.jsxs("div",{className:"flex-1 text-xs",children:[e.jsx("div",{className:"text-[#37517e]",children:"Citizen Name"}),e.jsx("div",{className:"font-bold text-sm text-[#37517e]",children:s!=null&&s.applicant_name?s==null?void 0:s.applicant_name:"N/A"})]}),e.jsxs("div",{className:"flex-1 text-xs",children:[e.jsx("div",{className:"text-[#37517e]",children:"Mobile Number"}),e.jsx("div",{className:"font-bold text-sm text-[#37517e]",children:s!=null&&s.mobile_no?s==null?void 0:s.mobile_no:"N/A"})]})]}),e.jsx("div",{className:"flex space-x-10 pl-4  max-sm:space-x-0 max-sm:flex-col max-sm:space-y-3",children:e.jsxs("div",{className:"flex-1 text-xs",children:[e.jsx("div",{className:"text-[#37517e]",children:"Email"}),e.jsx("div",{className:"font-bold text-sm text-[#37517e]",children:s!=null&&s.email?s==null?void 0:s.email:"N/A"})]})}),e.jsxs("div",{className:"flex space-x-10 pl-4  max-sm:space-x-0 max-sm:flex-col max-sm:space-y-2",children:[e.jsxs("div",{className:"flex-1 text-xs",children:[e.jsx("div",{className:"text-[#37517e]",children:"VIN Number / CH No."}),e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:s!=null&&s.vehicle_name?s==null?void 0:s.vehicle_name:"N/A"})]}),e.jsxs("div",{className:"flex-1 text-xs",children:[e.jsx("div",{className:"text-[#37517e]",children:"Registration Number"}),e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:s!=null&&s.vehicle_no?s==null?void 0:s.vehicle_no:"N/A"})]})]})]})}),e.jsxs("div",{className:"bg-white shadow-xl p-4 border border-gray-200",children:[e.jsxs("h1",{className:"px-1 font-semibold font-serif text-xs mt-2 text-[#37517e]",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/8948/8948774.png",alt:"Upload",className:"w-5 inline text-[#37517e]"})," ","Payment Details"]}),h?e.jsx(J,{}):((g=s==null?void 0:s.documentDetails)==null?void 0:g.doc_upload_status)==!1?e.jsx("div",{className:"text-center text-indigo-600",children:"Payment Pending :- Please Upload Document First"}):(y=(b=s==null?void 0:s.documentDetails)==null?void 0:b.connectionCharges)!=null&&y.paid_status?e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex space-x-10 pl-4 ",children:[e.jsx("div",{className:"text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Sl."})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Trans No"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Amount"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Payment Mode"})}),e.jsx("div",{className:" text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Status"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Payment Date"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Action"})})]}),((p=s==null?void 0:s.waterTransDetail)==null?void 0:p.length)>0&&((_=s==null?void 0:s.waterTransDetail)==null?void 0:_.map((t,d)=>e.jsxs("div",{className:"flex space-x-10 pl-4 my-2 border-b border-y-gray-200",children:[e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"font-semibold text-sm text-[#37517e]",children:[d+1,"."]})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:(t==null?void 0:t.tran_no)||"N/A"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-bold text-sm text-[#37517e]",children:(t==null?void 0:t.amount)||"N/A"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:(t==null?void 0:t.payment_mode)||"N/A"})}),e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"font-semibold text-sm text-[#37517e]",children:[(t==null?void 0:t.verify_status)==1&&"Paid",(t==null?void 0:t.verify_status)==2&&"Processing"]})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-semibold text-xs text-[#37517e]",children:(t==null?void 0:t.created_at)||"N/A"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:e.jsx("button",{className:"hover:border-b-2 border-blue-500 hover:text-blue-500",onClick:()=>c(`/waterConnReceipt/${t==null?void 0:t.tran_no}`),children:"Print Receipt"})})})]},d)))]}):e.jsxs("div",{children:[((u=s==null?void 0:s.charges)==null?void 0:u.paid_status)==0&&e.jsxs("div",{className:"bg-white shadow-2xl border border-blue-200 md:p-1 md:m-5 rounded-md max-sm:flex max-sm:flex-col",children:[e.jsxs("div",{className:" border-b-2 py-1 pl-3 font-semibold border-red-400 flex",children:[e.jsx(ce,{size:20,className:"mt-0.5 mr-1"}),"Make Payment"," "]}),e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("img",{src:"https://img.freepik.com/free-vector/hand-holding-phone-with-credit-card-screen-man-making-purchase-shopping-paying-online-using-banking-app-flat-vector-illustration-transaction-e-commerce-concept_74855-26014.jpg?w=1380&t=st=1686898919~exp=1686899519~hmac=4b0ddb44860ec647fa33a1a0416ea0c1cc8167693a13fdba3f09058d099f0e76",alt:"My Image",width:200,height:100})}),e.jsxs("div",{className:"flex justify-center max-sm:flex-col items-center",children:[e.jsx("div",{className:"font-semibold text-xl text-gray-500",children:e.jsx("p",{children:"Application No:  "})}),e.jsx("p",{className:"font-semibold text-2xl text-gray-800",children:s==null?void 0:s.application_no})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-2xl text-green-500",children:e.jsx("p",{children:"Amount : Rs  "})}),e.jsxs("p",{className:"font-semibold text-2xl text-green-500",children:[" ",((w=s==null?void 0:s.charges)==null?void 0:w.amount)||"N/A"]})]}),e.jsxs("h1",{className:"text-center font-semibold",children:["Application Type :"," ",((I=s==null?void 0:s.charges)==null?void 0:I.charge_category_name)=="New_Apply"?"New Apply":(A=s==null?void 0:s.charges)==null?void 0:A.charge_category_name]}),e.jsx("div",{className:"md:col-span-12 col-span-12 md:mt-5 mt-2",children:e.jsx("div",{className:"text-center font-extralight px-2 rounded",children:e.jsx("p",{children:"Note : You can pay using Card / UPI / Netbanking / Wallet etc."})})}),e.jsx("div",{className:"col-span-12 md:mt-5 mt-2 pb-5",children:e.jsx("div",{className:"flex justify-center",children:X?e.jsx(ie,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c(-1),className:"mx-3 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-2 text-sm rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:te,className:"mx-3 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-5 py-2 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})})]}),((P=s==null?void 0:s.charges)==null?void 0:P.paid_status)==2&&e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:"text-center font-semibold text-yellow-500",children:[" ","Payment pending."]})]}),((R=s==null?void 0:s.charges)==null?void 0:R.paid_status)==1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center font-semibold text-green-600",children:[" ","Payment Completed."]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex space-x-10 pl-4 ",children:[e.jsx("div",{className:"text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Sl."})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Trans No"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Amount"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Payment Mode"})}),e.jsx("div",{className:" text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Status"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Payment Date"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"text-[#37517e]",children:"Action"})})]}),(s==null?void 0:s.transactionDetails)&&e.jsxs("div",{className:"flex space-x-10 pl-4 my-2 border-y-gray-200",children:[e.jsx("div",{className:"text-xs",children:e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:"1"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-semibold text-sm text-[#37517e] whitespace-nowrap",children:((k=s==null?void 0:s.transactionDetails)==null?void 0:k.tran_no)||"N/A"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-bold text-sm text-[#37517e]",children:((C=s==null?void 0:s.transactionDetails)==null?void 0:C.amount)||"N/A"})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:((S=s==null?void 0:s.transactionDetails)==null?void 0:S.payment_mode)||"N/A"})}),e.jsx("div",{className:"text-xs",children:e.jsxs("div",{className:"font-semibold text-sm text-[#37517e]",children:[((M=s==null?void 0:s.transactionDetails)==null?void 0:M.verify_status)==1&&"Paid",((E=s==null?void 0:s.transactionDetails)==null?void 0:E.verify_status)==2&&"Processing"]})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsxs("div",{className:"font-semibold text-sm text-[#37517e]",children:[" ",ae((O=s==null?void 0:s.transactionDetails)==null?void 0:O.created_at,"YYYY-MM-DD").format("DD-MM-yy")||"N/A"]})}),e.jsx("div",{className:"flex-1 text-xs",children:e.jsx("div",{className:"font-semibold text-sm text-[#37517e]",children:e.jsx("button",{onClick:()=>{var t;return c(`/pet-payment-receipt/${(t=s==null?void 0:s.transactionDetails)==null?void 0:t.tran_no}`)},className:"hover:bg-blue-500 whitespace-nowrap border rounded shadow px-5 py-2 border-blue-500 hover:text-white text-blue-500",children:"Print Receipt"})})})]})]}),e.jsx("div",{className:"flex justify-center w-full mt-2 ",children:e.jsxs("button",{className:"mx-3 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-5 py-2 text-sm  rounded-sm shadow-xl",onClick:()=>c("/pet-registration-dashboard"),children:[" ","Home Page"]})})]})]})]})]})]})})})};export{Re as default};
