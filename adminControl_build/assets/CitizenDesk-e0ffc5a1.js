import{j as e,n as u}from"./index-c836822b.js";import{r as d}from"./router-b87f8164.js";import{C as ce}from"./index.esm-74f8105b.js";import{u as oe}from"./useSetTitle-c49d0ae0.js";import{A as p}from"./ApiHeader-78b8a4fc.js";import{A as k}from"./index-0964cd9b.js";import{A as ue}from"./ApiList-6197af4c.js";import{b as O,c as xe,d as he}from"./index.esm-ed5ceefc.js";import{a as fe,b as ge}from"./index.esm-09039267.js";import{A as be,u as me}from"./AddEditHeadingList-98672ef8.js";import{r as q}from"./tailwind-64fa9e48.js";import{c as je,a as V,u as ye}from"./index.esm-913f3050.js";import{R as pe}from"./Hourglass-cc0b59fa.js";import"./react-5403e0b7.js";import"./reactQuery-8705a202.js";import"./reactQueryDevtools-9a5be7d4.js";import"./iconBase-60af3679.js";import"./axios-096c69c8.js";function ke(s){let N=je({headingDesc:V().required("Enter Description"),link:V().required("Enter Link")});const c=ye({initialValues:{headingDesc:"",link:"",deskId:""},enableReinitialize:!0,onSubmit:(i,{resetForm:D})=>{s==null||s.postMenu(i),D()},validationSchema:N}),w=i=>{i.target.name,i.target.value},b=i=>{c.setFieldValue("headingDesc",i==null?void 0:i.heading),c.setFieldValue("link",i==null?void 0:i.links),c.setFieldValue("deskId",i==null?void 0:i.desk_id)};return d.useEffect(()=>{(s==null?void 0:s.currentSelectedId)!==null&&b(s==null?void 0:s.currentMenuData)},[s==null?void 0:s.currentMenuData]),d.useEffect(()=>((s==null?void 0:s.currentSelectedId)!==null?b():c.resetForm(),()=>{}),[s==null?void 0:s.currentSelectedId]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0",children:e.jsx("form",{onChange:w,onSubmit:c.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2 px-10",children:[e.jsxs("div",{className:"form-group col-span-12 mb-2 ",children:[e.jsx("label",{className:"form-label inline-block ml-2 mb-1 text-gray-600 text-sm font-semibold",children:"Description"}),e.jsx("input",{...c.getFieldProps("headingDesc"),type:"text",className:"form-control block w-full m-2 px-2 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out  focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:c.touched.headingDesc&&c.errors.headingDesc?c.errors.headingDesc:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Link"}),e.jsx("input",{...c.getFieldProps("link"),type:"text",className:"form-control block w-full px-2  2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:c.touched.link&&c.errors.link?c.errors.link:null})]}),e.jsx("div",{className:"col-span-12 mt-10 text-center",children:s!=null&&s.addEditLoading?e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:e.jsx(pe,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out ",children:(s==null?void 0:s.currentSelectedId)===null?"Submit":"Update"})})]})})})})}const We=()=>{oe("Citizen Desk Master");const s=d.useRef(),{api_getC_DeskHeadingApiList:N,api_PostC_DeskHeadingApi:C,api_getC_DeskDescriptionById:c,api_updateC_DeskHeadingApi:w,api_deleteC_DeskHeadingApi:b,api_deleteC_DeskDescriptionApi:i,api_PostC_DeskDescriptionApi:D,api_updateC_DeskDescriptionApi:T}=ue(),[S,E]=d.useState(null),[Ne,M]=d.useState(!1),[v,U]=d.useState(!1),[we,$]=d.useState(!1),[De,W]=d.useState(null),[x,o]=d.useState(null),[G,L]=d.useState(null),[J,K]=d.useState(null),[Q,_]=d.useState(null),[I,m]=d.useState(!1),[X,j]=d.useState(!1),[Se,Y]=d.useState(!1),[P,R]=d.useState(!1),[Z,A]=d.useState(!1),[Me,F]=d.useState(!1),[_e,ee]=d.useState(""),te="float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-[#113766] hover:text-white text-white flex items-center",h=()=>{M(!0),k.post(N,{},p()).then(t=>{var l,a;(l=t==null?void 0:t.data)!=null&&l.status&&U((a=t==null?void 0:t.data)==null?void 0:a.data),M(!1)}).catch(t=>{M(!1)})},y=(t,l)=>{W(l),$(t)},ae=t=>{m(!0);let l=C,a={heading:t==null?void 0:t.heading};x!==null&&(a.id=x,l=w),k.post(l,a,p()).then(function(n){var r,g;(r=n==null?void 0:n.data)!=null&&r.status?(h(),j(!1),fetchMenuRole("action")):y(!0,(g=res==null?void 0:res.data)==null?void 0:g.message)}).catch(function(n){y(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{m(!1),o(null),_(null)})},se=()=>{A(null),s.current.showModal(),R(!0)},z=()=>{s.current.close(),o(null)},ne=t=>{H(t),o(t),s.current.showModal(),R(!0)},H=t=>{F(!0);let l={id:t};k.post(c,l,p()).then(function(a){var n,r;(n=a==null?void 0:a.data)!=null&&n.status&&(A((r=a==null?void 0:a.data)==null?void 0:r.data),menuAddEditModal.showModal())}).catch(function(a){}).finally(()=>{F(!1)})},le=t=>{m(!0);let l=D,a={deskId:G,headingDesc:t==null?void 0:t.headingDesc,link:t==null?void 0:t.link};x!==null&&(a.id=J,l=T),k.post(l,a,p()).then(function(n){var r,g,B;(r=n==null?void 0:n.data)!=null&&r.status?(u.success((g=n==null?void 0:n.data)==null?void 0:g.message),z(),h(),Y(!1),fetchMenuRole("action")):y(!0,(B=res==null?void 0:res.data)==null?void 0:B.message)}).catch(function(n){y(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{m(!1),o(null),_(null)})},f=fe({}),de=async(t,l,a)=>{var n;try{const r=await(f==null?void 0:f.mutateAsync({api:b,data:{[t]:l,status:a==1||a==!0?0:1}}));(n=r==null?void 0:r.data)!=null&&n.status&&(h(),a==1||a==!0?u.error("Inactive"):u.success("Active"))}catch(r){u.error(r==null?void 0:r.message)}},ie=async(t,l)=>{var a;try{const n=await(f==null?void 0:f.mutateAsync({api:i,data:{id:t,status:l==1||l==!0?0:1}}));(a=n==null?void 0:n.data)!=null&&a.status&&(h(),l==1||l==!0?u.error("Inactive"):u.success("Active"))}catch(n){u.error(n==null?void 0:n.message)}};d.useEffect(()=>{h()},[]),d.useEffect(()=>{P||(A(null),o(null))},[P]);const re=t=>{ee(t+1),E(S===t?null:t)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsx(be,{currentSelectedId:x,setcurrentSelectedId:o,currentSelectedName:Q,postRole:ae,getHeadingList:h,addEditLoading:I,setmodalState:j,modalState:X}),e.jsxs("dialog",{ref:s,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur  w-[50%]",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{z()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg mt-2 ",children:x===null?"Add Data":"Update Data"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(ke,{postMenu:le,addEditLoading:I,currentSelectedId:x,currentMenuData:Z})})]}),e.jsxs("div",{className:"bg-[#1A4D8C] border text-white py-3 px-4 flex justify-between",children:[e.jsx("h1",{children:" Citizen Desk Master"}),e.jsx("h1",{children:e.jsxs("button",{onClick:()=>j(!0),className:te,children:[e.jsx(ce,{})," Add Heading"]})})]}),e.jsx("div",{children:e.jsx("div",{className:"overflow-y-auto h-screen mb-40 md:mr-0 mr-5 ",children:v&&v.map((t,l)=>e.jsxs("div",{className:"w-full border text-white font-light border-blue-700 mt-2 bg-[#1A4D8C] cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between mx-3 py-3",children:[e.jsx("div",{children:t==null?void 0:t.heading}),e.jsxs("div",{className:"gap-4 flex",children:[e.jsx("div",{children:e.jsx(ge,{size:24,onClick:()=>{L(t==null?void 0:t.id),se()}})}),e.jsx("div",{className:"text-yellow-500",onClick:()=>{o(t==null?void 0:t.id),_(t==null?void 0:t.heading),j(!0)},children:e.jsx(O,{size:20})}),e.jsx("div",{children:e.jsx(q.Switch,{ripple:!1,className:"h-full w-full checked:bg-[#2ec946] bg-red-500",containerProps:{className:"w-11 h-3"},circleProps:{className:"before:hidden left-0.5 border-none"},checked:!!(t!=null&&t.is_suspended),onChange:()=>{de(Object.keys(t)[0],t[Object.keys(t)[0]],t==null?void 0:t.is_suspended)}})}),e.jsx("div",{onClick:()=>{L(t==null?void 0:t.id),re(l)},children:S===l?e.jsx(xe,{size:24}):e.jsx(he,{size:24})})]})]}),S===l&&e.jsx("div",{className:"flex-none bg-gray-100",children:e.jsx("div",{className:"ease-in duration-300 bg-indigo-100",children:e.jsx("table",{className:"min-w-full leading-normal bg-white",children:e.jsxs("tbody",{className:"text-sm",children:[e.jsxs("tr",{className:"font-bold text-left text-sm border bg-gray-400 text-[#37517e] bg-sky-100 w-full",children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Sl No"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Description"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Description Link"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Action"})]}),(t==null?void 0:t.data)&&t.data.map((a,n)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:n+1}),e.jsx("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:(a==null?void 0:a.desk_description)||"N/A"}),e.jsx("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:e.jsx("a",{href:a==null?void 0:a.description_link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:me,alt:"",className:"w-7 ml-6"})})}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left text-[#37517e] gap-4 flex",children:[e.jsx("h1",{onClick:()=>{ne(),K(a.description_id),H(a.description_id)},children:e.jsx(O,{size:20})}),e.jsx("h1",{children:e.jsx(q.Switch,{ripple:!1,className:"h-full w-full checked:bg-[#2ec946] bg-red-500",containerProps:{className:"w-11 h-2"},circleProps:{className:"before:hidden left-0.5 border-none"},checked:(a==null?void 0:a.is_suspended_v1)==1,onChange:()=>{ie(a==null?void 0:a.description_id,a==null?void 0:a.is_suspended_v1)}})})]})]},n))]})})})})]},l))})})]})})};export{We as default};
