import{j as e,n as u}from"./index-c836822b.js";import{r}from"./router-b87f8164.js";import{C as oe}from"./index.esm-74f8105b.js";import{u as ce}from"./useSetTitle-c49d0ae0.js";import{A as y}from"./ApiHeader-78b8a4fc.js";import{A as N}from"./index-0964cd9b.js";import{A as ue}from"./ApiList-6197af4c.js";import{b as O,c as xe,d as he}from"./index.esm-ed5ceefc.js";import{a as fe,b as ge}from"./index.esm-09039267.js";import{A as be,u as me}from"./AddEditHeadingList-98672ef8.js";import{r as q}from"./tailwind-64fa9e48.js";import{c as pe,a as _,u as je}from"./index.esm-913f3050.js";import{R as ye}from"./Hourglass-cc0b59fa.js";import"./react-5403e0b7.js";import"./reactQuery-8705a202.js";import"./reactQueryDevtools-9a5be7d4.js";import"./iconBase-60af3679.js";import"./axios-096c69c8.js";const Ne="/assets/youtube-3112676c.svg";function ke(n){let k=pe({description:_().required("Enter Description"),videoLink:_().required("Enter Video Link"),userManualLink:_().required("Enter User Manual Link")});const d=je({initialValues:{headingId:"",description:"",videoLink:"",userManualLink:""},enableReinitialize:!0,onSubmit:(i,{resetForm:M})=>{n==null||n.postMenu(i),M()},validationSchema:k}),w=i=>{i.target.name,i.target.value},b=i=>{d.setFieldValue("headingId",i==null?void 0:i.headingId),d.setFieldValue("description",i==null?void 0:i.description),d.setFieldValue("videoLink",i==null?void 0:i.video_link),d.setFieldValue("userManualLink",i==null?void 0:i.user_manual_link)};return r.useEffect(()=>{(n==null?void 0:n.currentSelectedId)!==null&&b(n==null?void 0:n.currentMenuData)},[n==null?void 0:n.currentMenuData]),r.useEffect(()=>((n==null?void 0:n.currentSelectedId)!==null?b():d.resetForm(),()=>{}),[n==null?void 0:n.currentSelectedId]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0",children:e.jsx("form",{onChange:w,onSubmit:d.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2 px-10",children:[e.jsxs("div",{className:"form-group col-span-12 mb-6 ",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Description"}),e.jsx("input",{...d.getFieldProps("description"),type:"text",className:"form-control block w-full  2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.videoLink&&d.errors.videoLink?d.errors.videoLink:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 ",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"video Link"}),e.jsx("input",{...d.getFieldProps("videoLink"),type:"text",className:"form-control block w-full  2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.videoLink&&d.errors.videoLink?d.errors.videoLink:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 ",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"user Manual Link"}),e.jsx("input",{...d.getFieldProps("userManualLink"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.userManualLink&&d.errors.userManualLink?d.errors.userManualLink:null})]}),e.jsx("div",{className:"col-span-12 mt-10 text-center",children:n!=null&&n.addEditLoading?e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:e.jsx(ye,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out ",children:(n==null?void 0:n.currentSelectedId)===null?"Submit":"Update"})})]})})})})}const Ge=()=>{ce("User Manual");const n=r.useRef(),{api_getHeadingApiList:k,api_PostHeadingApi:D,api_getHeadingDescriptionById:d,api_updateHeadingApi:w,api_deleteHeadingApi:b,api_deleteHeadingDescriptionApi:i,api_PostHeadingDescriptionApi:M,api_updateHeadingDescriptionApi:z}=ue(),[L,E]=r.useState(null),[we,S]=r.useState(!1),[I,T]=r.useState(!1),[Me,$]=r.useState(!1),[Le,W]=r.useState(null),[x,c]=r.useState(null),[G,C]=r.useState(null),[J,K]=r.useState(null),[Q,A]=r.useState(null),[P,m]=r.useState(!1),[X,p]=r.useState(!1),[Se,Y]=r.useState(!1),[F,R]=r.useState(!1),[Z,v]=r.useState(!1),[Ae,H]=r.useState(!1),[ve,ee]=r.useState(""),te="float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-[#113766] hover:text-white text-white flex items-center",f=()=>{S(!0),N.post(k,{},y()).then(t=>{var l,a;(l=t==null?void 0:t.data)!=null&&l.status&&T((a=t==null?void 0:t.data)==null?void 0:a.data),S(!1)}).catch(t=>{S(!1)})},j=(t,l)=>{W(l),$(t)},ae=t=>{m(!0);let l=D,a={heading:t==null?void 0:t.heading};x!==null&&(a.id=x,l=w),N.post(l,a,y()).then(function(s){var o,g;(o=s==null?void 0:s.data)!=null&&o.status?(window.location.reload(),p(!1),fetchMenuRole("action")):j(!0,(g=res==null?void 0:res.data)==null?void 0:g.message)}).catch(function(s){j(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{m(!1),c(null),A(null)})},ne=()=>{v(null),n.current.showModal(),R(!0)},U=()=>{n.current.close(),c(null)},se=t=>{V(t),c(t),n.current.showModal(),R(!0)},V=t=>{H(!0);let l={id:t};N.post(d,l,y()).then(function(a){var s,o;(s=a==null?void 0:a.data)!=null&&s.status&&(v((o=a==null?void 0:a.data)==null?void 0:o.data),menuAddEditModal.showModal())}).catch(function(a){}).finally(()=>{H(!1)})},le=t=>{m(!0);let l=M,a={headingId:G,description:t==null?void 0:t.description,videoLink:t==null?void 0:t.videoLink,userManualLink:t==null?void 0:t.userManualLink};x!==null&&(a.id=J,l=z),N.post(l,a,y()).then(function(s){var o,g,B;(o=s==null?void 0:s.data)!=null&&o.status?(u.success((g=s==null?void 0:s.data)==null?void 0:g.message),U(),f(),Y(!1),fetchMenuRole("action")):j(!0,(B=res==null?void 0:res.data)==null?void 0:B.message)}).catch(function(s){j(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{m(!1),c(null),A(null)})},h=fe({}),re=async(t,l,a)=>{var s;try{const o=await(h==null?void 0:h.mutateAsync({api:b,data:{[t]:l,status:a==1||a==!0?0:1}}));(s=o==null?void 0:o.data)!=null&&s.status&&(f(),a==1||a==!0?u.error("Inactive"):u.success("Active"))}catch(o){u.error(o==null?void 0:o.message)}},de=async(t,l)=>{var a;try{const s=await(h==null?void 0:h.mutateAsync({api:i,data:{id:t,status:l==1||l==!0?0:1}}));(a=s==null?void 0:s.data)!=null&&a.status&&(f(),l==1||l==!0?u.error("Inactive"):u.success("Active"))}catch(s){u.error(s==null?void 0:s.message)}};r.useEffect(()=>{f()},[]),r.useEffect(()=>{F||(v(null),c(null))},[F]);const ie=t=>{ee(t+1),E(L===t?null:t)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsx(be,{currentSelectedId:x,setcurrentSelectedId:c,currentSelectedName:Q,postRole:ae,getHeadingList:f,addEditLoading:P,setmodalState:p,modalState:X}),e.jsxs("dialog",{ref:n,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur  w-[50%]",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{U()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg mt-2 ",children:x===null?"Add Data":"Update Data"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(ke,{postMenu:le,addEditLoading:P,currentSelectedId:x,currentMenuData:Z})})]}),e.jsxs("div",{className:"bg-[#1A4D8C] border text-white py-3 px-4 flex justify-between",children:[e.jsx("h1",{children:" Download - User Manual"}),e.jsx("h1",{children:e.jsxs("button",{onClick:()=>p(!0),className:te,children:[e.jsx(oe,{})," Add Module"]})})]}),e.jsx("div",{children:e.jsx("div",{className:"overflow-y-auto h-screen mb-40 md:mr-0 mr-5 ",children:I&&I.map((t,l)=>e.jsxs("div",{className:"w-full border text-white font-light border-blue-700 mt-2 bg-[#1A4D8C] cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between mx-3 py-3",children:[e.jsx("div",{children:t==null?void 0:t.heading}),e.jsxs("div",{className:"gap-4 flex",children:[e.jsx("div",{children:e.jsx(ge,{size:24,onClick:()=>{C(t==null?void 0:t.id),ne()}})}),e.jsx("div",{className:"text-yellow-500",onClick:()=>{c(t==null?void 0:t.id),A(t==null?void 0:t.heading),p(!0)},children:e.jsx(O,{size:20})}),e.jsx("div",{children:e.jsx(q.Switch,{ripple:!1,className:"h-full w-full checked:bg-[#2ec946] bg-red-500",containerProps:{className:"w-11 h-3"},circleProps:{className:"before:hidden left-0.5 border-none"},checked:!!(t!=null&&t.is_suspended),onChange:()=>{re(Object.keys(t)[0],t[Object.keys(t)[0]],t==null?void 0:t.is_suspended)}})}),e.jsx("div",{onClick:()=>{C(t==null?void 0:t.id),ie(l)},children:L===l?e.jsx(xe,{size:24}):e.jsx(he,{size:24})})]})]}),L===l&&e.jsx("div",{className:"flex-none bg-gray-100",children:e.jsx("div",{className:"ease-in duration-300 bg-indigo-100",children:e.jsx("table",{className:"min-w-full leading-normal bg-white",children:e.jsxs("tbody",{className:"text-sm",children:[e.jsxs("tr",{className:"font-bold text-left text-sm border bg-gray-400 text-[#37517e] bg-sky-100 w-full",children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Sl No"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Module Name"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Recorded Video Link"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"User Manual"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs uppercase text-left",children:"Action"})]}),(t==null?void 0:t.data)&&t.data.map((a,s)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:s+1}),e.jsx("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:(a==null?void 0:a.description)||"N/A"}),e.jsx("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:e.jsx("a",{href:a==null?void 0:a.video_link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:Ne,alt:"",className:"w-7 ml-12"})})}),e.jsx("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:e.jsx("a",{href:a==null?void 0:a.user_manual_link,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:me,alt:"",className:"w-7 ml-6"})})}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left text-[#37517e] gap-4 flex",children:[e.jsx("h1",{onClick:()=>{se(),K(a.description_id),V(a.description_id)},children:e.jsx(O,{size:20})}),e.jsx("h1",{children:e.jsx(q.Switch,{ripple:!1,className:"h-full w-full checked:bg-[#2ec946] bg-red-500",containerProps:{className:"w-11 h-2"},circleProps:{className:"before:hidden left-0.5 border-none"},checked:(a==null?void 0:a.is_suspended_v1)==1,onChange:()=>{de(a==null?void 0:a.description_id,a==null?void 0:a.is_suspended_v1)}})})]})]},s))]})})})})]},l))})})]})})};export{Ge as default};
