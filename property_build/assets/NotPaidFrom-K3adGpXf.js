import{r as i,b as z,l as G,p as V,m as X,o as J,A as H,aL as A,j as a,G as K,bX as Q,b$ as Z,bM as p,n as r,f as L}from"./index-ERw10KzH.js";const ae=()=>{const{api_wardByUlb:P,api_getAllUlb:F,searchPreviousYearPaidButNotPaidCurrentYear:k,searchNotPaidFrom20162017:D}=p(),[w,M]=i.useState();i.useState();const[j,U]=i.useState([]),[B,v]=i.useState(!1),[_,R]=i.useState(""),[y,W]=i.useState(!1),[C,q]=i.useState({}),[E,O]=i.useState(0),S=z();G("Payment Not Done Report");const N="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",o=window.localStorage.getItem("ulbId"),s=V({initialValues:{ulbId:o||"",year:"current",wardId:""},onSubmit:e=>{R(e==null?void 0:e.year),q({ulbId:s.values.ulbId,wardMstrId:s.values.wardId}),O(n=>n+1)},validationSchema:X({ulbId:J().required("Select ULB")})});i.useEffect(()=>{v(!0),o&&I(),!o&&T()},[]);const T=()=>{H.get(F,A()).then(e=>{var n,t;((n=e==null?void 0:e.data)==null?void 0:n.status)==!0&&U((t=e==null?void 0:e.data)==null?void 0:t.data)}).catch(e=>{}).finally(()=>v(!1))},I=e=>{H.post(P,{ulbId:e||o},A()).then(n=>{var t,d;((t=n==null?void 0:n.data)==null?void 0:t.status)==!0&&M((d=n==null?void 0:n.data)==null?void 0:d.data)}).catch(n=>{})},Y=[{Header:"S.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_name",Cell:e=>r(e==null?void 0:e.value)},{Header:"Holding No",accessor:"new_holding_no",Cell:({cell:e})=>{var n,t,d,l,u,c,m,h,x,g;if(((t=(n=e==null?void 0:e.row)==null?void 0:n.original)==null?void 0:t.new_holding_no)==null||((l=(d=e==null?void 0:e.row)==null?void 0:d.original)==null?void 0:l.new_holding_no)==""||((c=(u=e==null?void 0:e.row)==null?void 0:u.original)==null?void 0:c.new_holding_no)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if(((h=(m=e==null?void 0:e.row)==null?void 0:m.original)==null?void 0:h.new_holding_no)!=null)return a.jsx("div",{className:"cursor-pointer underline",onClick:()=>{var b,f;return S("/holdingPropertyDetails/"+((f=(b=e==null?void 0:e.row)==null?void 0:b.original)==null?void 0:f.property_id))},children:(g=(x=e==null?void 0:e.row)==null?void 0:x.original)==null?void 0:g.new_holding_no})}},{Header:"Applicant Name",accessor:"owner_name",Cell:e=>r(e==null?void 0:e.value)},{Header:"Mobile No",accessor:"mobile_no",Cell:e=>r(e==null?void 0:e.value)},{Header:"Address",accessor:"prop_address",Cell:e=>r(e==null?void 0:e.value)},{Header:"Demand",accessor:"total_demand",Cell:e=>L(e==null?void 0:e.value)}],$=[{Header:"S.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_name",Cell:e=>r(e==null?void 0:e.value)},{Header:"Holding No",accessor:"new_holding_no",Cell:({cell:e})=>{var n,t,d,l,u,c,m,h,x,g;if(((t=(n=e==null?void 0:e.row)==null?void 0:n.original)==null?void 0:t.new_holding_no)==null||((l=(d=e==null?void 0:e.row)==null?void 0:d.original)==null?void 0:l.new_holding_no)==""||((c=(u=e==null?void 0:e.row)==null?void 0:u.original)==null?void 0:c.new_holding_no)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if(((h=(m=e==null?void 0:e.row)==null?void 0:m.original)==null?void 0:h.new_holding_no)!=null)return a.jsx("div",{className:"cursor-pointer underline",onClick:()=>{var b,f;return S("/holdingPropertyDetails/"+((f=(b=e==null?void 0:e.row)==null?void 0:b.original)==null?void 0:f.property_id))},children:(g=(x=e==null?void 0:e.row)==null?void 0:x.original)==null?void 0:g.new_holding_no})}},{Header:"Applicant Name",accessor:"owner_name",Cell:e=>r(e==null?void 0:e.value)},{Header:"Mobile No",accessor:"mobile_no",Cell:e=>r(e==null?void 0:e.value)},{Header:"Address",accessor:"prop_address",Cell:e=>r(e==null?void 0:e.value)},{Header:"Demand",accessor:"total_demand",Cell:e=>L(e==null?void 0:e.value)}];return a.jsxs(a.Fragment,{children:[a.jsxs("form",{onChange:s.handleChange,onSubmit:s.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md ",children:[a.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Report"}),a.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[!o&&a.jsxs("div",{className:"flex flex-col w-full md:w-[15%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Select ULB :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"ulbId",id:"",className:N,disabled:y,onChange:e=>I(e.target.value),children:[a.jsx("option",{value:"",children:"Select"}),j==null?void 0:j.map(e=>a.jsx("option",{value:e.id,children:e.ulb_name}))]})}),a.jsx("div",{className:"col-span-12 text-start",children:s.touched.ulbId&&s.errors.ulbId&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:s.errors.ulbId})})})]}),s.values.ulbId!=""&&a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Ward No. :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"wardId",id:"",className:N,children:[B?a.jsx("option",{value:"",children:"All"}):a.jsx("option",{disabled:!0,children:"Loading..."}),w==null?void 0:w.map(e=>a.jsx(a.Fragment,{children:a.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.ward_name})}))]})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Not Paid From :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"year",id:"",className:N,children:[a.jsx("option",{value:"current",children:"Current Year"}),a.jsx("option",{value:"2016",children:"2016-2017"})]})})]}),a.jsx("div",{className:"mt-4 w-full md:w-[20%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:a.jsx("div",{className:" ",children:y?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-center",children:a.jsx(K,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):a.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[a.jsx("span",{className:"",children:a.jsx(Q,{fontSize:""})}),a.jsx("span",{children:"Search Record"})]})})})]})]}),Object.keys(C).length!==0&&a.jsx(Z,{type:"old",api:_=="current"?k:D,columns:_=="current"?$:Y,requestBody:C,changeData:E,loader:e=>W(e)}),a.jsx("div",{className:"h-[20vh]"})]})};export{ae as default};
