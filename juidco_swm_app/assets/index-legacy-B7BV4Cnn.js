!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return r};var n,r={},i=Object.prototype,a=i.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(n){u=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),l=new T(r||[]);return o(a,"_invoke",{value:k(t,n,l)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var m="suspendedStart",v="suspendedYield",p="executing",x="completed",y={};function g(){}function j(){}function b(){}var w={};u(w,s,(function(){return this}));var N=Object.getPrototypeOf,L=N&&N(N(U([])));L&&L!==i&&a.call(L,s)&&(w=L);var S=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function F(e,n){function r(i,o,l,s){var c=f(e[i],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==t(u)&&a.call(u,"__await")?n.resolve(u.__await).then((function(t){r("next",t,l,s)}),(function(t){r("throw",t,l,s)})):n.resolve(u).then((function(t){d.value=t,l(d)}),(function(t){return r("throw",t,l,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,e){function a(){return new n((function(n,i){r(t,e,n,i)}))}return i=i?i.then(a,a):a()}})}function k(t,e,r){var i=m;return function(a,o){if(i===p)throw Error("Generator is already running");if(i===x){if("throw"===a)throw o;return{value:n,done:!0}}for(r.method=a,r.arg=o;;){var l=r.delegate;if(l){var s=_(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=x,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,e,r);if("normal"===c.type){if(i=r.done?x:v,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=x,r.method="throw",r.arg=c.arg)}}}function _(t,e){var r=e.method,i=t.iterator[r];if(i===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,y;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function U(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return j.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:j,configurable:!0}),j.displayName=u(b,d,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===j||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,d,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},E(F.prototype),u(F.prototype,c,(function(){return this})),r.AsyncIterator=F,r.async=function(t,e,n,i,a){void 0===a&&(a=Promise);var o=new F(h(t,e,n,i),a);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),u(S,d,"Generator"),u(S,s,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=U,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return l.type="throw",l.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:U(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}},r}function n(t,e,n,r,i,a,o){try{var l=t[a](o),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function l(t){n(o,i,a,l,s,"next",t)}function s(t){n(o,i,a,l,s,"throw",t)}l(void 0)}))}}System.register(["./index-legacy-Dq13yyqx.js","./switch-legacy-DF9OKXoj.js","./services-legacy-BAvdU-qa.js","./RHFTextArea-legacy-DQbTLCFB.js","./router-legacy-BWed7M0P.js","./RHFUploadFiled-legacy-rgTtKHbJ.js","./SelectField-legacy-DEVFpK-f.js","./index-legacy-vGum2h_o.js","./card-legacy-DN7LU3EE.js","./separator-legacy-B_DzaJXb.js","./SkeletonLoader-legacy-DMGwhGmb.js","./OverLayLoader-legacy-Dxgonnkk.js","./headlessui-legacy-BlMjWznQ.js","./axios-legacy-COJRtORB.js","./module-legacy-avK88ahl.js"],(function(t,n){"use strict";var i,a,o,l,s,c,d,u,h,f,m,v,p,x,y,g,j,b,w,N,L,S,E,F,k,_,O;return{setters:[function(t){i=t.u,a=t.h,o=t.g,l=t.e,s=t.j,c=t.I,d=t.B,u=t.C,h=t._},function(t){f=t.u,m=t.F,v=t.c,p=t.a,x=t.e,y=t.o},function(t){g=t.g},function(t){j=t.R},function(t){b=t.u,w=t.i},function(t){N=t.R},function(t){L=t.R},function(t){S=t.P},function(t){E=t.C,F=t.b},function(t){k=t.S},function(t){_=t.S},function(t){O=t.O},null,null,null],execute:function(){t("default",(function(){var t,v,p,x,D,T,U,P,R,M,A,q,I,G,C,B,z=i({}),Y=b(),H=w().id,Q=a({api:"".concat(l.getConsumerDetailsById,"/").concat(H),options:{enabled:!!H}}),X=o({api:l.getPaymentData,config:{consumerId:H},options:{enabled:!!H}}),$=f({resolver:y(n)}),J=function(){var t=r(e().mark((function t(n){var i,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FormData).append("consumerId",String(H)),a.append("adjustUpto",n.paymentUpToMonth),a.append("adjustAmount",String(null==K||null===(i=K.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.totaldemand)),a.append("remarks",n.remarks),a.append("billFile",n.billFile),u("Are you sure?","Please confirm",r(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z.mutateAsync({api:l.paymentAdjustment,data:a});case 3:(n=t.sent).data.status?(h.success(n.data.msg),Y("/juidco-swm-app/consumer-actions/".concat(H))):h.error(n.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),h.error(g(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=o({api:l.getCalculatedAmount,config:{consumerId:H,payUpto:$.watch("paymentUpToMonth")},value:[$.watch("paymentUpToMonth")],options:{enabled:!!$.watch("paymentUpToMonth")&&!!H}});if(null!=Q&&Q.isLoading)return s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx(E,{children:s.jsxs(F,{children:[s.jsx(_,{}),s.jsx(_,{}),s.jsx(_,{})]})})});return s.jsxs(S,{title:"Demand Update",children:[z.isLoading&&s.jsx(O,{}),s.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[s.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[s.jsx(c,{src:"/assets/image/category.png",alt:"Demand Update",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),s.jsxs("div",{className:"",children:[s.jsx("h1",{className:"font-semibold",children:"Demand Update"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),s.jsx(k,{}),s.jsx(E,{children:s.jsx(F,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 py-6",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Consumer no:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(t=Q.data)||void 0===t||null===(t=t.data[0])||void 0===t?void 0:t.consumerNo})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Consumer Name:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(v=Q.data)||void 0===v||null===(v=v.data[0])||void 0===v?void 0:v.consumerName})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Mobile no:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(p=Q.data)||void 0===p||null===(p=p.data[0])||void 0===p?void 0:p.mobileNo})}),(null==Q||null===(x=Q.data)||void 0===x||null===(x=x.data[0])||void 0===x?void 0:x.monthlyDemand)>"0"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Monthly Demand/Rate:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(D=Q.data)||void 0===D||null===(D=D.data[0])||void 0===D?void 0:D.monthlyDemand})})]}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Outstanding Demand:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(T=Q.data)||void 0===T||null===(T=T.data[0])||void 0===T?void 0:T.totalDemand})}),(null==Q||null===(U=Q.data)||void 0===U||null===(U=U.data[0])||void 0===U?void 0:U.totalDemand)>"0"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Demand from:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(P=Q.data)||void 0===P||null===(P=P.data[0])||void 0===P?void 0:P.demandFrom})})]}),(null==Q||null===(R=Q.data)||void 0===R||null===(R=R.data[0])||void 0===R?void 0:R.totalDemand)>"0"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Demand upto:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(M=Q.data)||void 0===M||null===(M=M.data[0])||void 0===M?void 0:M.demandUpto})})]}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Total flats:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(A=Q.data)||void 0===A||null===(A=A.data)||void 0===A?void 0:A.length})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs font-semibold",children:"Address:"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xs",children:null==Q||null===(q=Q.data)||void 0===q||null===(q=q.data[0])||void 0===q?void 0:q.Address})})]})})}),s.jsx(k,{}),s.jsx(E,{children:s.jsx(F,{children:s.jsx(m,{methods:$,onSubmit:$.handleSubmit(J),children:s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsx("div",{children:s.jsx(L,{isRequired:!0,name:"paymentUpToMonth",label:"Payment upto month",data:null!==(I=null==X||null===(G=X.data)||void 0===G||null===(G=G.data)||void 0===G||null===(G=G.demand)||void 0===G?void 0:G.map((function(t){return{label:t.payment_to,value:t.payment_to}})))&&void 0!==I?I:[]})}),s.jsx("div",{children:s.jsx(j,{name:"remarks",label:"Remarks",isRequired:!0})}),s.jsx("div",{children:s.jsx(N,{isRequired:!0,name:"billFile",label:"Bill File",type:"file",accept:".pdf"})}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsxs(d,{type:"submit",size:"sm",children:[K.isLoading?"Loading...":"SUBMIT"," ",(null==K||null===(C=K.data)||void 0===C||null===(C=C.data)||void 0===C?void 0:C.totaldemand)&&(null==K||null===(B=K.data)||void 0===B||null===(B=B.data)||void 0===B?void 0:B.totaldemand)]})})]})})})})]})]})}));var n=v().shape({paymentUpToMonth:p().required("Month is required"),remarks:p().required("Remark is required"),billFile:x().required("Bill File is required").test("fileSize","File Size is too large. Max 900kb allowed.",(function(t){return t&&t.size<=9e5}))})}}}))}();
