import{j as s,B as h,a as v,g as w,e as S,I as F}from"./index-Bkq7pC9t.js";import{u as P,r as b}from"./router-DWxcwEcu.js";import{C as I,b as T}from"./card-CM9Ojm8U.js";import{P as k}from"./index-CL0U_Vuz.js";import{P as A}from"./index-DJwAPkdW.js";import{u as R,F as Y,c as _,a as o,o as $}from"./switch-Dgrtwke-.js";import{R as x}from"./RHFTextField-B7MddfO2.js";import{R as z}from"./SelectField-BnDhvzbC.js";import{c as M}from"./useComonData-BX30I8Su.js";import{S as i}from"./separator-dyZX5VRq.js";import{h as B}from"./moment-CbGOrKEH.js";import"./headlessui-DlCzxctq.js";import"./axios-BrYcoDUu.js";function E({viewComplainListData:a}){var l,c,n,m;const r=P();return a!=null&&a.isFetching?s.jsx(s.Fragment,{children:Array.from({length:10}).map((e,t)=>s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx("div",{className:"animate-pulse flex space-x-4",children:s.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},t+1))}):s.jsx("div",{children:a.status==="success"&&((c=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:c.length)>0?(m=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:m.map((e,t)=>s.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 justify-center items-center",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Consumer Name:"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500 w-30 truncate",children:e.consumer_name}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Complain No:"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.complain_no}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Ward :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.ward_no}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Date"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:B(e.date).format("DD-MM-YYYY")}),e.tcName!==null&&e.tcName!==void 0&&e.tcName!==""&&s.jsxs(s.Fragment,{children:[" ",s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"TC"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.tcName})]})]}),s.jsx(i,{className:"mt-4 mb-4"}),s.jsxs("div",{className:"flex justify-between mt-4 space-x-4",children:[s.jsx(h,{size:"sm",variant:"destructive",className:" w-full",onClick:()=>{r("/juidco-swm-app/view-complain-detail/".concat(e.id))},children:"View"}),s.jsx(h,{size:"sm",className:" w-full",onClick:()=>{r("/juidco-swm-app/view-complain-map/".concat(e.id))},children:"View Map"})]})]},t+1)):s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"No Data Found"})})})})}const H=_().shape({fromDate:o(),toDate:o(),tcId:o(),search:o()});function L(){var j,g,u,f,p,N;const{user:a}=v(),{getTcList:r}=M(),[l,c]=b.useState(1),[n,m]=b.useState(10),e=R({resolver:$(H)}),t=w({api:S.getComplainList,config:{fromDate:e.watch("fromDate"),toDate:e.watch("toDate"),tcId:(a==null?void 0:a.userTypeId)==5||e.watch("tcId")!=""?e.watch("tcId"):"",search:e.watch("search")},options:{enabled:!0}}),y=async d=>{c(1),m(10),t.refetch()};return s.jsx(A,{title:"Complain List",children:s.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[s.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[s.jsx(F,{src:"/assets/icons/coins.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),s.jsxs("div",{className:"",children:[s.jsx("h1",{className:" font-semibold",children:"Complain List"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),s.jsx(i,{}),s.jsx(I,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:s.jsx(T,{className:"px-6 text-sm",children:s.jsx(Y,{methods:e,onSubmit:e.handleSubmit(y),children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("div",{children:s.jsx(x,{name:"fromDate",label:"From Date",className:"w-full",type:"date"})}),s.jsx("div",{children:s.jsx(x,{name:"toDate",label:"To Date",className:"w-full",type:"date"})}),(a==null?void 0:a.userTypeId)==4&&s.jsx("div",{className:"col-span-2",children:s.jsx(z,{name:"tcId",label:"TC",className:"w-full",data:(u=(g=(j=r==null?void 0:r.data)==null?void 0:j.data)==null?void 0:g.map(d=>({label:String(d.tcName),value:String(d.tcId)})))!=null?u:[]})}),s.jsx("div",{className:"col-span-2",children:s.jsx(x,{name:"search",label:"Search",className:"w-full",placeholder:"Search by complain no"})}),s.jsx("div",{className:"col-span-2 mt-2",children:s.jsx(h,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Search"})})]})})})}),s.jsx(i,{}),s.jsx("div",{className:"flex justify-between item-center",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Total Transaction:"}),s.jsx("h1",{className:"text-xs text-green-800 font-bold",children:(N=(p=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:p.length)!=null?N:0})]})}),s.jsx(E,{viewComplainListData:t}),(t==null?void 0:t.status)==="success"&&s.jsxs(s.Fragment,{children:[s.jsx(k,{page:l,perPage:n,totalPage:10,setPage:d=>c(d)}),s.jsx(i,{})]})]})})}export{L as default};
