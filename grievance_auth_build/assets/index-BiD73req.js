import{f as O,r as n,u as m,b as E,o as L,j as e,D as F,B as u,F as T,R as k,L as x,c as I,d as l,h as R,g as p,_ as t}from"./index-Di_aGywo.js";import{G as q,L as M}from"./GoogleLogin-DVe7GBL5.js";import{g as h}from"./services-KQnp_8oA.js";import{R as f}from"./RHFPasswordField-C9QCZ3LB.js";const A=I({email:l().required("Email is required").email("Invalid email"),password:l().min(3).required("Password is required"),roleId:l(),confirmPassword:l().oneOf([R("password")],"Passwords must match").required("Confirm password is required").min(3,"Password must be at least 3 characters")});function V(){const g=O(),[j,o]=n.useState(!1),[w,b]=n.useState(!1),[c,v]=n.useState(""),y=m({}),N=m({}),i=E({defaultValues:{email:"",roleId:"66d2a49adcdbb5c654b983cc",password:"",confirmPassword:""},resolver:L(A)});console.log(w);const P=async s=>{var r,d;try{const a=await y.mutateAsync({api:p.citizenRegistration,data:{email:s.email,roleId:s.roleId,password:s.password}});(r=a==null?void 0:a.data)!=null&&r.success?(o(!0),t.success("OTP sent to your email.")):t.error((d=a==null?void 0:a.data)==null?void 0:d.message)}catch(a){t.error(h(a)),console.log("Error sending OTP",a)}},S=async()=>{var s;try{const r=await N.mutateAsync({api:p.verifyOtp,data:{otp:c,email:i.getValues("email")}});(s=r==null?void 0:r.data)!=null&&s.success?(g("/grievance/citizen-dashboard/home"),t.success("Sing Up successful!")):t.error("Invalid OTP.")}catch(r){t.error(h(r.message))}};return e.jsxs(e.Fragment,{children:[e.jsx(F,{open:j,setOpen:o,title:"OTP Verification",setEdit:b,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter OTP"}),e.jsxs("form",{onSubmit:s=>s.preventDefault(),children:[e.jsx("input",{value:c,onChange:s=>v(s.target.value),type:"text",placeholder:"Enter OTP",className:"input-field w-full border border-gray-300 rounded-md p-2"}),e.jsx("div",{children:e.jsx(u,{type:"button",onClick:S,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Verify OTP"})})]})]})}),e.jsx(T,{methods:i,onSubmit:i.handleSubmit(P),children:e.jsxs("div",{className:"space-y-4 max-w-sm mx-auto",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(k,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"email",inputValidation:["removeSpace"],placeholder:"Enter your Email"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(f,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"password",placeholder:"Enter your password"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(f,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"confirmPassword",placeholder:"Enter your confirm password"})}),e.jsx("div",{children:e.jsx(u,{type:"submit",isLoading:i.formState.isSubmitting,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Sign Up"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("hr",{className:"flex-1"}),e.jsx("span",{children:"or"}),e.jsx("hr",{className:"flex-1"})]}),e.jsx("div",{children:e.jsx(q,{})}),e.jsx("div",{children:e.jsx(x,{to:"https://epramaan.meripehchaan.gov.in/",children:e.jsx("div",{className:"flex cursor-pointer text-lg font-medium text-white bg-white shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:e.jsx("span",{className:"border px-2 w-full justify-center bg-[rgb(38,204,204)] flex items-center text-white py-1.5",children:"Sign up with ePramaan"})})})}),e.jsx("div",{className:"text-center  flex justify-center",children:e.jsx(x,{to:"/grievance/auth/citizen-login",children:e.jsxs("span",{className:"text-base flex",children:["Already have a Account!   ",e.jsx("p",{className:"text-blue-800 ml-1  text-base",children:" Login"})]})})})]})})]})}function G(){return e.jsx("div",{className:"bg-gradient-to-r from-blue-200 via-blue-300 to-blue-400 min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/90 xl:mx-56 border shadow-lg mx-auto rounded-lg w-full max-w-6xl p-6 md:p-8 lg:p-12 backdrop-blur-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-center pb-6 text-gray-800",children:"Sign up to the Grievance Redressal System"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 w-full",children:[e.jsx("div",{className:"flex-1 flex justify-center items-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(V,{})})}),e.jsx("div",{className:"flex-1 flex justify-center items-center bg-gray-100 rounded-lg p-6 shadow-inner sm:block hidden",children:e.jsx("div",{className:"w-full max-w-md text-center",children:e.jsx(M,{})})})]})]})})}export{G as default};
