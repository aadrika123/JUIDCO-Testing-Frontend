import{u as $,G as I,v as H,g as F,b as R,o as k,r as u,j as e,D as G,F as J,R as P,P as K,A as B,B as Q,c as V,d as v,Q as z,_ as y,J as O,N as W,w as X,x as Y,M as Z,y as D,S as ee,I as ae,K as se}from"./index-DOg5tZ0E.js";import{P as le}from"./index-CgOOQbWr.js";import{T as ne,a as re,b as C,c as i,d as de,e as o}from"./table-DEeRP3-S.js";import{P as te}from"./index-BnjuEhHp.js";import{S as ie}from"./index-B83ozfU4.js";const oe=V().shape({module_name:v().required("Module Name is required"),uniqueString:v().required("Enter unique label for the module"),fixedNoLabel:v().nullable(),tempNoLabel:v().nullable(),imageUrl:z().nullable()});function ce({open:h,setOpen:f,title:x,id:N,edit:c,setEdit:b,refetch:M}){const S=$({}),q=I({}),{data:r,isFetching:L}=H({api:`${F.getModuleById}/${N}`,key:"getModuleById",options:{enabled:c}}),d=R({defaultValues:{},resolver:k(oe)}),a=async t=>{var m,j,p,g;const n=new FormData;n.append("moduleName",t.module_name),n.append("fixedNoLabel",t.fixedNoLabel||""),n.append("tempNoLabel",t.tempNoLabel||""),n.append("imageUrl",t.imageUrl);try{if(c&&t){n.append("uniqueString",t.uniqueString);const l=await q.mutateAsync({api:`${F.updateModule}/${N}`,data:n});(m=l.data)!=null&&m.success?y.success((j=l==null?void 0:l.data)==null?void 0:j.message):y.error("Module not updated successfully")}else{n.append("uniqueString",t.uniqueString);const l=await S.mutateAsync({api:F.createModule,data:n});(p=l.data)!=null&&p.success?y.success((g=l==null?void 0:l.data)==null?void 0:g.message):y.error("Module not created successfully"),d.reset({module_name:""})}f(!1),b(!1),M()}catch(l){console.log(l)}};return u.useEffect(()=>{c&&r?d.reset({module_name:r.data.module_name,uniqueString:r.data.uniqueString,fixedNoLabel:r.data.fixedNoLabel,tempNoLabel:r.data.tempNoLabel,imageUrl:r.data.imageUrl}):d.reset({module_name:""})},[c,r]),e.jsx(G,{open:h,setOpen:f,title:x,setEdit:b,edit:c,isLoading:L,children:e.jsx(J,{methods:d,onSubmit:d.handleSubmit(a),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(P,{name:"module_name",placeholder:"Enter your module name"})}),e.jsx("div",{children:e.jsx(P,{name:"uniqueString",placeholder:"Enter unique string"})}),e.jsx("div",{children:e.jsx(P,{name:"fixedNoLabel",placeholder:"Enter fixed no. label"})}),e.jsx("div",{children:e.jsx(P,{name:"tempNoLabel",placeholder:"Enter temp no. label"})}),e.jsx("div",{children:e.jsx(K,{name:"imageUrl",placeholder:"Upload your Images"})}),e.jsx(B,{}),e.jsx("div",{children:e.jsx(Q,{isLoading:d.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function ue(){var n,m,j,p,g,l,w,A,E,T,_;I({});const[h,f]=u.useState(1),[x,N]=u.useState(10),[c,b]=u.useState(""),[M,S]=u.useState(!1),[q,r]=u.useState(""),[L,d]=u.useState(!1),a=O({api:W,value:[h,x],options:{enabled:!0}}),t=s=>{d(!0),S(!0),r(s)};return e.jsxs("main",{className:"grid items-start",children:[e.jsx(ce,{open:M,setOpen:S,title:L?"Edit Module Name":"Add Module Name",id:q,edit:L,setEdit:d,refetch:a.refetch}),e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsxs("div",{className:"flex w-full justify-between gap-2",children:[e.jsx("div",{children:e.jsx(ie,{search:c,setSearch:b,refetch:a.refetch,isFetching:a.isLoading})}),e.jsx("div",{})]}),e.jsxs(X,{children:[e.jsx(Y,{className:"px-7",children:e.jsxs(Z,{children:["Module  List (",(m=(n=a.data)==null?void 0:n.data)==null?void 0:m.totalDocs,")"]})}),e.jsx(D,{children:a.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ee,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ne,{children:[e.jsx(re,{children:e.jsxs(C,{children:[e.jsx(i,{className:"",children:"#"}),e.jsx(i,{className:"",children:"Image"}),e.jsx(i,{className:"",children:"Module Name"}),e.jsx(i,{className:"",children:"Unique Label"}),e.jsx(i,{className:"",children:"FixedNo. Label"}),e.jsx(i,{className:"",children:"TempNo. Label"}),e.jsx(i,{className:"",children:"Id"}),e.jsx(i,{className:"",children:"Created at"}),e.jsx(i,{children:"Action"})]})}),e.jsx(de,{children:Array.isArray((j=a==null?void 0:a.data)==null?void 0:j.data)&&((g=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:g.map((s,U)=>e.jsxs(C,{children:[e.jsx(o,{children:h*x-x+U+1}),e.jsx(o,{children:e.jsx(ae,{src:s==null?void 0:s.image,alt:s==null?void 0:s.module_name,className:"h-12 w-12 rounded-full"})}),e.jsx(o,{children:s==null?void 0:s.module_name}),e.jsx(o,{children:"-"}),e.jsx(o,{children:"-"}),e.jsx(o,{children:"-"}),e.jsx(o,{children:s==null?void 0:s.id}),e.jsx(o,{children:"-"}),e.jsx(o,{children:e.jsx(se,{className:"bg-primary",onClick:()=>t(s==null?void 0:s.id),children:"Edit"})})]},s==null?void 0:s.id)))})]}),e.jsx(B,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(te,{page:h,perPage:x,totalPage:(w=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:w.totalDocs,hasNextPage:(E=(A=a==null?void 0:a.data)==null?void 0:A.data)==null?void 0:E.hasNextPage,hasPrevPage:(_=(T=a==null?void 0:a.data)==null?void 0:T.data)==null?void 0:_.hasPrevPage,setPage:f,setPerPage:N})})]})})]})]})]})}function ge(){return e.jsx(le,{title:"Module List",subTitle:"Manage all the Module Name here",children:e.jsx("div",{children:e.jsx(ue,{})})})}export{ge as default};
