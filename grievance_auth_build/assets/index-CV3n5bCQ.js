import{f as k,r as j,b as S,o as F,v as p,g as u,j as e,F as W,A as m,Z as y,O as I,B as $,w as C,x as T,M as A,y as G,S as H,K as L,c as P,d as b}from"./index-DOg5tZ0E.js";import{T as R,a as B,b as g,c as l,d as V,e as n}from"./table-DEeRP3-S.js";import{P as _}from"./index-CgOOQbWr.js";const E=P().shape({parentId:b(),levelSerial:b()});function K(){var i,d,t,x,h;const v=k(),[c]=j.useState(1),[o]=j.useState(10),r=S({resolver:F(E),defaultValues:{parentId:"",levelSerial:""}}),w=async()=>{s.refetch()},s=p({api:`${u.complaintWorkflowWiseReport}?workflowId=${r==null?void 0:r.watch("parentId")}`,key:"searchAllComplaints",value:[c,o],options:{enabled:!0}}),f=p({api:`${u.getAllWorkFlow}?page=1&limit=1000&parentId=null&levelSerial=1`,key:"getAllWorkFlow",value:[c,o],options:{enabled:!0}});return e.jsxs(e.Fragment,{children:[e.jsx(W,{methods:r,onSubmit:r.handleSubmit(w),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background p-10",children:[e.jsx("h1",{className:"text-xl font-bold text-blue-800 uppercase col-span-4",children:"Search Your Grievance "}),e.jsx(m,{className:"col-span-4"}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"parentId",children:"Workflow"}),e.jsx(I,{className:"bg-background cursor-pointer",name:"parentId",data:((t=(d=(i=f.data)==null?void 0:i.data)==null?void 0:d.docs)==null?void 0:t.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.workFlowName})))??[]})]}),e.jsx("div",{}),e.jsx("div",{className:"mt-6",children:e.jsx($,{isLoading:r.formState.isSubmitting,type:"submit",className:" w-auto  px-10 float-right",children:"Search"})})]})}),e.jsx("div",{className:"mt-2",children:e.jsxs(C,{children:[e.jsx(T,{className:"px-7",children:e.jsx(A,{children:"Grievance List"})}),e.jsx(G,{children:s!=null&&s.isFetching?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(H,{})}):e.jsxs("div",{children:[e.jsxs(R,{children:[e.jsx(B,{children:e.jsxs(g,{children:[e.jsx(l,{className:"",children:"#"}),e.jsx(l,{className:"",children:"WorkFlow Name"}),e.jsx(l,{className:"",children:"Total Grievance no."}),e.jsx(l,{className:"",children:"View Grievance List"})]})}),e.jsx(V,{children:(h=(x=s==null?void 0:s.data)==null?void 0:x.data)==null?void 0:h.map((a,N)=>e.jsxs(g,{children:[e.jsx(n,{children:N+1}),e.jsx(n,{children:a.workFlowName}),e.jsx(n,{children:a.complaintCount}),e.jsx(n,{children:e.jsx(L,{className:"bg-primary md:ml-5",onClick:()=>{v(`/grievance/dashboard/workflow-byId-Report?workflowId=${a==null?void 0:a._id}`)},children:"View"})})]},a._id))})]}),e.jsx(m,{className:"mb-2 mt-4"})]})})]})})]})}function Z(){return e.jsx(_,{title:"Workflow Wise Reports Details",subTitle:"Grievance Workflow Wise Reports",children:e.jsx("div",{className:"",children:e.jsx(K,{})})})}export{Z as default};
