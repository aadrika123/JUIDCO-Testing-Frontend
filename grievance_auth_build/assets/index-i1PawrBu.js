import{a as Q,r as t,k as X,u as Z,c as T,d as ee,b as se,o as ae,j as e,b1 as te,aN as A,_ as u,g as re,C as ne,I as ie,M as le,L as oe}from"./index-Di_aGywo.js";function ce(){const{currentLanguage:l}=Q(),[de,C]=t.useState(null),n=new URLSearchParams(X().search).get("type"),[me,M]=t.useState(null),I=Z({}),j={};t.useEffect(()=>{(async()=>{try{const c=await(await A.post("https://jharkhandegovernance.com/auth/api/property/details/get-owner-details")).data;M(c)}catch(i){console.error("Error fetching user details:",i)}})()},[]),t.useEffect(()=>{C(n?j[n]:null),H()},[n,j]);const[y,p]=t.useState(""),[v,x]=t.useState([]),[U,h]=t.useState(!1),[m,L]=t.useState("default_type"),[g,b]=t.useState(!1),[f,w]=t.useState(!1),[s,_]=t.useState(null),[N,k]=t.useState(!1),[F,D]=t.useState(!1),[O,P]=t.useState();t.useState(!1),t.useState("");const[$,pe]=t.useState("");t.useState(null),t.useState(!1),t.useState(!1),t.useState(!1),t.useState({}),t.useEffect(()=>{x([]),h(!1)},[m]);const S=async()=>{var i;const a={MOBILE_NUMBER:"mobileNo",HOLDING_NUMBER:"holdingNo",SAF_NUMBER:"safNo",CONSUMER_NUMBER:"consumerNo",APPLICATION_NUMBER:"applicationNo",LICENSE_NUMBER:"licenseNo",BOOKING_NUMBER:"bookingNo"};k(!0);try{const c=K(n)||"https://jharkhandegovernance.com/auth/api/property/details/get-owner-details",d=await A.post(c,{filterBy:a[m],filterValue:y});d.status===200&&((i=d.data)!=null&&i.data)?(x(d.data.data),h(!0),u.success("Data Search successful!"),p("")):(u.error("No results found."),x([]),h(!1))}catch(c){console.error("Error fetching data:",c),u.error("Failed to fetch owner details. Please try again later.")}finally{k(!1)}},q=async a=>{_(a),w(!0)},G=a=>{_(a),b(!0)};t.useEffect(()=>(g?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>document.body.classList.remove("overflow-hidden")),[g]),t.useEffect(()=>(f?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>document.body.classList.remove("overflow-hidden")),[f]);const K=a=>({property:"https://jharkhandegovernance.com/auth/api/property/details/get-owner-details",water:"https://jharkhandegovernance.com/auth/api/water/consumer/get-owner-details",trade_License:"https://jharkhandegovernance.com/auth/api/trade/application-search/get-owner-details",septic_Tank_Cleaning:"https://jharkhandegovernance.com/auth/api/septic-tanker/serchSepticTankerInfo",pet_Registration:"https://jharkhandegovernance.com/auth/api/pet/application/searh-pet-details",water_Tanker_Booking:"https://jharkhandegovernance.com/auth/api/water-tanker/searchWaterTankerInfo",lodge_Registration:"https://jharkhandegovernance.com/api/market/lodge/searchApplicationNo",solid_Waste_User_Charge:"https://jharkhandegovernance.com/auth/api/swm/consumerDetalsInformation",Rig_Machine_Registration:"https://jharkhandegovernance.com/auth/api/rig/application/searh-application",Banquet_Registration:"https://jharkhandegovernance.com/auth/api/market/bm-hall/searchBanqute"})[a],H=a=>{},V=T().shape({description:ee().required("Description is required")}),{register:W,handleSubmit:z,reset:Y,formState:{errors:E}}=se({resolver:ae(V)}),J=async a=>{var i,c,d,B;try{const r=new FormData;r.append("citizenName",(s==null?void 0:s.owner_name)||""),r.append("email",""),r.append("mobileNo",(s==null?void 0:s.mobile_no)||""),r.append("complaintTitle",""),r.append("complaintDescription",a.description||""),r.append("moduleName",$),r.append("ulbName",(s==null?void 0:s.ulb_name)||""),r.append("ulbId","66f3fdb76609dc9d192199d1"),r.append("customAddress",""),r.append("complaintTypeId",""),r.append("imageUrl",void 0),r.append("isTransactionIssue","false"),r.append("transactionNo",""),r.append("isCitizen","1"),r.append("wardNo",""),r.append("area",""),r.append("latitude",""),r.append("longitude",""),r.append("holdingNo",(s==null?void 0:s.holding_no)||""),r.append("safNo",(s==null?void 0:s.saf_no)||""),r.append("grievanceLocation","");const o=await I.mutateAsync({api:re.createComplaintApplicationDirect,data:r});(i=o.data)!=null&&i.success?(u.success(((c=o==null?void 0:o.data)==null?void 0:c.message)||"Grievance created successfully"),P((d=o==null?void 0:o.data)==null?void 0:d.data),D(!0),Y({description:""}),b(!1)):u.error(((B=o==null?void 0:o.data)==null?void 0:B.message)||"Grievance not created successfully")}catch(r){console.error("Error in onSubmit:",r),u.error("An error occurred while processing the grievance")}};if(t.useEffect(()=>{p("")},[m]),F)return e.jsx(te,{currentLanguage:l,formResponse:O});const R=()=>n==="property"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Holding Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.holding_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SAF Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.saf_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):n==="water"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Consumer Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.consumer_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):n==="trade_License"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"License Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.license_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):n==="Rig_Machine_Registration"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l==null?void 0:l.MOBILE_NO}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):n==="pet_Registration"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})}):n==="water_Tanker_Booking"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Booking number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.booking_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})}):n==="septic_Tank_Cleaning"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Booking number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.booking_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})}):null;return e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-100 p-4",children:e.jsxs("div",{className:"mx-auto max-w-7xl rounded-lg bg-white p-4 md:p-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:e.jsxs("h1",{className:"mb-4 text-lg font-bold uppercase text-blue-800 md:mb-0 md:text-xl",children:["TRACK YOUR ",n?n.replace(/_/g," "):""," DETAILS"]})}),e.jsx("div",{className:"mt-2 border-b border-[#99B37C]"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"mb-4 flex flex-col gap-2 md:flex-row md:items-center",children:[e.jsxs("select",{value:m,onChange:a=>L(a.target.value),className:"rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",children:[n==="property"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"SAF_NUMBER",children:"SAF Number"}),e.jsx("option",{value:"HOLDING_NUMBER",children:"Holding Number"})]}),n==="water"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CONSUMER_NUMBER",children:"Consumer Number"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),n==="trade_License"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"LICENSE_NUMBER",children:"License Number"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),n==="Rig_Machine_Registration"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),n==="solid_Waste_User_Charge"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CONSUMER_NUMBER",children:"Consumer Number"})]}),n==="pet_Registration"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),n==="water_Tanker_Booking"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"BOOKING_NUMBER",children:"Booking Number"})]}),n==="lodge_Registration"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"LICENSE_NUMBER",children:"License Number"})]}),n==="septic_Tank_Cleaning"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"BOOKING_NUMBER",children:"Booking Number"})]}),n==="Banquet_Registration"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"LICENSE_NUMBER",children:"License Number"})]})]}),e.jsx("input",{type:"text",value:y,onChange:a=>p(a.target.value),onKeyDown:a=>a.key==="Enter"&&S(),placeholder:`Enter your ${m.replace(/_/g," ").toLowerCase()}`,className:"w-full rounded-lg border px-4 py-2 uppercase focus:outline-none focus:ring focus:ring-amber-500"}),e.jsx("button",{type:"button",onClick:S,disabled:N,className:`w-full md:w-auto px-4 py-2 ${N?"bg-gray-500":"bg-amber-500 hover:bg-amber-600"} rounded-lg font-semibold text-white transition`,children:N?"Searching...":"Search"})]})}),U&&(v.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"mt-6 w-full min-w-[600px] table-auto border-collapse",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold uppercase text-gray-700",children:"Grievance No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold uppercase text-gray-700",children:"User Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold uppercase text-gray-700",children:"Mobile No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold uppercase text-gray-700",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold uppercase text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold uppercase text-gray-700",children:"View"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold uppercase text-gray-700",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white overflow-x-auto",children:v.map((a,i)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.consumer_id||i+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.owner_name||a.applicant_name||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.mobile_no||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.prop_address||a.address||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`inline-block rounded-full px-4 py-1 text-xs font-medium text-white ${a.status==="Active"?"bg-green-500":"bg-red-500"}`,children:a.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{className:"w-full rounded-lg bg-gray-600 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-700",onClick:()=>q(a),children:"View"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{className:"w-full rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",onClick:()=>G(a),children:"Proceed"})})]},a.id||i))})]})}):e.jsx("div",{className:"text-center text-base font-semibold text-gray-600",children:"No Data Found"}))]})}),g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"w-11/12 max-w-lg sm:max-w-xl md:max-w-3xl lg:max-w-4xl rounded-lg bg-white p-4 sm:p-6 shadow-lg max-h-screen overflow-y-auto",children:[e.jsx("h2",{className:"mb-4 text-lg sm:text-xl font-bold text-center",children:"Proceed with Grievance"}),e.jsxs("form",{onSubmit:z(J),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owner name"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.owner_name)||""} ${(s==null?void 0:s.applicant_name)||""}`,className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l==null?void 0:l.MOBILE_NO}),e.jsx("input",{type:"text",value:(s==null?void 0:s.mobile_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.prop_address)||""} ${(s==null?void 0:s.address)||""}`,className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ULB Name"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.ulb_name)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Khata Number:"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.khata_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),R()]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{...W("description",{required:!0}),className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",placeholder:"Enter your description here"}),E.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:E.description.message})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"w-full sm:w-auto rounded-lg bg-gray-300 px-4 py-2 font-semibold text-gray-800 transition hover:bg-gray-400",children:"No"}),e.jsx("button",{type:"submit",className:"w-full sm:w-auto rounded-lg bg-amber-500 px-4 py-2 font-semibold text-white transition hover:bg-amber-600",children:"Proceed"})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"w-11/12 max-w-lg sm:max-w-xl md:max-w-3xl rounded-2xl bg-white p-6 shadow-xl max-h-screen overflow-y-auto",children:[e.jsx("h2",{className:"mb-4 text-lg sm:text-2xl font-bold text-gray-800 text-center",children:"View Details"}),e.jsxs("form",{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"User Name"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.owner_name)||""} ${(s==null?void 0:s.applicant_name)||""}`,className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:l==null?void 0:l.MOBILE_NO}),e.jsx("input",{type:"text",value:(s==null?void 0:s.mobile_no)||"",className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.prop_address)||""} ${(s==null?void 0:s.address)||""}`,className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ULB Name"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.ulb_name)||"",className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ULB ID"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.ulb_id)||"",className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]})]}),R(),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("button",{type:"button",onClick:()=>w(!1),className:"w-full sm:w-auto rounded-lg bg-gray-300 px-5 py-2 font-semibold text-gray-800 transition hover:bg-gray-400",children:"Close"})})]})]})})]})}function he(){return e.jsxs("div",{className:"grid sm:grid-cols-4 grid-cols-1 min-h-screen",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-8 py-8 bg-white shadow-md border-r hidden sm:flex",children:[e.jsx(ne,{className:"text-2xl font-bold text-primary mb-4",children:"Module Status"}),e.jsx(ie,{src:"/images/Modules_ Details.svg",className:"w-50 h-auto"}),e.jsx(le,{className:"text-center text-gray-600 mt-4 px-2",children:"Feel free to give us your feedback"}),e.jsxs("div",{className:"mt-4 text-sm text-gray-700 px-4 text-center leading-relaxed space-y-2",children:[e.jsx("p",{children:"Your feedback is very important for us to enhance our system."}),e.jsxs("p",{children:["Please feel free to give us your valuable feedback.",e.jsx(oe,{target:"_blank",className:"underline text-primary hover:text-blue-600 transition",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:"Jan Seva Kendra"})," for further query."]}),e.jsxs("p",{className:"font-semibold",children:["Feel free to contact us on ",e.jsx("span",{className:"text-primary",children:"+91 8458697845"})]})]})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-4 sm:p-8 bg-gray-100 overflow-y-auto",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg p-6 h-full",children:e.jsx(ce,{})})})]})}export{he as default};
