import{u as Y,bb as ne,r as m,a as W,b as oe,o as me,j as e,D as xe,B as Z,F as he,C as X,Z as je,R as ue,w as pe,x as fe,M as j,y as ge,S as be,a0 as x,L as M,K as Ne,c as ve,d as ye,g as Q,_ as i,I as we}from"./index-CtV24Q57.js";import{g as Se}from"./services-KQnp_8oA.js";import{T as Ce,a as Re,b as U,c as n,d as Te,e as o}from"./table-CZIjl9tM.js";const Oe=ve().shape({complaintNo:ye().required("Complaint No. is Required")});function Pe(){var f,g,b,N,v,y,w,S,C,R,T,O,P,F,L,_,E,k,B,$,A,D,H,z,G,I,V,q,K;Y({});const ee=Y({}),a=ne(),[ae,u]=m.useState(!1),[se,te]=m.useState(!1),[re,le]=m.useState(!0),[p,ce]=m.useState("");W();const h=oe({resolver:me(Oe)});console.log(se);const de=async r=>{var l,c,d;try{const s=await a.mutateAsync({api:`${Q.getComplaintDetailsByComplaintNo}/${r==null?void 0:r.complaintNo}`});(l=s.data)!=null&&l.success?i.success((c=s==null?void 0:s.data)==null?void 0:c.message):i.error((d=s==null?void 0:s.data)==null?void 0:d.message)}catch(s){console.log(s)}},ie=async()=>{var r,l,c,d,s,J;try{const t=await ee.mutateAsync({api:Q.verifyEmailOtp,data:{otp:p,email:(c=(l=(r=a==null?void 0:a.data)==null?void 0:r.data)==null?void 0:l.data)==null?void 0:c.email}});(d=t==null?void 0:t.data)!=null&&d.success?(i.success((s=t==null?void 0:t.data)==null?void 0:s.message),u(!1),le(!0)):i.error((J=t==null?void 0:t.data)==null?void 0:J.message)}catch(t){i.error(Se(t.message))}};return e.jsxs(e.Fragment,{children:[e.jsx(xe,{open:ae,setOpen:u,title:"OTP Send to your Registered Email",setEdit:te,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter OTP"}),e.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[e.jsx("input",{value:p,onChange:r=>ce(r.target.value),type:"text",placeholder:"Enter OTP",className:"input-field w-full border border-gray-300 rounded-md p-2"}),e.jsx("div",{children:e.jsx(Z,{type:"button",onClick:ie,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Verify OTP"})})]})]})}),e.jsx(he,{methods:h,onSubmit:h.handleSubmit(de),children:e.jsxs("div",{className:"md:px-24 space-y-4",children:[e.jsx(X,{className:"text-xl text-primary font-bold",children:"Send Reminder"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"md:w-4/12",children:[e.jsx(je,{htmlFor:"complaintNo",children:"Grievance Number"}),e.jsx(ue,{className:"bg-background",name:"complaintNo",placeholder:""})]}),e.jsx("div",{className:"col-span-3 mt-7",children:e.jsx(Z,{isLoading:h.formState.isSubmitting,type:"submit",className:"w-auto rounded-xl px-10 float-right",children:"Submit"})})]})]})}),((g=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:g.success)&&re&&e.jsx("div",{className:"mt-20 md:px-24",children:e.jsxs(pe,{children:[e.jsx(fe,{className:"px-7",children:e.jsx(j,{children:"Grievance List"})}),e.jsx(ge,{children:a.isPending?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(be,{})}):e.jsxs(Ce,{children:[e.jsx(Re,{children:e.jsxs(U,{children:[e.jsx(n,{children:"Grievance No."}),e.jsx(n,{children:"Citizen Name"}),e.jsx(n,{children:"Mobile No."}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"View"})]})}),e.jsx(Te,{children:e.jsxs(U,{children:[e.jsx(o,{children:(v=(N=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:N.data)==null?void 0:v.complaintRefNo}),e.jsx(o,{children:(S=(w=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:w.data)==null?void 0:S.citizenName}),e.jsx(o,{children:(T=(R=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:R.data)==null?void 0:T.mobileNo}),e.jsxs(o,{children:[((F=(P=(O=a==null?void 0:a.data)==null?void 0:O.data)==null?void 0:P.data)==null?void 0:F.wf_status)===3&&e.jsx(x,{className:"bg-amber-400 text-white",children:"Processing"}),((E=(_=(L=a==null?void 0:a.data)==null?void 0:L.data)==null?void 0:_.data)==null?void 0:E.wf_status)===2&&e.jsx(x,{variant:"destructive",children:"Rejected"}),(($=(B=(k=a==null?void 0:a.data)==null?void 0:k.data)==null?void 0:B.data)==null?void 0:$.wf_status)===1&&e.jsx(x,{variant:"success",children:"Resolved"}),((H=(D=(A=a==null?void 0:a.data)==null?void 0:A.data)==null?void 0:D.data)==null?void 0:H.wf_status)===0&&e.jsx(x,{variant:"secondary",children:"Pending"})]}),e.jsx(o,{children:e.jsx(M,{to:`/grievance/citizen/complaint-details?complaintRefNo=${(I=(G=(z=a==null?void 0:a.data)==null?void 0:z.data)==null?void 0:G.data)==null?void 0:I.complaintRefNo}&complaintId=${(K=(q=(V=a==null?void 0:a.data)==null?void 0:V.data)==null?void 0:q.data)==null?void 0:K._id}`,children:e.jsx(Ne,{className:"bg-primary",children:"View"})})})]})})]})})]})})]})}function Ee(){return W(),e.jsxs("div",{className:"grid sm:grid-cols-4 grid-cols-1",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 hidden sm:block",children:[e.jsx(X,{className:"text-xl text-primary font-bold",children:"Send Reminder"}),e.jsx(we,{src:"/images/complain_boy.png",className:"w-40"}),e.jsx(j,{className:"text-center",children:"Feel free to follow up if you have any concerns."}),e.jsxs(j,{className:"text-center",children:["Your feedback is very important for us to enhance our system, Please feel free to give us your valuable feedback.",e.jsx(M,{target:"_blank",className:"underline hover:text-primary",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:"Jan Seva Kendra"})," for further query. & Feel free to contact us on +918458697845"]})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-2 sm:p-10 bg-gray-50 h-screen",children:e.jsx(Pe,{})})]})}export{Ee as default};
