import{r as l,u as g,a as F,b as P,o as R,j as e,D as E,B as x,F as A,R as C,L as M,c as k,d as h,e as B,_ as r,g as D}from"./index-CtV24Q57.js";import{G,L as H}from"./GoogleLogin-CE390OLc.js";import{g as f}from"./services-KQnp_8oA.js";import{R as I}from"./RHFPasswordField-CMLD-xys.js";const O=k({email:h().required(),password:h().min(3)});function $(){const[p,n]=l.useState(!1),[c,m]=l.useState(!1),[j,b]=l.useState(!1),[u,y]=l.useState(""),v=g({}),w=g({}),{login:N}=F(),d=P({defaultValues:{email:"",password:""},resolver:R(O)});console.log(j);const S=async t=>{var o,i,s;try{const a=await v.mutateAsync({api:B.citizenLogin,data:t});(o=a==null?void 0:a.data)!=null&&o.success?(await N(a),r.success((i=a==null?void 0:a.data)==null?void 0:i.message)):r.error((s=a==null?void 0:a.data)==null?void 0:s.message)}catch(a){r.error(f(a.message))}},L=async()=>{var t,o,i;m(!0);try{const s=await w.mutateAsync({api:D.forgetPassword,data:{email:u}});(t=s==null?void 0:s.data)!=null&&t.success?(n(!1),r.success((o=s==null?void 0:s.data)==null?void 0:o.message),m(!1)):r.error((i=s==null?void 0:s.data)==null?void 0:i.message)}catch(s){r.error(f(s.message))}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{open:p,setOpen:n,title:"Reset Your Password",setEdit:b,children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:t=>t.preventDefault(),children:[e.jsx("input",{value:u,onChange:t=>y(t.target.value),type:"text",placeholder:"Your email address",className:"input-field w-full border border-gray-300 rounded-md p-1.5"}),e.jsx("div",{children:e.jsx(x,{type:"button",onClick:L,disabled:c,className:"w-full rounded-xl py-5 px-4 mt-4 shadow-none",variant:"outline",children:c?"Sending...":"Send"})})]})})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-200 via-blue-300 to-blue-400 p-6 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-lg overflow-hidden flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"flex-1 p-10",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-gray-800 mb-6",children:"Login to the Grievance Redressal System"}),e.jsx(A,{methods:d,onSubmit:d.handleSubmit(S),children:e.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(C,{className:"rounded-lg py-5 px-5 w-full bg-gray-100 border border-gray-300",name:"email",inputValidation:["removeSpace"],placeholder:"Enter your User Name"})}),e.jsx("div",{className:"space-y-2",children:e.jsx(I,{className:"rounded-lg py-5 px-5 w-full bg-gray-100 border border-gray-300",name:"password",placeholder:"Enter your Password"})}),e.jsx("div",{children:e.jsx(x,{type:"submit",isLoading:d.formState.isSubmitting,className:"w-full rounded-lg py-5 px-4 mt-2 bg-green-600 text-white font-medium hover:bg-green-700 transition duration-200",variant:"outline",children:"Login"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("hr",{className:"flex-1 border-gray-300"}),e.jsx("span",{className:"text-gray-500",children:"or"}),e.jsx("hr",{className:"flex-1 border-gray-300"})]}),e.jsx("div",{children:e.jsx(G,{})}),e.jsx("div",{children:e.jsx(M,{to:"https://epramaan.meripehchaan.gov.in/",children:e.jsx("div",{className:"flex cursor-pointer text-md font-medium text-white bg-green-600  py-1.5 justify-center hover:bg-green-700 transition duration-200",children:"Sign in with ePramaan"})})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"text-sm text-blue-600 hover:underline ",type:"button",onClick:()=>n(!0),children:"Forgot password?"})})]})})]}),e.jsx("div",{className:"flex-1 bg-gradient-to-b from-gray-200 to-gray-300 flex justify-center items-center lg:block hidden",children:e.jsx(H,{})})]})})]})}export{$ as default};
