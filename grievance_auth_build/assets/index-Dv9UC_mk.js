import{u as k,a as v,r as o,b as F,o as S,j as e,F as z,C as p,Z as n,R as I,H as u,B as R,c as w,d as g,k as U,g as C,_ as x,I as L,M as h,L as q}from"./index-Di_aGywo.js";import{S as A}from"./star-iM4OQtUE.js";const E=w().shape({citizenName:g().required("Citizen Name is required"),feedback:g().required("Feedback is required")});function _(i){const b=new URLSearchParams(U().search).get("complaintId"),f=k({}),{user:a}=v(),[d,j]=o.useState(0),c=F({defaultValues:{citizenName:(a==null?void 0:a.fullName)??"",citizenRating:"",suggestion:"",feedback:"",role:(a==null?void 0:a.role)??"",imageUrl:(a==null?void 0:a.imageUrl)??""},resolver:S(E)}),y=async s=>{var t,m;try{const r=await f.mutateAsync({api:C.createCitizenFeedback,data:{citizenName:s.citizenName,citizenRating:d,feedback:s.feedback,suggestion:s.suggestion,imageUrl:a==null?void 0:a.imageUrl,role:a==null?void 0:a.role,userId:a==null?void 0:a._id,complaintId:b}});(t=r.data)!=null&&t.success?x.success((m=r==null?void 0:r.data)==null?void 0:m.message):x.error("Feedback not submitted"),c.reset({ulbId:"",moduleId:""})}catch(r){console.log(r)}},N=s=>{j(s)};return o.useEffect(()=>{i==null||i.setUserImage(a==null?void 0:a.imageUrl)},[]),e.jsx(z,{methods:c,onSubmit:c.handleSubmit(y),children:e.jsxs("div",{className:"md:px-24 space-y-4",children:[e.jsx(p,{className:"text-xl text-primary font-bold",children:"Rate Us"}),e.jsx("div",{className:"flex space-x-4",children:[...Array(5)].map((s,t)=>e.jsx("span",{onClick:()=>N(t+1),children:e.jsx(A,{size:30,className:`inline cursor-pointer ${t<d?"text-yellow-500":"text-gray-300"}`})},t))}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"citizenName",children:"Write Your Name"}),e.jsx(I,{className:"bg-background w-full rounded-md p-4  border",name:"citizenName",placeholder:"Enter your Name"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"complaintTitle",children:"Feedback"}),e.jsx(u,{className:"bg-background w-full rounded-md p-4 h-40 border",name:"feedback",placeholder:"Enter your feedback"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"complaintTitle",children:"Want to give Your Suggestion ?"}),e.jsx(u,{className:"bg-background w-full rounded-md p-2  border",name:"suggestion",placeholder:"Enter your suggestion"})]}),e.jsx("div",{className:"col-span-3",children:e.jsx(R,{isLoading:c.formState.isSubmitting,type:"submit",className:" w-auto rounded-xl px-10 float-right",children:"Submit"})})]})})}function M(){const[i,l]=o.useState("");return e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4",children:[e.jsx(p,{className:"text-xl text-primary font-bold",children:"Give us your feedback"}),e.jsx(L,{src:i||"/images/complain_boy.png",className:"w-40"}),e.jsx(h,{className:"text-center",children:"Fee free to give us your feedback"}),e.jsxs(h,{className:"text-center",children:["Your feedback is very important for us to enhance our system, Please feel free to give us your valuable feedback.",e.jsx(q,{target:"_blank",className:"underline hover:text-primary",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:"Jan Seva Kendra"})," for further query. & Feel free to contact us on +918458697845"]})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-10 bg-gray-50 h-screen",children:e.jsx(_,{setUserImage:l})})]})}export{M as default};
