var xs=Object.defineProperty;var ks=(A,B,K)=>B in A?xs(A,B,{enumerable:!0,configurable:!0,writable:!0,value:K}):A[B]=K;var Mr=(A,B,K)=>(ks(A,typeof B!="symbol"?B+"":B,K),K),da=(A,B,K)=>{if(!B.has(A))throw TypeError("Cannot "+K)};var ie=(A,B,K)=>(da(A,B,"read from private field"),K?K.call(A):B.get(A)),Ct=(A,B,K)=>{if(B.has(A))throw TypeError("Cannot add the same private member more than once");B instanceof WeakSet?B.add(A):B.set(A,K)},Zt=(A,B,K,V)=>(da(A,B,"write to private field"),V?V.call(A,K):B.set(A,K),K),Ai=(A,B,K,V)=>({set _(W){Zt(A,B,W,K)},get _(){return ie(A,B,V)}}),Dt=(A,B,K)=>(da(A,B,"access private method"),K);import{r as reactExports,R as React,o as e$g,p as reactDomExports,G as GenIcon,q as getAugmentedNamespace,s as commonjsRequire,f as jsxs,F as Fragment,j as jsx,M as Modal,g as useSetTitle,h as useNavigate,i as useParams,d as AxiosInterceptors,e as ApiHeader,k as BarLoader,n as nullToNA,l as MdTag,m as PilotWorkflowDocumentRow,A as AdvertisementApiList}from"./index-ae9171d8.js";var i$h=Object.defineProperty,d$f=(A,B,K)=>B in A?i$h(A,B,{enumerable:!0,configurable:!0,writable:!0,value:K}):A[B]=K,r$i=(A,B,K)=>(d$f(A,typeof B!="symbol"?B+"":B,K),K);let o$j=class{constructor(){r$i(this,"current",this.detect()),r$i(this,"handoffState","pending"),r$i(this,"currentId",0)}set(B){this.current!==B&&(this.handoffState="pending",this.currentId=0,this.current=B)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$i=new o$j,l$j=(A,B)=>{s$i.isServer?reactExports.useEffect(A,B):reactExports.useLayoutEffect(A,B)};function s$h(A){let B=reactExports.useRef(A);return l$j(()=>{B.current=A},[A]),B}let o$i=function(A){let B=s$h(A);return React.useCallback((...K)=>B.current(...K),[B])};function t$l(A){typeof queueMicrotask=="function"?queueMicrotask(A):Promise.resolve().then(A).catch(B=>setTimeout(()=>{throw B}))}function o$h(){let A=[],B={addEventListener(K,V,W,J){return K.addEventListener(V,W,J),B.add(()=>K.removeEventListener(V,W,J))},requestAnimationFrame(...K){let V=requestAnimationFrame(...K);return B.add(()=>cancelAnimationFrame(V))},nextFrame(...K){return B.requestAnimationFrame(()=>B.requestAnimationFrame(...K))},setTimeout(...K){let V=setTimeout(...K);return B.add(()=>clearTimeout(V))},microTask(...K){let V={current:!0};return t$l(()=>{V.current&&K[0]()}),B.add(()=>{V.current=!1})},style(K,V,W){let J=K.style.getPropertyValue(V);return Object.assign(K.style,{[V]:W}),this.add(()=>{Object.assign(K.style,{[V]:J})})},group(K){let V=o$h();return K(V),this.add(()=>V.dispose())},add(K){return A.push(K),()=>{let V=A.indexOf(K);if(V>=0)for(let W of A.splice(V,1))W()}},dispose(){for(let K of A.splice(0))K()}};return B}function p$b(){let[A]=reactExports.useState(o$h);return reactExports.useEffect(()=>()=>A.dispose(),[A]),A}function s$g(){let A=typeof document>"u";return"useSyncExternalStore"in e$g?(B=>B.useSyncExternalStore)(e$g)(()=>()=>{},()=>!1,()=>!A):!1}function l$i(){let A=s$g(),[B,K]=reactExports.useState(s$i.isHandoffComplete);return B&&s$i.isHandoffComplete===!1&&K(!1),reactExports.useEffect(()=>{B!==!0&&K(!0)},[B]),reactExports.useEffect(()=>s$i.handoff(),[]),A?!1:B}var o$g;let I$8=(o$g=React.useId)!=null?o$g:function(){let A=l$i(),[B,K]=React.useState(A?()=>s$i.nextId():null);return l$j(()=>{B===null&&K(s$i.nextId())},[B]),B!=null?""+B:void 0};function u$j(A,B,...K){if(A in B){let W=B[A];return typeof W=="function"?W(...K):W}let V=new Error(`Tried to handle "${A}" but there is no handler defined. Only defined handlers are: ${Object.keys(B).map(W=>`"${W}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,u$j),V}function o$f(A){return s$i.isServer?null:A instanceof Node?A.ownerDocument:A!=null&&A.hasOwnProperty("current")&&A.current instanceof Node?A.current.ownerDocument:document}let c$j=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(A=>`${A}:not([tabindex='-1'])`).join(",");var M$5=(A=>(A[A.First=1]="First",A[A.Previous=2]="Previous",A[A.Next=4]="Next",A[A.Last=8]="Last",A[A.WrapAround=16]="WrapAround",A[A.NoScroll=32]="NoScroll",A))(M$5||{}),N$3=(A=>(A[A.Error=0]="Error",A[A.Overflow=1]="Overflow",A[A.Success=2]="Success",A[A.Underflow=3]="Underflow",A))(N$3||{}),F$3=(A=>(A[A.Previous=-1]="Previous",A[A.Next=1]="Next",A))(F$3||{});function f$e(A=document.body){return A==null?[]:Array.from(A.querySelectorAll(c$j)).sort((B,K)=>Math.sign((B.tabIndex||Number.MAX_SAFE_INTEGER)-(K.tabIndex||Number.MAX_SAFE_INTEGER)))}var T$2=(A=>(A[A.Strict=0]="Strict",A[A.Loose=1]="Loose",A))(T$2||{});function h$8(A,B=0){var K;return A===((K=o$f(A))==null?void 0:K.body)?!1:u$j(B,{[0](){return A.matches(c$j)},[1](){let V=A;for(;V!==null;){if(V.matches(c$j))return!0;V=V.parentElement}return!1}})}var w$3=(A=>(A[A.Keyboard=0]="Keyboard",A[A.Mouse=1]="Mouse",A))(w$3||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",A=>{A.metaKey||A.altKey||A.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",A=>{A.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:A.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function y$5(A){A==null||A.focus({preventScroll:!0})}let S$a=["textarea","input"].join(",");function H(A){var B,K;return(K=(B=A==null?void 0:A.matches)==null?void 0:B.call(A,S$a))!=null?K:!1}function I$7(A,B=K=>K){return A.slice().sort((K,V)=>{let W=B(K),J=B(V);if(W===null||J===null)return 0;let ne=W.compareDocumentPosition(J);return ne&Node.DOCUMENT_POSITION_FOLLOWING?-1:ne&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function O$1(A,B,{sorted:K=!0,relativeTo:V=null,skipElements:W=[]}={}){let J=Array.isArray(A)?A.length>0?A[0].ownerDocument:document:A.ownerDocument,ne=Array.isArray(A)?K?I$7(A):A:f$e(A);W.length>0&&ne.length>1&&(ne=ne.filter(Ae=>!W.includes(Ae))),V=V??J.activeElement;let ge=(()=>{if(B&5)return 1;if(B&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),ve=(()=>{if(B&1)return 0;if(B&2)return Math.max(0,ne.indexOf(V))-1;if(B&4)return Math.max(0,ne.indexOf(V))+1;if(B&8)return ne.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),Te=B&32?{preventScroll:!0}:{},re=0,st=ne.length,nt;do{if(re>=st||re+st<=0)return 0;let Ae=ve+re;if(B&16)Ae=(Ae+st)%st;else{if(Ae<0)return 3;if(Ae>=st)return 1}nt=ne[Ae],nt==null||nt.focus(Te),re+=ge}while(nt!==J.activeElement);return B&6&&H(nt)&&nt.select(),2}function t$k(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$g(){return/Android/gi.test(window.navigator.userAgent)}function n$i(){return t$k()||i$g()}function d$e(A,B,K){let V=s$h(B);reactExports.useEffect(()=>{function W(J){V.current(J)}return document.addEventListener(A,W,K),()=>document.removeEventListener(A,W,K)},[A,K])}function s$f(A,B,K){let V=s$h(B);reactExports.useEffect(()=>{function W(J){V.current(J)}return window.addEventListener(A,W,K),()=>window.removeEventListener(A,W,K)},[A,K])}function y$4(A,B,K=!0){let V=reactExports.useRef(!1);reactExports.useEffect(()=>{requestAnimationFrame(()=>{V.current=K})},[K]);function W(ne,ge){if(!V.current||ne.defaultPrevented)return;let ve=ge(ne);if(ve===null||!ve.getRootNode().contains(ve)||!ve.isConnected)return;let Te=function re(st){return typeof st=="function"?re(st()):Array.isArray(st)||st instanceof Set?st:[st]}(A);for(let re of Te){if(re===null)continue;let st=re instanceof HTMLElement?re:re.current;if(st!=null&&st.contains(ve)||ne.composed&&ne.composedPath().includes(st))return}return!h$8(ve,T$2.Loose)&&ve.tabIndex!==-1&&ne.preventDefault(),B(ne,ve)}let J=reactExports.useRef(null);d$e("pointerdown",ne=>{var ge,ve;V.current&&(J.current=((ve=(ge=ne.composedPath)==null?void 0:ge.call(ne))==null?void 0:ve[0])||ne.target)},!0),d$e("mousedown",ne=>{var ge,ve;V.current&&(J.current=((ve=(ge=ne.composedPath)==null?void 0:ge.call(ne))==null?void 0:ve[0])||ne.target)},!0),d$e("click",ne=>{n$i()||J.current&&(W(ne,()=>J.current),J.current=null)},!0),d$e("touchend",ne=>W(ne,()=>ne.target instanceof HTMLElement?ne.target:null),!0),s$f("blur",ne=>W(ne,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$h(...A){return reactExports.useMemo(()=>o$f(...A),[...A])}let u$i=Symbol();function T$1(A,B=!0){return Object.assign(A,{[u$i]:B})}function y$3(...A){let B=reactExports.useRef(A);reactExports.useEffect(()=>{B.current=A},[A]);let K=o$i(V=>{for(let W of B.current)W!=null&&(typeof W=="function"?W(V):W.current=V)});return A.every(V=>V==null||(V==null?void 0:V[u$i]))?void 0:K}function m$c(A,B){let K=reactExports.useRef([]),V=o$i(A);reactExports.useEffect(()=>{let W=[...K.current];for(let[J,ne]of B.entries())if(K.current[J]!==ne){let ge=V(B,W);return K.current=B,ge}},[V,...B])}function t$j(...A){return Array.from(new Set(A.flatMap(B=>typeof B=="string"?B.split(" "):[]))).filter(Boolean).join(" ")}var O=(A=>(A[A.None=0]="None",A[A.RenderStrategy=1]="RenderStrategy",A[A.Static=2]="Static",A))(O||{}),v$7=(A=>(A[A.Unmount=0]="Unmount",A[A.Hidden=1]="Hidden",A))(v$7||{});function C$4({ourProps:A,theirProps:B,slot:K,defaultTag:V,features:W,visible:J=!0,name:ne,mergeRefs:ge}){ge=ge??k$4;let ve=R(B,A);if(J)return m$b(ve,K,V,ne,ge);let Te=W??0;if(Te&2){let{static:re=!1,...st}=ve;if(re)return m$b(st,K,V,ne,ge)}if(Te&1){let{unmount:re=!0,...st}=ve;return u$j(re?0:1,{[0](){return null},[1](){return m$b({...st,hidden:!0,style:{display:"none"}},K,V,ne,ge)}})}return m$b(ve,K,V,ne,ge)}function m$b(A,B={},K,V,W){let{as:J=K,children:ne,refName:ge="ref",...ve}=F$2(A,["unmount","static"]),Te=A.ref!==void 0?{[ge]:A.ref}:{},re=typeof ne=="function"?ne(B):ne;"className"in ve&&ve.className&&typeof ve.className=="function"&&(ve.className=ve.className(B));let st={};if(B){let nt=!1,Ae=[];for(let[ke,he]of Object.entries(B))typeof he=="boolean"&&(nt=!0),he===!0&&Ae.push(ke);nt&&(st["data-headlessui-state"]=Ae.join(" "))}if(J===reactExports.Fragment&&Object.keys(x$3(ve)).length>0){if(!reactExports.isValidElement(re)||Array.isArray(re)&&re.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${V} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ve).map(he=>`  - ${he}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(he=>`  - ${he}`).join(`
`)].join(`
`));let nt=re.props,Ae=typeof(nt==null?void 0:nt.className)=="function"?(...he)=>t$j(nt==null?void 0:nt.className(...he),ve.className):t$j(nt==null?void 0:nt.className,ve.className),ke=Ae?{className:Ae}:{};return reactExports.cloneElement(re,Object.assign({},R(re.props,x$3(F$2(ve,["ref"]))),st,Te,{ref:W(re.ref,Te.ref)},ke))}return reactExports.createElement(J,Object.assign({},F$2(ve,["ref"]),J!==reactExports.Fragment&&Te,J!==reactExports.Fragment&&st),re)}function k$4(...A){return A.every(B=>B==null)?void 0:B=>{for(let K of A)K!=null&&(typeof K=="function"?K(B):K.current=B)}}function R(...A){if(A.length===0)return{};if(A.length===1)return A[0];let B={},K={};for(let V of A)for(let W in V)W.startsWith("on")&&typeof V[W]=="function"?(K[W]!=null||(K[W]=[]),K[W].push(V[W])):B[W]=V[W];if(B.disabled||B["aria-disabled"])return Object.assign(B,Object.fromEntries(Object.keys(K).map(V=>[V,void 0])));for(let V in K)Object.assign(B,{[V](W,...J){let ne=K[V];for(let ge of ne){if((W instanceof Event||(W==null?void 0:W.nativeEvent)instanceof Event)&&W.defaultPrevented)return;ge(W,...J)}}});return B}function U$2(A){var B;return Object.assign(reactExports.forwardRef(A),{displayName:(B=A.displayName)!=null?B:A.name})}function x$3(A){let B=Object.assign({},A);for(let K in B)B[K]===void 0&&delete B[K];return B}function F$2(A,B=[]){let K=Object.assign({},A);for(let V of B)V in K&&delete K[V];return K}let p$a="div";var s$e=(A=>(A[A.None=1]="None",A[A.Focusable=2]="Focusable",A[A.Hidden=4]="Hidden",A))(s$e||{});function l$h(A,B){var K;let{features:V=1,...W}=A,J={ref:B,"aria-hidden":(V&2)===2?!0:(K=W["aria-hidden"])!=null?K:void 0,hidden:(V&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(V&4)===4&&(V&2)!==2&&{display:"none"}}};return C$4({ourProps:J,theirProps:W,slot:{},defaultTag:p$a,name:"Hidden"})}let u$h=U$2(l$h),n$g=reactExports.createContext(null);n$g.displayName="OpenClosedContext";var d$d=(A=>(A[A.Open=1]="Open",A[A.Closed=2]="Closed",A[A.Closing=4]="Closing",A[A.Opening=8]="Opening",A))(d$d||{});function u$g(){return reactExports.useContext(n$g)}function s$d({value:A,children:B}){return React.createElement(n$g.Provider,{value:A},B)}function t$i(A){function B(){document.readyState!=="loading"&&(A(),document.removeEventListener("DOMContentLoaded",B))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",B),B())}let t$h=[];t$i(()=>{function A(B){B.target instanceof HTMLElement&&B.target!==document.body&&t$h[0]!==B.target&&(t$h.unshift(B.target),t$h=t$h.filter(K=>K!=null&&K.isConnected),t$h.splice(10))}window.addEventListener("click",A,{capture:!0}),window.addEventListener("mousedown",A,{capture:!0}),window.addEventListener("focus",A,{capture:!0}),document.body.addEventListener("click",A,{capture:!0}),document.body.addEventListener("mousedown",A,{capture:!0}),document.body.addEventListener("focus",A,{capture:!0})});function r$h(A){let B=A.parentElement,K=null;for(;B&&!(B instanceof HTMLFieldSetElement);)B instanceof HTMLLegendElement&&(K=B),B=B.parentElement;let V=(B==null?void 0:B.getAttribute("disabled"))==="";return V&&i$f(K)?!1:V}function i$f(A){if(!A)return!1;let B=A.previousElementSibling;for(;B!==null;){if(B instanceof HTMLLegendElement)return!1;B=B.previousElementSibling}return!0}var o$e=(A=>(A.Space=" ",A.Enter="Enter",A.Escape="Escape",A.Backspace="Backspace",A.Delete="Delete",A.ArrowLeft="ArrowLeft",A.ArrowUp="ArrowUp",A.ArrowRight="ArrowRight",A.ArrowDown="ArrowDown",A.Home="Home",A.End="End",A.PageUp="PageUp",A.PageDown="PageDown",A.Tab="Tab",A))(o$e||{});function E$6(A,B,K,V){let W=s$h(K);reactExports.useEffect(()=>{A=A??window;function J(ne){W.current(ne)}return A.addEventListener(B,J,V),()=>A.removeEventListener(B,J,V)},[A,B,V])}function f$d(){let A=reactExports.useRef(!1);return l$j(()=>(A.current=!0,()=>{A.current=!1}),[]),A}function c$i(A){let B=o$i(A),K=reactExports.useRef(!1);reactExports.useEffect(()=>(K.current=!1,()=>{K.current=!0,t$l(()=>{K.current&&B()})}),[B])}var s$c=(A=>(A[A.Forwards=0]="Forwards",A[A.Backwards=1]="Backwards",A))(s$c||{});function n$f(){let A=reactExports.useRef(0);return s$f("keydown",B=>{B.key==="Tab"&&(A.current=B.shiftKey?1:0)},!0),A}function P$3(A){if(!A)return new Set;if(typeof A=="function")return new Set(A());let B=new Set;for(let K of A.current)K.current instanceof HTMLElement&&B.add(K.current);return B}let X="div";var _$2=(A=>(A[A.None=1]="None",A[A.InitialFocus=2]="InitialFocus",A[A.TabLock=4]="TabLock",A[A.FocusLock=8]="FocusLock",A[A.RestoreFocus=16]="RestoreFocus",A[A.All=30]="All",A))(_$2||{});function z$1(A,B){let K=reactExports.useRef(null),V=y$3(K,B),{initialFocus:W,containers:J,features:ne=30,...ge}=A;l$i()||(ne=1);let ve=n$h(K);Y({ownerDocument:ve},Boolean(ne&16));let Te=Z$1({ownerDocument:ve,container:K,initialFocus:W},Boolean(ne&2));$({ownerDocument:ve,container:K,containers:J,previousActiveElement:Te},Boolean(ne&8));let re=n$f(),st=o$i(he=>{let oe=K.current;oe&&(Oe=>Oe())(()=>{u$j(re.current,{[s$c.Forwards]:()=>{O$1(oe,M$5.First,{skipElements:[he.relatedTarget]})},[s$c.Backwards]:()=>{O$1(oe,M$5.Last,{skipElements:[he.relatedTarget]})}})})}),nt=p$b(),Ae=reactExports.useRef(!1),ke={ref:V,onKeyDown(he){he.key=="Tab"&&(Ae.current=!0,nt.requestAnimationFrame(()=>{Ae.current=!1}))},onBlur(he){let oe=P$3(J);K.current instanceof HTMLElement&&oe.add(K.current);let Oe=he.relatedTarget;Oe instanceof HTMLElement&&Oe.dataset.headlessuiFocusGuard!=="true"&&(S$9(oe,Oe)||(Ae.current?O$1(K.current,u$j(re.current,{[s$c.Forwards]:()=>M$5.Next,[s$c.Backwards]:()=>M$5.Previous})|M$5.WrapAround,{relativeTo:he.target}):he.target instanceof HTMLElement&&y$5(he.target)))}};return React.createElement(React.Fragment,null,Boolean(ne&4)&&React.createElement(u$h,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:st,features:s$e.Focusable}),C$4({ourProps:ke,theirProps:ge,defaultTag:X,name:"FocusTrap"}),Boolean(ne&4)&&React.createElement(u$h,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:st,features:s$e.Focusable}))}let D$3=U$2(z$1),de=Object.assign(D$3,{features:_$2});function Q(A=!0){let B=reactExports.useRef(t$h.slice());return m$c(([K],[V])=>{V===!0&&K===!1&&t$l(()=>{B.current.splice(0)}),V===!1&&K===!0&&(B.current=t$h.slice())},[A,t$h,B]),o$i(()=>{var K;return(K=B.current.find(V=>V!=null&&V.isConnected))!=null?K:null})}function Y({ownerDocument:A},B){let K=Q(B);m$c(()=>{B||(A==null?void 0:A.activeElement)===(A==null?void 0:A.body)&&y$5(K())},[B]),c$i(()=>{B&&y$5(K())})}function Z$1({ownerDocument:A,container:B,initialFocus:K},V){let W=reactExports.useRef(null),J=f$d();return m$c(()=>{if(!V)return;let ne=B.current;ne&&t$l(()=>{if(!J.current)return;let ge=A==null?void 0:A.activeElement;if(K!=null&&K.current){if((K==null?void 0:K.current)===ge){W.current=ge;return}}else if(ne.contains(ge)){W.current=ge;return}K!=null&&K.current?y$5(K.current):O$1(ne,M$5.First)===N$3.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),W.current=A==null?void 0:A.activeElement})},[V]),W}function $({ownerDocument:A,container:B,containers:K,previousActiveElement:V},W){let J=f$d();E$6(A==null?void 0:A.defaultView,"focus",ne=>{if(!W||!J.current)return;let ge=P$3(K);B.current instanceof HTMLElement&&ge.add(B.current);let ve=V.current;if(!ve)return;let Te=ne.target;Te&&Te instanceof HTMLElement?S$9(ge,Te)?(V.current=Te,y$5(Te)):(ne.preventDefault(),ne.stopPropagation(),y$5(ve)):y$5(V.current)},!0)}function S$9(A,B){for(let K of A)if(K.contains(B))return!0;return!1}let e$f=reactExports.createContext(!1);function a$j(){return reactExports.useContext(e$f)}function l$g(A){return React.createElement(e$f.Provider,{value:A.force},A.children)}function F$1(A){let B=a$j(),K=reactExports.useContext(_$1),V=n$h(A),[W,J]=reactExports.useState(()=>{if(!B&&K!==null||s$i.isServer)return null;let ne=V==null?void 0:V.getElementById("headlessui-portal-root");if(ne)return ne;if(V===null)return null;let ge=V.createElement("div");return ge.setAttribute("id","headlessui-portal-root"),V.body.appendChild(ge)});return reactExports.useEffect(()=>{W!==null&&(V!=null&&V.body.contains(W)||V==null||V.body.appendChild(W))},[W,V]),reactExports.useEffect(()=>{B||K!==null&&J(K.current)},[K,J,B]),W}let U$1=reactExports.Fragment;function N$2(A,B){let K=A,V=reactExports.useRef(null),W=y$3(T$1(re=>{V.current=re}),B),J=n$h(V),ne=F$1(V),[ge]=reactExports.useState(()=>{var re;return s$i.isServer?null:(re=J==null?void 0:J.createElement("div"))!=null?re:null}),ve=reactExports.useContext(f$c),Te=l$i();return l$j(()=>{!ne||!ge||ne.contains(ge)||(ge.setAttribute("data-headlessui-portal",""),ne.appendChild(ge))},[ne,ge]),l$j(()=>{if(ge&&ve)return ve.register(ge)},[ve,ge]),c$i(()=>{var re;!ne||!ge||(ge instanceof Node&&ne.contains(ge)&&ne.removeChild(ge),ne.childNodes.length<=0&&((re=ne.parentElement)==null||re.removeChild(ne)))}),Te?!ne||!ge?null:reactDomExports.createPortal(C$4({ourProps:{ref:W},theirProps:K,defaultTag:U$1,name:"Portal"}),ge):null}let S$8=reactExports.Fragment,_$1=reactExports.createContext(null);function j$1(A,B){let{target:K,...V}=A,W={ref:y$3(B)};return React.createElement(_$1.Provider,{value:K},C$4({ourProps:W,theirProps:V,defaultTag:S$8,name:"Popover.Group"}))}let f$c=reactExports.createContext(null);function ee(){let A=reactExports.useContext(f$c),B=reactExports.useRef([]),K=o$i(J=>(B.current.push(J),A&&A.register(J),()=>V(J))),V=o$i(J=>{let ne=B.current.indexOf(J);ne!==-1&&B.current.splice(ne,1),A&&A.unregister(J)}),W=reactExports.useMemo(()=>({register:K,unregister:V,portals:B}),[K,V,B]);return[B,reactExports.useMemo(()=>function({children:J}){return React.createElement(f$c.Provider,{value:W},J)},[W])]}let D$2=U$2(N$2),I$6=U$2(j$1),te=Object.assign(D$2,{Group:I$6});function i$e(A,B){return A===B&&(A!==0||1/A===1/B)||A!==A&&B!==B}const d$c=typeof Object.is=="function"?Object.is:i$e,{useState:u$f,useEffect:h$7,useLayoutEffect:f$b,useDebugValue:p$9}=e$g;function y$2(A,B,K){const V=B(),[{inst:W},J]=u$f({inst:{value:V,getSnapshot:B}});return f$b(()=>{W.value=V,W.getSnapshot=B,r$g(W)&&J({inst:W})},[A,V,B]),h$7(()=>(r$g(W)&&J({inst:W}),A(()=>{r$g(W)&&J({inst:W})})),[A]),p$9(V),V}function r$g(A){const B=A.getSnapshot,K=A.value;try{const V=B();return!d$c(K,V)}catch{return!0}}function t$g(A,B,K){return B()}const r$f=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s$b=!r$f,c$h=s$b?t$g:y$2,a$i="useSyncExternalStore"in e$g?(A=>A.useSyncExternalStore)(e$g):c$h;function S$7(A){return a$i(A.subscribe,A.getSnapshot,A.getSnapshot)}function a$h(A,B){let K=A(),V=new Set;return{getSnapshot(){return K},subscribe(W){return V.add(W),()=>V.delete(W)},dispatch(W,...J){let ne=B[W].call(K,...J);ne&&(K=ne,V.forEach(ge=>ge()))}}}function c$g(){let A;return{before({doc:B}){var K;let V=B.documentElement;A=((K=B.defaultView)!=null?K:window).innerWidth-V.clientWidth},after({doc:B,d:K}){let V=B.documentElement,W=V.clientWidth-V.offsetWidth,J=A-W;K.style(V,"paddingRight",`${J}px`)}}}function d$b(){return t$k()?{before({doc:A,d:B,meta:K}){function V(W){return K.containers.flatMap(J=>J()).some(J=>J.contains(W))}B.microTask(()=>{var W;if(window.getComputedStyle(A.documentElement).scrollBehavior!=="auto"){let ge=o$h();ge.style(A.documentElement,"scrollBehavior","auto"),B.add(()=>B.microTask(()=>ge.dispose()))}let J=(W=window.scrollY)!=null?W:window.pageYOffset,ne=null;B.addEventListener(A,"click",ge=>{if(ge.target instanceof HTMLElement)try{let ve=ge.target.closest("a");if(!ve)return;let{hash:Te}=new URL(ve.href),re=A.querySelector(Te);re&&!V(re)&&(ne=re)}catch{}},!0),B.addEventListener(A,"touchstart",ge=>{if(ge.target instanceof HTMLElement)if(V(ge.target)){let ve=ge.target;for(;ve.parentElement&&V(ve.parentElement);)ve=ve.parentElement;B.style(ve,"overscrollBehavior","contain")}else B.style(ge.target,"touchAction","none")}),B.addEventListener(A,"touchmove",ge=>{if(ge.target instanceof HTMLElement)if(V(ge.target)){let ve=ge.target;for(;ve.parentElement&&ve.dataset.headlessuiPortal!==""&&!(ve.scrollHeight>ve.clientHeight||ve.scrollWidth>ve.clientWidth);)ve=ve.parentElement;ve.dataset.headlessuiPortal===""&&ge.preventDefault()}else ge.preventDefault()},{passive:!1}),B.add(()=>{var ge;let ve=(ge=window.scrollY)!=null?ge:window.pageYOffset;J!==ve&&window.scrollTo(0,J),ne&&ne.isConnected&&(ne.scrollIntoView({block:"nearest"}),ne=null)})})}}:{}}function l$f(){return{before({doc:A,d:B}){B.style(A.documentElement,"overflow","hidden")}}}function m$a(A){let B={};for(let K of A)Object.assign(B,K(B));return B}let a$g=a$h(()=>new Map,{PUSH(A,B){var K;let V=(K=this.get(A))!=null?K:{doc:A,count:0,d:o$h(),meta:new Set};return V.count++,V.meta.add(B),this.set(A,V),this},POP(A,B){let K=this.get(A);return K&&(K.count--,K.meta.delete(B)),this},SCROLL_PREVENT({doc:A,d:B,meta:K}){let V={doc:A,d:B,meta:m$a(K)},W=[d$b(),c$g(),l$f()];W.forEach(({before:J})=>J==null?void 0:J(V)),W.forEach(({after:J})=>J==null?void 0:J(V))},SCROLL_ALLOW({d:A}){A.dispose()},TEARDOWN({doc:A}){this.delete(A)}});a$g.subscribe(()=>{let A=a$g.getSnapshot(),B=new Map;for(let[K]of A)B.set(K,K.documentElement.style.overflow);for(let K of A.values()){let V=B.get(K.doc)==="hidden",W=K.count!==0;(W&&!V||!W&&V)&&a$g.dispatch(K.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",K),K.count===0&&a$g.dispatch("TEARDOWN",K)}});function p$8(A,B,K){let V=S$7(a$g),W=A?V.get(A):void 0,J=W?W.count>0:!1;return l$j(()=>{if(!(!A||!B))return a$g.dispatch("PUSH",A,K),()=>a$g.dispatch("POP",A,K)},[B,A]),J}let u$e=new Map,t$f=new Map;function b$8(A,B=!0){l$j(()=>{var K;if(!B)return;let V=typeof A=="function"?A():A.current;if(!V)return;function W(){var ne;if(!V)return;let ge=(ne=t$f.get(V))!=null?ne:1;if(ge===1?t$f.delete(V):t$f.set(V,ge-1),ge!==1)return;let ve=u$e.get(V);ve&&(ve["aria-hidden"]===null?V.removeAttribute("aria-hidden"):V.setAttribute("aria-hidden",ve["aria-hidden"]),V.inert=ve.inert,u$e.delete(V))}let J=(K=t$f.get(V))!=null?K:0;return t$f.set(V,J+1),J!==0||(u$e.set(V,{"aria-hidden":V.getAttribute("aria-hidden"),inert:V.inert}),V.setAttribute("aria-hidden","true"),V.inert=!0),W},[A,B])}function N$1({defaultContainers:A=[],portals:B,mainTreeNodeRef:K}={}){var V;let W=reactExports.useRef((V=K==null?void 0:K.current)!=null?V:null),J=n$h(W),ne=o$i(()=>{var ge,ve,Te;let re=[];for(let st of A)st!==null&&(st instanceof HTMLElement?re.push(st):"current"in st&&st.current instanceof HTMLElement&&re.push(st.current));if(B!=null&&B.current)for(let st of B.current)re.push(st);for(let st of(ge=J==null?void 0:J.querySelectorAll("html > *, body > *"))!=null?ge:[])st!==document.body&&st!==document.head&&st instanceof HTMLElement&&st.id!=="headlessui-portal-root"&&(st.contains(W.current)||st.contains((Te=(ve=W.current)==null?void 0:ve.getRootNode())==null?void 0:Te.host)||re.some(nt=>st.contains(nt))||re.push(st));return re});return{resolveContainers:ne,contains:o$i(ge=>ne().some(ve=>ve.contains(ge))),mainTreeNodeRef:W,MainTreeNode:reactExports.useMemo(()=>function(){return K!=null?null:React.createElement(u$h,{features:s$e.Hidden,ref:W})},[W,K])}}let a$f=reactExports.createContext(()=>{});a$f.displayName="StackContext";var s$a=(A=>(A[A.Add=0]="Add",A[A.Remove=1]="Remove",A))(s$a||{});function x$2(){return reactExports.useContext(a$f)}function b$7({children:A,onUpdate:B,type:K,element:V,enabled:W}){let J=x$2(),ne=o$i((...ge)=>{B==null||B(...ge),J(...ge)});return l$j(()=>{let ge=W===void 0||W===!0;return ge&&ne(0,K,V),()=>{ge&&ne(1,K,V)}},[ne,K,V,W]),React.createElement(a$f.Provider,{value:ne},A)}let d$a=reactExports.createContext(null);function f$a(){let A=reactExports.useContext(d$a);if(A===null){let B=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(B,f$a),B}return A}function w$2(){let[A,B]=reactExports.useState([]);return[A.length>0?A.join(" "):void 0,reactExports.useMemo(()=>function(K){let V=o$i(J=>(B(ne=>[...ne,J]),()=>B(ne=>{let ge=ne.slice(),ve=ge.indexOf(J);return ve!==-1&&ge.splice(ve,1),ge}))),W=reactExports.useMemo(()=>({register:V,slot:K.slot,name:K.name,props:K.props}),[V,K.slot,K.name,K.props]);return React.createElement(d$a.Provider,{value:W},K.children)},[B])]}let I$5="p";function S$6(A,B){let K=I$8(),{id:V=`headlessui-description-${K}`,...W}=A,J=f$a(),ne=y$3(B);l$j(()=>J.register(V),[V,J.register]);let ge={ref:ne,...J.props,id:V};return C$4({ourProps:ge,theirProps:W,slot:J.slot||{},defaultTag:I$5,name:J.name||"Description"})}let h$6=U$2(S$6),G=Object.assign(h$6,{});var Me=(A=>(A[A.Open=0]="Open",A[A.Closed=1]="Closed",A))(Me||{}),we=(A=>(A[A.SetTitleId=0]="SetTitleId",A))(we||{});let He$1={[0](A,B){return A.titleId===B.id?A:{...A,titleId:B.id}}},I$4=reactExports.createContext(null);I$4.displayName="DialogContext";function b$6(A){let B=reactExports.useContext(I$4);if(B===null){let K=new Error(`<${A} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(K,b$6),K}return B}function Be(A,B,K=()=>[document.body]){p$8(A,B,V=>{var W;return{containers:[...(W=V.containers)!=null?W:[],K]}})}function Ge(A,B){return u$j(B.type,He$1,A,B)}let Ne$1="div",Ue=O.RenderStrategy|O.Static;function We(A,B){let K=I$8(),{id:V=`headlessui-dialog-${K}`,open:W,onClose:J,initialFocus:ne,role:ge="dialog",__demoMode:ve=!1,...Te}=A,[re,st]=reactExports.useState(0),nt=reactExports.useRef(!1);ge=function(){return ge==="dialog"||ge==="alertdialog"?ge:(nt.current||(nt.current=!0,console.warn(`Invalid role [${ge}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let Ae=u$g();W===void 0&&Ae!==null&&(W=(Ae&d$d.Open)===d$d.Open);let ke=reactExports.useRef(null),he=y$3(ke,B),oe=n$h(ke),Oe=A.hasOwnProperty("open")||Ae!==null,it=A.hasOwnProperty("onClose");if(!Oe&&!it)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!Oe)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!it)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof W!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${W}`);if(typeof J!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${J}`);let at=W?0:1,[lt,be]=reactExports.useReducer(Ge,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),Ie=o$i(()=>J(!1)),vt=o$i(yt=>be({type:0,id:yt})),dt=l$i()?ve?!1:at===0:!1,Ce=re>1,ft=reactExports.useContext(I$4)!==null,[ct,Et]=ee(),xt={get current(){var yt;return(yt=lt.panelRef.current)!=null?yt:ke.current}},{resolveContainers:ht,mainTreeNodeRef:$t,MainTreeNode:Ot}=N$1({portals:ct,defaultContainers:[xt]}),Vt=Ce?"parent":"leaf",Pt=Ae!==null?(Ae&d$d.Closing)===d$d.Closing:!1,Yt=(()=>ft||Pt?!1:dt)(),Jt=reactExports.useCallback(()=>{var yt,Nt;return(Nt=Array.from((yt=oe==null?void 0:oe.querySelectorAll("body > *"))!=null?yt:[]).find(It=>It.id==="headlessui-portal-root"?!1:It.contains($t.current)&&It instanceof HTMLElement))!=null?Nt:null},[$t]);b$8(Jt,Yt);let sn=(()=>Ce?!0:dt)(),ln=reactExports.useCallback(()=>{var yt,Nt;return(Nt=Array.from((yt=oe==null?void 0:oe.querySelectorAll("[data-headlessui-portal]"))!=null?yt:[]).find(It=>It.contains($t.current)&&It instanceof HTMLElement))!=null?Nt:null},[$t]);b$8(ln,sn);let gt=(()=>!(!dt||Ce))();y$4(ht,yt=>{yt.preventDefault(),Ie()},gt);let ce=(()=>!(Ce||at!==0))();E$6(oe==null?void 0:oe.defaultView,"keydown",yt=>{ce&&(yt.defaultPrevented||yt.key===o$e.Escape&&(yt.preventDefault(),yt.stopPropagation(),Ie()))});let Ee=(()=>!(Pt||at!==0||ft))();Be(oe,Ee,ht),reactExports.useEffect(()=>{if(at!==0||!ke.current)return;let yt=new ResizeObserver(Nt=>{for(let It of Nt){let Xt=It.target.getBoundingClientRect();Xt.x===0&&Xt.y===0&&Xt.width===0&&Xt.height===0&&Ie()}});return yt.observe(ke.current),()=>yt.disconnect()},[at,ke,Ie]);let[pe,rt]=w$2(),ot=reactExports.useMemo(()=>[{dialogState:at,close:Ie,setTitleId:vt},lt],[at,lt,Ie,vt]),pt=reactExports.useMemo(()=>({open:at===0}),[at]),bt={ref:he,id:V,role:ge,"aria-modal":at===0?!0:void 0,"aria-labelledby":lt.titleId,"aria-describedby":pe};return React.createElement(b$7,{type:"Dialog",enabled:at===0,element:ke,onUpdate:o$i((yt,Nt)=>{Nt==="Dialog"&&u$j(yt,{[s$a.Add]:()=>st(It=>It+1),[s$a.Remove]:()=>st(It=>It-1)})})},React.createElement(l$g,{force:!0},React.createElement(te,null,React.createElement(I$4.Provider,{value:ot},React.createElement(te.Group,{target:ke},React.createElement(l$g,{force:!1},React.createElement(rt,{slot:pt,name:"Dialog.Description"},React.createElement(de,{initialFocus:ne,containers:ht,features:dt?u$j(Vt,{parent:de.features.RestoreFocus,leaf:de.features.All&~de.features.FocusLock}):de.features.None},React.createElement(Et,null,C$4({ourProps:bt,theirProps:Te,slot:pt,defaultTag:Ne$1,features:Ue,visible:at===0,name:"Dialog"}))))))))),React.createElement(Ot,null))}let $e="div";function Ye(A,B){let K=I$8(),{id:V=`headlessui-dialog-overlay-${K}`,...W}=A,[{dialogState:J,close:ne}]=b$6("Dialog.Overlay"),ge=y$3(B),ve=o$i(re=>{if(re.target===re.currentTarget){if(r$h(re.currentTarget))return re.preventDefault();re.preventDefault(),re.stopPropagation(),ne()}}),Te=reactExports.useMemo(()=>({open:J===0}),[J]);return C$4({ourProps:{ref:ge,id:V,"aria-hidden":!0,onClick:ve},theirProps:W,slot:Te,defaultTag:$e,name:"Dialog.Overlay"})}let je="div";function Je(A,B){let K=I$8(),{id:V=`headlessui-dialog-backdrop-${K}`,...W}=A,[{dialogState:J},ne]=b$6("Dialog.Backdrop"),ge=y$3(B);reactExports.useEffect(()=>{if(ne.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[ne.panelRef]);let ve=reactExports.useMemo(()=>({open:J===0}),[J]);return React.createElement(l$g,{force:!0},React.createElement(te,null,C$4({ourProps:{ref:ge,id:V,"aria-hidden":!0},theirProps:W,slot:ve,defaultTag:je,name:"Dialog.Backdrop"})))}let Xe="div";function Ke(A,B){let K=I$8(),{id:V=`headlessui-dialog-panel-${K}`,...W}=A,[{dialogState:J},ne]=b$6("Dialog.Panel"),ge=y$3(B,ne.panelRef),ve=reactExports.useMemo(()=>({open:J===0}),[J]),Te=o$i(re=>{re.stopPropagation()});return C$4({ourProps:{ref:ge,id:V,onClick:Te},theirProps:W,slot:ve,defaultTag:Xe,name:"Dialog.Panel"})}let Ve="h2";function qe$1(A,B){let K=I$8(),{id:V=`headlessui-dialog-title-${K}`,...W}=A,[{dialogState:J,setTitleId:ne}]=b$6("Dialog.Title"),ge=y$3(B);reactExports.useEffect(()=>(ne(V),()=>ne(null)),[V,ne]);let ve=reactExports.useMemo(()=>({open:J===0}),[J]);return C$4({ourProps:{ref:ge,id:V},theirProps:W,slot:ve,defaultTag:Ve,name:"Dialog.Title"})}let ze=U$2(We),Qe=U$2(Je),Ze=U$2(Ke),et=U$2(Ye),tt=U$2(qe$1),_t=Object.assign(ze,{Backdrop:Qe,Panel:Ze,Overlay:et,Title:tt,Description:G});function c$f(A=0){let[B,K]=reactExports.useState(A),V=f$d(),W=reactExports.useCallback(ve=>{V.current&&K(Te=>Te|ve)},[B,V]),J=reactExports.useCallback(ve=>Boolean(B&ve),[B]),ne=reactExports.useCallback(ve=>{V.current&&K(Te=>Te&~ve)},[K,V]),ge=reactExports.useCallback(ve=>{V.current&&K(Te=>Te^ve)},[K]);return{flags:B,addFlag:W,hasFlag:J,removeFlag:ne,toggleFlag:ge}}function l$e(A){let B={called:!1};return(...K)=>{if(!B.called)return B.called=!0,A(...K)}}function g$6(A,...B){A&&B.length>0&&A.classList.add(...B)}function v$6(A,...B){A&&B.length>0&&A.classList.remove(...B)}function b$5(A,B){let K=o$h();if(!A)return K.dispose;let{transitionDuration:V,transitionDelay:W}=getComputedStyle(A),[J,ne]=[V,W].map(ve=>{let[Te=0]=ve.split(",").filter(Boolean).map(re=>re.includes("ms")?parseFloat(re):parseFloat(re)*1e3).sort((re,st)=>st-re);return Te}),ge=J+ne;if(ge!==0){K.group(Te=>{Te.setTimeout(()=>{B(),Te.dispose()},ge),Te.addEventListener(A,"transitionrun",re=>{re.target===re.currentTarget&&Te.dispose()})});let ve=K.addEventListener(A,"transitionend",Te=>{Te.target===Te.currentTarget&&(B(),ve())})}else B();return K.add(()=>B()),K.dispose}function M$4(A,B,K,V){let W=K?"enter":"leave",J=o$h(),ne=V!==void 0?l$e(V):()=>{};W==="enter"&&(A.removeAttribute("hidden"),A.style.display="");let ge=u$j(W,{enter:()=>B.enter,leave:()=>B.leave}),ve=u$j(W,{enter:()=>B.enterTo,leave:()=>B.leaveTo}),Te=u$j(W,{enter:()=>B.enterFrom,leave:()=>B.leaveFrom});return v$6(A,...B.base,...B.enter,...B.enterTo,...B.enterFrom,...B.leave,...B.leaveFrom,...B.leaveTo,...B.entered),g$6(A,...B.base,...ge,...Te),J.nextFrame(()=>{v$6(A,...B.base,...ge,...Te),g$6(A,...B.base,...ge,...ve),b$5(A,()=>(v$6(A,...B.base,...ge),g$6(A,...B.base,...B.entered),ne()))}),J.dispose}function D$1({immediate:A,container:B,direction:K,classes:V,onStart:W,onStop:J}){let ne=f$d(),ge=p$b(),ve=s$h(K);l$j(()=>{A&&(ve.current="enter")},[A]),l$j(()=>{let Te=o$h();ge.add(Te.dispose);let re=B.current;if(re&&ve.current!=="idle"&&ne.current)return Te.dispose(),W.current(ve.current),Te.add(M$4(re,V.current,ve.current==="enter",()=>{Te.dispose(),J.current(ve.current)})),Te.dispose},[K])}function S$5(A=""){return A.split(/\s+/).filter(B=>B.length>1)}let I$3=reactExports.createContext(null);I$3.displayName="TransitionContext";var Se=(A=>(A.Visible="visible",A.Hidden="hidden",A))(Se||{});function ye(){let A=reactExports.useContext(I$3);if(A===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return A}function xe(){let A=reactExports.useContext(M$3);if(A===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return A}let M$3=reactExports.createContext(null);M$3.displayName="NestingContext";function U(A){return"children"in A?U(A.children):A.current.filter(({el:B})=>B.current!==null).filter(({state:B})=>B==="visible").length>0}function se(A,B){let K=s$h(A),V=reactExports.useRef([]),W=f$d(),J=p$b(),ne=o$i((Ae,ke=v$7.Hidden)=>{let he=V.current.findIndex(({el:oe})=>oe===Ae);he!==-1&&(u$j(ke,{[v$7.Unmount](){V.current.splice(he,1)},[v$7.Hidden](){V.current[he].state="hidden"}}),J.microTask(()=>{var oe;!U(V)&&W.current&&((oe=K.current)==null||oe.call(K))}))}),ge=o$i(Ae=>{let ke=V.current.find(({el:he})=>he===Ae);return ke?ke.state!=="visible"&&(ke.state="visible"):V.current.push({el:Ae,state:"visible"}),()=>ne(Ae,v$7.Unmount)}),ve=reactExports.useRef([]),Te=reactExports.useRef(Promise.resolve()),re=reactExports.useRef({enter:[],leave:[],idle:[]}),st=o$i((Ae,ke,he)=>{ve.current.splice(0),B&&(B.chains.current[ke]=B.chains.current[ke].filter(([oe])=>oe!==Ae)),B==null||B.chains.current[ke].push([Ae,new Promise(oe=>{ve.current.push(oe)})]),B==null||B.chains.current[ke].push([Ae,new Promise(oe=>{Promise.all(re.current[ke].map(([Oe,it])=>it)).then(()=>oe())})]),ke==="enter"?Te.current=Te.current.then(()=>B==null?void 0:B.wait.current).then(()=>he(ke)):he(ke)}),nt=o$i((Ae,ke,he)=>{Promise.all(re.current[ke].splice(0).map(([oe,Oe])=>Oe)).then(()=>{var oe;(oe=ve.current.shift())==null||oe()}).then(()=>he(ke))});return reactExports.useMemo(()=>({children:V,register:ge,unregister:ne,onStart:st,onStop:nt,wait:Te,chains:re}),[ge,ne,V,st,nt,re,Te])}function Ne(){}let Pe=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ae(A){var B;let K={};for(let V of Pe)K[V]=(B=A[V])!=null?B:Ne;return K}function Re(A){let B=reactExports.useRef(ae(A));return reactExports.useEffect(()=>{B.current=ae(A)},[A]),B}let De="div",le=O.RenderStrategy;function He(A,B){var K,V;let{beforeEnter:W,afterEnter:J,beforeLeave:ne,afterLeave:ge,enter:ve,enterFrom:Te,enterTo:re,entered:st,leave:nt,leaveFrom:Ae,leaveTo:ke,...he}=A,oe=reactExports.useRef(null),Oe=y$3(oe,B),it=(K=he.unmount)==null||K?v$7.Unmount:v$7.Hidden,{show:at,appear:lt,initial:be}=ye(),[Ie,vt]=reactExports.useState(at?"visible":"hidden"),dt=xe(),{register:Ce,unregister:ft}=dt;reactExports.useEffect(()=>Ce(oe),[Ce,oe]),reactExports.useEffect(()=>{if(it===v$7.Hidden&&oe.current){if(at&&Ie!=="visible"){vt("visible");return}return u$j(Ie,{hidden:()=>ft(oe),visible:()=>Ce(oe)})}},[Ie,oe,Ce,ft,at,it]);let ct=s$h({base:S$5(he.className),enter:S$5(ve),enterFrom:S$5(Te),enterTo:S$5(re),entered:S$5(st),leave:S$5(nt),leaveFrom:S$5(Ae),leaveTo:S$5(ke)}),Et=Re({beforeEnter:W,afterEnter:J,beforeLeave:ne,afterLeave:ge}),xt=l$i();reactExports.useEffect(()=>{if(xt&&Ie==="visible"&&oe.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[oe,Ie,xt]);let ht=be&&!lt,$t=lt&&at&&be,Ot=(()=>!xt||ht?"idle":at?"enter":"leave")(),Vt=c$f(0),Pt=o$i(ce=>u$j(ce,{enter:()=>{Vt.addFlag(d$d.Opening),Et.current.beforeEnter()},leave:()=>{Vt.addFlag(d$d.Closing),Et.current.beforeLeave()},idle:()=>{}})),Yt=o$i(ce=>u$j(ce,{enter:()=>{Vt.removeFlag(d$d.Opening),Et.current.afterEnter()},leave:()=>{Vt.removeFlag(d$d.Closing),Et.current.afterLeave()},idle:()=>{}})),Jt=se(()=>{vt("hidden"),ft(oe)},dt),sn=reactExports.useRef(!1);D$1({immediate:$t,container:oe,classes:ct,direction:Ot,onStart:s$h(ce=>{sn.current=!0,Jt.onStart(oe,ce,Pt)}),onStop:s$h(ce=>{sn.current=!1,Jt.onStop(oe,ce,Yt),ce==="leave"&&!U(Jt)&&(vt("hidden"),ft(oe))})});let ln=he,gt={ref:Oe};return $t?ln={...ln,className:t$j(he.className,...ct.current.enter,...ct.current.enterFrom)}:sn.current&&(ln.className=t$j(he.className,(V=oe.current)==null?void 0:V.className),ln.className===""&&delete ln.className),React.createElement(M$3.Provider,{value:Jt},React.createElement(s$d,{value:u$j(Ie,{visible:d$d.Open,hidden:d$d.Closed})|Vt.flags},C$4({ourProps:gt,theirProps:ln,defaultTag:De,features:le,visible:Ie==="visible",name:"Transition.Child"})))}function Fe(A,B){let{show:K,appear:V=!1,unmount:W=!0,...J}=A,ne=reactExports.useRef(null),ge=y$3(ne,B);l$i();let ve=u$g();if(K===void 0&&ve!==null&&(K=(ve&d$d.Open)===d$d.Open),![!0,!1].includes(K))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Te,re]=reactExports.useState(K?"visible":"hidden"),st=se(()=>{re("hidden")}),[nt,Ae]=reactExports.useState(!0),ke=reactExports.useRef([K]);l$j(()=>{nt!==!1&&ke.current[ke.current.length-1]!==K&&(ke.current.push(K),Ae(!1))},[ke,K]);let he=reactExports.useMemo(()=>({show:K,appear:V,initial:nt}),[K,V,nt]);reactExports.useEffect(()=>{if(K)re("visible");else if(!U(st))re("hidden");else{let at=ne.current;if(!at)return;let lt=at.getBoundingClientRect();lt.x===0&&lt.y===0&&lt.width===0&&lt.height===0&&re("hidden")}},[K,st]);let oe={unmount:W},Oe=o$i(()=>{var at;nt&&Ae(!1),(at=A.beforeEnter)==null||at.call(A)}),it=o$i(()=>{var at;nt&&Ae(!1),(at=A.beforeLeave)==null||at.call(A)});return React.createElement(M$3.Provider,{value:st},React.createElement(I$3.Provider,{value:he},C$4({ourProps:{...oe,as:reactExports.Fragment,children:React.createElement(ue,{ref:ge,...oe,...J,beforeEnter:Oe,beforeLeave:it})},theirProps:{},defaultTag:reactExports.Fragment,features:le,visible:Te==="visible",name:"Transition"})))}function _e(A,B){let K=reactExports.useContext(I$3)!==null,V=u$g()!==null;return React.createElement(React.Fragment,null,!K&&V?React.createElement(q,{ref:B,...A}):React.createElement(ue,{ref:B,...A}))}let q=U$2(Fe),ue=U$2(He),Le=U$2(_e),qe=Object.assign(q,{Child:Le,Root:q});function IoClose(A){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(A)}const index$1="",index="";var libExports$h={},lib$h={get exports(){return libExports$h},set exports(A){libExports$h=A}},core_min={},pdfExports={},pdf={get exports(){return pdfExports},set exports(A){pdfExports=A}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(B,K){module.exports=B.pdfjsLib=K()})(globalThis,()=>(()=>{var __webpack_modules__=[,(A,B)=>{var rr;Object.defineProperty(B,"__esModule",{value:!0}),B.VerbosityLevel=B.Util=B.UnknownErrorException=B.UnexpectedResponseException=B.TextRenderingMode=B.RenderingIntentFlag=B.PromiseCapability=B.PermissionFlag=B.PasswordResponses=B.PasswordException=B.PageActionEventType=B.OPS=B.MissingPDFException=B.MAX_IMAGE_SIZE_TO_CACHE=B.LINE_FACTOR=B.LINE_DESCENT_FACTOR=B.InvalidPDFException=B.ImageKind=B.IDENTITY_MATRIX=B.FormatError=B.FeatureTest=B.FONT_IDENTITY_MATRIX=B.DocumentActionEventType=B.CMapCompressionType=B.BaseException=B.BASELINE_FACTOR=B.AnnotationType=B.AnnotationReplyType=B.AnnotationPrefix=B.AnnotationMode=B.AnnotationFlag=B.AnnotationFieldFlag=B.AnnotationEditorType=B.AnnotationEditorPrefix=B.AnnotationEditorParamsType=B.AnnotationBorderStyleType=B.AnnotationActionEventType=B.AbortException=void 0,B.assert=Yt,B.bytesToString=yt,B.createValidAbsoluteUrl=sn,B.getModificationDate=En,B.getUuid=Jn,B.getVerbosityLevel=$t,B.info=Ot,B.isArrayBuffer=nn,B.isArrayEqual=_n,B.isNodeJS=void 0,B.normalizeUnicode=Xn,B.objectFromMap=tn,B.objectSize=Xt,B.setVerbosityLevel=ht,B.shadow=ln,B.string32=It,B.stringToBytes=Nt,B.stringToPDFString=en,B.stringToUTF8String=Bt,B.unreachable=Pt,B.utf8StringToString=zt,B.warn=Vt;const K=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");B.isNodeJS=K;const V=[1,0,0,1,0,0];B.IDENTITY_MATRIX=V;const W=[.001,0,0,.001,0,0];B.FONT_IDENTITY_MATRIX=W;const J=1e7;B.MAX_IMAGE_SIZE_TO_CACHE=J;const ne=1.35;B.LINE_FACTOR=ne;const ge=.35;B.LINE_DESCENT_FACTOR=ge;const ve=ge/ne;B.BASELINE_FACTOR=ve;const Te={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};B.RenderingIntentFlag=Te;const re={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};B.AnnotationMode=re;const st="pdfjs_internal_editor_";B.AnnotationEditorPrefix=st;const nt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};B.AnnotationEditorType=nt;const Ae={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};B.AnnotationEditorParamsType=Ae;const ke={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};B.PermissionFlag=ke;const he={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};B.TextRenderingMode=he;const oe={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};B.ImageKind=oe;const Oe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};B.AnnotationType=Oe;const it={GROUP:"Group",REPLY:"R"};B.AnnotationReplyType=it;const at={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};B.AnnotationFlag=at;const lt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};B.AnnotationFieldFlag=lt;const be={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};B.AnnotationBorderStyleType=be;const Ie={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};B.AnnotationActionEventType=Ie;const vt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};B.DocumentActionEventType=vt;const dt={O:"PageOpen",C:"PageClose"};B.PageActionEventType=dt;const Ce={ERRORS:0,WARNINGS:1,INFOS:5};B.VerbosityLevel=Ce;const ft={NONE:0,BINARY:1};B.CMapCompressionType=ft;const ct={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};B.OPS=ct;const Et={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};B.PasswordResponses=Et;let xt=Ce.WARNINGS;function ht(rn){Number.isInteger(rn)&&(xt=rn)}function $t(){return xt}function Ot(rn){xt>=Ce.INFOS&&console.log(`Info: ${rn}`)}function Vt(rn){xt>=Ce.WARNINGS&&console.log(`Warning: ${rn}`)}function Pt(rn){throw new Error(rn)}function Yt(rn,jt){rn||Pt(jt)}function Jt(rn){switch(rn==null?void 0:rn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sn(rn,jt=null,Rt=null){if(!rn)return null;try{if(Rt&&typeof rn=="string"){if(Rt.addDefaultProtocol&&rn.startsWith("www.")){const on=rn.match(/\./g);(on==null?void 0:on.length)>=2&&(rn=`http://${rn}`)}if(Rt.tryConvertEncoding)try{rn=Bt(rn)}catch{}}const vn=jt?new URL(rn,jt):new URL(rn);if(Jt(vn))return vn}catch{}return null}function ln(rn,jt,Rt,vn=!1){return Object.defineProperty(rn,jt,{value:Rt,enumerable:!vn,configurable:!0,writable:!1}),Rt}const gt=function(){function jt(Rt,vn){this.constructor===jt&&Pt("Cannot initialize BaseException."),this.message=Rt,this.name=vn}return jt.prototype=new Error,jt.constructor=jt,jt}();B.BaseException=gt;class ce extends gt{constructor(jt,Rt){super(jt,"PasswordException"),this.code=Rt}}B.PasswordException=ce;class Ee extends gt{constructor(jt,Rt){super(jt,"UnknownErrorException"),this.details=Rt}}B.UnknownErrorException=Ee;class pe extends gt{constructor(jt){super(jt,"InvalidPDFException")}}B.InvalidPDFException=pe;class rt extends gt{constructor(jt){super(jt,"MissingPDFException")}}B.MissingPDFException=rt;class ot extends gt{constructor(jt,Rt){super(jt,"UnexpectedResponseException"),this.status=Rt}}B.UnexpectedResponseException=ot;class pt extends gt{constructor(jt){super(jt,"FormatError")}}B.FormatError=pt;class bt extends gt{constructor(jt){super(jt,"AbortException")}}B.AbortException=bt;function yt(rn){(typeof rn!="object"||(rn==null?void 0:rn.length)===void 0)&&Pt("Invalid argument for bytesToString");const jt=rn.length,Rt=8192;if(jt<Rt)return String.fromCharCode.apply(null,rn);const vn=[];for(let on=0;on<jt;on+=Rt){const ur=Math.min(on+Rt,jt),Er=rn.subarray(on,ur);vn.push(String.fromCharCode.apply(null,Er))}return vn.join("")}function Nt(rn){typeof rn!="string"&&Pt("Invalid argument for stringToBytes");const jt=rn.length,Rt=new Uint8Array(jt);for(let vn=0;vn<jt;++vn)Rt[vn]=rn.charCodeAt(vn)&255;return Rt}function It(rn){return String.fromCharCode(rn>>24&255,rn>>16&255,rn>>8&255,rn&255)}function Xt(rn){return Object.keys(rn).length}function tn(rn){const jt=Object.create(null);for(const[Rt,vn]of rn)jt[Rt]=vn;return jt}function fn(){const rn=new Uint8Array(4);return rn[0]=1,new Uint32Array(rn.buffer,0,1)[0]===1}function an(){try{return new Function(""),!0}catch{return!1}}class cn{static get isLittleEndian(){return ln(this,"isLittleEndian",fn())}static get isEvalSupported(){return ln(this,"isEvalSupported",an())}static get isOffscreenCanvasSupported(){return ln(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?ln(this,"platform",{isWin:!1,isMac:!1}):ln(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var jt,Rt;return ln(this,"isCSSRoundSupported",(Rt=(jt=globalThis.CSS)==null?void 0:jt.supports)==null?void 0:Rt.call(jt,"width: round(1.5px, 1px)"))}}B.FeatureTest=cn;const hn=[...Array(256).keys()].map(rn=>rn.toString(16).padStart(2,"0"));class un{static makeHexColor(jt,Rt,vn){return`#${hn[jt]}${hn[Rt]}${hn[vn]}`}static scaleMinMax(jt,Rt){let vn;jt[0]?(jt[0]<0&&(vn=Rt[0],Rt[0]=Rt[1],Rt[1]=vn),Rt[0]*=jt[0],Rt[1]*=jt[0],jt[3]<0&&(vn=Rt[2],Rt[2]=Rt[3],Rt[3]=vn),Rt[2]*=jt[3],Rt[3]*=jt[3]):(vn=Rt[0],Rt[0]=Rt[2],Rt[2]=vn,vn=Rt[1],Rt[1]=Rt[3],Rt[3]=vn,jt[1]<0&&(vn=Rt[2],Rt[2]=Rt[3],Rt[3]=vn),Rt[2]*=jt[1],Rt[3]*=jt[1],jt[2]<0&&(vn=Rt[0],Rt[0]=Rt[1],Rt[1]=vn),Rt[0]*=jt[2],Rt[1]*=jt[2]),Rt[0]+=jt[4],Rt[1]+=jt[4],Rt[2]+=jt[5],Rt[3]+=jt[5]}static transform(jt,Rt){return[jt[0]*Rt[0]+jt[2]*Rt[1],jt[1]*Rt[0]+jt[3]*Rt[1],jt[0]*Rt[2]+jt[2]*Rt[3],jt[1]*Rt[2]+jt[3]*Rt[3],jt[0]*Rt[4]+jt[2]*Rt[5]+jt[4],jt[1]*Rt[4]+jt[3]*Rt[5]+jt[5]]}static applyTransform(jt,Rt){const vn=jt[0]*Rt[0]+jt[1]*Rt[2]+Rt[4],on=jt[0]*Rt[1]+jt[1]*Rt[3]+Rt[5];return[vn,on]}static applyInverseTransform(jt,Rt){const vn=Rt[0]*Rt[3]-Rt[1]*Rt[2],on=(jt[0]*Rt[3]-jt[1]*Rt[2]+Rt[2]*Rt[5]-Rt[4]*Rt[3])/vn,ur=(-jt[0]*Rt[1]+jt[1]*Rt[0]+Rt[4]*Rt[1]-Rt[5]*Rt[0])/vn;return[on,ur]}static getAxialAlignedBoundingBox(jt,Rt){const vn=this.applyTransform(jt,Rt),on=this.applyTransform(jt.slice(2,4),Rt),ur=this.applyTransform([jt[0],jt[3]],Rt),Er=this.applyTransform([jt[2],jt[1]],Rt);return[Math.min(vn[0],on[0],ur[0],Er[0]),Math.min(vn[1],on[1],ur[1],Er[1]),Math.max(vn[0],on[0],ur[0],Er[0]),Math.max(vn[1],on[1],ur[1],Er[1])]}static inverseTransform(jt){const Rt=jt[0]*jt[3]-jt[1]*jt[2];return[jt[3]/Rt,-jt[1]/Rt,-jt[2]/Rt,jt[0]/Rt,(jt[2]*jt[5]-jt[4]*jt[3])/Rt,(jt[4]*jt[1]-jt[5]*jt[0])/Rt]}static singularValueDecompose2dScale(jt){const Rt=[jt[0],jt[2],jt[1],jt[3]],vn=jt[0]*Rt[0]+jt[1]*Rt[2],on=jt[0]*Rt[1]+jt[1]*Rt[3],ur=jt[2]*Rt[0]+jt[3]*Rt[2],Er=jt[2]*Rt[1]+jt[3]*Rt[3],Ut=(vn+Er)/2,yn=Math.sqrt((vn+Er)**2-4*(vn*Er-ur*on))/2,Rn=Ut+yn||1,An=Ut-yn||1;return[Math.sqrt(Rn),Math.sqrt(An)]}static normalizeRect(jt){const Rt=jt.slice(0);return jt[0]>jt[2]&&(Rt[0]=jt[2],Rt[2]=jt[0]),jt[1]>jt[3]&&(Rt[1]=jt[3],Rt[3]=jt[1]),Rt}static intersect(jt,Rt){const vn=Math.max(Math.min(jt[0],jt[2]),Math.min(Rt[0],Rt[2])),on=Math.min(Math.max(jt[0],jt[2]),Math.max(Rt[0],Rt[2]));if(vn>on)return null;const ur=Math.max(Math.min(jt[1],jt[3]),Math.min(Rt[1],Rt[3])),Er=Math.min(Math.max(jt[1],jt[3]),Math.max(Rt[1],Rt[3]));return ur>Er?null:[vn,ur,on,Er]}static bezierBoundingBox(jt,Rt,vn,on,ur,Er,Ut,yn){const Rn=[],An=[[],[]];let Fn,Dn,pr,bn,sr,In,wt,fe;for(let Ht=0;Ht<2;++Ht){if(Ht===0?(Dn=6*jt-12*vn+6*ur,Fn=-3*jt+9*vn-9*ur+3*Ut,pr=3*vn-3*jt):(Dn=6*Rt-12*on+6*Er,Fn=-3*Rt+9*on-9*Er+3*yn,pr=3*on-3*Rt),Math.abs(Fn)<1e-12){if(Math.abs(Dn)<1e-12)continue;bn=-pr/Dn,0<bn&&bn<1&&Rn.push(bn);continue}wt=Dn*Dn-4*pr*Fn,fe=Math.sqrt(wt),!(wt<0)&&(sr=(-Dn+fe)/(2*Fn),0<sr&&sr<1&&Rn.push(sr),In=(-Dn-fe)/(2*Fn),0<In&&In<1&&Rn.push(In))}let mt=Rn.length,At;const Ft=mt;for(;mt--;)bn=Rn[mt],At=1-bn,An[0][mt]=At*At*At*jt+3*At*At*bn*vn+3*At*bn*bn*ur+bn*bn*bn*Ut,An[1][mt]=At*At*At*Rt+3*At*At*bn*on+3*At*bn*bn*Er+bn*bn*bn*yn;return An[0][Ft]=jt,An[1][Ft]=Rt,An[0][Ft+1]=Ut,An[1][Ft+1]=yn,An[0].length=An[1].length=Ft+2,[Math.min(...An[0]),Math.min(...An[1]),Math.max(...An[0]),Math.max(...An[1])]}}B.Util=un;const xn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function en(rn){if(rn[0]>=""){let Rt;if(rn[0]===""&&rn[1]===""?Rt="utf-16be":rn[0]===""&&rn[1]===""?Rt="utf-16le":rn[0]===""&&rn[1]===""&&rn[2]===""&&(Rt="utf-8"),Rt)try{const vn=new TextDecoder(Rt,{fatal:!0}),on=Nt(rn);return vn.decode(on)}catch(vn){Vt(`stringToPDFString: "${vn}".`)}}const jt=[];for(let Rt=0,vn=rn.length;Rt<vn;Rt++){const on=xn[rn.charCodeAt(Rt)];jt.push(on?String.fromCharCode(on):rn.charAt(Rt))}return jt.join("")}function Bt(rn){return decodeURIComponent(escape(rn))}function zt(rn){return unescape(encodeURIComponent(rn))}function nn(rn){return typeof rn=="object"&&(rn==null?void 0:rn.byteLength)!==void 0}function _n(rn,jt){if(rn.length!==jt.length)return!1;for(let Rt=0,vn=rn.length;Rt<vn;Rt++)if(rn[Rt]!==jt[Rt])return!1;return!0}function En(rn=new Date){return[rn.getUTCFullYear().toString(),(rn.getUTCMonth()+1).toString().padStart(2,"0"),rn.getUTCDate().toString().padStart(2,"0"),rn.getUTCHours().toString().padStart(2,"0"),rn.getUTCMinutes().toString().padStart(2,"0"),rn.getUTCSeconds().toString().padStart(2,"0")].join("")}class On{constructor(){Ct(this,rr,!1);this.promise=new Promise((jt,Rt)=>{this.resolve=vn=>{Zt(this,rr,!0),jt(vn)},this.reject=vn=>{Zt(this,rr,!0),Rt(vn)}})}get settled(){return ie(this,rr)}}rr=new WeakMap,B.PromiseCapability=On;let Gn=null,Vn=null;function Xn(rn){return Gn||(Gn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Vn=new Map([["","t"]])),rn.replaceAll(Gn,(jt,Rt,vn)=>Rt?Rt.normalize("NFKC"):Vn.get(vn))}function Jn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const rn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(rn);else for(let jt=0;jt<32;jt++)rn[jt]=Math.floor(Math.random()*255);return yt(rn)}const Nn="pdfjs_internal_id_";B.AnnotationPrefix=Nn},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var A,K,V,W,vi,ne,ji,ve,Te,re,st,nt,Ae,ke,he,oe,Bi,it,at,ha,be,Ie;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(dt){if(typeof dt=="string"||dt instanceof URL?dt={url:dt}:(0,_util.isArrayBuffer)(dt)&&(dt={data:dt}),typeof dt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!dt.url&&!dt.data&&!dt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Ce=new PDFDocumentLoadingTask,{docId:ft}=Ce,ct=dt.url?getUrlProp(dt.url):null,Et=dt.data?getDataProp(dt.data):null,xt=dt.httpHeaders||null,ht=dt.withCredentials===!0,$t=dt.password??null,Ot=dt.range instanceof PDFDataRangeTransport?dt.range:null,Vt=Number.isInteger(dt.rangeChunkSize)&&dt.rangeChunkSize>0?dt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Pt=dt.worker instanceof PDFWorker?dt.worker:null;const Yt=dt.verbosity,Jt=typeof dt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(dt.docBaseUrl)?dt.docBaseUrl:null,sn=typeof dt.cMapUrl=="string"?dt.cMapUrl:null,ln=dt.cMapPacked!==!1,gt=dt.CMapReaderFactory||DefaultCMapReaderFactory,ce=typeof dt.standardFontDataUrl=="string"?dt.standardFontDataUrl:null,Ee=dt.StandardFontDataFactory||DefaultStandardFontDataFactory,pe=dt.stopAtErrors!==!0,rt=Number.isInteger(dt.maxImageSize)&&dt.maxImageSize>-1?dt.maxImageSize:-1,ot=dt.isEvalSupported!==!1,pt=typeof dt.isOffscreenCanvasSupported=="boolean"?dt.isOffscreenCanvasSupported:!_util.isNodeJS,bt=Number.isInteger(dt.canvasMaxAreaInBytes)?dt.canvasMaxAreaInBytes:-1,yt=typeof dt.disableFontFace=="boolean"?dt.disableFontFace:_util.isNodeJS,Nt=dt.fontExtraProperties===!0,It=dt.enableXfa===!0,Xt=dt.ownerDocument||globalThis.document,tn=dt.disableRange===!0,fn=dt.disableStream===!0,an=dt.disableAutoFetch===!0,cn=dt.pdfBug===!0,hn=Ot?Ot.length:dt.length??NaN,un=typeof dt.useSystemFonts=="boolean"?dt.useSystemFonts:!_util.isNodeJS&&!yt,xn=typeof dt.useWorkerFetch=="boolean"?dt.useWorkerFetch:gt===_display_utils.DOMCMapReaderFactory&&Ee===_display_utils.DOMStandardFontDataFactory&&sn&&ce&&(0,_display_utils.isValidFetchUrl)(sn,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(ce,document.baseURI),en=dt.canvasFactory||new DefaultCanvasFactory({ownerDocument:Xt}),Bt=dt.filterFactory||new DefaultFilterFactory({docId:ft,ownerDocument:Xt}),zt=null;(0,_util.setVerbosityLevel)(Yt);const nn={canvasFactory:en,filterFactory:Bt};if(xn||(nn.cMapReaderFactory=new gt({baseUrl:sn,isCompressed:ln}),nn.standardFontDataFactory=new Ee({baseUrl:ce})),!Pt){const On={verbosity:Yt,port:_worker_options.GlobalWorkerOptions.workerPort};Pt=On.port?PDFWorker.fromPort(On):new PDFWorker(On),Ce._worker=Pt}const _n={docId:ft,apiVersion:"3.11.174",data:Et,password:$t,disableAutoFetch:an,rangeChunkSize:Vt,length:hn,docBaseUrl:Jt,enableXfa:It,evaluatorOptions:{maxImageSize:rt,disableFontFace:yt,ignoreErrors:pe,isEvalSupported:ot,isOffscreenCanvasSupported:pt,canvasMaxAreaInBytes:bt,fontExtraProperties:Nt,useSystemFonts:un,cMapUrl:xn?sn:null,standardFontDataUrl:xn?ce:null}},En={ignoreErrors:pe,isEvalSupported:ot,disableFontFace:yt,fontExtraProperties:Nt,enableXfa:It,ownerDocument:Xt,disableAutoFetch:an,pdfBug:cn,styleElement:zt};return Pt.promise.then(function(){if(Ce.destroyed)throw new Error("Loading aborted");const On=_fetchDocument(Pt,_n),Gn=new Promise(function(Vn){let Xn;Ot?Xn=new _transport_stream.PDFDataTransportStream({length:hn,initialData:Ot.initialData,progressiveDone:Ot.progressiveDone,contentDispositionFilename:Ot.contentDispositionFilename,disableRange:tn,disableStream:fn},Ot):Et||(Xn=(Nn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Nn):(0,_display_utils.isValidFetchUrl)(Nn.url)?new _displayFetch_stream.PDFFetchStream(Nn):new _displayNetwork.PDFNetworkStream(Nn))({url:ct,length:hn,httpHeaders:xt,withCredentials:ht,rangeChunkSize:Vt,disableRange:tn,disableStream:fn})),Vn(Xn)});return Promise.all([On,Gn]).then(function([Vn,Xn]){if(Ce.destroyed)throw new Error("Loading aborted");const Jn=new _message_handler.MessageHandler(ft,Vn,Pt.port),Nn=new WorkerTransport(Jn,Ce,Xn,En,nn);Ce._transport=Nn,Jn.send("Ready",null)})}).catch(Ce._capability.reject),Ce}async function _fetchDocument(dt,Ce){if(dt.destroyed)throw new Error("Worker was destroyed");const ft=await dt.messageHandler.sendWithPromise("GetDocRequest",Ce,Ce.data?[Ce.data.buffer]:null);if(dt.destroyed)throw new Error("Worker was destroyed");return ft}function getUrlProp(dt){if(dt instanceof URL)return dt.href;try{return new URL(dt,window.location).href}catch{if(_util.isNodeJS&&typeof dt=="string")return dt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(dt){if(_util.isNodeJS&&typeof Buffer<"u"&&dt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(dt instanceof Uint8Array&&dt.byteLength===dt.buffer.byteLength)return dt;if(typeof dt=="string")return(0,_util.stringToBytes)(dt);if(typeof dt=="object"&&!isNaN(dt==null?void 0:dt.length)||(0,_util.isArrayBuffer)(dt))return new Uint8Array(dt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const B=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Ai(B,A)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Ce,ft,ct;this.destroyed=!0;try{(Ce=this._worker)!=null&&Ce.port&&(this._worker._pendingDestroy=!0),await((ft=this._transport)==null?void 0:ft.destroy())}catch(Et){throw(ct=this._worker)!=null&&ct.port&&delete this._worker._pendingDestroy,Et}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=B;A=new WeakMap,Ct(PDFDocumentLoadingTask,A,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Ce,ft,ct=!1,Et=null){this.length=Ce,this.initialData=ft,this.progressiveDone=ct,this.contentDispositionFilename=Et,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Ce){this._rangeListeners.push(Ce)}addProgressListener(Ce){this._progressListeners.push(Ce)}addProgressiveReadListener(Ce){this._progressiveReadListeners.push(Ce)}addProgressiveDoneListener(Ce){this._progressiveDoneListeners.push(Ce)}onDataRange(Ce,ft){for(const ct of this._rangeListeners)ct(Ce,ft)}onDataProgress(Ce,ft){this._readyCapability.promise.then(()=>{for(const ct of this._progressListeners)ct(Ce,ft)})}onDataProgressiveRead(Ce){this._readyCapability.promise.then(()=>{for(const ft of this._progressiveReadListeners)ft(Ce)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Ce of this._progressiveDoneListeners)Ce()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Ce,ft){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Ce,ft){this._pdfInfo=Ce,this._transport=ft,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(ct=>{if(!ct)return ct;const Et=[];for(const xt in ct)Et.push(...ct[xt]);return Et}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Ce){return this._transport.getPage(Ce)}getPageIndex(Ce){return this._transport.getPageIndex(Ce)}getDestinations(){return this._transport.getDestinations()}getDestination(Ce){return this._transport.getDestination(Ce)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Ce=!1){return this._transport.startCleanup(Ce||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Ce,ft,ct,Et=!1){Ct(this,W);Ct(this,ne);Ct(this,K,null);Ct(this,V,!1);this._pageIndex=Ce,this._pageInfo=ft,this._transport=ct,this._stats=Et?new _display_utils.StatTimer:null,this._pdfBug=Et,this.commonObjs=ct.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Ce,rotation:ft=this.rotate,offsetX:ct=0,offsetY:Et=0,dontFlip:xt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Ce,rotation:ft,offsetX:ct,offsetY:Et,dontFlip:xt})}getAnnotations({intent:Ce="display"}={}){const ft=this._transport.getRenderingIntent(Ce);return this._transport.getAnnotations(this._pageIndex,ft.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Ce;return((Ce=this._transport._htmlForXfa)==null?void 0:Ce.children[this._pageIndex])||null}render({canvasContext:Ce,viewport:ft,intent:ct="display",annotationMode:Et=_util.AnnotationMode.ENABLE,transform:xt=null,background:ht=null,optionalContentConfigPromise:$t=null,annotationCanvasMap:Ot=null,pageColors:Vt=null,printAnnotationStorage:Pt=null}){var Ee,pe;(Ee=this._stats)==null||Ee.time("Overall");const Yt=this._transport.getRenderingIntent(ct,Et,Pt);Zt(this,V,!1),Dt(this,ne,ji).call(this),$t||($t=this._transport.getOptionalContentConfig());let Jt=this._intentStates.get(Yt.cacheKey);Jt||(Jt=Object.create(null),this._intentStates.set(Yt.cacheKey,Jt)),Jt.streamReaderCancelTimeout&&(clearTimeout(Jt.streamReaderCancelTimeout),Jt.streamReaderCancelTimeout=null);const sn=!!(Yt.renderingIntent&_util.RenderingIntentFlag.PRINT);Jt.displayReadyCapability||(Jt.displayReadyCapability=new _util.PromiseCapability,Jt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pe=this._stats)==null||pe.time("Page Request"),this._pumpOperatorList(Yt));const ln=rt=>{var ot,pt;Jt.renderTasks.delete(gt),(this._maybeCleanupAfterRender||sn)&&Zt(this,V,!0),Dt(this,W,vi).call(this,!sn),rt?(gt.capability.reject(rt),this._abortOperatorList({intentState:Jt,reason:rt instanceof Error?rt:new Error(rt)})):gt.capability.resolve(),(ot=this._stats)==null||ot.timeEnd("Rendering"),(pt=this._stats)==null||pt.timeEnd("Overall")},gt=new InternalRenderTask({callback:ln,params:{canvasContext:Ce,viewport:ft,transform:xt,background:ht},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ot,operatorList:Jt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!sn,pdfBug:this._pdfBug,pageColors:Vt});(Jt.renderTasks||(Jt.renderTasks=new Set)).add(gt);const ce=gt.task;return Promise.all([Jt.displayReadyCapability.promise,$t]).then(([rt,ot])=>{var pt;if(this.destroyed){ln();return}(pt=this._stats)==null||pt.time("Rendering"),gt.initializeGraphics({transparency:rt,optionalContentConfig:ot}),gt.operatorListChanged()}).catch(ln),ce}getOperatorList({intent:Ce="display",annotationMode:ft=_util.AnnotationMode.ENABLE,printAnnotationStorage:ct=null}={}){var Ot;function Et(){ht.operatorList.lastChunk&&(ht.opListReadCapability.resolve(ht.operatorList),ht.renderTasks.delete($t))}const xt=this._transport.getRenderingIntent(Ce,ft,ct,!0);let ht=this._intentStates.get(xt.cacheKey);ht||(ht=Object.create(null),this._intentStates.set(xt.cacheKey,ht));let $t;return ht.opListReadCapability||($t=Object.create(null),$t.operatorListChanged=Et,ht.opListReadCapability=new _util.PromiseCapability,(ht.renderTasks||(ht.renderTasks=new Set)).add($t),ht.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ot=this._stats)==null||Ot.time("Page Request"),this._pumpOperatorList(xt)),ht.opListReadCapability.promise}streamTextContent({includeMarkedContent:Ce=!1,disableNormalization:ft=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Ce===!0,disableNormalization:ft===!0},{highWaterMark:100,size(Et){return Et.items.length}})}getTextContent(Ce={}){if(this._transport._htmlForXfa)return this.getXfa().then(ct=>_xfa_text.XfaText.textContent(ct));const ft=this.streamTextContent(Ce);return new Promise(function(ct,Et){function xt(){ht.read().then(function({value:Ot,done:Vt}){if(Vt){ct($t);return}Object.assign($t.styles,Ot.styles),$t.items.push(...Ot.items),xt()},Et)}const ht=ft.getReader(),$t={items:[],styles:Object.create(null)};xt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Ce=[];for(const ft of this._intentStates.values())if(this._abortOperatorList({intentState:ft,reason:new Error("Page was destroyed."),force:!0}),!ft.opListReadCapability)for(const ct of ft.renderTasks)Ce.push(ct.completed),ct.cancel();return this.objs.clear(),Zt(this,V,!1),Dt(this,ne,ji).call(this),Promise.all(Ce)}cleanup(Ce=!1){Zt(this,V,!0);const ft=Dt(this,W,vi).call(this,!1);return Ce&&ft&&this._stats&&(this._stats=new _display_utils.StatTimer),ft}_startRenderPage(Ce,ft){var Et,xt;const ct=this._intentStates.get(ft);ct&&((Et=this._stats)==null||Et.timeEnd("Page Request"),(xt=ct.displayReadyCapability)==null||xt.resolve(Ce))}_renderPageChunk(Ce,ft){for(let ct=0,Et=Ce.length;ct<Et;ct++)ft.operatorList.fnArray.push(Ce.fnArray[ct]),ft.operatorList.argsArray.push(Ce.argsArray[ct]);ft.operatorList.lastChunk=Ce.lastChunk,ft.operatorList.separateAnnots=Ce.separateAnnots;for(const ct of ft.renderTasks)ct.operatorListChanged();Ce.lastChunk&&Dt(this,W,vi).call(this,!0)}_pumpOperatorList({renderingIntent:Ce,cacheKey:ft,annotationStorageSerializable:ct}){const{map:Et,transfers:xt}=ct,$t=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Ce,cacheKey:ft,annotationStorage:Et},xt).getReader(),Ot=this._intentStates.get(ft);Ot.streamReader=$t;const Vt=()=>{$t.read().then(({value:Pt,done:Yt})=>{if(Yt){Ot.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Pt,Ot),Vt())},Pt=>{if(Ot.streamReader=null,!this._transport.destroyed){if(Ot.operatorList){Ot.operatorList.lastChunk=!0;for(const Yt of Ot.renderTasks)Yt.operatorListChanged();Dt(this,W,vi).call(this,!0)}if(Ot.displayReadyCapability)Ot.displayReadyCapability.reject(Pt);else if(Ot.opListReadCapability)Ot.opListReadCapability.reject(Pt);else throw Pt}})};Vt()}_abortOperatorList({intentState:Ce,reason:ft,force:ct=!1}){if(Ce.streamReader){if(Ce.streamReaderCancelTimeout&&(clearTimeout(Ce.streamReaderCancelTimeout),Ce.streamReaderCancelTimeout=null),!ct){if(Ce.renderTasks.size>0)return;if(ft instanceof _display_utils.RenderingCancelledException){let Et=RENDERING_CANCELLED_TIMEOUT;ft.extraDelay>0&&ft.extraDelay<1e3&&(Et+=ft.extraDelay),Ce.streamReaderCancelTimeout=setTimeout(()=>{Ce.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Ce,reason:ft,force:!0})},Et);return}}if(Ce.streamReader.cancel(new _util.AbortException(ft.message)).catch(()=>{}),Ce.streamReader=null,!this._transport.destroyed){for(const[Et,xt]of this._intentStates)if(xt===Ce){this._intentStates.delete(Et);break}this.cleanup()}}}get stats(){return this._stats}}K=new WeakMap,V=new WeakMap,W=new WeakSet,vi=function(Ce=!1){if(Dt(this,ne,ji).call(this),!ie(this,V)||this.destroyed)return!1;if(Ce)return Zt(this,K,setTimeout(()=>{Zt(this,K,null),Dt(this,W,vi).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:ft,operatorList:ct}of this._intentStates.values())if(ft.size>0||!ct.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Zt(this,V,!1),!0},ne=new WeakSet,ji=function(){ie(this,K)&&(clearTimeout(ie(this,K)),Zt(this,K,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Ct(this,ve,new Set);Ct(this,Te,Promise.resolve())}postMessage(Ce,ft){const ct={data:structuredClone(Ce,ft?{transfer:ft}:null)};ie(this,Te).then(()=>{for(const Et of ie(this,ve))Et.call(this,ct)})}addEventListener(Ce,ft){ie(this,ve).add(ft)}removeEventListener(Ce,ft){ie(this,ve).delete(ft)}terminate(){ie(this,ve).clear()}}ve=new WeakMap,Te=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const dt=(re=document==null?void 0:document.currentScript)==null?void 0:re.src;dt&&(PDFWorkerUtil.fallbackWorkerSrc=dt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(dt,Ce){let ft;try{if(ft=new URL(dt),!ft.origin||ft.origin==="null")return!1}catch{return!1}const ct=new URL(Ce,ft);return ft.origin===ct.origin},PDFWorkerUtil.createCDNWrapper=function(dt){const Ce=`importScripts("${dt}");`;return URL.createObjectURL(new Blob([Ce]))}}const _PDFWorker=class{constructor({name:dt=null,port:Ce=null,verbosity:ft=(0,_util.getVerbosityLevel)()}={}){var ct;if(this.name=dt,this.destroyed=!1,this.verbosity=ft,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Ce){if((ct=ie(_PDFWorker,st))!=null&&ct.has(Ce))throw new Error("Cannot use more than one PDFWorker per port.");(ie(_PDFWorker,st)||Zt(_PDFWorker,st,new WeakMap)).set(Ce,this),this._initializeFromPort(Ce);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(dt){this._port=dt,this._messageHandler=new _message_handler.MessageHandler("main","worker",dt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:dt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,dt)||(dt=PDFWorkerUtil.createCDNWrapper(new URL(dt,window.location).href));const Ce=new Worker(dt),ft=new _message_handler.MessageHandler("main","worker",Ce),ct=()=>{Ce.removeEventListener("error",Et),ft.destroy(),Ce.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Et=()=>{this._webWorker||ct()};Ce.addEventListener("error",Et),ft.on("test",ht=>{if(Ce.removeEventListener("error",Et),this.destroyed){ct();return}ht?(this._messageHandler=ft,this._port=Ce,this._webWorker=Ce,this._readyCapability.resolve(),ft.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),ft.destroy(),Ce.terminate())}),ft.on("ready",ht=>{if(Ce.removeEventListener("error",Et),this.destroyed){ct();return}try{xt()}catch{this._setupFakeWorker()}});const xt=()=>{const ht=new Uint8Array;ft.send("test",ht,[ht.buffer])};xt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(dt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Ce=new LoopbackPort;this._port=Ce;const ft=`fake${PDFWorkerUtil.fakeWorkerId++}`,ct=new _message_handler.MessageHandler(ft+"_worker",ft,Ce);dt.setup(ct,Ce);const Et=new _message_handler.MessageHandler(ft,ft+"_worker",Ce);this._messageHandler=Et,this._readyCapability.resolve(),Et.send("configure",{verbosity:this.verbosity})}).catch(dt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${dt.message}".`))})}destroy(){var dt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(dt=ie(_PDFWorker,st))==null||dt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(dt){var ft;if(!(dt!=null&&dt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const Ce=(ft=ie(this,st))==null?void 0:ft.get(dt.port);if(Ce){if(Ce._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return Ce}return new _PDFWorker(dt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var dt;try{return((dt=globalThis.pdfjsWorker)==null?void 0:dt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;st=new WeakMap,Ct(PDFWorker,st,void 0),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(Ce,ft,ct,Et,xt){Ct(this,oe);Ct(this,nt,new Map);Ct(this,Ae,new Map);Ct(this,ke,new Map);Ct(this,he,null);this.messageHandler=Ce,this.loadingTask=ft,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Et.ownerDocument,styleElement:Et.styleElement}),this._params=Et,this.canvasFactory=xt.canvasFactory,this.filterFactory=xt.filterFactory,this.cMapReaderFactory=xt.cMapReaderFactory,this.standardFontDataFactory=xt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ct,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Ce,ft=_util.AnnotationMode.ENABLE,ct=null,Et=!1){let xt=_util.RenderingIntentFlag.DISPLAY,ht=_annotation_storage.SerializableEmpty;switch(Ce){case"any":xt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":xt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Ce}`)}switch(ft){case _util.AnnotationMode.DISABLE:xt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:xt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:xt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,ht=(xt&_util.RenderingIntentFlag.PRINT&&ct instanceof _annotation_storage.PrintAnnotationStorage?ct:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${ft}`)}return Et&&(xt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:xt,cacheKey:`${xt}_${ht.hash}`,annotationStorageSerializable:ht}}destroy(){var ct;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(ct=ie(this,he))==null||ct.reject(new Error("Worker was destroyed during onPassword callback"));const Ce=[];for(const Et of ie(this,Ae).values())Ce.push(Et._destroy());ie(this,Ae).clear(),ie(this,ke).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ft=this.messageHandler.sendWithPromise("Terminate",null);return Ce.push(ft),Promise.all(Ce).then(()=>{var Et;this.commonObjs.clear(),this.fontLoader.clear(),ie(this,nt).clear(),this.filterFactory.destroy(),(Et=this._networkStream)==null||Et.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Ce,loadingTask:ft}=this;Ce.on("GetReader",(ct,Et)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=xt=>{this._lastProgress={loaded:xt.loaded,total:xt.total}},Et.onPull=()=>{this._fullReader.read().then(function({value:xt,done:ht}){if(ht){Et.close();return}(0,_util.assert)(xt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Et.enqueue(new Uint8Array(xt),1,[xt])}).catch(xt=>{Et.error(xt)})},Et.onCancel=xt=>{this._fullReader.cancel(xt),Et.ready.catch(ht=>{if(!this.destroyed)throw ht})}}),Ce.on("ReaderHeadersReady",ct=>{const Et=new _util.PromiseCapability,xt=this._fullReader;return xt.headersReady.then(()=>{var ht;(!xt.isStreamingSupported||!xt.isRangeSupported)&&(this._lastProgress&&((ht=ft.onProgress)==null||ht.call(ft,this._lastProgress)),xt.onProgress=$t=>{var Ot;(Ot=ft.onProgress)==null||Ot.call(ft,{loaded:$t.loaded,total:$t.total})}),Et.resolve({isStreamingSupported:xt.isStreamingSupported,isRangeSupported:xt.isRangeSupported,contentLength:xt.contentLength})},Et.reject),Et.promise}),Ce.on("GetRangeReader",(ct,Et)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const xt=this._networkStream.getRangeReader(ct.begin,ct.end);if(!xt){Et.close();return}Et.onPull=()=>{xt.read().then(function({value:ht,done:$t}){if($t){Et.close();return}(0,_util.assert)(ht instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Et.enqueue(new Uint8Array(ht),1,[ht])}).catch(ht=>{Et.error(ht)})},Et.onCancel=ht=>{xt.cancel(ht),Et.ready.catch($t=>{if(!this.destroyed)throw $t})}}),Ce.on("GetDoc",({pdfInfo:ct})=>{this._numPages=ct.numPages,this._htmlForXfa=ct.htmlForXfa,delete ct.htmlForXfa,ft._capability.resolve(new PDFDocumentProxy(ct,this))}),Ce.on("DocException",function(ct){let Et;switch(ct.name){case"PasswordException":Et=new _util.PasswordException(ct.message,ct.code);break;case"InvalidPDFException":Et=new _util.InvalidPDFException(ct.message);break;case"MissingPDFException":Et=new _util.MissingPDFException(ct.message);break;case"UnexpectedResponseException":Et=new _util.UnexpectedResponseException(ct.message,ct.status);break;case"UnknownErrorException":Et=new _util.UnknownErrorException(ct.message,ct.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}ft._capability.reject(Et)}),Ce.on("PasswordRequest",ct=>{if(Zt(this,he,new _util.PromiseCapability),ft.onPassword){const Et=xt=>{xt instanceof Error?ie(this,he).reject(xt):ie(this,he).resolve({password:xt})};try{ft.onPassword(Et,ct.code)}catch(xt){ie(this,he).reject(xt)}}else ie(this,he).reject(new _util.PasswordException(ct.message,ct.code));return ie(this,he).promise}),Ce.on("DataLoaded",ct=>{var Et;(Et=ft.onProgress)==null||Et.call(ft,{loaded:ct.length,total:ct.length}),this.downloadInfoCapability.resolve(ct)}),Ce.on("StartRenderPage",ct=>{if(this.destroyed)return;ie(this,Ae).get(ct.pageIndex)._startRenderPage(ct.transparency,ct.cacheKey)}),Ce.on("commonobj",([ct,Et,xt])=>{var ht;if(!this.destroyed&&!this.commonObjs.has(ct))switch(Et){case"Font":const $t=this._params;if("error"in xt){const Pt=xt.error;(0,_util.warn)(`Error during font loading: ${Pt}`),this.commonObjs.resolve(ct,Pt);break}const Ot=$t.pdfBug&&((ht=globalThis.FontInspector)!=null&&ht.enabled)?(Pt,Yt)=>globalThis.FontInspector.fontAdded(Pt,Yt):null,Vt=new _font_loader.FontFaceObject(xt,{isEvalSupported:$t.isEvalSupported,disableFontFace:$t.disableFontFace,ignoreErrors:$t.ignoreErrors,inspectFont:Ot});this.fontLoader.bind(Vt).catch(Pt=>Ce.sendWithPromise("FontFallback",{id:ct})).finally(()=>{!$t.fontExtraProperties&&Vt.data&&(Vt.data=null),this.commonObjs.resolve(ct,Vt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ct,xt);break;default:throw new Error(`Got unknown common object type ${Et}`)}}),Ce.on("obj",([ct,Et,xt,ht])=>{var Ot;if(this.destroyed)return;const $t=ie(this,Ae).get(Et);if(!$t.objs.has(ct))switch(xt){case"Image":if($t.objs.resolve(ct,ht),ht){let Vt;if(ht.bitmap){const{width:Pt,height:Yt}=ht;Vt=Pt*Yt*4}else Vt=((Ot=ht.data)==null?void 0:Ot.length)||0;Vt>_util.MAX_IMAGE_SIZE_TO_CACHE&&($t._maybeCleanupAfterRender=!0)}break;case"Pattern":$t.objs.resolve(ct,ht);break;default:throw new Error(`Got unknown object type ${xt}`)}}),Ce.on("DocProgress",ct=>{var Et;this.destroyed||(Et=ft.onProgress)==null||Et.call(ft,{loaded:ct.loaded,total:ct.total})}),Ce.on("FetchBuiltInCMap",ct=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(ct):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Ce.on("FetchStandardFontData",ct=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(ct):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ct;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:Ce,transfers:ft}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:Ce,filename:((ct=this._fullReader)==null?void 0:ct.filename)??null},ft).finally(()=>{this.annotationStorage.resetModified()})}getPage(Ce){if(!Number.isInteger(Ce)||Ce<=0||Ce>this._numPages)return Promise.reject(new Error("Invalid page request."));const ft=Ce-1,ct=ie(this,ke).get(ft);if(ct)return ct;const Et=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ft}).then(xt=>{if(this.destroyed)throw new Error("Transport destroyed");const ht=new PDFPageProxy(ft,xt,this,this._params.pdfBug);return ie(this,Ae).set(ft,ht),ht});return ie(this,ke).set(ft,Et),Et}getPageIndex(Ce){return typeof Ce!="object"||Ce===null||!Number.isInteger(Ce.num)||Ce.num<0||!Number.isInteger(Ce.gen)||Ce.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Ce.num,gen:Ce.gen})}getAnnotations(Ce,ft){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Ce,intent:ft})}getFieldObjects(){return Dt(this,oe,Bi).call(this,"GetFieldObjects")}hasJSActions(){return Dt(this,oe,Bi).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Ce){return typeof Ce!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Ce})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Dt(this,oe,Bi).call(this,"GetDocJSActions")}getPageJSActions(Ce){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Ce})}getStructTree(Ce){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Ce})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Ce=>new _optional_content_config.OptionalContentConfig(Ce))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Ce="GetMetadata",ft=ie(this,nt).get(Ce);if(ft)return ft;const ct=this.messageHandler.sendWithPromise(Ce,null).then(Et=>{var xt,ht;return{info:Et[0],metadata:Et[1]?new _metadata.Metadata(Et[1]):null,contentDispositionFilename:((xt=this._fullReader)==null?void 0:xt.filename)??null,contentLength:((ht=this._fullReader)==null?void 0:ht.contentLength)??null}});return ie(this,nt).set(Ce,ct),ct}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Ce=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ft of ie(this,Ae).values())if(!ft.cleanup())throw new Error(`startCleanup: Page ${ft.pageNumber} is currently rendering.`);this.commonObjs.clear(),Ce||this.fontLoader.clear(),ie(this,nt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Ce,enableXfa:ft}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Ce,enableXfa:ft})}}nt=new WeakMap,Ae=new WeakMap,ke=new WeakMap,he=new WeakMap,oe=new WeakSet,Bi=function(Ce,ft=null){const ct=ie(this,nt).get(Ce);if(ct)return ct;const Et=this.messageHandler.sendWithPromise(Ce,ft);return ie(this,nt).set(Ce,Et),Et};class PDFObjects{constructor(){Ct(this,at);Ct(this,it,Object.create(null))}get(Ce,ft=null){if(ft){const Et=Dt(this,at,ha).call(this,Ce);return Et.capability.promise.then(()=>ft(Et.data)),null}const ct=ie(this,it)[Ce];if(!(ct!=null&&ct.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Ce}.`);return ct.data}has(Ce){const ft=ie(this,it)[Ce];return(ft==null?void 0:ft.capability.settled)||!1}resolve(Ce,ft=null){const ct=Dt(this,at,ha).call(this,Ce);ct.data=ft,ct.capability.resolve()}clear(){var Ce;for(const ft in ie(this,it)){const{data:ct}=ie(this,it)[ft];(Ce=ct==null?void 0:ct.bitmap)==null||Ce.close()}Zt(this,it,Object.create(null))}}it=new WeakMap,at=new WeakSet,ha=function(Ce){var ft;return(ft=ie(this,it))[Ce]||(ft[Ce]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Ce){Ct(this,be,null);Zt(this,be,Ce),this.onContinue=null}get promise(){return ie(this,be).capability.promise}cancel(Ce=0){ie(this,be).cancel(null,Ce)}get separateAnnots(){const{separateAnnots:Ce}=ie(this,be).operatorList;if(!Ce)return!1;const{annotationCanvasMap:ft}=ie(this,be);return Ce.form||Ce.canvas&&(ft==null?void 0:ft.size)>0}}be=new WeakMap,exports.RenderTask=RenderTask;const vt=class{constructor({callback:Ce,params:ft,objs:ct,commonObjs:Et,annotationCanvasMap:xt,operatorList:ht,pageIndex:$t,canvasFactory:Ot,filterFactory:Vt,useRequestAnimationFrame:Pt=!1,pdfBug:Yt=!1,pageColors:Jt=null}){this.callback=Ce,this.params=ft,this.objs=ct,this.commonObjs=Et,this.annotationCanvasMap=xt,this.operatorListIdx=null,this.operatorList=ht,this._pageIndex=$t,this.canvasFactory=Ot,this.filterFactory=Vt,this._pdfBug=Yt,this.pageColors=Jt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Pt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ft.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Ce=!1,optionalContentConfig:ft}){var $t,Ot;if(this.cancelled)return;if(this._canvas){if(ie(vt,Ie).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ie(vt,Ie).add(this._canvas)}this._pdfBug&&(($t=globalThis.StepperManager)!=null&&$t.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:ct,viewport:Et,transform:xt,background:ht}=this.params;this.gfx=new _canvas.CanvasGraphics(ct,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ft},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:xt,viewport:Et,transparency:Ce,background:ht}),this.operatorListIdx=0,this.graphicsReady=!0,(Ot=this.graphicsReadyCallback)==null||Ot.call(this)}cancel(Ce=null,ft=0){var ct;this.running=!1,this.cancelled=!0,(ct=this.gfx)==null||ct.endDrawing(),ie(vt,Ie).delete(this._canvas),this.callback(Ce||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ft))}operatorListChanged(){var Ce;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Ce=this.stepper)==null||Ce.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ie(vt,Ie).delete(this._canvas),this.callback())))}};let InternalRenderTask=vt;Ie=new WeakMap,Ct(InternalRenderTask,Ie,new WeakSet);const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(A,B,K)=>{var Te,re,st,uo,Ae;Object.defineProperty(B,"__esModule",{value:!0}),B.SerializableEmpty=B.PrintAnnotationStorage=B.AnnotationStorage=void 0;var V=K(1),W=K(4),J=K(8);const ne=Object.freeze({map:null,hash:"",transfers:void 0});B.SerializableEmpty=ne;class ge{constructor(){Ct(this,st);Ct(this,Te,!1);Ct(this,re,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(he,oe){const Oe=ie(this,re).get(he);return Oe===void 0?oe:Object.assign(oe,Oe)}getRawValue(he){return ie(this,re).get(he)}remove(he){if(ie(this,re).delete(he),ie(this,re).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const oe of ie(this,re).values())if(oe instanceof W.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(he,oe){const Oe=ie(this,re).get(he);let it=!1;if(Oe!==void 0)for(const[at,lt]of Object.entries(oe))Oe[at]!==lt&&(it=!0,Oe[at]=lt);else it=!0,ie(this,re).set(he,oe);it&&Dt(this,st,uo).call(this),oe instanceof W.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(oe.constructor._type)}has(he){return ie(this,re).has(he)}getAll(){return ie(this,re).size>0?(0,V.objectFromMap)(ie(this,re)):null}setAll(he){for(const[oe,Oe]of Object.entries(he))this.setValue(oe,Oe)}get size(){return ie(this,re).size}resetModified(){ie(this,Te)&&(Zt(this,Te,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ve(this)}get serializable(){if(ie(this,re).size===0)return ne;const he=new Map,oe=new J.MurmurHash3_64,Oe=[],it=Object.create(null);let at=!1;for(const[lt,be]of ie(this,re)){const Ie=be instanceof W.AnnotationEditor?be.serialize(!1,it):be;Ie&&(he.set(lt,Ie),oe.update(`${lt}:${JSON.stringify(Ie)}`),at||(at=!!Ie.bitmap))}if(at)for(const lt of he.values())lt.bitmap&&Oe.push(lt.bitmap);return he.size>0?{map:he,hash:oe.hexdigest(),transfers:Oe}:ne}}Te=new WeakMap,re=new WeakMap,st=new WeakSet,uo=function(){ie(this,Te)||(Zt(this,Te,!0),typeof this.onSetModified=="function"&&this.onSetModified())},B.AnnotationStorage=ge;class ve extends ge{constructor(oe){super();Ct(this,Ae,void 0);const{map:Oe,hash:it,transfers:at}=oe.serializable,lt=structuredClone(Oe,at?{transfer:at}:null);Zt(this,Ae,{map:lt,hash:it,transfers:at})}get print(){(0,V.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return ie(this,Ae)}}Ae=new WeakMap,B.PrintAnnotationStorage=ve},(A,B,K)=>{var ve,Te,re,st,nt,Ae,ke,he,oe,Oe,it,at,lt,be,Ie,fa,dt,pa,ft,ma,Et,ga,ht,ho,Ot,fo,Pt,po,Jt,va,ln,mo;Object.defineProperty(B,"__esModule",{value:!0}),B.AnnotationEditor=void 0;var V=K(5),W=K(1),J=K(6);const ce=class{constructor(pe){Ct(this,Ie);Ct(this,dt);Ct(this,Et);Ct(this,ht);Ct(this,Ot);Ct(this,Pt);Ct(this,Jt);Ct(this,ln);Ct(this,ve,"");Ct(this,Te,!1);Ct(this,re,null);Ct(this,st,null);Ct(this,nt,null);Ct(this,Ae,!1);Ct(this,ke,null);Ct(this,he,this.focusin.bind(this));Ct(this,oe,this.focusout.bind(this));Ct(this,Oe,!1);Ct(this,it,!1);Ct(this,at,!1);Mr(this,"_initialOptions",Object.create(null));Mr(this,"_uiManager",null);Mr(this,"_focusEventsAllowed",!0);Mr(this,"_l10nPromise",null);Ct(this,lt,!1);Ct(this,be,ce._zIndex++);this.constructor===ce&&(0,W.unreachable)("Cannot initialize AnnotationEditor."),this.parent=pe.parent,this.id=pe.id,this.width=this.height=null,this.pageIndex=pe.parent.pageIndex,this.name=pe.name,this.div=null,this._uiManager=pe.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=pe.isCentered,this._structTreeParentId=null;const{rotation:rt,rawDims:{pageWidth:ot,pageHeight:pt,pageX:bt,pageY:yt}}=this.parent.viewport;this.rotation=rt,this.pageRotation=(360+rt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ot,pt],this.pageTranslation=[bt,yt];const[Nt,It]=this.parentDimensions;this.x=pe.x/Nt,this.y=pe.y/It,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,W.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(pe){const rt=new ge({id:pe.parent.getNextId(),parent:pe.parent,uiManager:pe._uiManager});rt.annotationElementId=pe.annotationElementId,rt.deleted=!0,rt._uiManager.addToAnnotationStorage(rt)}static initialize(pe,rt=null){if(ce._l10nPromise||(ce._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(pt=>[pt,pe.get(pt)]))),rt!=null&&rt.strings)for(const pt of rt.strings)ce._l10nPromise.set(pt,pe.get(pt));if(ce._borderLineWidth!==-1)return;const ot=getComputedStyle(document.documentElement);ce._borderLineWidth=parseFloat(ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(pe,rt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(pe){return!1}static paste(pe,rt){(0,W.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return ie(this,lt)}set _isDraggable(pe){var rt;Zt(this,lt,pe),(rt=this.div)==null||rt.classList.toggle("draggable",pe)}center(){const[pe,rt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*rt/(pe*2),this.y+=this.width*pe/(rt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*rt/(pe*2),this.y-=this.width*pe/(rt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(pe){this._uiManager.addCommands(pe)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ie(this,be)}setParent(pe){pe!==null&&(this.pageIndex=pe.pageIndex,this.pageDimensions=pe.pageDimensions),this.parent=pe}focusin(pe){this._focusEventsAllowed&&(ie(this,Oe)?Zt(this,Oe,!1):this.parent.setSelected(this))}focusout(pe){var ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const rt=pe.relatedTarget;rt!=null&&rt.closest(`#${this.id}`)||(pe.preventDefault(),(ot=this.parent)!=null&&ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(pe,rt,ot,pt){const[bt,yt]=this.parentDimensions;[ot,pt]=this.screenToPageTranslation(ot,pt),this.x=(pe+ot)/bt,this.y=(rt+pt)/yt,this.fixAndSetPosition()}translate(pe,rt){Dt(this,Ie,fa).call(this,this.parentDimensions,pe,rt)}translateInPage(pe,rt){Dt(this,Ie,fa).call(this,this.pageDimensions,pe,rt),this.div.scrollIntoView({block:"nearest"})}drag(pe,rt){const[ot,pt]=this.parentDimensions;if(this.x+=pe/ot,this.y+=rt/pt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Xt,y:tn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Xt,tn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:bt,y:yt}=this;const[Nt,It]=Dt(this,dt,pa).call(this);bt+=Nt,yt+=It,this.div.style.left=`${(100*bt).toFixed(2)}%`,this.div.style.top=`${(100*yt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[pe,rt]=this.pageDimensions;let{x:ot,y:pt,width:bt,height:yt}=this;switch(bt*=pe,yt*=rt,ot*=pe,pt*=rt,this.rotation){case 0:ot=Math.max(0,Math.min(pe-bt,ot)),pt=Math.max(0,Math.min(rt-yt,pt));break;case 90:ot=Math.max(0,Math.min(pe-yt,ot)),pt=Math.min(rt,Math.max(bt,pt));break;case 180:ot=Math.min(pe,Math.max(bt,ot)),pt=Math.min(rt,Math.max(yt,pt));break;case 270:ot=Math.min(pe,Math.max(yt,ot)),pt=Math.max(0,Math.min(rt-bt,pt));break}this.x=ot/=pe,this.y=pt/=rt;const[Nt,It]=Dt(this,dt,pa).call(this);ot+=Nt,pt+=It;const{style:Xt}=this.div;Xt.left=`${(100*ot).toFixed(2)}%`,Xt.top=`${(100*pt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(pe,rt){var ot;return Dt(ot=ce,ft,ma).call(ot,pe,rt,this.parentRotation)}pageTranslationToScreen(pe,rt){var ot;return Dt(ot=ce,ft,ma).call(ot,pe,rt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:pe,pageDimensions:[rt,ot]}=this,pt=rt*pe,bt=ot*pe;return W.FeatureTest.isCSSRoundSupported?[Math.round(pt),Math.round(bt)]:[pt,bt]}setDims(pe,rt){var bt;const[ot,pt]=this.parentDimensions;this.div.style.width=`${(100*pe/ot).toFixed(2)}%`,ie(this,Ae)||(this.div.style.height=`${(100*rt/pt).toFixed(2)}%`),(bt=ie(this,re))==null||bt.classList.toggle("small",pe<ce.SMALL_EDITOR_SIZE||rt<ce.SMALL_EDITOR_SIZE)}fixDims(){const{style:pe}=this.div,{height:rt,width:ot}=pe,pt=ot.endsWith("%"),bt=!ie(this,Ae)&&rt.endsWith("%");if(pt&&bt)return;const[yt,Nt]=this.parentDimensions;pt||(pe.width=`${(100*parseFloat(ot)/yt).toFixed(2)}%`),!ie(this,Ae)&&!bt&&(pe.height=`${(100*parseFloat(rt)/Nt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(ie(this,re))return;const pe=Zt(this,re,document.createElement("button"));pe.className="altText";const rt=await ce._l10nPromise.get("editor_alt_text_button_label");pe.textContent=rt,pe.setAttribute("aria-label",rt),pe.tabIndex="0",pe.addEventListener("contextmenu",J.noContextMenu),pe.addEventListener("pointerdown",ot=>ot.stopPropagation()),pe.addEventListener("click",ot=>{ot.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),pe.addEventListener("keydown",ot=>{ot.target===pe&&ot.key==="Enter"&&(ot.preventDefault(),this._uiManager.editAltText(this))}),Dt(this,Jt,va).call(this),this.div.append(pe),ce.SMALL_EDITOR_SIZE||(ce.SMALL_EDITOR_SIZE=Math.min(128,Math.round(pe.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:ie(this,ve),decorative:ie(this,Te)}}set altTextData({altText:pe,decorative:rt}){ie(this,ve)===pe&&ie(this,Te)===rt||(Zt(this,ve,pe),Zt(this,Te,rt),Dt(this,Jt,va).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",ie(this,he)),this.div.addEventListener("focusout",ie(this,oe));const[pe,rt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*rt/pe).toFixed(2)}%`,this.div.style.maxHeight=`${(100*pe/rt).toFixed(2)}%`);const[ot,pt]=this.getInitialTranslation();return this.translate(ot,pt),(0,V.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(pe){const{isMac:rt}=W.FeatureTest.platform;if(pe.button!==0||pe.ctrlKey&&rt){pe.preventDefault();return}Zt(this,Oe,!0),Dt(this,ln,mo).call(this,pe)}moveInDOM(){var pe;(pe=this.parent)==null||pe.moveEditorInDOM(this)}_setParentAndPosition(pe,rt,ot){pe.changeParent(this),this.x=rt,this.y=ot,this.fixAndSetPosition()}getRect(pe,rt){const ot=this.parentScale,[pt,bt]=this.pageDimensions,[yt,Nt]=this.pageTranslation,It=pe/ot,Xt=rt/ot,tn=this.x*pt,fn=this.y*bt,an=this.width*pt,cn=this.height*bt;switch(this.rotation){case 0:return[tn+It+yt,bt-fn-Xt-cn+Nt,tn+It+an+yt,bt-fn-Xt+Nt];case 90:return[tn+Xt+yt,bt-fn+It+Nt,tn+Xt+cn+yt,bt-fn+It+an+Nt];case 180:return[tn-It-an+yt,bt-fn+Xt+Nt,tn-It+yt,bt-fn+Xt+cn+Nt];case 270:return[tn-Xt-cn+yt,bt-fn-It-an+Nt,tn-Xt+yt,bt-fn-It+Nt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(pe,rt){const[ot,pt,bt,yt]=pe,Nt=bt-ot,It=yt-pt;switch(this.rotation){case 0:return[ot,rt-yt,Nt,It];case 90:return[ot,rt-pt,It,Nt];case 180:return[bt,rt-pt,Nt,It];case 270:return[bt,rt-yt,It,Nt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Zt(this,at,!0)}disableEditMode(){Zt(this,at,!1)}isInEditMode(){return ie(this,at)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var pe,rt;(pe=this.div)==null||pe.addEventListener("focusin",ie(this,he)),(rt=this.div)==null||rt.addEventListener("focusout",ie(this,oe))}serialize(pe=!1,rt=null){(0,W.unreachable)("An editor must be serializable")}static deserialize(pe,rt,ot){const pt=new this.prototype.constructor({parent:rt,id:rt.getNextId(),uiManager:ot});pt.rotation=pe.rotation;const[bt,yt]=pt.pageDimensions,[Nt,It,Xt,tn]=pt.getRectInCurrentCoords(pe.rect,yt);return pt.x=Nt/bt,pt.y=It/yt,pt.width=Xt/bt,pt.height=tn/yt,pt}remove(){var pe;this.div.removeEventListener("focusin",ie(this,he)),this.div.removeEventListener("focusout",ie(this,oe)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(pe=ie(this,re))==null||pe.remove(),Zt(this,re,null),Zt(this,st,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Dt(this,ht,ho).call(this),ie(this,ke).classList.remove("hidden"))}select(){var pe;this.makeResizable(),(pe=this.div)==null||pe.classList.add("selectedEditor")}unselect(){var pe,rt,ot;(pe=ie(this,ke))==null||pe.classList.add("hidden"),(rt=this.div)==null||rt.classList.remove("selectedEditor"),(ot=this.div)!=null&&ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(pe,rt){}disableEditing(){ie(this,re)&&(ie(this,re).hidden=!0)}enableEditing(){ie(this,re)&&(ie(this,re).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return ie(this,it)}set isEditing(pe){Zt(this,it,pe),this.parent&&(pe?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(pe,rt){Zt(this,Ae,!0);const ot=pe/rt,{style:pt}=this.div;pt.aspectRatio=ot,pt.height="auto"}static get MIN_SIZE(){return 16}};let ne=ce;ve=new WeakMap,Te=new WeakMap,re=new WeakMap,st=new WeakMap,nt=new WeakMap,Ae=new WeakMap,ke=new WeakMap,he=new WeakMap,oe=new WeakMap,Oe=new WeakMap,it=new WeakMap,at=new WeakMap,lt=new WeakMap,be=new WeakMap,Ie=new WeakSet,fa=function([pe,rt],ot,pt){[ot,pt]=this.screenToPageTranslation(ot,pt),this.x+=ot/pe,this.y+=pt/rt,this.fixAndSetPosition()},dt=new WeakSet,pa=function(){const[pe,rt]=this.parentDimensions,{_borderLineWidth:ot}=ce,pt=ot/pe,bt=ot/rt;switch(this.rotation){case 90:return[-pt,bt];case 180:return[pt,bt];case 270:return[pt,-bt];default:return[-pt,-bt]}},ft=new WeakSet,ma=function(pe,rt,ot){switch(ot){case 90:return[rt,-pe];case 180:return[-pe,-rt];case 270:return[-rt,pe];default:return[pe,rt]}},Et=new WeakSet,ga=function(pe){switch(pe){case 90:{const[rt,ot]=this.pageDimensions;return[0,-rt/ot,ot/rt,0]}case 180:return[-1,0,0,-1];case 270:{const[rt,ot]=this.pageDimensions;return[0,rt/ot,-ot/rt,0]}default:return[1,0,0,1]}},ht=new WeakSet,ho=function(){if(ie(this,ke))return;Zt(this,ke,document.createElement("div")),ie(this,ke).classList.add("resizers");const pe=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||pe.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const rt of pe){const ot=document.createElement("div");ie(this,ke).append(ot),ot.classList.add("resizer",rt),ot.addEventListener("pointerdown",Dt(this,Ot,fo).bind(this,rt)),ot.addEventListener("contextmenu",J.noContextMenu)}this.div.prepend(ie(this,ke))},Ot=new WeakSet,fo=function(pe,rt){rt.preventDefault();const{isMac:ot}=W.FeatureTest.platform;if(rt.button!==0||rt.ctrlKey&&ot)return;const pt=Dt(this,Pt,po).bind(this,pe),bt=this._isDraggable;this._isDraggable=!1;const yt={passive:!0,capture:!0};window.addEventListener("pointermove",pt,yt);const Nt=this.x,It=this.y,Xt=this.width,tn=this.height,fn=this.parent.div.style.cursor,an=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(rt.target).cursor;const cn=()=>{this._isDraggable=bt,window.removeEventListener("pointerup",cn),window.removeEventListener("blur",cn),window.removeEventListener("pointermove",pt,yt),this.parent.div.style.cursor=fn,this.div.style.cursor=an;const hn=this.x,un=this.y,xn=this.width,en=this.height;hn===Nt&&un===It&&xn===Xt&&en===tn||this.addCommands({cmd:()=>{this.width=xn,this.height=en,this.x=hn,this.y=un;const[Bt,zt]=this.parentDimensions;this.setDims(Bt*xn,zt*en),this.fixAndSetPosition()},undo:()=>{this.width=Xt,this.height=tn,this.x=Nt,this.y=It;const[Bt,zt]=this.parentDimensions;this.setDims(Bt*Xt,zt*tn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",cn),window.addEventListener("blur",cn)},Pt=new WeakSet,po=function(pe,rt){const[ot,pt]=this.parentDimensions,bt=this.x,yt=this.y,Nt=this.width,It=this.height,Xt=ce.MIN_SIZE/ot,tn=ce.MIN_SIZE/pt,fn=vn=>Math.round(vn*1e4)/1e4,an=Dt(this,Et,ga).call(this,this.rotation),cn=(vn,on)=>[an[0]*vn+an[2]*on,an[1]*vn+an[3]*on],hn=Dt(this,Et,ga).call(this,360-this.rotation),un=(vn,on)=>[hn[0]*vn+hn[2]*on,hn[1]*vn+hn[3]*on];let xn,en,Bt=!1,zt=!1;switch(pe){case"topLeft":Bt=!0,xn=(vn,on)=>[0,0],en=(vn,on)=>[vn,on];break;case"topMiddle":xn=(vn,on)=>[vn/2,0],en=(vn,on)=>[vn/2,on];break;case"topRight":Bt=!0,xn=(vn,on)=>[vn,0],en=(vn,on)=>[0,on];break;case"middleRight":zt=!0,xn=(vn,on)=>[vn,on/2],en=(vn,on)=>[0,on/2];break;case"bottomRight":Bt=!0,xn=(vn,on)=>[vn,on],en=(vn,on)=>[0,0];break;case"bottomMiddle":xn=(vn,on)=>[vn/2,on],en=(vn,on)=>[vn/2,0];break;case"bottomLeft":Bt=!0,xn=(vn,on)=>[0,on],en=(vn,on)=>[vn,0];break;case"middleLeft":zt=!0,xn=(vn,on)=>[0,on/2],en=(vn,on)=>[vn,on/2];break}const nn=xn(Nt,It),_n=en(Nt,It);let En=cn(..._n);const On=fn(bt+En[0]),Gn=fn(yt+En[1]);let Vn=1,Xn=1,[Jn,Nn]=this.screenToPageTranslation(rt.movementX,rt.movementY);if([Jn,Nn]=un(Jn/ot,Nn/pt),Bt){const vn=Math.hypot(Nt,It);Vn=Xn=Math.max(Math.min(Math.hypot(_n[0]-nn[0]-Jn,_n[1]-nn[1]-Nn)/vn,1/Nt,1/It),Xt/Nt,tn/It)}else zt?Vn=Math.max(Xt,Math.min(1,Math.abs(_n[0]-nn[0]-Jn)))/Nt:Xn=Math.max(tn,Math.min(1,Math.abs(_n[1]-nn[1]-Nn)))/It;const rr=fn(Nt*Vn),rn=fn(It*Xn);En=cn(...en(rr,rn));const jt=On-En[0],Rt=Gn-En[1];this.width=rr,this.height=rn,this.x=jt,this.y=Rt,this.setDims(ot*rr,pt*rn),this.fixAndSetPosition()},Jt=new WeakSet,va=async function(){var ot;const pe=ie(this,re);if(!pe)return;if(!ie(this,ve)&&!ie(this,Te)){pe.classList.remove("done"),(ot=ie(this,st))==null||ot.remove();return}ce._l10nPromise.get("editor_alt_text_edit_button_label").then(pt=>{pe.setAttribute("aria-label",pt)});let rt=ie(this,st);if(!rt){Zt(this,st,rt=document.createElement("span")),rt.className="tooltip",rt.setAttribute("role","tooltip");const pt=rt.id=`alt-text-tooltip-${this.id}`;pe.setAttribute("aria-describedby",pt);const bt=100;pe.addEventListener("mouseenter",()=>{Zt(this,nt,setTimeout(()=>{Zt(this,nt,null),ie(this,st).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},bt))}),pe.addEventListener("mouseleave",()=>{var yt;clearTimeout(ie(this,nt)),Zt(this,nt,null),(yt=ie(this,st))==null||yt.classList.remove("show")})}pe.classList.add("done"),rt.innerText=ie(this,Te)?await ce._l10nPromise.get("editor_alt_text_decorative_tooltip"):ie(this,ve),rt.parentNode||pe.append(rt)},ln=new WeakSet,mo=function(pe){if(!this._isDraggable)return;const rt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ot,pt;rt&&(ot={passive:!0,capture:!0},pt=yt=>{const[Nt,It]=this.screenToPageTranslation(yt.movementX,yt.movementY);this._uiManager.dragSelectedEditors(Nt,It)},window.addEventListener("pointermove",pt,ot));const bt=()=>{if(window.removeEventListener("pointerup",bt),window.removeEventListener("blur",bt),rt&&window.removeEventListener("pointermove",pt,ot),Zt(this,Oe,!1),!this._uiManager.endDragSession()){const{isMac:yt}=W.FeatureTest.platform;pe.ctrlKey&&!yt||pe.shiftKey||pe.metaKey&&yt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",bt),window.addEventListener("blur",bt)},Ct(ne,ft),Mr(ne,"_borderLineWidth",-1),Mr(ne,"_colorManager",new V.ColorManager),Mr(ne,"_zIndex",1),Mr(ne,"SMALL_EDITOR_SIZE",0),B.AnnotationEditor=ne;class ge extends ne{constructor(pe){super(pe),this.annotationElementId=pe.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(A,B,K)=>{var Ae,ke,he,oe,Oe,ba,lt,be,Ie,vt,dt,go,ct,Et,xt,ht,$t,Ot,Vt,Pt,Yt,Jt,sn,ln,gt,ce,Ee,pe,rt,ot,pt,bt,yt,Nt,It,Xt,tn,fn,an,cn,hn,un,xn,en,Bt,zt,nn,vo,En,_a,Gn,Ea,Xn,zi,Nn,ya,rn,Sa,Rt,ei,on,$i,Er,bo,yn,_o,An,wa,Dn,Ci,bn,Aa;Object.defineProperty(B,"__esModule",{value:!0}),B.KeyboardManager=B.CommandManager=B.ColorManager=B.AnnotationEditorUIManager=void 0,B.bindEvents=J,B.opacityToHex=ne;var V=K(1),W=K(6);function J(wt,fe,mt){for(const At of mt)fe.addEventListener(At,wt[At].bind(wt))}function ne(wt){return Math.round(Math.min(255,Math.max(1,255*wt))).toString(16).padStart(2,"0")}class ge{constructor(){Ct(this,Ae,0)}getId(){return`${V.AnnotationEditorPrefix}${Ai(this,Ae)._++}`}}Ae=new WeakMap;const at=class{constructor(){Ct(this,Oe);Ct(this,ke,(0,V.getUuid)());Ct(this,he,0);Ct(this,oe,null)}static get _isSVGFittingCanvas(){const fe='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',At=new OffscreenCanvas(1,3).getContext("2d"),Ft=new Image;Ft.src=fe;const Ht=Ft.decode().then(()=>(At.drawImage(Ft,0,0,1,1,0,0,1,3),new Uint32Array(At.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,V.shadow)(this,"_isSVGFittingCanvas",Ht)}async getFromFile(fe){const{lastModified:mt,name:At,size:Ft,type:Ht}=fe;return Dt(this,Oe,ba).call(this,`${mt}_${At}_${Ft}_${Ht}`,fe)}async getFromUrl(fe){return Dt(this,Oe,ba).call(this,fe,fe)}async getFromId(fe){ie(this,oe)||Zt(this,oe,new Map);const mt=ie(this,oe).get(fe);return mt?mt.bitmap?(mt.refCounter+=1,mt):mt.file?this.getFromFile(mt.file):this.getFromUrl(mt.url):null}getSvgUrl(fe){const mt=ie(this,oe).get(fe);return mt!=null&&mt.isSvg?mt.svgUrl:null}deleteId(fe){ie(this,oe)||Zt(this,oe,new Map);const mt=ie(this,oe).get(fe);mt&&(mt.refCounter-=1,mt.refCounter===0&&(mt.bitmap=null))}isValidId(fe){return fe.startsWith(`image_${ie(this,ke)}_`)}};let ve=at;ke=new WeakMap,he=new WeakMap,oe=new WeakMap,Oe=new WeakSet,ba=async function(fe,mt){ie(this,oe)||Zt(this,oe,new Map);let At=ie(this,oe).get(fe);if(At===null)return null;if(At!=null&&At.bitmap)return At.refCounter+=1,At;try{At||(At={bitmap:null,id:`image_${ie(this,ke)}_${Ai(this,he)._++}`,refCounter:0,isSvg:!1});let Ft;if(typeof mt=="string"){At.url=mt;const Ht=await fetch(mt);if(!Ht.ok)throw new Error(Ht.statusText);Ft=await Ht.blob()}else Ft=At.file=mt;if(Ft.type==="image/svg+xml"){const Ht=at._isSVGFittingCanvas,Qt=new FileReader,mn=new Image,Pn=new Promise(($n,Yn)=>{mn.onload=()=>{At.bitmap=mn,At.isSvg=!0,$n()},Qt.onload=async()=>{const Mn=At.svgUrl=Qt.result;mn.src=await Ht?`${Mn}#svgView(preserveAspectRatio(none))`:Mn},mn.onerror=Qt.onerror=Yn});Qt.readAsDataURL(Ft),await Pn}else At.bitmap=await createImageBitmap(Ft);At.refCounter=1}catch(Ft){console.error(Ft),At=null}return ie(this,oe).set(fe,At),At&&ie(this,oe).set(At.id,At),At};class Te{constructor(fe=128){Ct(this,lt,[]);Ct(this,be,!1);Ct(this,Ie,void 0);Ct(this,vt,-1);Zt(this,Ie,fe)}add({cmd:fe,undo:mt,mustExec:At,type:Ft=NaN,overwriteIfSameType:Ht=!1,keepUndo:Qt=!1}){if(At&&fe(),ie(this,be))return;const mn={cmd:fe,undo:mt,type:Ft};if(ie(this,vt)===-1){ie(this,lt).length>0&&(ie(this,lt).length=0),Zt(this,vt,0),ie(this,lt).push(mn);return}if(Ht&&ie(this,lt)[ie(this,vt)].type===Ft){Qt&&(mn.undo=ie(this,lt)[ie(this,vt)].undo),ie(this,lt)[ie(this,vt)]=mn;return}const Pn=ie(this,vt)+1;Pn===ie(this,Ie)?ie(this,lt).splice(0,1):(Zt(this,vt,Pn),Pn<ie(this,lt).length&&ie(this,lt).splice(Pn)),ie(this,lt).push(mn)}undo(){ie(this,vt)!==-1&&(Zt(this,be,!0),ie(this,lt)[ie(this,vt)].undo(),Zt(this,be,!1),Zt(this,vt,ie(this,vt)-1))}redo(){ie(this,vt)<ie(this,lt).length-1&&(Zt(this,vt,ie(this,vt)+1),Zt(this,be,!0),ie(this,lt)[ie(this,vt)].cmd(),Zt(this,be,!1))}hasSomethingToUndo(){return ie(this,vt)!==-1}hasSomethingToRedo(){return ie(this,vt)<ie(this,lt).length-1}destroy(){Zt(this,lt,null)}}lt=new WeakMap,be=new WeakMap,Ie=new WeakMap,vt=new WeakMap,B.CommandManager=Te;class re{constructor(fe){Ct(this,dt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:mt}=V.FeatureTest.platform;for(const[At,Ft,Ht={}]of fe)for(const Qt of At){const mn=Qt.startsWith("mac+");mt&&mn?(this.callbacks.set(Qt.slice(4),{callback:Ft,options:Ht}),this.allKeys.add(Qt.split("+").at(-1))):!mt&&!mn&&(this.callbacks.set(Qt,{callback:Ft,options:Ht}),this.allKeys.add(Qt.split("+").at(-1)))}}exec(fe,mt){if(!this.allKeys.has(mt.key))return;const At=this.callbacks.get(Dt(this,dt,go).call(this,mt));if(!At)return;const{callback:Ft,options:{bubbles:Ht=!1,args:Qt=[],checker:mn=null}}=At;mn&&!mn(fe,mt)||(Ft.bind(fe,...Qt)(),Ht||(mt.stopPropagation(),mt.preventDefault()))}}dt=new WeakSet,go=function(fe){fe.altKey&&this.buffer.push("alt"),fe.ctrlKey&&this.buffer.push("ctrl"),fe.metaKey&&this.buffer.push("meta"),fe.shiftKey&&this.buffer.push("shift"),this.buffer.push(fe.key);const mt=this.buffer.join("+");return this.buffer.length=0,mt},B.KeyboardManager=re;const ft=class{get _colors(){const fe=new Map([["CanvasText",null],["Canvas",null]]);return(0,W.getColorValues)(fe),(0,V.shadow)(this,"_colors",fe)}convert(fe){const mt=(0,W.getRGB)(fe);if(!window.matchMedia("(forced-colors: active)").matches)return mt;for(const[At,Ft]of this._colors)if(Ft.every((Ht,Qt)=>Ht===mt[Qt]))return ft._colorsMapping.get(At);return mt}getHexCode(fe){const mt=this._colors.get(fe);return mt?V.Util.makeHexColor(...mt):fe}};let st=ft;Mr(st,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),B.ColorManager=st;const In=class{constructor(fe,mt,At,Ft,Ht,Qt){Ct(this,nn);Ct(this,En);Ct(this,Gn);Ct(this,Xn);Ct(this,Nn);Ct(this,rn);Ct(this,Rt);Ct(this,on);Ct(this,Er);Ct(this,yn);Ct(this,An);Ct(this,Dn);Ct(this,bn);Ct(this,ct,null);Ct(this,Et,new Map);Ct(this,xt,new Map);Ct(this,ht,null);Ct(this,$t,null);Ct(this,Ot,new Te);Ct(this,Vt,0);Ct(this,Pt,new Set);Ct(this,Yt,null);Ct(this,Jt,null);Ct(this,sn,new Set);Ct(this,ln,null);Ct(this,gt,new ge);Ct(this,ce,!1);Ct(this,Ee,!1);Ct(this,pe,null);Ct(this,rt,V.AnnotationEditorType.NONE);Ct(this,ot,new Set);Ct(this,pt,null);Ct(this,bt,this.blur.bind(this));Ct(this,yt,this.focus.bind(this));Ct(this,Nt,this.copy.bind(this));Ct(this,It,this.cut.bind(this));Ct(this,Xt,this.paste.bind(this));Ct(this,tn,this.keydown.bind(this));Ct(this,fn,this.onEditingAction.bind(this));Ct(this,an,this.onPageChanging.bind(this));Ct(this,cn,this.onScaleChanging.bind(this));Ct(this,hn,this.onRotationChanging.bind(this));Ct(this,un,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Ct(this,xn,[0,0]);Ct(this,en,null);Ct(this,Bt,null);Ct(this,zt,null);Zt(this,Bt,fe),Zt(this,zt,mt),Zt(this,ht,At),this._eventBus=Ft,this._eventBus._on("editingaction",ie(this,fn)),this._eventBus._on("pagechanging",ie(this,an)),this._eventBus._on("scalechanging",ie(this,cn)),this._eventBus._on("rotationchanging",ie(this,hn)),Zt(this,$t,Ht.annotationStorage),Zt(this,ln,Ht.filterFactory),Zt(this,pt,Qt),this.viewParameters={realScale:W.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const fe=In.prototype,mt=Ht=>{const{activeElement:Qt}=document;return Qt&&ie(Ht,Bt).contains(Qt)&&Ht.hasSomethingToControl()},At=this.TRANSLATE_SMALL,Ft=this.TRANSLATE_BIG;return(0,V.shadow)(this,"_keyboardManager",new re([[["ctrl+a","mac+meta+a"],fe.selectAll],[["ctrl+z","mac+meta+z"],fe.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],fe.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],fe.delete],[["Escape","mac+Escape"],fe.unselectAll],[["ArrowLeft","mac+ArrowLeft"],fe.translateSelectedEditors,{args:[-At,0],checker:mt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],fe.translateSelectedEditors,{args:[-Ft,0],checker:mt}],[["ArrowRight","mac+ArrowRight"],fe.translateSelectedEditors,{args:[At,0],checker:mt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],fe.translateSelectedEditors,{args:[Ft,0],checker:mt}],[["ArrowUp","mac+ArrowUp"],fe.translateSelectedEditors,{args:[0,-At],checker:mt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],fe.translateSelectedEditors,{args:[0,-Ft],checker:mt}],[["ArrowDown","mac+ArrowDown"],fe.translateSelectedEditors,{args:[0,At],checker:mt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],fe.translateSelectedEditors,{args:[0,Ft],checker:mt}]]))}destroy(){Dt(this,Xn,zi).call(this),Dt(this,En,_a).call(this),this._eventBus._off("editingaction",ie(this,fn)),this._eventBus._off("pagechanging",ie(this,an)),this._eventBus._off("scalechanging",ie(this,cn)),this._eventBus._off("rotationchanging",ie(this,hn));for(const fe of ie(this,xt).values())fe.destroy();ie(this,xt).clear(),ie(this,Et).clear(),ie(this,sn).clear(),Zt(this,ct,null),ie(this,ot).clear(),ie(this,Ot).destroy(),ie(this,ht).destroy()}get hcmFilter(){return(0,V.shadow)(this,"hcmFilter",ie(this,pt)?ie(this,ln).addHCMFilter(ie(this,pt).foreground,ie(this,pt).background):"none")}get direction(){return(0,V.shadow)(this,"direction",getComputedStyle(ie(this,Bt)).direction)}editAltText(fe){var mt;(mt=ie(this,ht))==null||mt.editAltText(this,fe)}onPageChanging({pageNumber:fe}){Zt(this,Vt,fe-1)}focusMainContainer(){ie(this,Bt).focus()}findParent(fe,mt){for(const At of ie(this,xt).values()){const{x:Ft,y:Ht,width:Qt,height:mn}=At.div.getBoundingClientRect();if(fe>=Ft&&fe<=Ft+Qt&&mt>=Ht&&mt<=Ht+mn)return At}return null}disableUserSelect(fe=!1){ie(this,zt).classList.toggle("noUserSelect",fe)}addShouldRescale(fe){ie(this,sn).add(fe)}removeShouldRescale(fe){ie(this,sn).delete(fe)}onScaleChanging({scale:fe}){this.commitOrRemove(),this.viewParameters.realScale=fe*W.PixelsPerInch.PDF_TO_CSS_UNITS;for(const mt of ie(this,sn))mt.onScaleChanging()}onRotationChanging({pagesRotation:fe}){this.commitOrRemove(),this.viewParameters.rotation=fe}addToAnnotationStorage(fe){!fe.isEmpty()&&ie(this,$t)&&!ie(this,$t).has(fe.id)&&ie(this,$t).setValue(fe.id,fe)}blur(){if(!this.hasSelection)return;const{activeElement:fe}=document;for(const mt of ie(this,ot))if(mt.div.contains(fe)){Zt(this,pe,[mt,fe]),mt._focusEventsAllowed=!1;break}}focus(){if(!ie(this,pe))return;const[fe,mt]=ie(this,pe);Zt(this,pe,null),mt.addEventListener("focusin",()=>{fe._focusEventsAllowed=!0},{once:!0}),mt.focus()}addEditListeners(){Dt(this,Gn,Ea).call(this),Dt(this,Nn,ya).call(this)}removeEditListeners(){Dt(this,Xn,zi).call(this),Dt(this,rn,Sa).call(this)}copy(fe){var At;if(fe.preventDefault(),(At=ie(this,ct))==null||At.commitOrRemove(),!this.hasSelection)return;const mt=[];for(const Ft of ie(this,ot)){const Ht=Ft.serialize(!0);Ht&&mt.push(Ht)}mt.length!==0&&fe.clipboardData.setData("application/pdfjs",JSON.stringify(mt))}cut(fe){this.copy(fe),this.delete()}paste(fe){fe.preventDefault();const{clipboardData:mt}=fe;for(const Ht of mt.items)for(const Qt of ie(this,Jt))if(Qt.isHandlingMimeForPasting(Ht.type)){Qt.paste(Ht,this.currentLayer);return}let At=mt.getData("application/pdfjs");if(!At)return;try{At=JSON.parse(At)}catch(Ht){(0,V.warn)(`paste: "${Ht.message}".`);return}if(!Array.isArray(At))return;this.unselectAll();const Ft=this.currentLayer;try{const Ht=[];for(const Pn of At){const $n=Ft.deserialize(Pn);if(!$n)return;Ht.push($n)}const Qt=()=>{for(const Pn of Ht)Dt(this,An,wa).call(this,Pn);Dt(this,bn,Aa).call(this,Ht)},mn=()=>{for(const Pn of Ht)Pn.remove()};this.addCommands({cmd:Qt,undo:mn,mustExec:!0})}catch(Ht){(0,V.warn)(`paste: "${Ht.message}".`)}}keydown(fe){var mt;(mt=this.getActive())!=null&&mt.shouldGetKeyboardEvents()||In._keyboardManager.exec(this,fe)}onEditingAction(fe){["undo","redo","delete","selectAll"].includes(fe.name)&&this[fe.name]()}setEditingState(fe){fe?(Dt(this,nn,vo).call(this),Dt(this,Gn,Ea).call(this),Dt(this,Nn,ya).call(this),Dt(this,Rt,ei).call(this,{isEditing:ie(this,rt)!==V.AnnotationEditorType.NONE,isEmpty:Dt(this,Dn,Ci).call(this),hasSomethingToUndo:ie(this,Ot).hasSomethingToUndo(),hasSomethingToRedo:ie(this,Ot).hasSomethingToRedo(),hasSelectedEditor:!1})):(Dt(this,En,_a).call(this),Dt(this,Xn,zi).call(this),Dt(this,rn,Sa).call(this),Dt(this,Rt,ei).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(fe){if(!ie(this,Jt)){Zt(this,Jt,fe);for(const mt of ie(this,Jt))Dt(this,on,$i).call(this,mt.defaultPropertiesToUpdate)}}getId(){return ie(this,gt).getId()}get currentLayer(){return ie(this,xt).get(ie(this,Vt))}getLayer(fe){return ie(this,xt).get(fe)}get currentPageIndex(){return ie(this,Vt)}addLayer(fe){ie(this,xt).set(fe.pageIndex,fe),ie(this,ce)?fe.enable():fe.disable()}removeLayer(fe){ie(this,xt).delete(fe.pageIndex)}updateMode(fe,mt=null){if(ie(this,rt)!==fe){if(Zt(this,rt,fe),fe===V.AnnotationEditorType.NONE){this.setEditingState(!1),Dt(this,yn,_o).call(this);return}this.setEditingState(!0),Dt(this,Er,bo).call(this),this.unselectAll();for(const At of ie(this,xt).values())At.updateMode(fe);if(mt){for(const At of ie(this,Et).values())if(At.annotationElementId===mt){this.setSelected(At),At.enterInEditMode();break}}}}updateToolbar(fe){fe!==ie(this,rt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:fe})}updateParams(fe,mt){if(ie(this,Jt)){if(fe===V.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(fe);return}for(const At of ie(this,ot))At.updateParams(fe,mt);for(const At of ie(this,Jt))At.updateDefaultParams(fe,mt)}}enableWaiting(fe=!1){if(ie(this,Ee)!==fe){Zt(this,Ee,fe);for(const mt of ie(this,xt).values())fe?mt.disableClick():mt.enableClick(),mt.div.classList.toggle("waiting",fe)}}getEditors(fe){const mt=[];for(const At of ie(this,Et).values())At.pageIndex===fe&&mt.push(At);return mt}getEditor(fe){return ie(this,Et).get(fe)}addEditor(fe){ie(this,Et).set(fe.id,fe)}removeEditor(fe){var mt;ie(this,Et).delete(fe.id),this.unselect(fe),(!fe.annotationElementId||!ie(this,Pt).has(fe.annotationElementId))&&((mt=ie(this,$t))==null||mt.remove(fe.id))}addDeletedAnnotationElement(fe){ie(this,Pt).add(fe.annotationElementId),fe.deleted=!0}isDeletedAnnotationElement(fe){return ie(this,Pt).has(fe)}removeDeletedAnnotationElement(fe){ie(this,Pt).delete(fe.annotationElementId),fe.deleted=!1}setActiveEditor(fe){ie(this,ct)!==fe&&(Zt(this,ct,fe),fe&&Dt(this,on,$i).call(this,fe.propertiesToUpdate))}toggleSelected(fe){if(ie(this,ot).has(fe)){ie(this,ot).delete(fe),fe.unselect(),Dt(this,Rt,ei).call(this,{hasSelectedEditor:this.hasSelection});return}ie(this,ot).add(fe),fe.select(),Dt(this,on,$i).call(this,fe.propertiesToUpdate),Dt(this,Rt,ei).call(this,{hasSelectedEditor:!0})}setSelected(fe){for(const mt of ie(this,ot))mt!==fe&&mt.unselect();ie(this,ot).clear(),ie(this,ot).add(fe),fe.select(),Dt(this,on,$i).call(this,fe.propertiesToUpdate),Dt(this,Rt,ei).call(this,{hasSelectedEditor:!0})}isSelected(fe){return ie(this,ot).has(fe)}unselect(fe){fe.unselect(),ie(this,ot).delete(fe),Dt(this,Rt,ei).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ie(this,ot).size!==0}undo(){ie(this,Ot).undo(),Dt(this,Rt,ei).call(this,{hasSomethingToUndo:ie(this,Ot).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Dt(this,Dn,Ci).call(this)})}redo(){ie(this,Ot).redo(),Dt(this,Rt,ei).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ie(this,Ot).hasSomethingToRedo(),isEmpty:Dt(this,Dn,Ci).call(this)})}addCommands(fe){ie(this,Ot).add(fe),Dt(this,Rt,ei).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Dt(this,Dn,Ci).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const fe=[...ie(this,ot)],mt=()=>{for(const Ft of fe)Ft.remove()},At=()=>{for(const Ft of fe)Dt(this,An,wa).call(this,Ft)};this.addCommands({cmd:mt,undo:At,mustExec:!0})}commitOrRemove(){var fe;(fe=ie(this,ct))==null||fe.commitOrRemove()}hasSomethingToControl(){return ie(this,ct)||this.hasSelection}selectAll(){for(const fe of ie(this,ot))fe.commit();Dt(this,bn,Aa).call(this,ie(this,Et).values())}unselectAll(){if(ie(this,ct)){ie(this,ct).commitOrRemove();return}if(this.hasSelection){for(const fe of ie(this,ot))fe.unselect();ie(this,ot).clear(),Dt(this,Rt,ei).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(fe,mt,At=!1){if(At||this.commitOrRemove(),!this.hasSelection)return;ie(this,xn)[0]+=fe,ie(this,xn)[1]+=mt;const[Ft,Ht]=ie(this,xn),Qt=[...ie(this,ot)],mn=1e3;ie(this,en)&&clearTimeout(ie(this,en)),Zt(this,en,setTimeout(()=>{Zt(this,en,null),ie(this,xn)[0]=ie(this,xn)[1]=0,this.addCommands({cmd:()=>{for(const Pn of Qt)ie(this,Et).has(Pn.id)&&Pn.translateInPage(Ft,Ht)},undo:()=>{for(const Pn of Qt)ie(this,Et).has(Pn.id)&&Pn.translateInPage(-Ft,-Ht)},mustExec:!1})},mn));for(const Pn of Qt)Pn.translateInPage(fe,mt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Zt(this,Yt,new Map);for(const fe of ie(this,ot))ie(this,Yt).set(fe,{savedX:fe.x,savedY:fe.y,savedPageIndex:fe.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!ie(this,Yt))return!1;this.disableUserSelect(!1);const fe=ie(this,Yt);Zt(this,Yt,null);let mt=!1;for(const[{x:Ft,y:Ht,pageIndex:Qt},mn]of fe)mn.newX=Ft,mn.newY=Ht,mn.newPageIndex=Qt,mt||(mt=Ft!==mn.savedX||Ht!==mn.savedY||Qt!==mn.savedPageIndex);if(!mt)return!1;const At=(Ft,Ht,Qt,mn)=>{if(ie(this,Et).has(Ft.id)){const Pn=ie(this,xt).get(mn);Pn?Ft._setParentAndPosition(Pn,Ht,Qt):(Ft.pageIndex=mn,Ft.x=Ht,Ft.y=Qt)}};return this.addCommands({cmd:()=>{for(const[Ft,{newX:Ht,newY:Qt,newPageIndex:mn}]of fe)At(Ft,Ht,Qt,mn)},undo:()=>{for(const[Ft,{savedX:Ht,savedY:Qt,savedPageIndex:mn}]of fe)At(Ft,Ht,Qt,mn)},mustExec:!0}),!0}dragSelectedEditors(fe,mt){if(ie(this,Yt))for(const At of ie(this,Yt).keys())At.drag(fe,mt)}rebuild(fe){if(fe.parent===null){const mt=this.getLayer(fe.pageIndex);mt?(mt.changeParent(fe),mt.addOrRebuild(fe)):(this.addEditor(fe),this.addToAnnotationStorage(fe),fe.rebuild())}else fe.parent.addOrRebuild(fe)}isActive(fe){return ie(this,ct)===fe}getActive(){return ie(this,ct)}getMode(){return ie(this,rt)}get imageManager(){return(0,V.shadow)(this,"imageManager",new ve)}};let nt=In;ct=new WeakMap,Et=new WeakMap,xt=new WeakMap,ht=new WeakMap,$t=new WeakMap,Ot=new WeakMap,Vt=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,sn=new WeakMap,ln=new WeakMap,gt=new WeakMap,ce=new WeakMap,Ee=new WeakMap,pe=new WeakMap,rt=new WeakMap,ot=new WeakMap,pt=new WeakMap,bt=new WeakMap,yt=new WeakMap,Nt=new WeakMap,It=new WeakMap,Xt=new WeakMap,tn=new WeakMap,fn=new WeakMap,an=new WeakMap,cn=new WeakMap,hn=new WeakMap,un=new WeakMap,xn=new WeakMap,en=new WeakMap,Bt=new WeakMap,zt=new WeakMap,nn=new WeakSet,vo=function(){window.addEventListener("focus",ie(this,yt)),window.addEventListener("blur",ie(this,bt))},En=new WeakSet,_a=function(){window.removeEventListener("focus",ie(this,yt)),window.removeEventListener("blur",ie(this,bt))},Gn=new WeakSet,Ea=function(){window.addEventListener("keydown",ie(this,tn),{capture:!0})},Xn=new WeakSet,zi=function(){window.removeEventListener("keydown",ie(this,tn),{capture:!0})},Nn=new WeakSet,ya=function(){document.addEventListener("copy",ie(this,Nt)),document.addEventListener("cut",ie(this,It)),document.addEventListener("paste",ie(this,Xt))},rn=new WeakSet,Sa=function(){document.removeEventListener("copy",ie(this,Nt)),document.removeEventListener("cut",ie(this,It)),document.removeEventListener("paste",ie(this,Xt))},Rt=new WeakSet,ei=function(fe){Object.entries(fe).some(([At,Ft])=>ie(this,un)[At]!==Ft)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ie(this,un),fe)})},on=new WeakSet,$i=function(fe){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:fe})},Er=new WeakSet,bo=function(){if(!ie(this,ce)){Zt(this,ce,!0);for(const fe of ie(this,xt).values())fe.enable()}},yn=new WeakSet,_o=function(){if(this.unselectAll(),ie(this,ce)){Zt(this,ce,!1);for(const fe of ie(this,xt).values())fe.disable()}},An=new WeakSet,wa=function(fe){const mt=ie(this,xt).get(fe.pageIndex);mt?mt.addOrRebuild(fe):this.addEditor(fe)},Dn=new WeakSet,Ci=function(){if(ie(this,Et).size===0)return!0;if(ie(this,Et).size===1)for(const fe of ie(this,Et).values())return fe.isEmpty();return!1},bn=new WeakSet,Aa=function(fe){ie(this,ot).clear();for(const mt of fe)mt.isEmpty()||(ie(this,ot).add(mt),mt.select());Dt(this,Rt,ei).call(this,{hasSelectedEditor:!0})},Mr(nt,"TRANSLATE_SMALL",1),Mr(nt,"TRANSLATE_BIG",10),B.AnnotationEditorUIManager=nt},(A,B,K)=>{var Vt,Pt,Yt,Jt,sn,ln,gt,ce,Ee,pe,rt,ot,bi,bt,_i,Nt,$a,Xt,Hi,fn,Vi,cn,Pi,un,xi;Object.defineProperty(B,"__esModule",{value:!0}),B.StatTimer=B.RenderingCancelledException=B.PixelsPerInch=B.PageViewport=B.PDFDateString=B.DOMStandardFontDataFactory=B.DOMSVGFactory=B.DOMFilterFactory=B.DOMCanvasFactory=B.DOMCMapReaderFactory=void 0,B.deprecated=vt,B.getColorValues=Et,B.getCurrentTransform=xt,B.getCurrentTransformInverse=ht,B.getFilenameFromUrl=Oe,B.getPdfFilenameFromUrl=it,B.getRGB=ct,B.getXfaPageViewport=ft,B.isDataScheme=he,B.isPdfFile=oe,B.isValidFetchUrl=lt,B.loadScript=Ie,B.noContextMenu=be,B.setLayerDimensions=$t;var V=K(7),W=K(1);const J="http://www.w3.org/2000/svg",Ot=class{};let ne=Ot;Mr(ne,"CSS",96),Mr(ne,"PDF",72),Mr(ne,"PDF_TO_CSS_UNITS",Ot.CSS/Ot.PDF),B.PixelsPerInch=ne;class ge extends V.BaseFilterFactory{constructor({docId:zt,ownerDocument:nn=globalThis.document}={}){super();Ct(this,ot);Ct(this,bt);Ct(this,Nt);Ct(this,Xt);Ct(this,fn);Ct(this,cn);Ct(this,un);Ct(this,Vt,void 0);Ct(this,Pt,void 0);Ct(this,Yt,void 0);Ct(this,Jt,void 0);Ct(this,sn,void 0);Ct(this,ln,void 0);Ct(this,gt,void 0);Ct(this,ce,void 0);Ct(this,Ee,void 0);Ct(this,pe,void 0);Ct(this,rt,0);Zt(this,Yt,zt),Zt(this,Jt,nn)}addFilter(zt){if(!zt)return"none";let nn=ie(this,ot,bi).get(zt);if(nn)return nn;let _n,En,On,Gn;if(zt.length===1){const Nn=zt[0],rr=new Array(256);for(let rn=0;rn<256;rn++)rr[rn]=Nn[rn]/255;Gn=_n=En=On=rr.join(",")}else{const[Nn,rr,rn]=zt,jt=new Array(256),Rt=new Array(256),vn=new Array(256);for(let on=0;on<256;on++)jt[on]=Nn[on]/255,Rt[on]=rr[on]/255,vn[on]=rn[on]/255;_n=jt.join(","),En=Rt.join(","),On=vn.join(","),Gn=`${_n}${En}${On}`}if(nn=ie(this,ot,bi).get(Gn),nn)return ie(this,ot,bi).set(zt,nn),nn;const Vn=`g_${ie(this,Yt)}_transfer_map_${Ai(this,rt)._++}`,Xn=`url(#${Vn})`;ie(this,ot,bi).set(zt,Xn),ie(this,ot,bi).set(Gn,Xn);const Jn=Dt(this,Xt,Hi).call(this,Vn);return Dt(this,cn,Pi).call(this,_n,En,On,Jn),Xn}addHCMFilter(zt,nn){var rr;const _n=`${zt}-${nn}`;if(ie(this,ln)===_n)return ie(this,gt);if(Zt(this,ln,_n),Zt(this,gt,"none"),(rr=ie(this,sn))==null||rr.remove(),!zt||!nn)return ie(this,gt);const En=Dt(this,un,xi).call(this,zt);zt=W.Util.makeHexColor(...En);const On=Dt(this,un,xi).call(this,nn);if(nn=W.Util.makeHexColor(...On),ie(this,bt,_i).style.color="",zt==="#000000"&&nn==="#ffffff"||zt===nn)return ie(this,gt);const Gn=new Array(256);for(let rn=0;rn<=255;rn++){const jt=rn/255;Gn[rn]=jt<=.03928?jt/12.92:((jt+.055)/1.055)**2.4}const Vn=Gn.join(","),Xn=`g_${ie(this,Yt)}_hcm_filter`,Jn=Zt(this,ce,Dt(this,Xt,Hi).call(this,Xn));Dt(this,cn,Pi).call(this,Vn,Vn,Vn,Jn),Dt(this,Nt,$a).call(this,Jn);const Nn=(rn,jt)=>{const Rt=En[rn]/255,vn=On[rn]/255,on=new Array(jt+1);for(let ur=0;ur<=jt;ur++)on[ur]=Rt+ur/jt*(vn-Rt);return on.join(",")};return Dt(this,cn,Pi).call(this,Nn(0,5),Nn(1,5),Nn(2,5),Jn),Zt(this,gt,`url(#${Xn})`),ie(this,gt)}addHighlightHCMFilter(zt,nn,_n,En){var vn;const On=`${zt}-${nn}-${_n}-${En}`;if(ie(this,Ee)===On)return ie(this,pe);if(Zt(this,Ee,On),Zt(this,pe,"none"),(vn=ie(this,ce))==null||vn.remove(),!zt||!nn)return ie(this,pe);const[Gn,Vn]=[zt,nn].map(Dt(this,un,xi).bind(this));let Xn=Math.round(.2126*Gn[0]+.7152*Gn[1]+.0722*Gn[2]),Jn=Math.round(.2126*Vn[0]+.7152*Vn[1]+.0722*Vn[2]),[Nn,rr]=[_n,En].map(Dt(this,un,xi).bind(this));Jn<Xn&&([Xn,Jn,Nn,rr]=[Jn,Xn,rr,Nn]),ie(this,bt,_i).style.color="";const rn=(on,ur,Er)=>{const Ut=new Array(256),yn=(Jn-Xn)/Er,Rn=on/255,An=(ur-on)/(255*Er);let Fn=0;for(let Dn=0;Dn<=Er;Dn++){const pr=Math.round(Xn+Dn*yn),bn=Rn+Dn*An;for(let sr=Fn;sr<=pr;sr++)Ut[sr]=bn;Fn=pr+1}for(let Dn=Fn;Dn<256;Dn++)Ut[Dn]=Ut[Fn-1];return Ut.join(",")},jt=`g_${ie(this,Yt)}_hcm_highlight_filter`,Rt=Zt(this,ce,Dt(this,Xt,Hi).call(this,jt));return Dt(this,Nt,$a).call(this,Rt),Dt(this,cn,Pi).call(this,rn(Nn[0],rr[0],5),rn(Nn[1],rr[1],5),rn(Nn[2],rr[2],5),Rt),Zt(this,pe,`url(#${jt})`),ie(this,pe)}destroy(zt=!1){zt&&(ie(this,gt)||ie(this,pe))||(ie(this,Pt)&&(ie(this,Pt).parentNode.parentNode.remove(),Zt(this,Pt,null)),ie(this,Vt)&&(ie(this,Vt).clear(),Zt(this,Vt,null)),Zt(this,rt,0))}}Vt=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,sn=new WeakMap,ln=new WeakMap,gt=new WeakMap,ce=new WeakMap,Ee=new WeakMap,pe=new WeakMap,rt=new WeakMap,ot=new WeakSet,bi=function(){return ie(this,Vt)||Zt(this,Vt,new Map)},bt=new WeakSet,_i=function(){if(!ie(this,Pt)){const zt=ie(this,Jt).createElement("div"),{style:nn}=zt;nn.visibility="hidden",nn.contain="strict",nn.width=nn.height=0,nn.position="absolute",nn.top=nn.left=0,nn.zIndex=-1;const _n=ie(this,Jt).createElementNS(J,"svg");_n.setAttribute("width",0),_n.setAttribute("height",0),Zt(this,Pt,ie(this,Jt).createElementNS(J,"defs")),zt.append(_n),_n.append(ie(this,Pt)),ie(this,Jt).body.append(zt)}return ie(this,Pt)},Nt=new WeakSet,$a=function(zt){const nn=ie(this,Jt).createElementNS(J,"feColorMatrix");nn.setAttribute("type","matrix"),nn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),zt.append(nn)},Xt=new WeakSet,Hi=function(zt){const nn=ie(this,Jt).createElementNS(J,"filter");return nn.setAttribute("color-interpolation-filters","sRGB"),nn.setAttribute("id",zt),ie(this,bt,_i).append(nn),nn},fn=new WeakSet,Vi=function(zt,nn,_n){const En=ie(this,Jt).createElementNS(J,nn);En.setAttribute("type","discrete"),En.setAttribute("tableValues",_n),zt.append(En)},cn=new WeakSet,Pi=function(zt,nn,_n,En){const On=ie(this,Jt).createElementNS(J,"feComponentTransfer");En.append(On),Dt(this,fn,Vi).call(this,On,"feFuncR",zt),Dt(this,fn,Vi).call(this,On,"feFuncG",nn),Dt(this,fn,Vi).call(this,On,"feFuncB",_n)},un=new WeakSet,xi=function(zt){return ie(this,bt,_i).style.color=zt,ct(getComputedStyle(ie(this,bt,_i)).getPropertyValue("color"))},B.DOMFilterFactory=ge;class ve extends V.BaseCanvasFactory{constructor({ownerDocument:Bt=globalThis.document}={}){super(),this._document=Bt}_createCanvas(Bt,zt){const nn=this._document.createElement("canvas");return nn.width=Bt,nn.height=zt,nn}}B.DOMCanvasFactory=ve;async function Te(en,Bt=!1){if(lt(en,document.baseURI)){const zt=await fetch(en);if(!zt.ok)throw new Error(zt.statusText);return Bt?new Uint8Array(await zt.arrayBuffer()):(0,W.stringToBytes)(await zt.text())}return new Promise((zt,nn)=>{const _n=new XMLHttpRequest;_n.open("GET",en,!0),Bt&&(_n.responseType="arraybuffer"),_n.onreadystatechange=()=>{if(_n.readyState===XMLHttpRequest.DONE){if(_n.status===200||_n.status===0){let En;if(Bt&&_n.response?En=new Uint8Array(_n.response):!Bt&&_n.responseText&&(En=(0,W.stringToBytes)(_n.responseText)),En){zt(En);return}}nn(new Error(_n.statusText))}},_n.send(null)})}class re extends V.BaseCMapReaderFactory{_fetchData(Bt,zt){return Te(Bt,this.isCompressed).then(nn=>({cMapData:nn,compressionType:zt}))}}B.DOMCMapReaderFactory=re;class st extends V.BaseStandardFontDataFactory{_fetchData(Bt){return Te(Bt,!0)}}B.DOMStandardFontDataFactory=st;class nt extends V.BaseSVGFactory{_createSVG(Bt){return document.createElementNS(J,Bt)}}B.DOMSVGFactory=nt;class Ae{constructor({viewBox:Bt,scale:zt,rotation:nn,offsetX:_n=0,offsetY:En=0,dontFlip:On=!1}){this.viewBox=Bt,this.scale=zt,this.rotation=nn,this.offsetX=_n,this.offsetY=En;const Gn=(Bt[2]+Bt[0])/2,Vn=(Bt[3]+Bt[1])/2;let Xn,Jn,Nn,rr;switch(nn%=360,nn<0&&(nn+=360),nn){case 180:Xn=-1,Jn=0,Nn=0,rr=1;break;case 90:Xn=0,Jn=1,Nn=1,rr=0;break;case 270:Xn=0,Jn=-1,Nn=-1,rr=0;break;case 0:Xn=1,Jn=0,Nn=0,rr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}On&&(Nn=-Nn,rr=-rr);let rn,jt,Rt,vn;Xn===0?(rn=Math.abs(Vn-Bt[1])*zt+_n,jt=Math.abs(Gn-Bt[0])*zt+En,Rt=(Bt[3]-Bt[1])*zt,vn=(Bt[2]-Bt[0])*zt):(rn=Math.abs(Gn-Bt[0])*zt+_n,jt=Math.abs(Vn-Bt[1])*zt+En,Rt=(Bt[2]-Bt[0])*zt,vn=(Bt[3]-Bt[1])*zt),this.transform=[Xn*zt,Jn*zt,Nn*zt,rr*zt,rn-Xn*zt*Gn-Nn*zt*Vn,jt-Jn*zt*Gn-rr*zt*Vn],this.width=Rt,this.height=vn}get rawDims(){const{viewBox:Bt}=this;return(0,W.shadow)(this,"rawDims",{pageWidth:Bt[2]-Bt[0],pageHeight:Bt[3]-Bt[1],pageX:Bt[0],pageY:Bt[1]})}clone({scale:Bt=this.scale,rotation:zt=this.rotation,offsetX:nn=this.offsetX,offsetY:_n=this.offsetY,dontFlip:En=!1}={}){return new Ae({viewBox:this.viewBox.slice(),scale:Bt,rotation:zt,offsetX:nn,offsetY:_n,dontFlip:En})}convertToViewportPoint(Bt,zt){return W.Util.applyTransform([Bt,zt],this.transform)}convertToViewportRectangle(Bt){const zt=W.Util.applyTransform([Bt[0],Bt[1]],this.transform),nn=W.Util.applyTransform([Bt[2],Bt[3]],this.transform);return[zt[0],zt[1],nn[0],nn[1]]}convertToPdfPoint(Bt,zt){return W.Util.applyInverseTransform([Bt,zt],this.transform)}}B.PageViewport=Ae;class ke extends W.BaseException{constructor(Bt,zt=0){super(Bt,"RenderingCancelledException"),this.extraDelay=zt}}B.RenderingCancelledException=ke;function he(en){const Bt=en.length;let zt=0;for(;zt<Bt&&en[zt].trim()==="";)zt++;return en.substring(zt,zt+5).toLowerCase()==="data:"}function oe(en){return typeof en=="string"&&/\.pdf$/i.test(en)}function Oe(en,Bt=!1){return Bt||([en]=en.split(/[#?]/,1)),en.substring(en.lastIndexOf("/")+1)}function it(en,Bt="document.pdf"){if(typeof en!="string")return Bt;if(he(en))return(0,W.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Bt;const zt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,nn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_n=zt.exec(en);let En=nn.exec(_n[1])||nn.exec(_n[2])||nn.exec(_n[3]);if(En&&(En=En[0],En.includes("%")))try{En=nn.exec(decodeURIComponent(En))[0]}catch{}return En||Bt}class at{constructor(){Mr(this,"started",Object.create(null));Mr(this,"times",[])}time(Bt){Bt in this.started&&(0,W.warn)(`Timer is already running for ${Bt}`),this.started[Bt]=Date.now()}timeEnd(Bt){Bt in this.started||(0,W.warn)(`Timer has not been started for ${Bt}`),this.times.push({name:Bt,start:this.started[Bt],end:Date.now()}),delete this.started[Bt]}toString(){const Bt=[];let zt=0;for(const{name:nn}of this.times)zt=Math.max(nn.length,zt);for(const{name:nn,start:_n,end:En}of this.times)Bt.push(`${nn.padEnd(zt)} ${En-_n}ms
`);return Bt.join("")}}B.StatTimer=at;function lt(en,Bt){try{const{protocol:zt}=Bt?new URL(en,Bt):new URL(en);return zt==="http:"||zt==="https:"}catch{return!1}}function be(en){en.preventDefault()}function Ie(en,Bt=!1){return new Promise((zt,nn)=>{const _n=document.createElement("script");_n.src=en,_n.onload=function(En){Bt&&_n.remove(),zt(En)},_n.onerror=function(){nn(new Error(`Cannot load script at: ${_n.src}`))},(document.head||document.documentElement).append(_n)})}function vt(en){console.log("Deprecated API usage: "+en)}let dt;class Ce{static toDateObject(Bt){if(!Bt||typeof Bt!="string")return null;dt||(dt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const zt=dt.exec(Bt);if(!zt)return null;const nn=parseInt(zt[1],10);let _n=parseInt(zt[2],10);_n=_n>=1&&_n<=12?_n-1:0;let En=parseInt(zt[3],10);En=En>=1&&En<=31?En:1;let On=parseInt(zt[4],10);On=On>=0&&On<=23?On:0;let Gn=parseInt(zt[5],10);Gn=Gn>=0&&Gn<=59?Gn:0;let Vn=parseInt(zt[6],10);Vn=Vn>=0&&Vn<=59?Vn:0;const Xn=zt[7]||"Z";let Jn=parseInt(zt[8],10);Jn=Jn>=0&&Jn<=23?Jn:0;let Nn=parseInt(zt[9],10)||0;return Nn=Nn>=0&&Nn<=59?Nn:0,Xn==="-"?(On+=Jn,Gn+=Nn):Xn==="+"&&(On-=Jn,Gn-=Nn),new Date(Date.UTC(nn,_n,En,On,Gn,Vn))}}B.PDFDateString=Ce;function ft(en,{scale:Bt=1,rotation:zt=0}){const{width:nn,height:_n}=en.attributes.style,En=[0,0,parseInt(nn),parseInt(_n)];return new Ae({viewBox:En,scale:Bt,rotation:zt})}function ct(en){if(en.startsWith("#")){const Bt=parseInt(en.slice(1),16);return[(Bt&16711680)>>16,(Bt&65280)>>8,Bt&255]}return en.startsWith("rgb(")?en.slice(4,-1).split(",").map(Bt=>parseInt(Bt)):en.startsWith("rgba(")?en.slice(5,-1).split(",").map(Bt=>parseInt(Bt)).slice(0,3):((0,W.warn)(`Not a valid color format: "${en}"`),[0,0,0])}function Et(en){const Bt=document.createElement("span");Bt.style.visibility="hidden",document.body.append(Bt);for(const zt of en.keys()){Bt.style.color=zt;const nn=window.getComputedStyle(Bt).color;en.set(zt,ct(nn))}Bt.remove()}function xt(en){const{a:Bt,b:zt,c:nn,d:_n,e:En,f:On}=en.getTransform();return[Bt,zt,nn,_n,En,On]}function ht(en){const{a:Bt,b:zt,c:nn,d:_n,e:En,f:On}=en.getTransform().invertSelf();return[Bt,zt,nn,_n,En,On]}function $t(en,Bt,zt=!1,nn=!0){if(Bt instanceof Ae){const{pageWidth:_n,pageHeight:En}=Bt.rawDims,{style:On}=en,Gn=W.FeatureTest.isCSSRoundSupported,Vn=`var(--scale-factor) * ${_n}px`,Xn=`var(--scale-factor) * ${En}px`,Jn=Gn?`round(${Vn}, 1px)`:`calc(${Vn})`,Nn=Gn?`round(${Xn}, 1px)`:`calc(${Xn})`;!zt||Bt.rotation%180===0?(On.width=Jn,On.height=Nn):(On.width=Nn,On.height=Jn)}nn&&en.setAttribute("data-main-rotation",Bt.rotation)}},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.BaseStandardFontDataFactory=B.BaseSVGFactory=B.BaseFilterFactory=B.BaseCanvasFactory=B.BaseCMapReaderFactory=void 0;var V=K(1);class W{constructor(){this.constructor===W&&(0,V.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(re){return"none"}addHCMFilter(re,st){return"none"}addHighlightHCMFilter(re,st,nt,Ae){return"none"}destroy(re=!1){}}B.BaseFilterFactory=W;class J{constructor(){this.constructor===J&&(0,V.unreachable)("Cannot initialize BaseCanvasFactory.")}create(re,st){if(re<=0||st<=0)throw new Error("Invalid canvas size");const nt=this._createCanvas(re,st);return{canvas:nt,context:nt.getContext("2d")}}reset(re,st,nt){if(!re.canvas)throw new Error("Canvas is not specified");if(st<=0||nt<=0)throw new Error("Invalid canvas size");re.canvas.width=st,re.canvas.height=nt}destroy(re){if(!re.canvas)throw new Error("Canvas is not specified");re.canvas.width=0,re.canvas.height=0,re.canvas=null,re.context=null}_createCanvas(re,st){(0,V.unreachable)("Abstract method `_createCanvas` called.")}}B.BaseCanvasFactory=J;class ne{constructor({baseUrl:re=null,isCompressed:st=!0}){this.constructor===ne&&(0,V.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=re,this.isCompressed=st}async fetch({name:re}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!re)throw new Error("CMap name must be specified.");const st=this.baseUrl+re+(this.isCompressed?".bcmap":""),nt=this.isCompressed?V.CMapCompressionType.BINARY:V.CMapCompressionType.NONE;return this._fetchData(st,nt).catch(Ae=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${st}`)})}_fetchData(re,st){(0,V.unreachable)("Abstract method `_fetchData` called.")}}B.BaseCMapReaderFactory=ne;class ge{constructor({baseUrl:re=null}){this.constructor===ge&&(0,V.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=re}async fetch({filename:re}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!re)throw new Error("Font filename must be specified.");const st=`${this.baseUrl}${re}`;return this._fetchData(st).catch(nt=>{throw new Error(`Unable to load font data at: ${st}`)})}_fetchData(re){(0,V.unreachable)("Abstract method `_fetchData` called.")}}B.BaseStandardFontDataFactory=ge;class ve{constructor(){this.constructor===ve&&(0,V.unreachable)("Cannot initialize BaseSVGFactory.")}create(re,st,nt=!1){if(re<=0||st<=0)throw new Error("Invalid SVG dimensions");const Ae=this._createSVG("svg:svg");return Ae.setAttribute("version","1.1"),nt||(Ae.setAttribute("width",`${re}px`),Ae.setAttribute("height",`${st}px`)),Ae.setAttribute("preserveAspectRatio","none"),Ae.setAttribute("viewBox",`0 0 ${re} ${st}`),Ae}createElement(re){if(typeof re!="string")throw new Error("Invalid SVG element type");return this._createSVG(re)}_createSVG(re){(0,V.unreachable)("Abstract method `_createSVG` called.")}}B.BaseSVGFactory=ve},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.MurmurHash3_64=void 0;var V=K(1);const W=3285377520,J=4294901760,ne=65535;class ge{constructor(Te){this.h1=Te?Te&4294967295:W,this.h2=Te?Te&4294967295:W}update(Te){let re,st;if(typeof Te=="string"){re=new Uint8Array(Te.length*2),st=0;for(let vt=0,dt=Te.length;vt<dt;vt++){const Ce=Te.charCodeAt(vt);Ce<=255?re[st++]=Ce:(re[st++]=Ce>>>8,re[st++]=Ce&255)}}else if((0,V.isArrayBuffer)(Te))re=Te.slice(),st=re.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const nt=st>>2,Ae=st-nt*4,ke=new Uint32Array(re.buffer,0,nt);let he=0,oe=0,Oe=this.h1,it=this.h2;const at=3432918353,lt=461845907,be=at&ne,Ie=lt&ne;for(let vt=0;vt<nt;vt++)vt&1?(he=ke[vt],he=he*at&J|he*be&ne,he=he<<15|he>>>17,he=he*lt&J|he*Ie&ne,Oe^=he,Oe=Oe<<13|Oe>>>19,Oe=Oe*5+3864292196):(oe=ke[vt],oe=oe*at&J|oe*be&ne,oe=oe<<15|oe>>>17,oe=oe*lt&J|oe*Ie&ne,it^=oe,it=it<<13|it>>>19,it=it*5+3864292196);switch(he=0,Ae){case 3:he^=re[nt*4+2]<<16;case 2:he^=re[nt*4+1]<<8;case 1:he^=re[nt*4],he=he*at&J|he*be&ne,he=he<<15|he>>>17,he=he*lt&J|he*Ie&ne,nt&1?Oe^=he:it^=he}this.h1=Oe,this.h2=it}hexdigest(){let Te=this.h1,re=this.h2;return Te^=re>>>1,Te=Te*3981806797&J|Te*36045&ne,re=re*4283543511&J|((re<<16|Te>>>16)*2950163797&J)>>>16,Te^=re>>>1,Te=Te*444984403&J|Te*60499&ne,re=re*3301882366&J|((re<<16|Te>>>16)*3120437893&J)>>>16,Te^=re>>>1,(Te>>>0).toString(16).padStart(8,"0")+(re>>>0).toString(16).padStart(8,"0")}}B.MurmurHash3_64=ge},(A,B,K)=>{var ne;Object.defineProperty(B,"__esModule",{value:!0}),B.FontLoader=B.FontFaceObject=void 0;var V=K(1);class W{constructor({ownerDocument:ve=globalThis.document,styleElement:Te=null}){Ct(this,ne,new Set);this._document=ve,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ve){this.nativeFontFaces.add(ve),this._document.fonts.add(ve)}removeNativeFontFace(ve){this.nativeFontFaces.delete(ve),this._document.fonts.delete(ve)}insertRule(ve){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Te=this.styleElement.sheet;Te.insertRule(ve,Te.cssRules.length)}clear(){for(const ve of this.nativeFontFaces)this._document.fonts.delete(ve);this.nativeFontFaces.clear(),ie(this,ne).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(ve){if(!(!ve||ie(this,ne).has(ve.loadedName))){if((0,V.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Te,src:re,style:st}=ve,nt=new FontFace(Te,re,st);this.addNativeFontFace(nt);try{await nt.load(),ie(this,ne).add(Te)}catch{(0,V.warn)(`Cannot load system font: ${ve.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(nt)}return}(0,V.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(ve){if(ve.attached||ve.missingFile&&!ve.systemFontInfo)return;if(ve.attached=!0,ve.systemFontInfo){await this.loadSystemFont(ve.systemFontInfo);return}if(this.isFontLoadingAPISupported){const re=ve.createNativeFontFace();if(re){this.addNativeFontFace(re);try{await re.loaded}catch(st){throw(0,V.warn)(`Failed to load font '${re.family}': '${st}'.`),ve.disableFontFace=!0,st}}return}const Te=ve.createFontFaceRule();if(Te){if(this.insertRule(Te),this.isSyncFontLoadingSupported)return;await new Promise(re=>{const st=this._queueLoadingCallback(re);this._prepareFontLoadEvent(ve,st)})}}get isFontLoadingAPISupported(){var Te;const ve=!!((Te=this._document)!=null&&Te.fonts);return(0,V.shadow)(this,"isFontLoadingAPISupported",ve)}get isSyncFontLoadingSupported(){let ve=!1;return(V.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ve=!0),(0,V.shadow)(this,"isSyncFontLoadingSupported",ve)}_queueLoadingCallback(ve){function Te(){for((0,V.assert)(!st.done,"completeRequest() cannot be called twice."),st.done=!0;re.length>0&&re[0].done;){const nt=re.shift();setTimeout(nt.callback,0)}}const{loadingRequests:re}=this,st={done:!1,complete:Te,callback:ve};return re.push(st),st}get _loadTestFont(){const ve=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,V.shadow)(this,"_loadTestFont",ve)}_prepareFontLoadEvent(ve,Te){function re(ct,Et){return ct.charCodeAt(Et)<<24|ct.charCodeAt(Et+1)<<16|ct.charCodeAt(Et+2)<<8|ct.charCodeAt(Et+3)&255}function st(ct,Et,xt,ht){const $t=ct.substring(0,Et),Ot=ct.substring(Et+xt);return $t+ht+Ot}let nt,Ae;const ke=this._document.createElement("canvas");ke.width=1,ke.height=1;const he=ke.getContext("2d");let oe=0;function Oe(ct,Et){if(++oe>30){(0,V.warn)("Load test font never loaded."),Et();return}if(he.font="30px "+ct,he.fillText(".",0,20),he.getImageData(0,0,1,1).data[3]>0){Et();return}setTimeout(Oe.bind(null,ct,Et))}const it=`lt${Date.now()}${this.loadTestFontId++}`;let at=this._loadTestFont;at=st(at,976,it.length,it);const be=16,Ie=1482184792;let vt=re(at,be);for(nt=0,Ae=it.length-3;nt<Ae;nt+=4)vt=vt-Ie+re(it,nt)|0;nt<it.length&&(vt=vt-Ie+re(it+"XXX",nt)|0),at=st(at,be,4,(0,V.string32)(vt));const dt=`url(data:font/opentype;base64,${btoa(at)});`,Ce=`@font-face {font-family:"${it}";src:${dt}}`;this.insertRule(Ce);const ft=this._document.createElement("div");ft.style.visibility="hidden",ft.style.width=ft.style.height="10px",ft.style.position="absolute",ft.style.top=ft.style.left="0px";for(const ct of[ve.loadedName,it]){const Et=this._document.createElement("span");Et.textContent="Hi",Et.style.fontFamily=ct,ft.append(Et)}this._document.body.append(ft),Oe(it,()=>{ft.remove(),Te.complete()})}}ne=new WeakMap,B.FontLoader=W;class J{constructor(ve,{isEvalSupported:Te=!0,disableFontFace:re=!1,ignoreErrors:st=!1,inspectFont:nt=null}){this.compiledGlyphs=Object.create(null);for(const Ae in ve)this[Ae]=ve[Ae];this.isEvalSupported=Te!==!1,this.disableFontFace=re===!0,this.ignoreErrors=st===!0,this._inspectFont=nt}createNativeFontFace(){var Te;if(!this.data||this.disableFontFace)return null;let ve;if(!this.cssFontInfo)ve=new FontFace(this.loadedName,this.data,{});else{const re={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(re.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ve=new FontFace(this.cssFontInfo.fontFamily,this.data,re)}return(Te=this._inspectFont)==null||Te.call(this,this),ve}createFontFaceRule(){var st;if(!this.data||this.disableFontFace)return null;const ve=(0,V.bytesToString)(this.data),Te=`url(data:${this.mimetype};base64,${btoa(ve)});`;let re;if(!this.cssFontInfo)re=`@font-face {font-family:"${this.loadedName}";src:${Te}}`;else{let nt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(nt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),re=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${nt}src:${Te}}`}return(st=this._inspectFont)==null||st.call(this,this,Te),re}getPathGenerator(ve,Te){if(this.compiledGlyphs[Te]!==void 0)return this.compiledGlyphs[Te];let re;try{re=ve.get(this.loadedName+"_path_"+Te)}catch(st){if(!this.ignoreErrors)throw st;return(0,V.warn)(`getPathGenerator - ignoring character: "${st}".`),this.compiledGlyphs[Te]=function(nt,Ae){}}if(this.isEvalSupported&&V.FeatureTest.isEvalSupported){const st=[];for(const nt of re){const Ae=nt.args!==void 0?nt.args.join(","):"";st.push("c.",nt.cmd,"(",Ae,`);
`)}return this.compiledGlyphs[Te]=new Function("c","size",st.join(""))}return this.compiledGlyphs[Te]=function(st,nt){for(const Ae of re)Ae.cmd==="scale"&&(Ae.args=[nt,-nt]),st[Ae.cmd].apply(st,Ae.args)}}}B.FontFaceObject=J},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.NodeStandardFontDataFactory=B.NodeFilterFactory=B.NodeCanvasFactory=B.NodeCMapReaderFactory=void 0;var V=K(7);K(1);const W=function(Te){return new Promise((re,st)=>{require$$5.readFile(Te,(Ae,ke)=>{if(Ae||!ke){st(new Error(Ae));return}re(new Uint8Array(ke))})})};class J extends V.BaseFilterFactory{}B.NodeFilterFactory=J;class ne extends V.BaseCanvasFactory{_createCanvas(re,st){return require$$5.createCanvas(re,st)}}B.NodeCanvasFactory=ne;class ge extends V.BaseCMapReaderFactory{_fetchData(re,st){return W(re).then(nt=>({cMapData:nt,compressionType:st}))}}B.NodeCMapReaderFactory=ge;class ve extends V.BaseStandardFontDataFactory{_fetchData(re){return W(re)}}B.NodeStandardFontDataFactory=ve},(A,B,K)=>{var Pt,Ca,Jt,Pa;Object.defineProperty(B,"__esModule",{value:!0}),B.CanvasGraphics=void 0;var V=K(1),W=K(6),J=K(12),ne=K(13);const ge=16,ve=100,Te=4096,re=15,st=10,nt=1e3,Ae=16;function ke(gt,ce){if(gt._removeMirroring)throw new Error("Context is already forwarding operations.");gt.__originalSave=gt.save,gt.__originalRestore=gt.restore,gt.__originalRotate=gt.rotate,gt.__originalScale=gt.scale,gt.__originalTranslate=gt.translate,gt.__originalTransform=gt.transform,gt.__originalSetTransform=gt.setTransform,gt.__originalResetTransform=gt.resetTransform,gt.__originalClip=gt.clip,gt.__originalMoveTo=gt.moveTo,gt.__originalLineTo=gt.lineTo,gt.__originalBezierCurveTo=gt.bezierCurveTo,gt.__originalRect=gt.rect,gt.__originalClosePath=gt.closePath,gt.__originalBeginPath=gt.beginPath,gt._removeMirroring=()=>{gt.save=gt.__originalSave,gt.restore=gt.__originalRestore,gt.rotate=gt.__originalRotate,gt.scale=gt.__originalScale,gt.translate=gt.__originalTranslate,gt.transform=gt.__originalTransform,gt.setTransform=gt.__originalSetTransform,gt.resetTransform=gt.__originalResetTransform,gt.clip=gt.__originalClip,gt.moveTo=gt.__originalMoveTo,gt.lineTo=gt.__originalLineTo,gt.bezierCurveTo=gt.__originalBezierCurveTo,gt.rect=gt.__originalRect,gt.closePath=gt.__originalClosePath,gt.beginPath=gt.__originalBeginPath,delete gt._removeMirroring},gt.save=function(){ce.save(),this.__originalSave()},gt.restore=function(){ce.restore(),this.__originalRestore()},gt.translate=function(pe,rt){ce.translate(pe,rt),this.__originalTranslate(pe,rt)},gt.scale=function(pe,rt){ce.scale(pe,rt),this.__originalScale(pe,rt)},gt.transform=function(pe,rt,ot,pt,bt,yt){ce.transform(pe,rt,ot,pt,bt,yt),this.__originalTransform(pe,rt,ot,pt,bt,yt)},gt.setTransform=function(pe,rt,ot,pt,bt,yt){ce.setTransform(pe,rt,ot,pt,bt,yt),this.__originalSetTransform(pe,rt,ot,pt,bt,yt)},gt.resetTransform=function(){ce.resetTransform(),this.__originalResetTransform()},gt.rotate=function(pe){ce.rotate(pe),this.__originalRotate(pe)},gt.clip=function(pe){ce.clip(pe),this.__originalClip(pe)},gt.moveTo=function(Ee,pe){ce.moveTo(Ee,pe),this.__originalMoveTo(Ee,pe)},gt.lineTo=function(Ee,pe){ce.lineTo(Ee,pe),this.__originalLineTo(Ee,pe)},gt.bezierCurveTo=function(Ee,pe,rt,ot,pt,bt){ce.bezierCurveTo(Ee,pe,rt,ot,pt,bt),this.__originalBezierCurveTo(Ee,pe,rt,ot,pt,bt)},gt.rect=function(Ee,pe,rt,ot){ce.rect(Ee,pe,rt,ot),this.__originalRect(Ee,pe,rt,ot)},gt.closePath=function(){ce.closePath(),this.__originalClosePath()},gt.beginPath=function(){ce.beginPath(),this.__originalBeginPath()}}class he{constructor(ce){this.canvasFactory=ce,this.cache=Object.create(null)}getCanvas(ce,Ee,pe){let rt;return this.cache[ce]!==void 0?(rt=this.cache[ce],this.canvasFactory.reset(rt,Ee,pe)):(rt=this.canvasFactory.create(Ee,pe),this.cache[ce]=rt),rt}delete(ce){delete this.cache[ce]}clear(){for(const ce in this.cache){const Ee=this.cache[ce];this.canvasFactory.destroy(Ee),delete this.cache[ce]}}}function oe(gt,ce,Ee,pe,rt,ot,pt,bt,yt,Nt){const[It,Xt,tn,fn,an,cn]=(0,W.getCurrentTransform)(gt);if(Xt===0&&tn===0){const xn=pt*It+an,en=Math.round(xn),Bt=bt*fn+cn,zt=Math.round(Bt),nn=(pt+yt)*It+an,_n=Math.abs(Math.round(nn)-en)||1,En=(bt+Nt)*fn+cn,On=Math.abs(Math.round(En)-zt)||1;return gt.setTransform(Math.sign(It),0,0,Math.sign(fn),en,zt),gt.drawImage(ce,Ee,pe,rt,ot,0,0,_n,On),gt.setTransform(It,Xt,tn,fn,an,cn),[_n,On]}if(It===0&&fn===0){const xn=bt*tn+an,en=Math.round(xn),Bt=pt*Xt+cn,zt=Math.round(Bt),nn=(bt+Nt)*tn+an,_n=Math.abs(Math.round(nn)-en)||1,En=(pt+yt)*Xt+cn,On=Math.abs(Math.round(En)-zt)||1;return gt.setTransform(0,Math.sign(Xt),Math.sign(tn),0,en,zt),gt.drawImage(ce,Ee,pe,rt,ot,0,0,On,_n),gt.setTransform(It,Xt,tn,fn,an,cn),[On,_n]}gt.drawImage(ce,Ee,pe,rt,ot,pt,bt,yt,Nt);const hn=Math.hypot(It,Xt),un=Math.hypot(tn,fn);return[hn*yt,un*Nt]}function Oe(gt){const{width:ce,height:Ee}=gt;if(ce>nt||Ee>nt)return null;const pe=1e3,rt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ot=ce+1;let pt=new Uint8Array(ot*(Ee+1)),bt,yt,Nt;const It=ce+7&-8;let Xt=new Uint8Array(It*Ee),tn=0;for(const un of gt.data){let xn=128;for(;xn>0;)Xt[tn++]=un&xn?0:255,xn>>=1}let fn=0;for(tn=0,Xt[tn]!==0&&(pt[0]=1,++fn),yt=1;yt<ce;yt++)Xt[tn]!==Xt[tn+1]&&(pt[yt]=Xt[tn]?2:1,++fn),tn++;for(Xt[tn]!==0&&(pt[yt]=2,++fn),bt=1;bt<Ee;bt++){tn=bt*It,Nt=bt*ot,Xt[tn-It]!==Xt[tn]&&(pt[Nt]=Xt[tn]?1:8,++fn);let un=(Xt[tn]?4:0)+(Xt[tn-It]?8:0);for(yt=1;yt<ce;yt++)un=(un>>2)+(Xt[tn+1]?4:0)+(Xt[tn-It+1]?8:0),rt[un]&&(pt[Nt+yt]=rt[un],++fn),tn++;if(Xt[tn-It]!==Xt[tn]&&(pt[Nt+yt]=Xt[tn]?2:4,++fn),fn>pe)return null}for(tn=It*(Ee-1),Nt=bt*ot,Xt[tn]!==0&&(pt[Nt]=8,++fn),yt=1;yt<ce;yt++)Xt[tn]!==Xt[tn+1]&&(pt[Nt+yt]=Xt[tn]?4:8,++fn),tn++;if(Xt[tn]!==0&&(pt[Nt+yt]=4,++fn),fn>pe)return null;const an=new Int32Array([0,ot,-1,0,-ot,0,0,0,1]),cn=new Path2D;for(bt=0;fn&&bt<=Ee;bt++){let un=bt*ot;const xn=un+ce;for(;un<xn&&!pt[un];)un++;if(un===xn)continue;cn.moveTo(un%ot,bt);const en=un;let Bt=pt[un];do{const zt=an[Bt];do un+=zt;while(!pt[un]);const nn=pt[un];nn!==5&&nn!==10?(Bt=nn,pt[un]=0):(Bt=nn&51*Bt>>4,pt[un]&=Bt>>2|Bt<<2),cn.lineTo(un%ot,un/ot|0),pt[un]||--fn}while(en!==un);--bt}return Xt=null,pt=null,function(un){un.save(),un.scale(1/ce,-1/Ee),un.translate(0,-Ee),un.fill(cn),un.beginPath(),un.restore()}}class it{constructor(ce,Ee){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=V.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=V.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=V.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,ce,Ee])}clone(){const ce=Object.create(this);return ce.clipBox=this.clipBox.slice(),ce}setCurrentPoint(ce,Ee){this.x=ce,this.y=Ee}updatePathMinMax(ce,Ee,pe){[Ee,pe]=V.Util.applyTransform([Ee,pe],ce),this.minX=Math.min(this.minX,Ee),this.minY=Math.min(this.minY,pe),this.maxX=Math.max(this.maxX,Ee),this.maxY=Math.max(this.maxY,pe)}updateRectMinMax(ce,Ee){const pe=V.Util.applyTransform(Ee,ce),rt=V.Util.applyTransform(Ee.slice(2),ce);this.minX=Math.min(this.minX,pe[0],rt[0]),this.minY=Math.min(this.minY,pe[1],rt[1]),this.maxX=Math.max(this.maxX,pe[0],rt[0]),this.maxY=Math.max(this.maxY,pe[1],rt[1])}updateScalingPathMinMax(ce,Ee){V.Util.scaleMinMax(ce,Ee),this.minX=Math.min(this.minX,Ee[0]),this.maxX=Math.max(this.maxX,Ee[1]),this.minY=Math.min(this.minY,Ee[2]),this.maxY=Math.max(this.maxY,Ee[3])}updateCurvePathMinMax(ce,Ee,pe,rt,ot,pt,bt,yt,Nt,It){const Xt=V.Util.bezierBoundingBox(Ee,pe,rt,ot,pt,bt,yt,Nt);if(It){It[0]=Math.min(It[0],Xt[0],Xt[2]),It[1]=Math.max(It[1],Xt[0],Xt[2]),It[2]=Math.min(It[2],Xt[1],Xt[3]),It[3]=Math.max(It[3],Xt[1],Xt[3]);return}this.updateRectMinMax(ce,Xt)}getPathBoundingBox(ce=J.PathType.FILL,Ee=null){const pe=[this.minX,this.minY,this.maxX,this.maxY];if(ce===J.PathType.STROKE){Ee||(0,V.unreachable)("Stroke bounding box must include transform.");const rt=V.Util.singularValueDecompose2dScale(Ee),ot=rt[0]*this.lineWidth/2,pt=rt[1]*this.lineWidth/2;pe[0]-=ot,pe[1]-=pt,pe[2]+=ot,pe[3]+=pt}return pe}updateClipFromPath(){const ce=V.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(ce||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(ce){this.clipBox=ce,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(ce=J.PathType.FILL,Ee=null){return V.Util.intersect(this.clipBox,this.getPathBoundingBox(ce,Ee))}}function at(gt,ce){if(typeof ImageData<"u"&&ce instanceof ImageData){gt.putImageData(ce,0,0);return}const Ee=ce.height,pe=ce.width,rt=Ee%Ae,ot=(Ee-rt)/Ae,pt=rt===0?ot:ot+1,bt=gt.createImageData(pe,Ae);let yt=0,Nt;const It=ce.data,Xt=bt.data;let tn,fn,an,cn;if(ce.kind===V.ImageKind.GRAYSCALE_1BPP){const hn=It.byteLength,un=new Uint32Array(Xt.buffer,0,Xt.byteLength>>2),xn=un.length,en=pe+7>>3,Bt=4294967295,zt=V.FeatureTest.isLittleEndian?4278190080:255;for(tn=0;tn<pt;tn++){for(an=tn<ot?Ae:rt,Nt=0,fn=0;fn<an;fn++){const nn=hn-yt;let _n=0;const En=nn>en?pe:nn*8-7,On=En&-8;let Gn=0,Vn=0;for(;_n<On;_n+=8)Vn=It[yt++],un[Nt++]=Vn&128?Bt:zt,un[Nt++]=Vn&64?Bt:zt,un[Nt++]=Vn&32?Bt:zt,un[Nt++]=Vn&16?Bt:zt,un[Nt++]=Vn&8?Bt:zt,un[Nt++]=Vn&4?Bt:zt,un[Nt++]=Vn&2?Bt:zt,un[Nt++]=Vn&1?Bt:zt;for(;_n<En;_n++)Gn===0&&(Vn=It[yt++],Gn=128),un[Nt++]=Vn&Gn?Bt:zt,Gn>>=1}for(;Nt<xn;)un[Nt++]=0;gt.putImageData(bt,0,tn*Ae)}}else if(ce.kind===V.ImageKind.RGBA_32BPP){for(fn=0,cn=pe*Ae*4,tn=0;tn<ot;tn++)Xt.set(It.subarray(yt,yt+cn)),yt+=cn,gt.putImageData(bt,0,fn),fn+=Ae;tn<pt&&(cn=pe*rt*4,Xt.set(It.subarray(yt,yt+cn)),gt.putImageData(bt,0,fn))}else if(ce.kind===V.ImageKind.RGB_24BPP)for(an=Ae,cn=pe*an,tn=0;tn<pt;tn++){for(tn>=ot&&(an=rt,cn=pe*an),Nt=0,fn=cn;fn--;)Xt[Nt++]=It[yt++],Xt[Nt++]=It[yt++],Xt[Nt++]=It[yt++],Xt[Nt++]=255;gt.putImageData(bt,0,tn*Ae)}else throw new Error(`bad image kind: ${ce.kind}`)}function lt(gt,ce){if(ce.bitmap){gt.drawImage(ce.bitmap,0,0);return}const Ee=ce.height,pe=ce.width,rt=Ee%Ae,ot=(Ee-rt)/Ae,pt=rt===0?ot:ot+1,bt=gt.createImageData(pe,Ae);let yt=0;const Nt=ce.data,It=bt.data;for(let Xt=0;Xt<pt;Xt++){const tn=Xt<ot?Ae:rt;({srcPos:yt}=(0,ne.convertBlackAndWhiteToRGBA)({src:Nt,srcPos:yt,dest:It,width:pe,height:tn,nonBlackColor:0})),gt.putImageData(bt,0,Xt*Ae)}}function be(gt,ce){const Ee=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const pe of Ee)gt[pe]!==void 0&&(ce[pe]=gt[pe]);gt.setLineDash!==void 0&&(ce.setLineDash(gt.getLineDash()),ce.lineDashOffset=gt.lineDashOffset)}function Ie(gt){if(gt.strokeStyle=gt.fillStyle="#000000",gt.fillRule="nonzero",gt.globalAlpha=1,gt.lineWidth=1,gt.lineCap="butt",gt.lineJoin="miter",gt.miterLimit=10,gt.globalCompositeOperation="source-over",gt.font="10px sans-serif",gt.setLineDash!==void 0&&(gt.setLineDash([]),gt.lineDashOffset=0),!V.isNodeJS){const{filter:ce}=gt;ce!=="none"&&ce!==""&&(gt.filter="none")}}function vt(gt,ce,Ee,pe){const rt=gt.length;for(let ot=3;ot<rt;ot+=4){const pt=gt[ot];if(pt===0)gt[ot-3]=ce,gt[ot-2]=Ee,gt[ot-1]=pe;else if(pt<255){const bt=255-pt;gt[ot-3]=gt[ot-3]*pt+ce*bt>>8,gt[ot-2]=gt[ot-2]*pt+Ee*bt>>8,gt[ot-1]=gt[ot-1]*pt+pe*bt>>8}}}function dt(gt,ce,Ee){const pe=gt.length,rt=1/255;for(let ot=3;ot<pe;ot+=4){const pt=Ee?Ee[gt[ot]]:gt[ot];ce[ot]=ce[ot]*pt*rt|0}}function Ce(gt,ce,Ee){const pe=gt.length;for(let rt=3;rt<pe;rt+=4){const ot=gt[rt-3]*77+gt[rt-2]*152+gt[rt-1]*28;ce[rt]=Ee?ce[rt]*Ee[ot>>8]>>8:ce[rt]*ot>>16}}function ft(gt,ce,Ee,pe,rt,ot,pt,bt,yt,Nt,It){const Xt=!!ot,tn=Xt?ot[0]:0,fn=Xt?ot[1]:0,an=Xt?ot[2]:0,cn=rt==="Luminosity"?Ce:dt,un=Math.min(pe,Math.ceil(1048576/Ee));for(let xn=0;xn<pe;xn+=un){const en=Math.min(un,pe-xn),Bt=gt.getImageData(bt-Nt,xn+(yt-It),Ee,en),zt=ce.getImageData(bt,xn+yt,Ee,en);Xt&&vt(Bt.data,tn,fn,an),cn(Bt.data,zt.data,pt),ce.putImageData(zt,bt,xn+yt)}}function ct(gt,ce,Ee,pe){const rt=pe[0],ot=pe[1],pt=pe[2]-rt,bt=pe[3]-ot;pt===0||bt===0||(ft(ce.context,Ee,pt,bt,ce.subtype,ce.backdrop,ce.transferMap,rt,ot,ce.offsetX,ce.offsetY),gt.save(),gt.globalAlpha=1,gt.globalCompositeOperation="source-over",gt.setTransform(1,0,0,1,0,0),gt.drawImage(Ee.canvas,0,0),gt.restore())}function Et(gt,ce){const Ee=V.Util.singularValueDecompose2dScale(gt);Ee[0]=Math.fround(Ee[0]),Ee[1]=Math.fround(Ee[1]);const pe=Math.fround((globalThis.devicePixelRatio||1)*W.PixelsPerInch.PDF_TO_CSS_UNITS);return ce!==void 0?ce:Ee[0]<=pe||Ee[1]<=pe}const xt=["butt","round","square"],ht=["miter","round","bevel"],$t={},Ot={},ln=class{constructor(ce,Ee,pe,rt,ot,{optionalContentConfig:pt,markedContentStack:bt=null},yt,Nt){Ct(this,Pt);Ct(this,Jt);this.ctx=ce,this.current=new it(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Ee,this.objs=pe,this.canvasFactory=rt,this.filterFactory=ot,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=bt||[],this.optionalContentConfig=pt,this.cachedCanvases=new he(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=yt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Nt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(ce,Ee=null){return typeof ce=="string"?ce.startsWith("g_")?this.commonObjs.get(ce):this.objs.get(ce):Ee}beginDrawing({transform:ce,viewport:Ee,transparency:pe=!1,background:rt=null}){const ot=this.ctx.canvas.width,pt=this.ctx.canvas.height,bt=this.ctx.fillStyle;if(this.ctx.fillStyle=rt||"#ffffff",this.ctx.fillRect(0,0,ot,pt),this.ctx.fillStyle=bt,pe){const yt=this.cachedCanvases.getCanvas("transparent",ot,pt);this.compositeCtx=this.ctx,this.transparentCanvas=yt.canvas,this.ctx=yt.context,this.ctx.save(),this.ctx.transform(...(0,W.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Ie(this.ctx),ce&&(this.ctx.transform(...ce),this.outputScaleX=ce[0],this.outputScaleY=ce[0]),this.ctx.transform(...Ee.transform),this.viewportScale=Ee.scale,this.baseTransform=(0,W.getCurrentTransform)(this.ctx)}executeOperatorList(ce,Ee,pe,rt){const ot=ce.argsArray,pt=ce.fnArray;let bt=Ee||0;const yt=ot.length;if(yt===bt)return bt;const Nt=yt-bt>st&&typeof pe=="function",It=Nt?Date.now()+re:0;let Xt=0;const tn=this.commonObjs,fn=this.objs;let an;for(;;){if(rt!==void 0&&bt===rt.nextBreakPoint)return rt.breakIt(bt,pe),bt;if(an=pt[bt],an!==V.OPS.dependency)this[an].apply(this,ot[bt]);else for(const cn of ot[bt]){const hn=cn.startsWith("g_")?tn:fn;if(!hn.has(cn))return hn.get(cn,pe),bt}if(bt++,bt===yt)return bt;if(Nt&&++Xt>st){if(Date.now()>It)return pe(),bt;Xt=0}}}endDrawing(){Dt(this,Pt,Ca).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const ce of this._cachedBitmapsMap.values()){for(const Ee of ce.values())typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement&&(Ee.width=Ee.height=0);ce.clear()}this._cachedBitmapsMap.clear(),Dt(this,Jt,Pa).call(this)}_scaleImage(ce,Ee){const pe=ce.width,rt=ce.height;let ot=Math.max(Math.hypot(Ee[0],Ee[1]),1),pt=Math.max(Math.hypot(Ee[2],Ee[3]),1),bt=pe,yt=rt,Nt="prescale1",It,Xt;for(;ot>2&&bt>1||pt>2&&yt>1;){let tn=bt,fn=yt;ot>2&&bt>1&&(tn=bt>=16384?Math.floor(bt/2)-1||1:Math.ceil(bt/2),ot/=bt/tn),pt>2&&yt>1&&(fn=yt>=16384?Math.floor(yt/2)-1||1:Math.ceil(yt)/2,pt/=yt/fn),It=this.cachedCanvases.getCanvas(Nt,tn,fn),Xt=It.context,Xt.clearRect(0,0,tn,fn),Xt.drawImage(ce,0,0,bt,yt,0,0,tn,fn),ce=It.canvas,bt=tn,yt=fn,Nt=Nt==="prescale1"?"prescale2":"prescale1"}return{img:ce,paintWidth:bt,paintHeight:yt}}_createMaskCanvas(ce){const Ee=this.ctx,{width:pe,height:rt}=ce,ot=this.current.fillColor,pt=this.current.patternFill,bt=(0,W.getCurrentTransform)(Ee);let yt,Nt,It,Xt;if((ce.bitmap||ce.data)&&ce.count>1){const _n=ce.bitmap||ce.data.buffer;Nt=JSON.stringify(pt?bt:[bt.slice(0,4),ot]),yt=this._cachedBitmapsMap.get(_n),yt||(yt=new Map,this._cachedBitmapsMap.set(_n,yt));const En=yt.get(Nt);if(En&&!pt){const On=Math.round(Math.min(bt[0],bt[2])+bt[4]),Gn=Math.round(Math.min(bt[1],bt[3])+bt[5]);return{canvas:En,offsetX:On,offsetY:Gn}}It=En}It||(Xt=this.cachedCanvases.getCanvas("maskCanvas",pe,rt),lt(Xt.context,ce));let tn=V.Util.transform(bt,[1/pe,0,0,-1/rt,0,0]);tn=V.Util.transform(tn,[1,0,0,1,0,-rt]);const fn=V.Util.applyTransform([0,0],tn),an=V.Util.applyTransform([pe,rt],tn),cn=V.Util.normalizeRect([fn[0],fn[1],an[0],an[1]]),hn=Math.round(cn[2]-cn[0])||1,un=Math.round(cn[3]-cn[1])||1,xn=this.cachedCanvases.getCanvas("fillCanvas",hn,un),en=xn.context,Bt=Math.min(fn[0],an[0]),zt=Math.min(fn[1],an[1]);en.translate(-Bt,-zt),en.transform(...tn),It||(It=this._scaleImage(Xt.canvas,(0,W.getCurrentTransformInverse)(en)),It=It.img,yt&&pt&&yt.set(Nt,It)),en.imageSmoothingEnabled=Et((0,W.getCurrentTransform)(en),ce.interpolate),oe(en,It,0,0,It.width,It.height,0,0,pe,rt),en.globalCompositeOperation="source-in";const nn=V.Util.transform((0,W.getCurrentTransformInverse)(en),[1,0,0,1,-Bt,-zt]);return en.fillStyle=pt?ot.getPattern(Ee,this,nn,J.PathType.FILL):ot,en.fillRect(0,0,pe,rt),yt&&!pt&&(this.cachedCanvases.delete("fillCanvas"),yt.set(Nt,xn.canvas)),{canvas:xn.canvas,offsetX:Math.round(Bt),offsetY:Math.round(zt)}}setLineWidth(ce){ce!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=ce,this.ctx.lineWidth=ce}setLineCap(ce){this.ctx.lineCap=xt[ce]}setLineJoin(ce){this.ctx.lineJoin=ht[ce]}setMiterLimit(ce){this.ctx.miterLimit=ce}setDash(ce,Ee){const pe=this.ctx;pe.setLineDash!==void 0&&(pe.setLineDash(ce),pe.lineDashOffset=Ee)}setRenderingIntent(ce){}setFlatness(ce){}setGState(ce){for(const[Ee,pe]of ce)switch(Ee){case"LW":this.setLineWidth(pe);break;case"LC":this.setLineCap(pe);break;case"LJ":this.setLineJoin(pe);break;case"ML":this.setMiterLimit(pe);break;case"D":this.setDash(pe[0],pe[1]);break;case"RI":this.setRenderingIntent(pe);break;case"FL":this.setFlatness(pe);break;case"Font":this.setFont(pe[0],pe[1]);break;case"CA":this.current.strokeAlpha=pe;break;case"ca":this.current.fillAlpha=pe,this.ctx.globalAlpha=pe;break;case"BM":this.ctx.globalCompositeOperation=pe;break;case"SMask":this.current.activeSMask=pe?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(pe);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const ce=this.inSMaskMode;this.current.activeSMask&&!ce?this.beginSMaskMode():!this.current.activeSMask&&ce&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const ce=this.ctx.canvas.width,Ee=this.ctx.canvas.height,pe="smaskGroupAt"+this.groupLevel,rt=this.cachedCanvases.getCanvas(pe,ce,Ee);this.suspendedCtx=this.ctx,this.ctx=rt.context;const ot=this.ctx;ot.setTransform(...(0,W.getCurrentTransform)(this.suspendedCtx)),be(this.suspendedCtx,ot),ke(ot,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),be(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(ce){if(!this.current.activeSMask)return;ce?(ce[0]=Math.floor(ce[0]),ce[1]=Math.floor(ce[1]),ce[2]=Math.ceil(ce[2]),ce[3]=Math.ceil(ce[3])):ce=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Ee=this.current.activeSMask,pe=this.suspendedCtx;ct(pe,Ee,this.ctx,ce),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(be(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const ce=this.current;this.stateStack.push(ce),this.current=ce.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),be(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(ce,Ee,pe,rt,ot,pt){this.ctx.transform(ce,Ee,pe,rt,ot,pt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(ce,Ee,pe){const rt=this.ctx,ot=this.current;let pt=ot.x,bt=ot.y,yt,Nt;const It=(0,W.getCurrentTransform)(rt),Xt=It[0]===0&&It[3]===0||It[1]===0&&It[2]===0,tn=Xt?pe.slice(0):null;for(let fn=0,an=0,cn=ce.length;fn<cn;fn++)switch(ce[fn]|0){case V.OPS.rectangle:pt=Ee[an++],bt=Ee[an++];const hn=Ee[an++],un=Ee[an++],xn=pt+hn,en=bt+un;rt.moveTo(pt,bt),hn===0||un===0?rt.lineTo(xn,en):(rt.lineTo(xn,bt),rt.lineTo(xn,en),rt.lineTo(pt,en)),Xt||ot.updateRectMinMax(It,[pt,bt,xn,en]),rt.closePath();break;case V.OPS.moveTo:pt=Ee[an++],bt=Ee[an++],rt.moveTo(pt,bt),Xt||ot.updatePathMinMax(It,pt,bt);break;case V.OPS.lineTo:pt=Ee[an++],bt=Ee[an++],rt.lineTo(pt,bt),Xt||ot.updatePathMinMax(It,pt,bt);break;case V.OPS.curveTo:yt=pt,Nt=bt,pt=Ee[an+4],bt=Ee[an+5],rt.bezierCurveTo(Ee[an],Ee[an+1],Ee[an+2],Ee[an+3],pt,bt),ot.updateCurvePathMinMax(It,yt,Nt,Ee[an],Ee[an+1],Ee[an+2],Ee[an+3],pt,bt,tn),an+=6;break;case V.OPS.curveTo2:yt=pt,Nt=bt,rt.bezierCurveTo(pt,bt,Ee[an],Ee[an+1],Ee[an+2],Ee[an+3]),ot.updateCurvePathMinMax(It,yt,Nt,pt,bt,Ee[an],Ee[an+1],Ee[an+2],Ee[an+3],tn),pt=Ee[an+2],bt=Ee[an+3],an+=4;break;case V.OPS.curveTo3:yt=pt,Nt=bt,pt=Ee[an+2],bt=Ee[an+3],rt.bezierCurveTo(Ee[an],Ee[an+1],pt,bt,pt,bt),ot.updateCurvePathMinMax(It,yt,Nt,Ee[an],Ee[an+1],pt,bt,pt,bt,tn),an+=4;break;case V.OPS.closePath:rt.closePath();break}Xt&&ot.updateScalingPathMinMax(It,tn),ot.setCurrentPoint(pt,bt)}closePath(){this.ctx.closePath()}stroke(ce=!0){const Ee=this.ctx,pe=this.current.strokeColor;Ee.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof pe=="object"&&(pe!=null&&pe.getPattern)?(Ee.save(),Ee.strokeStyle=pe.getPattern(Ee,this,(0,W.getCurrentTransformInverse)(Ee),J.PathType.STROKE),this.rescaleAndStroke(!1),Ee.restore()):this.rescaleAndStroke(!0)),ce&&this.consumePath(this.current.getClippedPathBoundingBox()),Ee.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(ce=!0){const Ee=this.ctx,pe=this.current.fillColor,rt=this.current.patternFill;let ot=!1;rt&&(Ee.save(),Ee.fillStyle=pe.getPattern(Ee,this,(0,W.getCurrentTransformInverse)(Ee),J.PathType.FILL),ot=!0);const pt=this.current.getClippedPathBoundingBox();this.contentVisible&&pt!==null&&(this.pendingEOFill?(Ee.fill("evenodd"),this.pendingEOFill=!1):Ee.fill()),ot&&Ee.restore(),ce&&this.consumePath(pt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=$t}eoClip(){this.pendingClip=Ot}beginText(){this.current.textMatrix=V.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const ce=this.pendingTextPaths,Ee=this.ctx;if(ce===void 0){Ee.beginPath();return}Ee.save(),Ee.beginPath();for(const pe of ce)Ee.setTransform(...pe.transform),Ee.translate(pe.x,pe.y),pe.addToPath(Ee,pe.fontSize);Ee.restore(),Ee.clip(),Ee.beginPath(),delete this.pendingTextPaths}setCharSpacing(ce){this.current.charSpacing=ce}setWordSpacing(ce){this.current.wordSpacing=ce}setHScale(ce){this.current.textHScale=ce/100}setLeading(ce){this.current.leading=-ce}setFont(ce,Ee){var It;const pe=this.commonObjs.get(ce),rt=this.current;if(!pe)throw new Error(`Can't find font for ${ce}`);if(rt.fontMatrix=pe.fontMatrix||V.FONT_IDENTITY_MATRIX,(rt.fontMatrix[0]===0||rt.fontMatrix[3]===0)&&(0,V.warn)("Invalid font matrix for font "+ce),Ee<0?(Ee=-Ee,rt.fontDirection=-1):rt.fontDirection=1,this.current.font=pe,this.current.fontSize=Ee,pe.isType3Font)return;const ot=pe.loadedName||"sans-serif",pt=((It=pe.systemFontInfo)==null?void 0:It.css)||`"${ot}", ${pe.fallbackName}`;let bt="normal";pe.black?bt="900":pe.bold&&(bt="bold");const yt=pe.italic?"italic":"normal";let Nt=Ee;Ee<ge?Nt=ge:Ee>ve&&(Nt=ve),this.current.fontSizeScale=Ee/Nt,this.ctx.font=`${yt} ${bt} ${Nt}px ${pt}`}setTextRenderingMode(ce){this.current.textRenderingMode=ce}setTextRise(ce){this.current.textRise=ce}moveText(ce,Ee){this.current.x=this.current.lineX+=ce,this.current.y=this.current.lineY+=Ee}setLeadingMoveText(ce,Ee){this.setLeading(-Ee),this.moveText(ce,Ee)}setTextMatrix(ce,Ee,pe,rt,ot,pt){this.current.textMatrix=[ce,Ee,pe,rt,ot,pt],this.current.textMatrixScale=Math.hypot(ce,Ee),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(ce,Ee,pe,rt){const ot=this.ctx,pt=this.current,bt=pt.font,yt=pt.textRenderingMode,Nt=pt.fontSize/pt.fontSizeScale,It=yt&V.TextRenderingMode.FILL_STROKE_MASK,Xt=!!(yt&V.TextRenderingMode.ADD_TO_PATH_FLAG),tn=pt.patternFill&&!bt.missingFile;let fn;(bt.disableFontFace||Xt||tn)&&(fn=bt.getPathGenerator(this.commonObjs,ce)),bt.disableFontFace||tn?(ot.save(),ot.translate(Ee,pe),ot.beginPath(),fn(ot,Nt),rt&&ot.setTransform(...rt),(It===V.TextRenderingMode.FILL||It===V.TextRenderingMode.FILL_STROKE)&&ot.fill(),(It===V.TextRenderingMode.STROKE||It===V.TextRenderingMode.FILL_STROKE)&&ot.stroke(),ot.restore()):((It===V.TextRenderingMode.FILL||It===V.TextRenderingMode.FILL_STROKE)&&ot.fillText(ce,Ee,pe),(It===V.TextRenderingMode.STROKE||It===V.TextRenderingMode.FILL_STROKE)&&ot.strokeText(ce,Ee,pe)),Xt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,W.getCurrentTransform)(ot),x:Ee,y:pe,fontSize:Nt,addToPath:fn})}get isFontSubpixelAAEnabled(){const{context:ce}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ce.scale(1.5,1),ce.fillText("I",0,10);const Ee=ce.getImageData(0,0,10,10).data;let pe=!1;for(let rt=3;rt<Ee.length;rt+=4)if(Ee[rt]>0&&Ee[rt]<255){pe=!0;break}return(0,V.shadow)(this,"isFontSubpixelAAEnabled",pe)}showText(ce){const Ee=this.current,pe=Ee.font;if(pe.isType3Font)return this.showType3Text(ce);const rt=Ee.fontSize;if(rt===0)return;const ot=this.ctx,pt=Ee.fontSizeScale,bt=Ee.charSpacing,yt=Ee.wordSpacing,Nt=Ee.fontDirection,It=Ee.textHScale*Nt,Xt=ce.length,tn=pe.vertical,fn=tn?1:-1,an=pe.defaultVMetrics,cn=rt*Ee.fontMatrix[0],hn=Ee.textRenderingMode===V.TextRenderingMode.FILL&&!pe.disableFontFace&&!Ee.patternFill;ot.save(),ot.transform(...Ee.textMatrix),ot.translate(Ee.x,Ee.y+Ee.textRise),Nt>0?ot.scale(It,-1):ot.scale(It,1);let un;if(Ee.patternFill){ot.save();const nn=Ee.fillColor.getPattern(ot,this,(0,W.getCurrentTransformInverse)(ot),J.PathType.FILL);un=(0,W.getCurrentTransform)(ot),ot.restore(),ot.fillStyle=nn}let xn=Ee.lineWidth;const en=Ee.textMatrixScale;if(en===0||xn===0){const nn=Ee.textRenderingMode&V.TextRenderingMode.FILL_STROKE_MASK;(nn===V.TextRenderingMode.STROKE||nn===V.TextRenderingMode.FILL_STROKE)&&(xn=this.getSinglePixelWidth())}else xn/=en;if(pt!==1&&(ot.scale(pt,pt),xn/=pt),ot.lineWidth=xn,pe.isInvalidPDFjsFont){const nn=[];let _n=0;for(const En of ce)nn.push(En.unicode),_n+=En.width;ot.fillText(nn.join(""),0,0),Ee.x+=_n*cn*It,ot.restore(),this.compose();return}let Bt=0,zt;for(zt=0;zt<Xt;++zt){const nn=ce[zt];if(typeof nn=="number"){Bt+=fn*nn*rt/1e3;continue}let _n=!1;const En=(nn.isSpace?yt:0)+bt,On=nn.fontChar,Gn=nn.accent;let Vn,Xn,Jn=nn.width;if(tn){const rr=nn.vmetric||an,rn=-(nn.vmetric?rr[1]:Jn*.5)*cn,jt=rr[2]*cn;Jn=rr?-rr[0]:Jn,Vn=rn/pt,Xn=(Bt+jt)/pt}else Vn=Bt/pt,Xn=0;if(pe.remeasure&&Jn>0){const rr=ot.measureText(On).width*1e3/rt*pt;if(Jn<rr&&this.isFontSubpixelAAEnabled){const rn=Jn/rr;_n=!0,ot.save(),ot.scale(rn,1),Vn/=rn}else Jn!==rr&&(Vn+=(Jn-rr)/2e3*rt/pt)}if(this.contentVisible&&(nn.isInFont||pe.missingFile)){if(hn&&!Gn)ot.fillText(On,Vn,Xn);else if(this.paintChar(On,Vn,Xn,un),Gn){const rr=Vn+rt*Gn.offset.x/pt,rn=Xn-rt*Gn.offset.y/pt;this.paintChar(Gn.fontChar,rr,rn,un)}}const Nn=tn?Jn*cn-En*Nt:Jn*cn+En*Nt;Bt+=Nn,_n&&ot.restore()}tn?Ee.y-=Bt:Ee.x+=Bt*It,ot.restore(),this.compose()}showType3Text(ce){const Ee=this.ctx,pe=this.current,rt=pe.font,ot=pe.fontSize,pt=pe.fontDirection,bt=rt.vertical?1:-1,yt=pe.charSpacing,Nt=pe.wordSpacing,It=pe.textHScale*pt,Xt=pe.fontMatrix||V.FONT_IDENTITY_MATRIX,tn=ce.length,fn=pe.textRenderingMode===V.TextRenderingMode.INVISIBLE;let an,cn,hn,un;if(!(fn||ot===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Ee.save(),Ee.transform(...pe.textMatrix),Ee.translate(pe.x,pe.y),Ee.scale(It,pt),an=0;an<tn;++an){if(cn=ce[an],typeof cn=="number"){un=bt*cn*ot/1e3,this.ctx.translate(un,0),pe.x+=un*It;continue}const xn=(cn.isSpace?Nt:0)+yt,en=rt.charProcOperatorList[cn.operatorListId];if(!en){(0,V.warn)(`Type3 character "${cn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=cn,this.save(),Ee.scale(ot,ot),Ee.transform(...Xt),this.executeOperatorList(en),this.restore()),hn=V.Util.applyTransform([cn.width,0],Xt)[0]*ot+xn,Ee.translate(hn,0),pe.x+=hn*It}Ee.restore(),this.processingType3=null}}setCharWidth(ce,Ee){}setCharWidthAndBounds(ce,Ee,pe,rt,ot,pt){this.ctx.rect(pe,rt,ot-pe,pt-rt),this.ctx.clip(),this.endPath()}getColorN_Pattern(ce){let Ee;if(ce[0]==="TilingPattern"){const pe=ce[1],rt=this.baseTransform||(0,W.getCurrentTransform)(this.ctx),ot={createCanvasGraphics:pt=>new ln(pt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Ee=new J.TilingPattern(ce,pe,this.ctx,ot,rt)}else Ee=this._getPattern(ce[1],ce[2]);return Ee}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(ce,Ee,pe){const rt=V.Util.makeHexColor(ce,Ee,pe);this.ctx.strokeStyle=rt,this.current.strokeColor=rt}setFillRGBColor(ce,Ee,pe){const rt=V.Util.makeHexColor(ce,Ee,pe);this.ctx.fillStyle=rt,this.current.fillColor=rt,this.current.patternFill=!1}_getPattern(ce,Ee=null){let pe;return this.cachedPatterns.has(ce)?pe=this.cachedPatterns.get(ce):(pe=(0,J.getShadingPattern)(this.getObject(ce)),this.cachedPatterns.set(ce,pe)),Ee&&(pe.matrix=Ee),pe}shadingFill(ce){if(!this.contentVisible)return;const Ee=this.ctx;this.save();const pe=this._getPattern(ce);Ee.fillStyle=pe.getPattern(Ee,this,(0,W.getCurrentTransformInverse)(Ee),J.PathType.SHADING);const rt=(0,W.getCurrentTransformInverse)(Ee);if(rt){const{width:ot,height:pt}=Ee.canvas,[bt,yt,Nt,It]=V.Util.getAxialAlignedBoundingBox([0,0,ot,pt],rt);this.ctx.fillRect(bt,yt,Nt-bt,It-yt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,V.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,V.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(ce,Ee){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(ce)&&ce.length===6&&this.transform(...ce),this.baseTransform=(0,W.getCurrentTransform)(this.ctx),Ee)){const pe=Ee[2]-Ee[0],rt=Ee[3]-Ee[1];this.ctx.rect(Ee[0],Ee[1],pe,rt),this.current.updateRectMinMax((0,W.getCurrentTransform)(this.ctx),Ee),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(ce){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Ee=this.ctx;ce.isolated||(0,V.info)("TODO: Support non-isolated groups."),ce.knockout&&(0,V.warn)("Knockout groups not supported.");const pe=(0,W.getCurrentTransform)(Ee);if(ce.matrix&&Ee.transform(...ce.matrix),!ce.bbox)throw new Error("Bounding box is required.");let rt=V.Util.getAxialAlignedBoundingBox(ce.bbox,(0,W.getCurrentTransform)(Ee));const ot=[0,0,Ee.canvas.width,Ee.canvas.height];rt=V.Util.intersect(rt,ot)||[0,0,0,0];const pt=Math.floor(rt[0]),bt=Math.floor(rt[1]);let yt=Math.max(Math.ceil(rt[2])-pt,1),Nt=Math.max(Math.ceil(rt[3])-bt,1),It=1,Xt=1;yt>Te&&(It=yt/Te,yt=Te),Nt>Te&&(Xt=Nt/Te,Nt=Te),this.current.startNewPathAndClipBox([0,0,yt,Nt]);let tn="groupAt"+this.groupLevel;ce.smask&&(tn+="_smask_"+this.smaskCounter++%2);const fn=this.cachedCanvases.getCanvas(tn,yt,Nt),an=fn.context;an.scale(1/It,1/Xt),an.translate(-pt,-bt),an.transform(...pe),ce.smask?this.smaskStack.push({canvas:fn.canvas,context:an,offsetX:pt,offsetY:bt,scaleX:It,scaleY:Xt,subtype:ce.smask.subtype,backdrop:ce.smask.backdrop,transferMap:ce.smask.transferMap||null,startTransformInverse:null}):(Ee.setTransform(1,0,0,1,0,0),Ee.translate(pt,bt),Ee.scale(It,Xt),Ee.save()),be(Ee,an),this.ctx=an,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Ee),this.groupLevel++}endGroup(ce){if(!this.contentVisible)return;this.groupLevel--;const Ee=this.ctx,pe=this.groupStack.pop();if(this.ctx=pe,this.ctx.imageSmoothingEnabled=!1,ce.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const rt=(0,W.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...rt);const ot=V.Util.getAxialAlignedBoundingBox([0,0,Ee.canvas.width,Ee.canvas.height],rt);this.ctx.drawImage(Ee.canvas,0,0),this.ctx.restore(),this.compose(ot)}}beginAnnotation(ce,Ee,pe,rt,ot){if(Dt(this,Pt,Ca).call(this),Ie(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Ee)&&Ee.length===4){const pt=Ee[2]-Ee[0],bt=Ee[3]-Ee[1];if(ot&&this.annotationCanvasMap){pe=pe.slice(),pe[4]-=Ee[0],pe[5]-=Ee[1],Ee=Ee.slice(),Ee[0]=Ee[1]=0,Ee[2]=pt,Ee[3]=bt;const[yt,Nt]=V.Util.singularValueDecompose2dScale((0,W.getCurrentTransform)(this.ctx)),{viewportScale:It}=this,Xt=Math.ceil(pt*this.outputScaleX*It),tn=Math.ceil(bt*this.outputScaleY*It);this.annotationCanvas=this.canvasFactory.create(Xt,tn);const{canvas:fn,context:an}=this.annotationCanvas;this.annotationCanvasMap.set(ce,fn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=an,this.ctx.save(),this.ctx.setTransform(yt,0,0,-Nt,0,bt*Nt),Ie(this.ctx)}else Ie(this.ctx),this.ctx.rect(Ee[0],Ee[1],pt,bt),this.ctx.clip(),this.endPath()}this.current=new it(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...pe),this.transform(...rt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Dt(this,Jt,Pa).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(ce){if(!this.contentVisible)return;const Ee=ce.count;ce=this.getObject(ce.data,ce),ce.count=Ee;const pe=this.ctx,rt=this.processingType3;if(rt&&(rt.compiled===void 0&&(rt.compiled=Oe(ce)),rt.compiled)){rt.compiled(pe);return}const ot=this._createMaskCanvas(ce),pt=ot.canvas;pe.save(),pe.setTransform(1,0,0,1,0,0),pe.drawImage(pt,ot.offsetX,ot.offsetY),pe.restore(),this.compose()}paintImageMaskXObjectRepeat(ce,Ee,pe=0,rt=0,ot,pt){if(!this.contentVisible)return;ce=this.getObject(ce.data,ce);const bt=this.ctx;bt.save();const yt=(0,W.getCurrentTransform)(bt);bt.transform(Ee,pe,rt,ot,0,0);const Nt=this._createMaskCanvas(ce);bt.setTransform(1,0,0,1,Nt.offsetX-yt[4],Nt.offsetY-yt[5]);for(let It=0,Xt=pt.length;It<Xt;It+=2){const tn=V.Util.transform(yt,[Ee,pe,rt,ot,pt[It],pt[It+1]]),[fn,an]=V.Util.applyTransform([0,0],tn);bt.drawImage(Nt.canvas,fn,an)}bt.restore(),this.compose()}paintImageMaskXObjectGroup(ce){if(!this.contentVisible)return;const Ee=this.ctx,pe=this.current.fillColor,rt=this.current.patternFill;for(const ot of ce){const{data:pt,width:bt,height:yt,transform:Nt}=ot,It=this.cachedCanvases.getCanvas("maskCanvas",bt,yt),Xt=It.context;Xt.save();const tn=this.getObject(pt,ot);lt(Xt,tn),Xt.globalCompositeOperation="source-in",Xt.fillStyle=rt?pe.getPattern(Xt,this,(0,W.getCurrentTransformInverse)(Ee),J.PathType.FILL):pe,Xt.fillRect(0,0,bt,yt),Xt.restore(),Ee.save(),Ee.transform(...Nt),Ee.scale(1,-1),oe(Ee,It.canvas,0,0,bt,yt,0,-1,1,1),Ee.restore()}this.compose()}paintImageXObject(ce){if(!this.contentVisible)return;const Ee=this.getObject(ce);if(!Ee){(0,V.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Ee)}paintImageXObjectRepeat(ce,Ee,pe,rt){if(!this.contentVisible)return;const ot=this.getObject(ce);if(!ot){(0,V.warn)("Dependent image isn't ready yet");return}const pt=ot.width,bt=ot.height,yt=[];for(let Nt=0,It=rt.length;Nt<It;Nt+=2)yt.push({transform:[Ee,0,0,pe,rt[Nt],rt[Nt+1]],x:0,y:0,w:pt,h:bt});this.paintInlineImageXObjectGroup(ot,yt)}applyTransferMapsToCanvas(ce){return this.current.transferMaps!=="none"&&(ce.filter=this.current.transferMaps,ce.drawImage(ce.canvas,0,0),ce.filter="none"),ce.canvas}applyTransferMapsToBitmap(ce){if(this.current.transferMaps==="none")return ce.bitmap;const{bitmap:Ee,width:pe,height:rt}=ce,ot=this.cachedCanvases.getCanvas("inlineImage",pe,rt),pt=ot.context;return pt.filter=this.current.transferMaps,pt.drawImage(Ee,0,0),pt.filter="none",ot.canvas}paintInlineImageXObject(ce){if(!this.contentVisible)return;const Ee=ce.width,pe=ce.height,rt=this.ctx;if(this.save(),!V.isNodeJS){const{filter:bt}=rt;bt!=="none"&&bt!==""&&(rt.filter="none")}rt.scale(1/Ee,-1/pe);let ot;if(ce.bitmap)ot=this.applyTransferMapsToBitmap(ce);else if(typeof HTMLElement=="function"&&ce instanceof HTMLElement||!ce.data)ot=ce;else{const yt=this.cachedCanvases.getCanvas("inlineImage",Ee,pe).context;at(yt,ce),ot=this.applyTransferMapsToCanvas(yt)}const pt=this._scaleImage(ot,(0,W.getCurrentTransformInverse)(rt));rt.imageSmoothingEnabled=Et((0,W.getCurrentTransform)(rt),ce.interpolate),oe(rt,pt.img,0,0,pt.paintWidth,pt.paintHeight,0,-pe,Ee,pe),this.compose(),this.restore()}paintInlineImageXObjectGroup(ce,Ee){if(!this.contentVisible)return;const pe=this.ctx;let rt;if(ce.bitmap)rt=ce.bitmap;else{const ot=ce.width,pt=ce.height,yt=this.cachedCanvases.getCanvas("inlineImage",ot,pt).context;at(yt,ce),rt=this.applyTransferMapsToCanvas(yt)}for(const ot of Ee)pe.save(),pe.transform(...ot.transform),pe.scale(1,-1),oe(pe,rt,ot.x,ot.y,ot.w,ot.h,0,-1,1,1),pe.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(ce){}markPointProps(ce,Ee){}beginMarkedContent(ce){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(ce,Ee){ce==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Ee)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(ce){const Ee=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ce);const pe=this.ctx;this.pendingClip&&(Ee||(this.pendingClip===Ot?pe.clip("evenodd"):pe.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),pe.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const ce=(0,W.getCurrentTransform)(this.ctx);if(ce[1]===0&&ce[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(ce[0]),Math.abs(ce[3]));else{const Ee=Math.abs(ce[0]*ce[3]-ce[2]*ce[1]),pe=Math.hypot(ce[0],ce[2]),rt=Math.hypot(ce[1],ce[3]);this._cachedGetSinglePixelWidth=Math.max(pe,rt)/Ee}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:ce}=this.current,{a:Ee,b:pe,c:rt,d:ot}=this.ctx.getTransform();let pt,bt;if(pe===0&&rt===0){const yt=Math.abs(Ee),Nt=Math.abs(ot);if(yt===Nt)if(ce===0)pt=bt=1/yt;else{const It=yt*ce;pt=bt=It<1?1/It:1}else if(ce===0)pt=1/yt,bt=1/Nt;else{const It=yt*ce,Xt=Nt*ce;pt=It<1?1/It:1,bt=Xt<1?1/Xt:1}}else{const yt=Math.abs(Ee*ot-pe*rt),Nt=Math.hypot(Ee,pe),It=Math.hypot(rt,ot);if(ce===0)pt=It/yt,bt=Nt/yt;else{const Xt=ce*yt;pt=It>Xt?It/Xt:1,bt=Nt>Xt?Nt/Xt:1}}this._cachedScaleForStroking[0]=pt,this._cachedScaleForStroking[1]=bt}return this._cachedScaleForStroking}rescaleAndStroke(ce){const{ctx:Ee}=this,{lineWidth:pe}=this.current,[rt,ot]=this.getScaleForStroking();if(Ee.lineWidth=pe||1,rt===1&&ot===1){Ee.stroke();return}const pt=Ee.getLineDash();if(ce&&Ee.save(),Ee.scale(rt,ot),pt.length>0){const bt=Math.max(rt,ot);Ee.setLineDash(pt.map(yt=>yt/bt)),Ee.lineDashOffset/=bt}Ee.stroke(),ce&&Ee.restore()}isContentVisible(){for(let ce=this.markedContentStack.length-1;ce>=0;ce--)if(!this.markedContentStack[ce].visible)return!1;return!0}};let Vt=ln;Pt=new WeakSet,Ca=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Jt=new WeakSet,Pa=function(){if(this.pageColors){const ce=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(ce!=="none"){const Ee=this.ctx.filter;this.ctx.filter=ce,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Ee}}},B.CanvasGraphics=Vt;for(const gt in V.OPS)Vt.prototype[gt]!==void 0&&(Vt.prototype[V.OPS[gt]]=Vt.prototype[gt])},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.TilingPattern=B.PathType=void 0,B.getShadingPattern=Ae;var V=K(1),W=K(6);const J={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};B.PathType=J;function ne(Oe,it){if(!it)return;const at=it[2]-it[0],lt=it[3]-it[1],be=new Path2D;be.rect(it[0],it[1],at,lt),Oe.clip(be)}class ge{constructor(){this.constructor===ge&&(0,V.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,V.unreachable)("Abstract method `getPattern` called.")}}class ve extends ge{constructor(it){super(),this._type=it[1],this._bbox=it[2],this._colorStops=it[3],this._p0=it[4],this._p1=it[5],this._r0=it[6],this._r1=it[7],this.matrix=null}_createGradient(it){let at;this._type==="axial"?at=it.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(at=it.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const lt of this._colorStops)at.addColorStop(lt[0],lt[1]);return at}getPattern(it,at,lt,be){let Ie;if(be===J.STROKE||be===J.FILL){const vt=at.current.getClippedPathBoundingBox(be,(0,W.getCurrentTransform)(it))||[0,0,0,0],dt=Math.ceil(vt[2]-vt[0])||1,Ce=Math.ceil(vt[3]-vt[1])||1,ft=at.cachedCanvases.getCanvas("pattern",dt,Ce,!0),ct=ft.context;ct.clearRect(0,0,ct.canvas.width,ct.canvas.height),ct.beginPath(),ct.rect(0,0,ct.canvas.width,ct.canvas.height),ct.translate(-vt[0],-vt[1]),lt=V.Util.transform(lt,[1,0,0,1,vt[0],vt[1]]),ct.transform(...at.baseTransform),this.matrix&&ct.transform(...this.matrix),ne(ct,this._bbox),ct.fillStyle=this._createGradient(ct),ct.fill(),Ie=it.createPattern(ft.canvas,"no-repeat");const Et=new DOMMatrix(lt);Ie.setTransform(Et)}else ne(it,this._bbox),Ie=this._createGradient(it);return Ie}}function Te(Oe,it,at,lt,be,Ie,vt,dt){const Ce=it.coords,ft=it.colors,ct=Oe.data,Et=Oe.width*4;let xt;Ce[at+1]>Ce[lt+1]&&(xt=at,at=lt,lt=xt,xt=Ie,Ie=vt,vt=xt),Ce[lt+1]>Ce[be+1]&&(xt=lt,lt=be,be=xt,xt=vt,vt=dt,dt=xt),Ce[at+1]>Ce[lt+1]&&(xt=at,at=lt,lt=xt,xt=Ie,Ie=vt,vt=xt);const ht=(Ce[at]+it.offsetX)*it.scaleX,$t=(Ce[at+1]+it.offsetY)*it.scaleY,Ot=(Ce[lt]+it.offsetX)*it.scaleX,Vt=(Ce[lt+1]+it.offsetY)*it.scaleY,Pt=(Ce[be]+it.offsetX)*it.scaleX,Yt=(Ce[be+1]+it.offsetY)*it.scaleY;if($t>=Yt)return;const Jt=ft[Ie],sn=ft[Ie+1],ln=ft[Ie+2],gt=ft[vt],ce=ft[vt+1],Ee=ft[vt+2],pe=ft[dt],rt=ft[dt+1],ot=ft[dt+2],pt=Math.round($t),bt=Math.round(Yt);let yt,Nt,It,Xt,tn,fn,an,cn;for(let hn=pt;hn<=bt;hn++){if(hn<Vt){const zt=hn<$t?0:($t-hn)/($t-Vt);yt=ht-(ht-Ot)*zt,Nt=Jt-(Jt-gt)*zt,It=sn-(sn-ce)*zt,Xt=ln-(ln-Ee)*zt}else{let zt;hn>Yt?zt=1:Vt===Yt?zt=0:zt=(Vt-hn)/(Vt-Yt),yt=Ot-(Ot-Pt)*zt,Nt=gt-(gt-pe)*zt,It=ce-(ce-rt)*zt,Xt=Ee-(Ee-ot)*zt}let un;hn<$t?un=0:hn>Yt?un=1:un=($t-hn)/($t-Yt),tn=ht-(ht-Pt)*un,fn=Jt-(Jt-pe)*un,an=sn-(sn-rt)*un,cn=ln-(ln-ot)*un;const xn=Math.round(Math.min(yt,tn)),en=Math.round(Math.max(yt,tn));let Bt=Et*hn+xn*4;for(let zt=xn;zt<=en;zt++)un=(yt-zt)/(yt-tn),un<0?un=0:un>1&&(un=1),ct[Bt++]=Nt-(Nt-fn)*un|0,ct[Bt++]=It-(It-an)*un|0,ct[Bt++]=Xt-(Xt-cn)*un|0,ct[Bt++]=255}}function re(Oe,it,at){const lt=it.coords,be=it.colors;let Ie,vt;switch(it.type){case"lattice":const dt=it.verticesPerRow,Ce=Math.floor(lt.length/dt)-1,ft=dt-1;for(Ie=0;Ie<Ce;Ie++){let ct=Ie*dt;for(let Et=0;Et<ft;Et++,ct++)Te(Oe,at,lt[ct],lt[ct+1],lt[ct+dt],be[ct],be[ct+1],be[ct+dt]),Te(Oe,at,lt[ct+dt+1],lt[ct+1],lt[ct+dt],be[ct+dt+1],be[ct+1],be[ct+dt])}break;case"triangles":for(Ie=0,vt=lt.length;Ie<vt;Ie+=3)Te(Oe,at,lt[Ie],lt[Ie+1],lt[Ie+2],be[Ie],be[Ie+1],be[Ie+2]);break;default:throw new Error("illegal figure")}}class st extends ge{constructor(it){super(),this._coords=it[2],this._colors=it[3],this._figures=it[4],this._bounds=it[5],this._bbox=it[7],this._background=it[8],this.matrix=null}_createMeshCanvas(it,at,lt){const dt=Math.floor(this._bounds[0]),Ce=Math.floor(this._bounds[1]),ft=Math.ceil(this._bounds[2])-dt,ct=Math.ceil(this._bounds[3])-Ce,Et=Math.min(Math.ceil(Math.abs(ft*it[0]*1.1)),3e3),xt=Math.min(Math.ceil(Math.abs(ct*it[1]*1.1)),3e3),ht=ft/Et,$t=ct/xt,Ot={coords:this._coords,colors:this._colors,offsetX:-dt,offsetY:-Ce,scaleX:1/ht,scaleY:1/$t},Vt=Et+2*2,Pt=xt+2*2,Yt=lt.getCanvas("mesh",Vt,Pt,!1),Jt=Yt.context,sn=Jt.createImageData(Et,xt);if(at){const gt=sn.data;for(let ce=0,Ee=gt.length;ce<Ee;ce+=4)gt[ce]=at[0],gt[ce+1]=at[1],gt[ce+2]=at[2],gt[ce+3]=255}for(const gt of this._figures)re(sn,gt,Ot);return Jt.putImageData(sn,2,2),{canvas:Yt.canvas,offsetX:dt-2*ht,offsetY:Ce-2*$t,scaleX:ht,scaleY:$t}}getPattern(it,at,lt,be){ne(it,this._bbox);let Ie;if(be===J.SHADING)Ie=V.Util.singularValueDecompose2dScale((0,W.getCurrentTransform)(it));else if(Ie=V.Util.singularValueDecompose2dScale(at.baseTransform),this.matrix){const dt=V.Util.singularValueDecompose2dScale(this.matrix);Ie=[Ie[0]*dt[0],Ie[1]*dt[1]]}const vt=this._createMeshCanvas(Ie,be===J.SHADING?null:this._background,at.cachedCanvases);return be!==J.SHADING&&(it.setTransform(...at.baseTransform),this.matrix&&it.transform(...this.matrix)),it.translate(vt.offsetX,vt.offsetY),it.scale(vt.scaleX,vt.scaleY),it.createPattern(vt.canvas,"no-repeat")}}class nt extends ge{getPattern(){return"hotpink"}}function Ae(Oe){switch(Oe[0]){case"RadialAxial":return new ve(Oe);case"Mesh":return new st(Oe);case"Dummy":return new nt}throw new Error(`Unknown IR type: ${Oe[0]}`)}const ke={COLORED:1,UNCOLORED:2},oe=class{constructor(it,at,lt,be,Ie){this.operatorList=it[2],this.matrix=it[3]||[1,0,0,1,0,0],this.bbox=it[4],this.xstep=it[5],this.ystep=it[6],this.paintType=it[7],this.tilingType=it[8],this.color=at,this.ctx=lt,this.canvasGraphicsFactory=be,this.baseTransform=Ie}createPatternCanvas(it){const at=this.operatorList,lt=this.bbox,be=this.xstep,Ie=this.ystep,vt=this.paintType,dt=this.tilingType,Ce=this.color,ft=this.canvasGraphicsFactory;(0,V.info)("TilingType: "+dt);const ct=lt[0],Et=lt[1],xt=lt[2],ht=lt[3],$t=V.Util.singularValueDecompose2dScale(this.matrix),Ot=V.Util.singularValueDecompose2dScale(this.baseTransform),Vt=[$t[0]*Ot[0],$t[1]*Ot[1]],Pt=this.getSizeAndScale(be,this.ctx.canvas.width,Vt[0]),Yt=this.getSizeAndScale(Ie,this.ctx.canvas.height,Vt[1]),Jt=it.cachedCanvases.getCanvas("pattern",Pt.size,Yt.size,!0),sn=Jt.context,ln=ft.createCanvasGraphics(sn);ln.groupLevel=it.groupLevel,this.setFillAndStrokeStyleToContext(ln,vt,Ce);let gt=ct,ce=Et,Ee=xt,pe=ht;return ct<0&&(gt=0,Ee+=Math.abs(ct)),Et<0&&(ce=0,pe+=Math.abs(Et)),sn.translate(-(Pt.scale*gt),-(Yt.scale*ce)),ln.transform(Pt.scale,0,0,Yt.scale,0,0),sn.save(),this.clipBbox(ln,gt,ce,Ee,pe),ln.baseTransform=(0,W.getCurrentTransform)(ln.ctx),ln.executeOperatorList(at),ln.endDrawing(),{canvas:Jt.canvas,scaleX:Pt.scale,scaleY:Yt.scale,offsetX:gt,offsetY:ce}}getSizeAndScale(it,at,lt){it=Math.abs(it);const be=Math.max(oe.MAX_PATTERN_SIZE,at);let Ie=Math.ceil(it*lt);return Ie>=be?Ie=be:lt=Ie/it,{scale:lt,size:Ie}}clipBbox(it,at,lt,be,Ie){const vt=be-at,dt=Ie-lt;it.ctx.rect(at,lt,vt,dt),it.current.updateRectMinMax((0,W.getCurrentTransform)(it.ctx),[at,lt,be,Ie]),it.clip(),it.endPath()}setFillAndStrokeStyleToContext(it,at,lt){const be=it.ctx,Ie=it.current;switch(at){case ke.COLORED:const vt=this.ctx;be.fillStyle=vt.fillStyle,be.strokeStyle=vt.strokeStyle,Ie.fillColor=vt.fillStyle,Ie.strokeColor=vt.strokeStyle;break;case ke.UNCOLORED:const dt=V.Util.makeHexColor(lt[0],lt[1],lt[2]);be.fillStyle=dt,be.strokeStyle=dt,Ie.fillColor=dt,Ie.strokeColor=dt;break;default:throw new V.FormatError(`Unsupported paint type: ${at}`)}}getPattern(it,at,lt,be){let Ie=lt;be!==J.SHADING&&(Ie=V.Util.transform(Ie,at.baseTransform),this.matrix&&(Ie=V.Util.transform(Ie,this.matrix)));const vt=this.createPatternCanvas(at);let dt=new DOMMatrix(Ie);dt=dt.translate(vt.offsetX,vt.offsetY),dt=dt.scale(1/vt.scaleX,1/vt.scaleY);const Ce=it.createPattern(vt.canvas,"repeat");return Ce.setTransform(dt),Ce}};let he=oe;Mr(he,"MAX_PATTERN_SIZE",3e3),B.TilingPattern=he},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.convertBlackAndWhiteToRGBA=J,B.convertToRGBA=W,B.grayToRGBA=ge;var V=K(1);function W(ve){switch(ve.kind){case V.ImageKind.GRAYSCALE_1BPP:return J(ve);case V.ImageKind.RGB_24BPP:return ne(ve)}return null}function J({src:ve,srcPos:Te=0,dest:re,width:st,height:nt,nonBlackColor:Ae=4294967295,inverseDecode:ke=!1}){const he=V.FeatureTest.isLittleEndian?4278190080:255,[oe,Oe]=ke?[Ae,he]:[he,Ae],it=st>>3,at=st&7,lt=ve.length;re=new Uint32Array(re.buffer);let be=0;for(let Ie=0;Ie<nt;Ie++){for(const dt=Te+it;Te<dt;Te++){const Ce=Te<lt?ve[Te]:255;re[be++]=Ce&128?Oe:oe,re[be++]=Ce&64?Oe:oe,re[be++]=Ce&32?Oe:oe,re[be++]=Ce&16?Oe:oe,re[be++]=Ce&8?Oe:oe,re[be++]=Ce&4?Oe:oe,re[be++]=Ce&2?Oe:oe,re[be++]=Ce&1?Oe:oe}if(at===0)continue;const vt=Te<lt?ve[Te++]:255;for(let dt=0;dt<at;dt++)re[be++]=vt&1<<7-dt?Oe:oe}return{srcPos:Te,destPos:be}}function ne({src:ve,srcPos:Te=0,dest:re,destPos:st=0,width:nt,height:Ae}){let ke=0;const he=ve.length>>2,oe=new Uint32Array(ve.buffer,Te,he);if(V.FeatureTest.isLittleEndian){for(;ke<he-2;ke+=3,st+=4){const Oe=oe[ke],it=oe[ke+1],at=oe[ke+2];re[st]=Oe|4278190080,re[st+1]=Oe>>>24|it<<8|4278190080,re[st+2]=it>>>16|at<<16|4278190080,re[st+3]=at>>>8|4278190080}for(let Oe=ke*4,it=ve.length;Oe<it;Oe+=3)re[st++]=ve[Oe]|ve[Oe+1]<<8|ve[Oe+2]<<16|4278190080}else{for(;ke<he-2;ke+=3,st+=4){const Oe=oe[ke],it=oe[ke+1],at=oe[ke+2];re[st]=Oe|255,re[st+1]=Oe<<24|it>>>8|255,re[st+2]=it<<16|at>>>16|255,re[st+3]=at<<8|255}for(let Oe=ke*4,it=ve.length;Oe<it;Oe+=3)re[st++]=ve[Oe]<<24|ve[Oe+1]<<16|ve[Oe+2]<<8|255}return{srcPos:Te,destPos:st}}function ge(ve,Te){if(V.FeatureTest.isLittleEndian)for(let re=0,st=ve.length;re<st;re++)Te[re]=ve[re]*65793|4278190080;else for(let re=0,st=ve.length;re<st;re++)Te[re]=ve[re]*16843008|255}},(A,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.GlobalWorkerOptions=void 0;const K=Object.create(null);B.GlobalWorkerOptions=K,K.workerPort=null,K.workerSrc=""},(A,B,K)=>{var ve,Eo,re,yo,nt,Wi;Object.defineProperty(B,"__esModule",{value:!0}),B.MessageHandler=void 0;var V=K(1);const W={UNKNOWN:0,DATA:1,ERROR:2},J={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ne(ke){switch(ke instanceof Error||typeof ke=="object"&&ke!==null||(0,V.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ke.name){case"AbortException":return new V.AbortException(ke.message);case"MissingPDFException":return new V.MissingPDFException(ke.message);case"PasswordException":return new V.PasswordException(ke.message,ke.code);case"UnexpectedResponseException":return new V.UnexpectedResponseException(ke.message,ke.status);case"UnknownErrorException":return new V.UnknownErrorException(ke.message,ke.details);default:return new V.UnknownErrorException(ke.message,ke.toString())}}class ge{constructor(he,oe,Oe){Ct(this,ve);Ct(this,re);Ct(this,nt);this.sourceName=he,this.targetName=oe,this.comObj=Oe,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=it=>{const at=it.data;if(at.targetName!==this.sourceName)return;if(at.stream){Dt(this,re,yo).call(this,at);return}if(at.callback){const be=at.callbackId,Ie=this.callbackCapabilities[be];if(!Ie)throw new Error(`Cannot resolve callback ${be}`);if(delete this.callbackCapabilities[be],at.callback===W.DATA)Ie.resolve(at.data);else if(at.callback===W.ERROR)Ie.reject(ne(at.reason));else throw new Error("Unexpected callback case");return}const lt=this.actionHandler[at.action];if(!lt)throw new Error(`Unknown action from worker: ${at.action}`);if(at.callbackId){const be=this.sourceName,Ie=at.sourceName;new Promise(function(vt){vt(lt(at.data))}).then(function(vt){Oe.postMessage({sourceName:be,targetName:Ie,callback:W.DATA,callbackId:at.callbackId,data:vt})},function(vt){Oe.postMessage({sourceName:be,targetName:Ie,callback:W.ERROR,callbackId:at.callbackId,reason:ne(vt)})});return}if(at.streamId){Dt(this,ve,Eo).call(this,at);return}lt(at.data)},Oe.addEventListener("message",this._onComObjOnMessage)}on(he,oe){const Oe=this.actionHandler;if(Oe[he])throw new Error(`There is already an actionName called "${he}"`);Oe[he]=oe}send(he,oe,Oe){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:he,data:oe},Oe)}sendWithPromise(he,oe,Oe){const it=this.callbackId++,at=new V.PromiseCapability;this.callbackCapabilities[it]=at;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:he,callbackId:it,data:oe},Oe)}catch(lt){at.reject(lt)}return at.promise}sendWithStream(he,oe,Oe,it){const at=this.streamId++,lt=this.sourceName,be=this.targetName,Ie=this.comObj;return new ReadableStream({start:vt=>{const dt=new V.PromiseCapability;return this.streamControllers[at]={controller:vt,startCall:dt,pullCall:null,cancelCall:null,isClosed:!1},Ie.postMessage({sourceName:lt,targetName:be,action:he,streamId:at,data:oe,desiredSize:vt.desiredSize},it),dt.promise},pull:vt=>{const dt=new V.PromiseCapability;return this.streamControllers[at].pullCall=dt,Ie.postMessage({sourceName:lt,targetName:be,stream:J.PULL,streamId:at,desiredSize:vt.desiredSize}),dt.promise},cancel:vt=>{(0,V.assert)(vt instanceof Error,"cancel must have a valid reason");const dt=new V.PromiseCapability;return this.streamControllers[at].cancelCall=dt,this.streamControllers[at].isClosed=!0,Ie.postMessage({sourceName:lt,targetName:be,stream:J.CANCEL,streamId:at,reason:ne(vt)}),dt.promise}},Oe)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ve=new WeakSet,Eo=function(he){const oe=he.streamId,Oe=this.sourceName,it=he.sourceName,at=this.comObj,lt=this,be=this.actionHandler[he.action],Ie={enqueue(vt,dt=1,Ce){if(this.isCancelled)return;const ft=this.desiredSize;this.desiredSize-=dt,ft>0&&this.desiredSize<=0&&(this.sinkCapability=new V.PromiseCapability,this.ready=this.sinkCapability.promise),at.postMessage({sourceName:Oe,targetName:it,stream:J.ENQUEUE,streamId:oe,chunk:vt},Ce)},close(){this.isCancelled||(this.isCancelled=!0,at.postMessage({sourceName:Oe,targetName:it,stream:J.CLOSE,streamId:oe}),delete lt.streamSinks[oe])},error(vt){(0,V.assert)(vt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,at.postMessage({sourceName:Oe,targetName:it,stream:J.ERROR,streamId:oe,reason:ne(vt)}))},sinkCapability:new V.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:he.desiredSize,ready:null};Ie.sinkCapability.resolve(),Ie.ready=Ie.sinkCapability.promise,this.streamSinks[oe]=Ie,new Promise(function(vt){vt(be(he.data,Ie))}).then(function(){at.postMessage({sourceName:Oe,targetName:it,stream:J.START_COMPLETE,streamId:oe,success:!0})},function(vt){at.postMessage({sourceName:Oe,targetName:it,stream:J.START_COMPLETE,streamId:oe,reason:ne(vt)})})},re=new WeakSet,yo=function(he){const oe=he.streamId,Oe=this.sourceName,it=he.sourceName,at=this.comObj,lt=this.streamControllers[oe],be=this.streamSinks[oe];switch(he.stream){case J.START_COMPLETE:he.success?lt.startCall.resolve():lt.startCall.reject(ne(he.reason));break;case J.PULL_COMPLETE:he.success?lt.pullCall.resolve():lt.pullCall.reject(ne(he.reason));break;case J.PULL:if(!be){at.postMessage({sourceName:Oe,targetName:it,stream:J.PULL_COMPLETE,streamId:oe,success:!0});break}be.desiredSize<=0&&he.desiredSize>0&&be.sinkCapability.resolve(),be.desiredSize=he.desiredSize,new Promise(function(Ie){var vt;Ie((vt=be.onPull)==null?void 0:vt.call(be))}).then(function(){at.postMessage({sourceName:Oe,targetName:it,stream:J.PULL_COMPLETE,streamId:oe,success:!0})},function(Ie){at.postMessage({sourceName:Oe,targetName:it,stream:J.PULL_COMPLETE,streamId:oe,reason:ne(Ie)})});break;case J.ENQUEUE:if((0,V.assert)(lt,"enqueue should have stream controller"),lt.isClosed)break;lt.controller.enqueue(he.chunk);break;case J.CLOSE:if((0,V.assert)(lt,"close should have stream controller"),lt.isClosed)break;lt.isClosed=!0,lt.controller.close(),Dt(this,nt,Wi).call(this,lt,oe);break;case J.ERROR:(0,V.assert)(lt,"error should have stream controller"),lt.controller.error(ne(he.reason)),Dt(this,nt,Wi).call(this,lt,oe);break;case J.CANCEL_COMPLETE:he.success?lt.cancelCall.resolve():lt.cancelCall.reject(ne(he.reason)),Dt(this,nt,Wi).call(this,lt,oe);break;case J.CANCEL:if(!be)break;new Promise(function(Ie){var vt;Ie((vt=be.onCancel)==null?void 0:vt.call(be,ne(he.reason)))}).then(function(){at.postMessage({sourceName:Oe,targetName:it,stream:J.CANCEL_COMPLETE,streamId:oe,success:!0})},function(Ie){at.postMessage({sourceName:Oe,targetName:it,stream:J.CANCEL_COMPLETE,streamId:oe,reason:ne(Ie)})}),be.sinkCapability.reject(ne(he.reason)),be.isCancelled=!0,delete this.streamSinks[oe];break;default:throw new Error("Unexpected stream case")}},nt=new WeakSet,Wi=async function(he,oe){var Oe,it,at;await Promise.allSettled([(Oe=he.startCall)==null?void 0:Oe.promise,(it=he.pullCall)==null?void 0:it.promise,(at=he.cancelCall)==null?void 0:at.promise]),delete this.streamControllers[oe]},B.MessageHandler=ge},(A,B,K)=>{var J,ne;Object.defineProperty(B,"__esModule",{value:!0}),B.Metadata=void 0;var V=K(1);class W{constructor({parsedData:ve,rawData:Te}){Ct(this,J,void 0);Ct(this,ne,void 0);Zt(this,J,ve),Zt(this,ne,Te)}getRaw(){return ie(this,ne)}get(ve){return ie(this,J).get(ve)??null}getAll(){return(0,V.objectFromMap)(ie(this,J))}has(ve){return ie(this,J).has(ve)}}J=new WeakMap,ne=new WeakMap,B.Metadata=W},(A,B,K)=>{var ve,Te,re,st,nt,Ae,xa;Object.defineProperty(B,"__esModule",{value:!0}),B.OptionalContentConfig=void 0;var V=K(1),W=K(8);const J=Symbol("INTERNAL");class ne{constructor(oe,Oe){Ct(this,ve,!0);this.name=oe,this.intent=Oe}get visible(){return ie(this,ve)}_setVisible(oe,Oe){oe!==J&&(0,V.unreachable)("Internal method `_setVisible` called."),Zt(this,ve,Oe)}}ve=new WeakMap;class ge{constructor(oe){Ct(this,Ae);Ct(this,Te,null);Ct(this,re,new Map);Ct(this,st,null);Ct(this,nt,null);if(this.name=null,this.creator=null,oe!==null){this.name=oe.name,this.creator=oe.creator,Zt(this,nt,oe.order);for(const Oe of oe.groups)ie(this,re).set(Oe.id,new ne(Oe.name,Oe.intent));if(oe.baseState==="OFF")for(const Oe of ie(this,re).values())Oe._setVisible(J,!1);for(const Oe of oe.on)ie(this,re).get(Oe)._setVisible(J,!0);for(const Oe of oe.off)ie(this,re).get(Oe)._setVisible(J,!1);Zt(this,st,this.getHash())}}isVisible(oe){if(ie(this,re).size===0)return!0;if(!oe)return(0,V.warn)("Optional content group not defined."),!0;if(oe.type==="OCG")return ie(this,re).has(oe.id)?ie(this,re).get(oe.id).visible:((0,V.warn)(`Optional content group not found: ${oe.id}`),!0);if(oe.type==="OCMD"){if(oe.expression)return Dt(this,Ae,xa).call(this,oe.expression);if(!oe.policy||oe.policy==="AnyOn"){for(const Oe of oe.ids){if(!ie(this,re).has(Oe))return(0,V.warn)(`Optional content group not found: ${Oe}`),!0;if(ie(this,re).get(Oe).visible)return!0}return!1}else if(oe.policy==="AllOn"){for(const Oe of oe.ids){if(!ie(this,re).has(Oe))return(0,V.warn)(`Optional content group not found: ${Oe}`),!0;if(!ie(this,re).get(Oe).visible)return!1}return!0}else if(oe.policy==="AnyOff"){for(const Oe of oe.ids){if(!ie(this,re).has(Oe))return(0,V.warn)(`Optional content group not found: ${Oe}`),!0;if(!ie(this,re).get(Oe).visible)return!0}return!1}else if(oe.policy==="AllOff"){for(const Oe of oe.ids){if(!ie(this,re).has(Oe))return(0,V.warn)(`Optional content group not found: ${Oe}`),!0;if(ie(this,re).get(Oe).visible)return!1}return!0}return(0,V.warn)(`Unknown optional content policy ${oe.policy}.`),!0}return(0,V.warn)(`Unknown group type ${oe.type}.`),!0}setVisibility(oe,Oe=!0){if(!ie(this,re).has(oe)){(0,V.warn)(`Optional content group not found: ${oe}`);return}ie(this,re).get(oe)._setVisible(J,!!Oe),Zt(this,Te,null)}get hasInitialVisibility(){return ie(this,st)===null||this.getHash()===ie(this,st)}getOrder(){return ie(this,re).size?ie(this,nt)?ie(this,nt).slice():[...ie(this,re).keys()]:null}getGroups(){return ie(this,re).size>0?(0,V.objectFromMap)(ie(this,re)):null}getGroup(oe){return ie(this,re).get(oe)||null}getHash(){if(ie(this,Te)!==null)return ie(this,Te);const oe=new W.MurmurHash3_64;for(const[Oe,it]of ie(this,re))oe.update(`${Oe}:${it.visible}`);return Zt(this,Te,oe.hexdigest())}}Te=new WeakMap,re=new WeakMap,st=new WeakMap,nt=new WeakMap,Ae=new WeakSet,xa=function(oe){const Oe=oe.length;if(Oe<2)return!0;const it=oe[0];for(let at=1;at<Oe;at++){const lt=oe[at];let be;if(Array.isArray(lt))be=Dt(this,Ae,xa).call(this,lt);else if(ie(this,re).has(lt))be=ie(this,re).get(lt).visible;else return(0,V.warn)(`Optional content group not found: ${lt}`),!0;switch(it){case"And":if(!be)return!1;break;case"Or":if(be)return!0;break;case"Not":return!be;default:return!0}}return it==="And"},B.OptionalContentConfig=ge},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.PDFDataTransportStream=void 0;var V=K(1),W=K(6);class J{constructor({length:Te,initialData:re,progressiveDone:st=!1,contentDispositionFilename:nt=null,disableRange:Ae=!1,disableStream:ke=!1},he){if((0,V.assert)(he,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=st,this._contentDispositionFilename=nt,(re==null?void 0:re.length)>0){const oe=re instanceof Uint8Array&&re.byteLength===re.buffer.byteLength?re.buffer:new Uint8Array(re).buffer;this._queuedChunks.push(oe)}this._pdfDataRangeTransport=he,this._isStreamingSupported=!ke,this._isRangeSupported=!Ae,this._contentLength=Te,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((oe,Oe)=>{this._onReceiveData({begin:oe,chunk:Oe})}),this._pdfDataRangeTransport.addProgressListener((oe,Oe)=>{this._onProgress({loaded:oe,total:Oe})}),this._pdfDataRangeTransport.addProgressiveReadListener(oe=>{this._onReceiveData({chunk:oe})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:Te,chunk:re}){const st=re instanceof Uint8Array&&re.byteLength===re.buffer.byteLength?re.buffer:new Uint8Array(re).buffer;if(Te===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(st):this._queuedChunks.push(st);else{const nt=this._rangeReaders.some(function(Ae){return Ae._begin!==Te?!1:(Ae._enqueue(st),!0)});(0,V.assert)(nt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var Te;return((Te=this._fullRequestReader)==null?void 0:Te._loaded)??0}_onProgress(Te){var re,st,nt,Ae;Te.total===void 0?(st=(re=this._rangeReaders[0])==null?void 0:re.onProgress)==null||st.call(re,{loaded:Te.loaded}):(Ae=(nt=this._fullRequestReader)==null?void 0:nt.onProgress)==null||Ae.call(nt,{loaded:Te.loaded,total:Te.total})}_onProgressiveDone(){var Te;(Te=this._fullRequestReader)==null||Te.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(Te){const re=this._rangeReaders.indexOf(Te);re>=0&&this._rangeReaders.splice(re,1)}getFullReader(){(0,V.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const Te=this._queuedChunks;return this._queuedChunks=null,new ne(this,Te,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(Te,re){if(re<=this._progressiveDataLength)return null;const st=new ge(this,Te,re);return this._pdfDataRangeTransport.requestDataRange(Te,re),this._rangeReaders.push(st),st}cancelAllRequests(Te){var re;(re=this._fullRequestReader)==null||re.cancel(Te);for(const st of this._rangeReaders.slice(0))st.cancel(Te);this._pdfDataRangeTransport.abort()}}B.PDFDataTransportStream=J;class ne{constructor(Te,re,st=!1,nt=null){this._stream=Te,this._done=st||!1,this._filename=(0,W.isPdfFile)(nt)?nt:null,this._queuedChunks=re||[],this._loaded=0;for(const Ae of this._queuedChunks)this._loaded+=Ae.byteLength;this._requests=[],this._headersReady=Promise.resolve(),Te._fullRequestReader=this,this.onProgress=null}_enqueue(Te){this._done||(this._requests.length>0?this._requests.shift().resolve({value:Te,done:!1}):this._queuedChunks.push(Te),this._loaded+=Te.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Te=new V.PromiseCapability;return this._requests.push(Te),Te.promise}cancel(Te){this._done=!0;for(const re of this._requests)re.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ge{constructor(Te,re,st){this._stream=Te,this._begin=re,this._end=st,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(Te){if(!this._done){if(this._requests.length===0)this._queuedChunk=Te;else{this._requests.shift().resolve({value:Te,done:!1});for(const st of this._requests)st.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const re=this._queuedChunk;return this._queuedChunk=null,{value:re,done:!1}}if(this._done)return{value:void 0,done:!0};const Te=new V.PromiseCapability;return this._requests.push(Te),Te.promise}cancel(Te){this._done=!0;for(const re of this._requests)re.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.PDFFetchStream=void 0;var V=K(1),W=K(20);function J(st,nt,Ae){return{method:"GET",headers:st,signal:Ae.signal,mode:"cors",credentials:nt?"include":"same-origin",redirect:"follow"}}function ne(st){const nt=new Headers;for(const Ae in st){const ke=st[Ae];ke!==void 0&&nt.append(Ae,ke)}return nt}function ge(st){return st instanceof Uint8Array?st.buffer:st instanceof ArrayBuffer?st:((0,V.warn)(`getArrayBuffer - unexpected data format: ${st}`),new Uint8Array(st).buffer)}class ve{constructor(nt){this.source=nt,this.isHttp=/^https?:/i.test(nt.url),this.httpHeaders=this.isHttp&&nt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var nt;return((nt=this._fullRequestReader)==null?void 0:nt._loaded)??0}getFullReader(){return(0,V.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Te(this),this._fullRequestReader}getRangeReader(nt,Ae){if(Ae<=this._progressiveDataLength)return null;const ke=new re(this,nt,Ae);return this._rangeRequestReaders.push(ke),ke}cancelAllRequests(nt){var Ae;(Ae=this._fullRequestReader)==null||Ae.cancel(nt);for(const ke of this._rangeRequestReaders.slice(0))ke.cancel(nt)}}B.PDFFetchStream=ve;class Te{constructor(nt){this._stream=nt,this._reader=null,this._loaded=0,this._filename=null;const Ae=nt.source;this._withCredentials=Ae.withCredentials||!1,this._contentLength=Ae.length,this._headersCapability=new V.PromiseCapability,this._disableRange=Ae.disableRange||!1,this._rangeChunkSize=Ae.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Ae.disableStream,this._isRangeSupported=!Ae.disableRange,this._headers=ne(this._stream.httpHeaders);const ke=Ae.url;fetch(ke,J(this._headers,this._withCredentials,this._abortController)).then(he=>{if(!(0,W.validateResponseStatus)(he.status))throw(0,W.createResponseStatusError)(he.status,ke);this._reader=he.body.getReader(),this._headersCapability.resolve();const oe=at=>he.headers.get(at),{allowRangeRequests:Oe,suggestedLength:it}=(0,W.validateRangeRequestCapabilities)({getResponseHeader:oe,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Oe,this._contentLength=it||this._contentLength,this._filename=(0,W.extractFilenameFromHeader)(oe),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new V.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ke;await this._headersCapability.promise;const{value:nt,done:Ae}=await this._reader.read();return Ae?{value:nt,done:Ae}:(this._loaded+=nt.byteLength,(ke=this.onProgress)==null||ke.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ge(nt),done:!1})}cancel(nt){var Ae;(Ae=this._reader)==null||Ae.cancel(nt),this._abortController.abort()}}class re{constructor(nt,Ae,ke){this._stream=nt,this._reader=null,this._loaded=0;const he=nt.source;this._withCredentials=he.withCredentials||!1,this._readCapability=new V.PromiseCapability,this._isStreamingSupported=!he.disableStream,this._abortController=new AbortController,this._headers=ne(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Ae}-${ke-1}`);const oe=he.url;fetch(oe,J(this._headers,this._withCredentials,this._abortController)).then(Oe=>{if(!(0,W.validateResponseStatus)(Oe.status))throw(0,W.createResponseStatusError)(Oe.status,oe);this._readCapability.resolve(),this._reader=Oe.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ke;await this._readCapability.promise;const{value:nt,done:Ae}=await this._reader.read();return Ae?{value:nt,done:Ae}:(this._loaded+=nt.byteLength,(ke=this.onProgress)==null||ke.call(this,{loaded:this._loaded}),{value:ge(nt),done:!1})}cancel(nt){var Ae;(Ae=this._reader)==null||Ae.cancel(nt),this._abortController.abort()}}},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.createResponseStatusError=ve,B.extractFilenameFromHeader=ge,B.validateRangeRequestCapabilities=ne,B.validateResponseStatus=Te;var V=K(1),W=K(21),J=K(6);function ne({getResponseHeader:re,isHttp:st,rangeChunkSize:nt,disableRange:Ae}){const ke={allowRangeRequests:!1,suggestedLength:void 0},he=parseInt(re("Content-Length"),10);return!Number.isInteger(he)||(ke.suggestedLength=he,he<=2*nt)||Ae||!st||re("Accept-Ranges")!=="bytes"||(re("Content-Encoding")||"identity")!=="identity"||(ke.allowRangeRequests=!0),ke}function ge(re){const st=re("Content-Disposition");if(st){let nt=(0,W.getFilenameFromContentDispositionHeader)(st);if(nt.includes("%"))try{nt=decodeURIComponent(nt)}catch{}if((0,J.isPdfFile)(nt))return nt}return null}function ve(re,st){return re===404||re===0&&st.startsWith("file:")?new V.MissingPDFException('Missing PDF "'+st+'".'):new V.UnexpectedResponseException(`Unexpected server response (${re}) while retrieving PDF "${st}".`,re)}function Te(re){return re===200||re===206}},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.getFilenameFromContentDispositionHeader=W;var V=K(1);function W(J){let ne=!0,ge=ve("filename\\*","i").exec(J);if(ge){ge=ge[1];let he=nt(ge);return he=unescape(he),he=Ae(he),he=ke(he),re(he)}if(ge=st(J),ge){const he=ke(ge);return re(he)}if(ge=ve("filename","i").exec(J),ge){ge=ge[1];let he=nt(ge);return he=ke(he),re(he)}function ve(he,oe){return new RegExp("(?:^|;)\\s*"+he+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',oe)}function Te(he,oe){if(he){if(!/^[\x00-\xFF]+$/.test(oe))return oe;try{const Oe=new TextDecoder(he,{fatal:!0}),it=(0,V.stringToBytes)(oe);oe=Oe.decode(it),ne=!1}catch{}}return oe}function re(he){return ne&&/[\x80-\xff]/.test(he)&&(he=Te("utf-8",he),ne&&(he=Te("iso-8859-1",he))),he}function st(he){const oe=[];let Oe;const it=ve("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Oe=it.exec(he))!==null;){let[,lt,be,Ie]=Oe;if(lt=parseInt(lt,10),lt in oe){if(lt===0)break;continue}oe[lt]=[be,Ie]}const at=[];for(let lt=0;lt<oe.length&&lt in oe;++lt){let[be,Ie]=oe[lt];Ie=nt(Ie),be&&(Ie=unescape(Ie),lt===0&&(Ie=Ae(Ie))),at.push(Ie)}return at.join("")}function nt(he){if(he.startsWith('"')){const oe=he.slice(1).split('\\"');for(let Oe=0;Oe<oe.length;++Oe){const it=oe[Oe].indexOf('"');it!==-1&&(oe[Oe]=oe[Oe].slice(0,it),oe.length=Oe+1),oe[Oe]=oe[Oe].replaceAll(/\\(.)/g,"$1")}he=oe.join('"')}return he}function Ae(he){const oe=he.indexOf("'");if(oe===-1)return he;const Oe=he.slice(0,oe),at=he.slice(oe+1).replace(/^[^']*'/,"");return Te(Oe,at)}function ke(he){return!he.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(he)?he:he.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(oe,Oe,it,at){if(it==="q"||it==="Q")return at=at.replaceAll("_"," "),at=at.replaceAll(/=([0-9a-fA-F]{2})/g,function(lt,be){return String.fromCharCode(parseInt(be,16))}),Te(Oe,at);try{at=atob(at)}catch{}return Te(Oe,at)})}return""}},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.PDFNetworkStream=void 0;var V=K(1),W=K(20);const J=200,ne=206;function ge(nt){const Ae=nt.response;return typeof Ae!="string"?Ae:(0,V.stringToBytes)(Ae).buffer}class ve{constructor(Ae,ke={}){this.url=Ae,this.isHttp=/^https?:/i.test(Ae),this.httpHeaders=this.isHttp&&ke.httpHeaders||Object.create(null),this.withCredentials=ke.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Ae,ke,he){const oe={begin:Ae,end:ke};for(const Oe in he)oe[Oe]=he[Oe];return this.request(oe)}requestFull(Ae){return this.request(Ae)}request(Ae){const ke=new XMLHttpRequest,he=this.currXhrId++,oe=this.pendingRequests[he]={xhr:ke};ke.open("GET",this.url),ke.withCredentials=this.withCredentials;for(const Oe in this.httpHeaders){const it=this.httpHeaders[Oe];it!==void 0&&ke.setRequestHeader(Oe,it)}return this.isHttp&&"begin"in Ae&&"end"in Ae?(ke.setRequestHeader("Range",`bytes=${Ae.begin}-${Ae.end-1}`),oe.expectedStatus=ne):oe.expectedStatus=J,ke.responseType="arraybuffer",Ae.onError&&(ke.onerror=function(Oe){Ae.onError(ke.status)}),ke.onreadystatechange=this.onStateChange.bind(this,he),ke.onprogress=this.onProgress.bind(this,he),oe.onHeadersReceived=Ae.onHeadersReceived,oe.onDone=Ae.onDone,oe.onError=Ae.onError,oe.onProgress=Ae.onProgress,ke.send(null),he}onProgress(Ae,ke){var oe;const he=this.pendingRequests[Ae];he&&((oe=he.onProgress)==null||oe.call(he,ke))}onStateChange(Ae,ke){var lt,be,Ie;const he=this.pendingRequests[Ae];if(!he)return;const oe=he.xhr;if(oe.readyState>=2&&he.onHeadersReceived&&(he.onHeadersReceived(),delete he.onHeadersReceived),oe.readyState!==4||!(Ae in this.pendingRequests))return;if(delete this.pendingRequests[Ae],oe.status===0&&this.isHttp){(lt=he.onError)==null||lt.call(he,oe.status);return}const Oe=oe.status||J;if(!(Oe===J&&he.expectedStatus===ne)&&Oe!==he.expectedStatus){(be=he.onError)==null||be.call(he,oe.status);return}const at=ge(oe);if(Oe===ne){const vt=oe.getResponseHeader("Content-Range"),dt=/bytes (\d+)-(\d+)\/(\d+)/.exec(vt);he.onDone({begin:parseInt(dt[1],10),chunk:at})}else at?he.onDone({begin:0,chunk:at}):(Ie=he.onError)==null||Ie.call(he,oe.status)}getRequestXhr(Ae){return this.pendingRequests[Ae].xhr}isPendingRequest(Ae){return Ae in this.pendingRequests}abortRequest(Ae){const ke=this.pendingRequests[Ae].xhr;delete this.pendingRequests[Ae],ke.abort()}}class Te{constructor(Ae){this._source=Ae,this._manager=new ve(Ae.url,{httpHeaders:Ae.httpHeaders,withCredentials:Ae.withCredentials}),this._rangeChunkSize=Ae.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Ae){const ke=this._rangeRequestReaders.indexOf(Ae);ke>=0&&this._rangeRequestReaders.splice(ke,1)}getFullReader(){return(0,V.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new re(this._manager,this._source),this._fullRequestReader}getRangeReader(Ae,ke){const he=new st(this._manager,Ae,ke);return he.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(he),he}cancelAllRequests(Ae){var ke;(ke=this._fullRequestReader)==null||ke.cancel(Ae);for(const he of this._rangeRequestReaders.slice(0))he.cancel(Ae)}}B.PDFNetworkStream=Te;class re{constructor(Ae,ke){this._manager=Ae;const he={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ke.url,this._fullRequestId=Ae.requestFull(he),this._headersReceivedCapability=new V.PromiseCapability,this._disableRange=ke.disableRange||!1,this._contentLength=ke.length,this._rangeChunkSize=ke.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Ae=this._fullRequestId,ke=this._manager.getRequestXhr(Ae),he=it=>ke.getResponseHeader(it),{allowRangeRequests:oe,suggestedLength:Oe}=(0,W.validateRangeRequestCapabilities)({getResponseHeader:he,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});oe&&(this._isRangeSupported=!0),this._contentLength=Oe||this._contentLength,this._filename=(0,W.extractFilenameFromHeader)(he),this._isRangeSupported&&this._manager.abortRequest(Ae),this._headersReceivedCapability.resolve()}_onDone(Ae){if(Ae&&(this._requests.length>0?this._requests.shift().resolve({value:Ae.chunk,done:!1}):this._cachedChunks.push(Ae.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ke of this._requests)ke.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Ae){this._storedError=(0,W.createResponseStatusError)(Ae,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ke of this._requests)ke.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Ae){var ke;(ke=this.onProgress)==null||ke.call(this,{loaded:Ae.loaded,total:Ae.lengthComputable?Ae.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Ae=new V.PromiseCapability;return this._requests.push(Ae),Ae.promise}cancel(Ae){this._done=!0,this._headersReceivedCapability.reject(Ae);for(const ke of this._requests)ke.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class st{constructor(Ae,ke,he){this._manager=Ae;const oe={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Ae.url,this._requestId=Ae.requestRange(ke,he,oe),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var Ae;(Ae=this.onClosed)==null||Ae.call(this,this)}_onDone(Ae){const ke=Ae.chunk;this._requests.length>0?this._requests.shift().resolve({value:ke,done:!1}):this._queuedChunk=ke,this._done=!0;for(const he of this._requests)he.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Ae){this._storedError=(0,W.createResponseStatusError)(Ae,this._url);for(const ke of this._requests)ke.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Ae){var ke;this.isStreamingSupported||(ke=this.onProgress)==null||ke.call(this,{loaded:Ae.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ke=this._queuedChunk;return this._queuedChunk=null,{value:ke,done:!1}}if(this._done)return{value:void 0,done:!0};const Ae=new V.PromiseCapability;return this._requests.push(Ae),Ae.promise}cancel(Ae){this._done=!0;for(const ke of this._requests)ke.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.PDFNodeStream=void 0;var V=K(1),W=K(20);const J=/^file:\/\/\/[a-zA-Z]:\//;function ne(he){const oe=require$$5,Oe=oe.parse(he);return Oe.protocol==="file:"||Oe.host?Oe:/^[a-z]:[/\\]/i.test(he)?oe.parse(`file:///${he}`):(Oe.host||(Oe.protocol="file:"),Oe)}class ge{constructor(oe){this.source=oe,this.url=ne(oe.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&oe.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var oe;return((oe=this._fullRequestReader)==null?void 0:oe._loaded)??0}getFullReader(){return(0,V.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ae(this):new st(this),this._fullRequestReader}getRangeReader(oe,Oe){if(Oe<=this._progressiveDataLength)return null;const it=this.isFsUrl?new ke(this,oe,Oe):new nt(this,oe,Oe);return this._rangeRequestReaders.push(it),it}cancelAllRequests(oe){var Oe;(Oe=this._fullRequestReader)==null||Oe.cancel(oe);for(const it of this._rangeRequestReaders.slice(0))it.cancel(oe)}}B.PDFNodeStream=ge;class ve{constructor(oe){this._url=oe.url,this._done=!1,this._storedError=null,this.onProgress=null;const Oe=oe.source;this._contentLength=Oe.length,this._loaded=0,this._filename=null,this._disableRange=Oe.disableRange||!1,this._rangeChunkSize=Oe.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Oe.disableStream,this._isRangeSupported=!Oe.disableRange,this._readableStream=null,this._readCapability=new V.PromiseCapability,this._headersCapability=new V.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var it;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const oe=this._readableStream.read();return oe===null?(this._readCapability=new V.PromiseCapability,this.read()):(this._loaded+=oe.length,(it=this.onProgress)==null||it.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(oe).buffer,done:!1})}cancel(oe){if(!this._readableStream){this._error(oe);return}this._readableStream.destroy(oe)}_error(oe){this._storedError=oe,this._readCapability.resolve()}_setReadableStream(oe){this._readableStream=oe,oe.on("readable",()=>{this._readCapability.resolve()}),oe.on("end",()=>{oe.destroy(),this._done=!0,this._readCapability.resolve()}),oe.on("error",Oe=>{this._error(Oe)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new V.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Te{constructor(oe){this._url=oe.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new V.PromiseCapability;const Oe=oe.source;this._isStreamingSupported=!Oe.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var it;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const oe=this._readableStream.read();return oe===null?(this._readCapability=new V.PromiseCapability,this.read()):(this._loaded+=oe.length,(it=this.onProgress)==null||it.call(this,{loaded:this._loaded}),{value:new Uint8Array(oe).buffer,done:!1})}cancel(oe){if(!this._readableStream){this._error(oe);return}this._readableStream.destroy(oe)}_error(oe){this._storedError=oe,this._readCapability.resolve()}_setReadableStream(oe){this._readableStream=oe,oe.on("readable",()=>{this._readCapability.resolve()}),oe.on("end",()=>{oe.destroy(),this._done=!0,this._readCapability.resolve()}),oe.on("error",Oe=>{this._error(Oe)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function re(he,oe){return{protocol:he.protocol,auth:he.auth,host:he.hostname,port:he.port,path:he.path,method:"GET",headers:oe}}class st extends ve{constructor(oe){super(oe);const Oe=it=>{if(it.statusCode===404){const Ie=new V.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Ie,this._headersCapability.reject(Ie);return}this._headersCapability.resolve(),this._setReadableStream(it);const at=Ie=>this._readableStream.headers[Ie.toLowerCase()],{allowRangeRequests:lt,suggestedLength:be}=(0,W.validateRangeRequestCapabilities)({getResponseHeader:at,isHttp:oe.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=lt,this._contentLength=be||this._contentLength,this._filename=(0,W.extractFilenameFromHeader)(at)};if(this._request=null,this._url.protocol==="http:"){const it=require$$5;this._request=it.request(re(this._url,oe.httpHeaders),Oe)}else{const it=require$$5;this._request=it.request(re(this._url,oe.httpHeaders),Oe)}this._request.on("error",it=>{this._storedError=it,this._headersCapability.reject(it)}),this._request.end()}}class nt extends Te{constructor(oe,Oe,it){super(oe),this._httpHeaders={};for(const lt in oe.httpHeaders){const be=oe.httpHeaders[lt];be!==void 0&&(this._httpHeaders[lt]=be)}this._httpHeaders.Range=`bytes=${Oe}-${it-1}`;const at=lt=>{if(lt.statusCode===404){const be=new V.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=be;return}this._setReadableStream(lt)};if(this._request=null,this._url.protocol==="http:"){const lt=require$$5;this._request=lt.request(re(this._url,this._httpHeaders),at)}else{const lt=require$$5;this._request=lt.request(re(this._url,this._httpHeaders),at)}this._request.on("error",lt=>{this._storedError=lt}),this._request.end()}}class Ae extends ve{constructor(oe){super(oe);let Oe=decodeURIComponent(this._url.path);J.test(this._url.href)&&(Oe=Oe.replace(/^\//,""));const it=require$$5;it.lstat(Oe,(at,lt)=>{if(at){at.code==="ENOENT"&&(at=new V.MissingPDFException(`Missing PDF "${Oe}".`)),this._storedError=at,this._headersCapability.reject(at);return}this._contentLength=lt.size,this._setReadableStream(it.createReadStream(Oe)),this._headersCapability.resolve()})}}class ke extends Te{constructor(oe,Oe,it){super(oe);let at=decodeURIComponent(this._url.path);J.test(this._url.href)&&(at=at.replace(/^\//,""));const lt=require$$5;this._setReadableStream(lt.createReadStream(at,{start:Oe,end:it-1}))}}},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.SVGGraphics=void 0;var V=K(6),W=K(1);const J={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ne="http://www.w3.org/XML/1998/namespace",ge="http://www.w3.org/1999/xlink",ve=["butt","round","square"],Te=["miter","round","bevel"],re=function(lt,be="",Ie=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Ie)return URL.createObjectURL(new Blob([lt],{type:be}));const vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let dt=`data:${be};base64,`;for(let Ce=0,ft=lt.length;Ce<ft;Ce+=3){const ct=lt[Ce]&255,Et=lt[Ce+1]&255,xt=lt[Ce+2]&255,ht=ct>>2,$t=(ct&3)<<4|Et>>4,Ot=Ce+1<ft?(Et&15)<<2|xt>>6:64,Vt=Ce+2<ft?xt&63:64;dt+=vt[ht]+vt[$t]+vt[Ot]+vt[Vt]}return dt},st=function(){const lt=new Uint8Array([137,80,78,71,13,10,26,10]),be=12,Ie=new Int32Array(256);for(let xt=0;xt<256;xt++){let ht=xt;for(let $t=0;$t<8;$t++)ht=ht&1?3988292384^ht>>1&2147483647:ht>>1&2147483647;Ie[xt]=ht}function vt(xt,ht,$t){let Ot=-1;for(let Vt=ht;Vt<$t;Vt++){const Pt=(Ot^xt[Vt])&255,Yt=Ie[Pt];Ot=Ot>>>8^Yt}return Ot^-1}function dt(xt,ht,$t,Ot){let Vt=Ot;const Pt=ht.length;$t[Vt]=Pt>>24&255,$t[Vt+1]=Pt>>16&255,$t[Vt+2]=Pt>>8&255,$t[Vt+3]=Pt&255,Vt+=4,$t[Vt]=xt.charCodeAt(0)&255,$t[Vt+1]=xt.charCodeAt(1)&255,$t[Vt+2]=xt.charCodeAt(2)&255,$t[Vt+3]=xt.charCodeAt(3)&255,Vt+=4,$t.set(ht,Vt),Vt+=ht.length;const Yt=vt($t,Ot+4,Vt);$t[Vt]=Yt>>24&255,$t[Vt+1]=Yt>>16&255,$t[Vt+2]=Yt>>8&255,$t[Vt+3]=Yt&255}function Ce(xt,ht,$t){let Ot=1,Vt=0;for(let Pt=ht;Pt<$t;++Pt)Ot=(Ot+(xt[Pt]&255))%65521,Vt=(Vt+Ot)%65521;return Vt<<16|Ot}function ft(xt){if(!W.isNodeJS)return ct(xt);try{const ht=parseInt(process.versions.node)>=8?xt:Buffer.from(xt),$t=require$$5.deflateSync(ht,{level:9});return $t instanceof Uint8Array?$t:new Uint8Array($t)}catch(ht){(0,W.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ht)}return ct(xt)}function ct(xt){let ht=xt.length;const $t=65535,Ot=Math.ceil(ht/$t),Vt=new Uint8Array(2+ht+Ot*5+4);let Pt=0;Vt[Pt++]=120,Vt[Pt++]=156;let Yt=0;for(;ht>$t;)Vt[Pt++]=0,Vt[Pt++]=255,Vt[Pt++]=255,Vt[Pt++]=0,Vt[Pt++]=0,Vt.set(xt.subarray(Yt,Yt+$t),Pt),Pt+=$t,Yt+=$t,ht-=$t;Vt[Pt++]=1,Vt[Pt++]=ht&255,Vt[Pt++]=ht>>8&255,Vt[Pt++]=~ht&65535&255,Vt[Pt++]=(~ht&65535)>>8&255,Vt.set(xt.subarray(Yt),Pt),Pt+=xt.length-Yt;const Jt=Ce(xt,0,xt.length);return Vt[Pt++]=Jt>>24&255,Vt[Pt++]=Jt>>16&255,Vt[Pt++]=Jt>>8&255,Vt[Pt++]=Jt&255,Vt}function Et(xt,ht,$t,Ot){const Vt=xt.width,Pt=xt.height;let Yt,Jt,sn;const ln=xt.data;switch(ht){case W.ImageKind.GRAYSCALE_1BPP:Jt=0,Yt=1,sn=Vt+7>>3;break;case W.ImageKind.RGB_24BPP:Jt=2,Yt=8,sn=Vt*3;break;case W.ImageKind.RGBA_32BPP:Jt=6,Yt=8,sn=Vt*4;break;default:throw new Error("invalid format")}const gt=new Uint8Array((1+sn)*Pt);let ce=0,Ee=0;for(let yt=0;yt<Pt;++yt)gt[ce++]=0,gt.set(ln.subarray(Ee,Ee+sn),ce),Ee+=sn,ce+=sn;if(ht===W.ImageKind.GRAYSCALE_1BPP&&Ot){ce=0;for(let yt=0;yt<Pt;yt++){ce++;for(let Nt=0;Nt<sn;Nt++)gt[ce++]^=255}}const pe=new Uint8Array([Vt>>24&255,Vt>>16&255,Vt>>8&255,Vt&255,Pt>>24&255,Pt>>16&255,Pt>>8&255,Pt&255,Yt,Jt,0,0,0]),rt=ft(gt),ot=lt.length+be*3+pe.length+rt.length,pt=new Uint8Array(ot);let bt=0;return pt.set(lt,bt),bt+=lt.length,dt("IHDR",pe,pt,bt),bt+=be+pe.length,dt("IDATA",rt,pt,bt),bt+=be+rt.length,dt("IEND",new Uint8Array(0),pt,bt),re(pt,"image/png",$t)}return function(ht,$t,Ot){const Vt=ht.kind===void 0?W.ImageKind.GRAYSCALE_1BPP:ht.kind;return Et(ht,Vt,$t,Ot)}}();class nt{constructor(){this.fontSizeScale=1,this.fontWeight=J.fontWeight,this.fontSize=0,this.textMatrix=W.IDENTITY_MATRIX,this.fontMatrix=W.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=W.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=J.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(be,Ie){this.x=be,this.y=Ie}}function Ae(lt){let be=[];const Ie=[];for(const vt of lt){if(vt.fn==="save"){be.push({fnId:92,fn:"group",items:[]}),Ie.push(be),be=be.at(-1).items;continue}vt.fn==="restore"?be=Ie.pop():be.push(vt)}return be}function ke(lt){if(Number.isInteger(lt))return lt.toString();const be=lt.toFixed(10);let Ie=be.length-1;if(be[Ie]!=="0")return be;do Ie--;while(be[Ie]==="0");return be.substring(0,be[Ie]==="."?Ie:Ie+1)}function he(lt){if(lt[4]===0&&lt[5]===0){if(lt[1]===0&&lt[2]===0)return lt[0]===1&&lt[3]===1?"":`scale(${ke(lt[0])} ${ke(lt[3])})`;if(lt[0]===lt[3]&&lt[1]===-lt[2]){const be=Math.acos(lt[0])*180/Math.PI;return`rotate(${ke(be)})`}}else if(lt[0]===1&&lt[1]===0&&lt[2]===0&&lt[3]===1)return`translate(${ke(lt[4])} ${ke(lt[5])})`;return`matrix(${ke(lt[0])} ${ke(lt[1])} ${ke(lt[2])} ${ke(lt[3])} ${ke(lt[4])} ${ke(lt[5])})`}let oe=0,Oe=0,it=0;class at{constructor(be,Ie,vt=!1){(0,V.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new V.DOMSVGFactory,this.current=new nt,this.transformMatrix=W.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=be,this.objs=Ie,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!vt,this._operatorIdMapping=[];for(const dt in W.OPS)this._operatorIdMapping[W.OPS[dt]]=dt}getObject(be,Ie=null){return typeof be=="string"?be.startsWith("g_")?this.commonObjs.get(be):this.objs.get(be):Ie}save(){this.transformStack.push(this.transformMatrix);const be=this.current;this.extraStack.push(be),this.current=be.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(be){this.save(),this.executeOpTree(be),this.restore()}loadDependencies(be){const Ie=be.fnArray,vt=be.argsArray;for(let dt=0,Ce=Ie.length;dt<Ce;dt++)if(Ie[dt]===W.OPS.dependency)for(const ft of vt[dt]){const ct=ft.startsWith("g_")?this.commonObjs:this.objs,Et=new Promise(xt=>{ct.get(ft,xt)});this.current.dependencies.push(Et)}return Promise.all(this.current.dependencies)}transform(be,Ie,vt,dt,Ce,ft){const ct=[be,Ie,vt,dt,Ce,ft];this.transformMatrix=W.Util.transform(this.transformMatrix,ct),this.tgrp=null}getSVG(be,Ie){this.viewport=Ie;const vt=this._initialize(Ie);return this.loadDependencies(be).then(()=>(this.transformMatrix=W.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(be)),vt))}convertOpList(be){const Ie=this._operatorIdMapping,vt=be.argsArray,dt=be.fnArray,Ce=[];for(let ft=0,ct=dt.length;ft<ct;ft++){const Et=dt[ft];Ce.push({fnId:Et,fn:Ie[Et],args:vt[ft]})}return Ae(Ce)}executeOpTree(be){for(const Ie of be){const vt=Ie.fn,dt=Ie.fnId,Ce=Ie.args;switch(dt|0){case W.OPS.beginText:this.beginText();break;case W.OPS.dependency:break;case W.OPS.setLeading:this.setLeading(Ce);break;case W.OPS.setLeadingMoveText:this.setLeadingMoveText(Ce[0],Ce[1]);break;case W.OPS.setFont:this.setFont(Ce);break;case W.OPS.showText:this.showText(Ce[0]);break;case W.OPS.showSpacedText:this.showText(Ce[0]);break;case W.OPS.endText:this.endText();break;case W.OPS.moveText:this.moveText(Ce[0],Ce[1]);break;case W.OPS.setCharSpacing:this.setCharSpacing(Ce[0]);break;case W.OPS.setWordSpacing:this.setWordSpacing(Ce[0]);break;case W.OPS.setHScale:this.setHScale(Ce[0]);break;case W.OPS.setTextMatrix:this.setTextMatrix(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]);break;case W.OPS.setTextRise:this.setTextRise(Ce[0]);break;case W.OPS.setTextRenderingMode:this.setTextRenderingMode(Ce[0]);break;case W.OPS.setLineWidth:this.setLineWidth(Ce[0]);break;case W.OPS.setLineJoin:this.setLineJoin(Ce[0]);break;case W.OPS.setLineCap:this.setLineCap(Ce[0]);break;case W.OPS.setMiterLimit:this.setMiterLimit(Ce[0]);break;case W.OPS.setFillRGBColor:this.setFillRGBColor(Ce[0],Ce[1],Ce[2]);break;case W.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Ce[0],Ce[1],Ce[2]);break;case W.OPS.setStrokeColorN:this.setStrokeColorN(Ce);break;case W.OPS.setFillColorN:this.setFillColorN(Ce);break;case W.OPS.shadingFill:this.shadingFill(Ce[0]);break;case W.OPS.setDash:this.setDash(Ce[0],Ce[1]);break;case W.OPS.setRenderingIntent:this.setRenderingIntent(Ce[0]);break;case W.OPS.setFlatness:this.setFlatness(Ce[0]);break;case W.OPS.setGState:this.setGState(Ce[0]);break;case W.OPS.fill:this.fill();break;case W.OPS.eoFill:this.eoFill();break;case W.OPS.stroke:this.stroke();break;case W.OPS.fillStroke:this.fillStroke();break;case W.OPS.eoFillStroke:this.eoFillStroke();break;case W.OPS.clip:this.clip("nonzero");break;case W.OPS.eoClip:this.clip("evenodd");break;case W.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case W.OPS.paintImageXObject:this.paintImageXObject(Ce[0]);break;case W.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Ce[0]);break;case W.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Ce[0]);break;case W.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Ce[0],Ce[1]);break;case W.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case W.OPS.closePath:this.closePath();break;case W.OPS.closeStroke:this.closeStroke();break;case W.OPS.closeFillStroke:this.closeFillStroke();break;case W.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case W.OPS.nextLine:this.nextLine();break;case W.OPS.transform:this.transform(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]);break;case W.OPS.constructPath:this.constructPath(Ce[0],Ce[1]);break;case W.OPS.endPath:this.endPath();break;case 92:this.group(Ie.items);break;default:(0,W.warn)(`Unimplemented operator ${vt}`);break}}}setWordSpacing(be){this.current.wordSpacing=be}setCharSpacing(be){this.current.charSpacing=be}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(be,Ie,vt,dt,Ce,ft){const ct=this.current;ct.textMatrix=ct.lineMatrix=[be,Ie,vt,dt,Ce,ft],ct.textMatrixScale=Math.hypot(be,Ie),ct.x=ct.lineX=0,ct.y=ct.lineY=0,ct.xcoords=[],ct.ycoords=[],ct.tspan=this.svgFactory.createElement("svg:tspan"),ct.tspan.setAttributeNS(null,"font-family",ct.fontFamily),ct.tspan.setAttributeNS(null,"font-size",`${ke(ct.fontSize)}px`),ct.tspan.setAttributeNS(null,"y",ke(-ct.y)),ct.txtElement=this.svgFactory.createElement("svg:text"),ct.txtElement.append(ct.tspan)}beginText(){const be=this.current;be.x=be.lineX=0,be.y=be.lineY=0,be.textMatrix=W.IDENTITY_MATRIX,be.lineMatrix=W.IDENTITY_MATRIX,be.textMatrixScale=1,be.tspan=this.svgFactory.createElement("svg:tspan"),be.txtElement=this.svgFactory.createElement("svg:text"),be.txtgrp=this.svgFactory.createElement("svg:g"),be.xcoords=[],be.ycoords=[]}moveText(be,Ie){const vt=this.current;vt.x=vt.lineX+=be,vt.y=vt.lineY+=Ie,vt.xcoords=[],vt.ycoords=[],vt.tspan=this.svgFactory.createElement("svg:tspan"),vt.tspan.setAttributeNS(null,"font-family",vt.fontFamily),vt.tspan.setAttributeNS(null,"font-size",`${ke(vt.fontSize)}px`),vt.tspan.setAttributeNS(null,"y",ke(-vt.y))}showText(be){const Ie=this.current,vt=Ie.font,dt=Ie.fontSize;if(dt===0)return;const Ce=Ie.fontSizeScale,ft=Ie.charSpacing,ct=Ie.wordSpacing,Et=Ie.fontDirection,xt=Ie.textHScale*Et,ht=vt.vertical,$t=ht?1:-1,Ot=vt.defaultVMetrics,Vt=dt*Ie.fontMatrix[0];let Pt=0;for(const sn of be){if(sn===null){Pt+=Et*ct;continue}else if(typeof sn=="number"){Pt+=$t*sn*dt/1e3;continue}const ln=(sn.isSpace?ct:0)+ft,gt=sn.fontChar;let ce,Ee,pe=sn.width;if(ht){let ot;const pt=sn.vmetric||Ot;ot=sn.vmetric?pt[1]:pe*.5,ot=-ot*Vt;const bt=pt[2]*Vt;pe=pt?-pt[0]:pe,ce=ot/Ce,Ee=(Pt+bt)/Ce}else ce=Pt/Ce,Ee=0;(sn.isInFont||vt.missingFile)&&(Ie.xcoords.push(Ie.x+ce),ht&&Ie.ycoords.push(-Ie.y+Ee),Ie.tspan.textContent+=gt);const rt=ht?pe*Vt-ln*Et:pe*Vt+ln*Et;Pt+=rt}Ie.tspan.setAttributeNS(null,"x",Ie.xcoords.map(ke).join(" ")),ht?Ie.tspan.setAttributeNS(null,"y",Ie.ycoords.map(ke).join(" ")):Ie.tspan.setAttributeNS(null,"y",ke(-Ie.y)),ht?Ie.y-=Pt:Ie.x+=Pt*xt,Ie.tspan.setAttributeNS(null,"font-family",Ie.fontFamily),Ie.tspan.setAttributeNS(null,"font-size",`${ke(Ie.fontSize)}px`),Ie.fontStyle!==J.fontStyle&&Ie.tspan.setAttributeNS(null,"font-style",Ie.fontStyle),Ie.fontWeight!==J.fontWeight&&Ie.tspan.setAttributeNS(null,"font-weight",Ie.fontWeight);const Yt=Ie.textRenderingMode&W.TextRenderingMode.FILL_STROKE_MASK;if(Yt===W.TextRenderingMode.FILL||Yt===W.TextRenderingMode.FILL_STROKE?(Ie.fillColor!==J.fillColor&&Ie.tspan.setAttributeNS(null,"fill",Ie.fillColor),Ie.fillAlpha<1&&Ie.tspan.setAttributeNS(null,"fill-opacity",Ie.fillAlpha)):Ie.textRenderingMode===W.TextRenderingMode.ADD_TO_PATH?Ie.tspan.setAttributeNS(null,"fill","transparent"):Ie.tspan.setAttributeNS(null,"fill","none"),Yt===W.TextRenderingMode.STROKE||Yt===W.TextRenderingMode.FILL_STROKE){const sn=1/(Ie.textMatrixScale||1);this._setStrokeAttributes(Ie.tspan,sn)}let Jt=Ie.textMatrix;Ie.textRise!==0&&(Jt=Jt.slice(),Jt[5]+=Ie.textRise),Ie.txtElement.setAttributeNS(null,"transform",`${he(Jt)} scale(${ke(xt)}, -1)`),Ie.txtElement.setAttributeNS(ne,"xml:space","preserve"),Ie.txtElement.append(Ie.tspan),Ie.txtgrp.append(Ie.txtElement),this._ensureTransformGroup().append(Ie.txtElement)}setLeadingMoveText(be,Ie){this.setLeading(-Ie),this.moveText(be,Ie)}addFontStyle(be){if(!be.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Ie=re(be.data,be.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${be.loadedName}"; src: url(${Ie}); }
`}setFont(be){const Ie=this.current,vt=this.commonObjs.get(be[0]);let dt=be[1];Ie.font=vt,this.embedFonts&&!vt.missingFile&&!this.embeddedFonts[vt.loadedName]&&(this.addFontStyle(vt),this.embeddedFonts[vt.loadedName]=vt),Ie.fontMatrix=vt.fontMatrix||W.FONT_IDENTITY_MATRIX;let Ce="normal";vt.black?Ce="900":vt.bold&&(Ce="bold");const ft=vt.italic?"italic":"normal";dt<0?(dt=-dt,Ie.fontDirection=-1):Ie.fontDirection=1,Ie.fontSize=dt,Ie.fontFamily=vt.loadedName,Ie.fontWeight=Ce,Ie.fontStyle=ft,Ie.tspan=this.svgFactory.createElement("svg:tspan"),Ie.tspan.setAttributeNS(null,"y",ke(-Ie.y)),Ie.xcoords=[],Ie.ycoords=[]}endText(){var Ie;const be=this.current;be.textRenderingMode&W.TextRenderingMode.ADD_TO_PATH_FLAG&&((Ie=be.txtElement)!=null&&Ie.hasChildNodes())&&(be.element=be.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(be){be>0&&(this.current.lineWidth=be)}setLineCap(be){this.current.lineCap=ve[be]}setLineJoin(be){this.current.lineJoin=Te[be]}setMiterLimit(be){this.current.miterLimit=be}setStrokeAlpha(be){this.current.strokeAlpha=be}setStrokeRGBColor(be,Ie,vt){this.current.strokeColor=W.Util.makeHexColor(be,Ie,vt)}setFillAlpha(be){this.current.fillAlpha=be}setFillRGBColor(be,Ie,vt){this.current.fillColor=W.Util.makeHexColor(be,Ie,vt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(be){this.current.strokeColor=this._makeColorN_Pattern(be)}setFillColorN(be){this.current.fillColor=this._makeColorN_Pattern(be)}shadingFill(be){const{width:Ie,height:vt}=this.viewport,dt=W.Util.inverseTransform(this.transformMatrix),[Ce,ft,ct,Et]=W.Util.getAxialAlignedBoundingBox([0,0,Ie,vt],dt),xt=this.svgFactory.createElement("svg:rect");xt.setAttributeNS(null,"x",Ce),xt.setAttributeNS(null,"y",ft),xt.setAttributeNS(null,"width",ct-Ce),xt.setAttributeNS(null,"height",Et-ft),xt.setAttributeNS(null,"fill",this._makeShadingPattern(be)),this.current.fillAlpha<1&&xt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(xt)}_makeColorN_Pattern(be){return be[0]==="TilingPattern"?this._makeTilingPattern(be):this._makeShadingPattern(be)}_makeTilingPattern(be){const Ie=be[1],vt=be[2],dt=be[3]||W.IDENTITY_MATRIX,[Ce,ft,ct,Et]=be[4],xt=be[5],ht=be[6],$t=be[7],Ot=`shading${it++}`,[Vt,Pt,Yt,Jt]=W.Util.normalizeRect([...W.Util.applyTransform([Ce,ft],dt),...W.Util.applyTransform([ct,Et],dt)]),[sn,ln]=W.Util.singularValueDecompose2dScale(dt),gt=xt*sn,ce=ht*ln,Ee=this.svgFactory.createElement("svg:pattern");Ee.setAttributeNS(null,"id",Ot),Ee.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ee.setAttributeNS(null,"width",gt),Ee.setAttributeNS(null,"height",ce),Ee.setAttributeNS(null,"x",`${Vt}`),Ee.setAttributeNS(null,"y",`${Pt}`);const pe=this.svg,rt=this.transformMatrix,ot=this.current.fillColor,pt=this.current.strokeColor,bt=this.svgFactory.create(Yt-Vt,Jt-Pt);if(this.svg=bt,this.transformMatrix=dt,$t===2){const yt=W.Util.makeHexColor(...Ie);this.current.fillColor=yt,this.current.strokeColor=yt}return this.executeOpTree(this.convertOpList(vt)),this.svg=pe,this.transformMatrix=rt,this.current.fillColor=ot,this.current.strokeColor=pt,Ee.append(bt.childNodes[0]),this.defs.append(Ee),`url(#${Ot})`}_makeShadingPattern(be){switch(typeof be=="string"&&(be=this.objs.get(be)),be[0]){case"RadialAxial":const Ie=`shading${it++}`,vt=be[3];let dt;switch(be[1]){case"axial":const Ce=be[4],ft=be[5];dt=this.svgFactory.createElement("svg:linearGradient"),dt.setAttributeNS(null,"id",Ie),dt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),dt.setAttributeNS(null,"x1",Ce[0]),dt.setAttributeNS(null,"y1",Ce[1]),dt.setAttributeNS(null,"x2",ft[0]),dt.setAttributeNS(null,"y2",ft[1]);break;case"radial":const ct=be[4],Et=be[5],xt=be[6],ht=be[7];dt=this.svgFactory.createElement("svg:radialGradient"),dt.setAttributeNS(null,"id",Ie),dt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),dt.setAttributeNS(null,"cx",Et[0]),dt.setAttributeNS(null,"cy",Et[1]),dt.setAttributeNS(null,"r",ht),dt.setAttributeNS(null,"fx",ct[0]),dt.setAttributeNS(null,"fy",ct[1]),dt.setAttributeNS(null,"fr",xt);break;default:throw new Error(`Unknown RadialAxial type: ${be[1]}`)}for(const Ce of vt){const ft=this.svgFactory.createElement("svg:stop");ft.setAttributeNS(null,"offset",Ce[0]),ft.setAttributeNS(null,"stop-color",Ce[1]),dt.append(ft)}return this.defs.append(dt),`url(#${Ie})`;case"Mesh":return(0,W.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${be[0]}`)}}setDash(be,Ie){this.current.dashArray=be,this.current.dashPhase=Ie}constructPath(be,Ie){const vt=this.current;let dt=vt.x,Ce=vt.y,ft=[],ct=0;for(const Et of be)switch(Et|0){case W.OPS.rectangle:dt=Ie[ct++],Ce=Ie[ct++];const xt=Ie[ct++],ht=Ie[ct++],$t=dt+xt,Ot=Ce+ht;ft.push("M",ke(dt),ke(Ce),"L",ke($t),ke(Ce),"L",ke($t),ke(Ot),"L",ke(dt),ke(Ot),"Z");break;case W.OPS.moveTo:dt=Ie[ct++],Ce=Ie[ct++],ft.push("M",ke(dt),ke(Ce));break;case W.OPS.lineTo:dt=Ie[ct++],Ce=Ie[ct++],ft.push("L",ke(dt),ke(Ce));break;case W.OPS.curveTo:dt=Ie[ct+4],Ce=Ie[ct+5],ft.push("C",ke(Ie[ct]),ke(Ie[ct+1]),ke(Ie[ct+2]),ke(Ie[ct+3]),ke(dt),ke(Ce)),ct+=6;break;case W.OPS.curveTo2:ft.push("C",ke(dt),ke(Ce),ke(Ie[ct]),ke(Ie[ct+1]),ke(Ie[ct+2]),ke(Ie[ct+3])),dt=Ie[ct+2],Ce=Ie[ct+3],ct+=4;break;case W.OPS.curveTo3:dt=Ie[ct+2],Ce=Ie[ct+3],ft.push("C",ke(Ie[ct]),ke(Ie[ct+1]),ke(dt),ke(Ce),ke(dt),ke(Ce)),ct+=4;break;case W.OPS.closePath:ft.push("Z");break}ft=ft.join(" "),vt.path&&be.length>0&&be[0]!==W.OPS.rectangle&&be[0]!==W.OPS.moveTo?ft=vt.path.getAttributeNS(null,"d")+ft:(vt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(vt.path)),vt.path.setAttributeNS(null,"d",ft),vt.path.setAttributeNS(null,"fill","none"),vt.element=vt.path,vt.setCurrentPoint(dt,Ce)}endPath(){const be=this.current;if(be.path=null,!this.pendingClip)return;if(!be.element){this.pendingClip=null;return}const Ie=`clippath${oe++}`,vt=this.svgFactory.createElement("svg:clipPath");vt.setAttributeNS(null,"id",Ie),vt.setAttributeNS(null,"transform",he(this.transformMatrix));const dt=be.element.cloneNode(!0);if(this.pendingClip==="evenodd"?dt.setAttributeNS(null,"clip-rule","evenodd"):dt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,vt.append(dt),this.defs.append(vt),be.activeClipUrl){be.clipGroup=null;for(const Ce of this.extraStack)Ce.clipGroup=null;vt.setAttributeNS(null,"clip-path",be.activeClipUrl)}be.activeClipUrl=`url(#${Ie})`,this.tgrp=null}clip(be){this.pendingClip=be}closePath(){const be=this.current;if(be.path){const Ie=`${be.path.getAttributeNS(null,"d")}Z`;be.path.setAttributeNS(null,"d",Ie)}}setLeading(be){this.current.leading=-be}setTextRise(be){this.current.textRise=be}setTextRenderingMode(be){this.current.textRenderingMode=be}setHScale(be){this.current.textHScale=be/100}setRenderingIntent(be){}setFlatness(be){}setGState(be){for(const[Ie,vt]of be)switch(Ie){case"LW":this.setLineWidth(vt);break;case"LC":this.setLineCap(vt);break;case"LJ":this.setLineJoin(vt);break;case"ML":this.setMiterLimit(vt);break;case"D":this.setDash(vt[0],vt[1]);break;case"RI":this.setRenderingIntent(vt);break;case"FL":this.setFlatness(vt);break;case"Font":this.setFont(vt);break;case"CA":this.setStrokeAlpha(vt);break;case"ca":this.setFillAlpha(vt);break;default:(0,W.warn)(`Unimplemented graphic state operator ${Ie}`);break}}fill(){const be=this.current;be.element&&(be.element.setAttributeNS(null,"fill",be.fillColor),be.element.setAttributeNS(null,"fill-opacity",be.fillAlpha),this.endPath())}stroke(){const be=this.current;be.element&&(this._setStrokeAttributes(be.element),be.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(be,Ie=1){const vt=this.current;let dt=vt.dashArray;Ie!==1&&dt.length>0&&(dt=dt.map(function(Ce){return Ie*Ce})),be.setAttributeNS(null,"stroke",vt.strokeColor),be.setAttributeNS(null,"stroke-opacity",vt.strokeAlpha),be.setAttributeNS(null,"stroke-miterlimit",ke(vt.miterLimit)),be.setAttributeNS(null,"stroke-linecap",vt.lineCap),be.setAttributeNS(null,"stroke-linejoin",vt.lineJoin),be.setAttributeNS(null,"stroke-width",ke(Ie*vt.lineWidth)+"px"),be.setAttributeNS(null,"stroke-dasharray",dt.map(ke).join(" ")),be.setAttributeNS(null,"stroke-dashoffset",ke(Ie*vt.dashPhase)+"px")}eoFill(){var be;(be=this.current.element)==null||be.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var be;(be=this.current.element)==null||be.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const be=this.svgFactory.createElement("svg:rect");be.setAttributeNS(null,"x","0"),be.setAttributeNS(null,"y","0"),be.setAttributeNS(null,"width","1px"),be.setAttributeNS(null,"height","1px"),be.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(be)}paintImageXObject(be){const Ie=this.getObject(be);if(!Ie){(0,W.warn)(`Dependent image with object ID ${be} is not ready yet`);return}this.paintInlineImageXObject(Ie)}paintInlineImageXObject(be,Ie){const vt=be.width,dt=be.height,Ce=st(be,this.forceDataSchema,!!Ie),ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x","0"),ft.setAttributeNS(null,"y","0"),ft.setAttributeNS(null,"width",ke(vt)),ft.setAttributeNS(null,"height",ke(dt)),this.current.element=ft,this.clip("nonzero");const ct=this.svgFactory.createElement("svg:image");ct.setAttributeNS(ge,"xlink:href",Ce),ct.setAttributeNS(null,"x","0"),ct.setAttributeNS(null,"y",ke(-dt)),ct.setAttributeNS(null,"width",ke(vt)+"px"),ct.setAttributeNS(null,"height",ke(dt)+"px"),ct.setAttributeNS(null,"transform",`scale(${ke(1/vt)} ${ke(-1/dt)})`),Ie?Ie.append(ct):this._ensureTransformGroup().append(ct)}paintImageMaskXObject(be){const Ie=this.getObject(be.data,be);if(Ie.bitmap){(0,W.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const vt=this.current,dt=Ie.width,Ce=Ie.height,ft=vt.fillColor;vt.maskId=`mask${Oe++}`;const ct=this.svgFactory.createElement("svg:mask");ct.setAttributeNS(null,"id",vt.maskId);const Et=this.svgFactory.createElement("svg:rect");Et.setAttributeNS(null,"x","0"),Et.setAttributeNS(null,"y","0"),Et.setAttributeNS(null,"width",ke(dt)),Et.setAttributeNS(null,"height",ke(Ce)),Et.setAttributeNS(null,"fill",ft),Et.setAttributeNS(null,"mask",`url(#${vt.maskId})`),this.defs.append(ct),this._ensureTransformGroup().append(Et),this.paintInlineImageXObject(Ie,ct)}paintFormXObjectBegin(be,Ie){if(Array.isArray(be)&&be.length===6&&this.transform(be[0],be[1],be[2],be[3],be[4],be[5]),Ie){const vt=Ie[2]-Ie[0],dt=Ie[3]-Ie[1],Ce=this.svgFactory.createElement("svg:rect");Ce.setAttributeNS(null,"x",Ie[0]),Ce.setAttributeNS(null,"y",Ie[1]),Ce.setAttributeNS(null,"width",ke(vt)),Ce.setAttributeNS(null,"height",ke(dt)),this.current.element=Ce,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(be){const Ie=this.svgFactory.create(be.width,be.height),vt=this.svgFactory.createElement("svg:defs");Ie.append(vt),this.defs=vt;const dt=this.svgFactory.createElement("svg:g");return dt.setAttributeNS(null,"transform",he(be.transform)),Ie.append(dt),this.svg=dt,Ie}_ensureClipGroup(){if(!this.current.clipGroup){const be=this.svgFactory.createElement("svg:g");be.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(be),this.current.clipGroup=be}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",he(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}B.SVGGraphics=at},(A,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.XfaText=void 0;class K{static textContent(W){const J=[],ne={items:J,styles:Object.create(null)};function ge(ve){var st;if(!ve)return;let Te=null;const re=ve.name;if(re==="#text")Te=ve.value;else if(K.shouldBuildText(re))(st=ve==null?void 0:ve.attributes)!=null&&st.textContent?Te=ve.attributes.textContent:ve.value&&(Te=ve.value);else return;if(Te!==null&&J.push({str:Te}),!!ve.children)for(const nt of ve.children)ge(nt)}return ge(W),ne}static shouldBuildText(W){return!(W==="textarea"||W==="input"||W==="option"||W==="select")}}B.XfaText=K},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.TextLayerRenderTask=void 0,B.renderTextLayer=he,B.updateTextLayer=oe;var V=K(1),W=K(6);const J=1e5,ne=30,ge=.8,ve=new Map;function Te(Oe,it){let at;if(it&&V.FeatureTest.isOffscreenCanvasSupported)at=new OffscreenCanvas(Oe,Oe).getContext("2d",{alpha:!1});else{const lt=document.createElement("canvas");lt.width=lt.height=Oe,at=lt.getContext("2d",{alpha:!1})}return at}function re(Oe,it){const at=ve.get(Oe);if(at)return at;const lt=Te(ne,it);lt.font=`${ne}px ${Oe}`;const be=lt.measureText("");let Ie=be.fontBoundingBoxAscent,vt=Math.abs(be.fontBoundingBoxDescent);if(Ie){const Ce=Ie/(Ie+vt);return ve.set(Oe,Ce),lt.canvas.width=lt.canvas.height=0,Ce}lt.strokeStyle="red",lt.clearRect(0,0,ne,ne),lt.strokeText("g",0,0);let dt=lt.getImageData(0,0,ne,ne).data;vt=0;for(let Ce=dt.length-1-3;Ce>=0;Ce-=4)if(dt[Ce]>0){vt=Math.ceil(Ce/4/ne);break}lt.clearRect(0,0,ne,ne),lt.strokeText("A",0,ne),dt=lt.getImageData(0,0,ne,ne).data,Ie=0;for(let Ce=0,ft=dt.length;Ce<ft;Ce+=4)if(dt[Ce]>0){Ie=ne-Math.floor(Ce/4/ne);break}if(lt.canvas.width=lt.canvas.height=0,Ie){const Ce=Ie/(Ie+vt);return ve.set(Oe,Ce),Ce}return ve.set(Oe,ge),ge}function st(Oe,it,at){const lt=document.createElement("span"),be={angle:0,canvasWidth:0,hasText:it.str!=="",hasEOL:it.hasEOL,fontSize:0};Oe._textDivs.push(lt);const Ie=V.Util.transform(Oe._transform,it.transform);let vt=Math.atan2(Ie[1],Ie[0]);const dt=at[it.fontName];dt.vertical&&(vt+=Math.PI/2);const Ce=Math.hypot(Ie[2],Ie[3]),ft=Ce*re(dt.fontFamily,Oe._isOffscreenCanvasSupported);let ct,Et;vt===0?(ct=Ie[4],Et=Ie[5]-ft):(ct=Ie[4]+ft*Math.sin(vt),Et=Ie[5]-ft*Math.cos(vt));const xt="calc(var(--scale-factor)*",ht=lt.style;Oe._container===Oe._rootContainer?(ht.left=`${(100*ct/Oe._pageWidth).toFixed(2)}%`,ht.top=`${(100*Et/Oe._pageHeight).toFixed(2)}%`):(ht.left=`${xt}${ct.toFixed(2)}px)`,ht.top=`${xt}${Et.toFixed(2)}px)`),ht.fontSize=`${xt}${Ce.toFixed(2)}px)`,ht.fontFamily=dt.fontFamily,be.fontSize=Ce,lt.setAttribute("role","presentation"),lt.textContent=it.str,lt.dir=it.dir,Oe._fontInspectorEnabled&&(lt.dataset.fontName=it.fontName),vt!==0&&(be.angle=vt*(180/Math.PI));let $t=!1;if(it.str.length>1)$t=!0;else if(it.str!==" "&&it.transform[0]!==it.transform[3]){const Ot=Math.abs(it.transform[0]),Vt=Math.abs(it.transform[3]);Ot!==Vt&&Math.max(Ot,Vt)/Math.min(Ot,Vt)>1.5&&($t=!0)}$t&&(be.canvasWidth=dt.vertical?it.height:it.width),Oe._textDivProperties.set(lt,be),Oe._isReadableStream&&Oe._layoutText(lt)}function nt(Oe){const{div:it,scale:at,properties:lt,ctx:be,prevFontSize:Ie,prevFontFamily:vt}=Oe,{style:dt}=it;let Ce="";if(lt.canvasWidth!==0&&lt.hasText){const{fontFamily:ft}=dt,{canvasWidth:ct,fontSize:Et}=lt;(Ie!==Et||vt!==ft)&&(be.font=`${Et*at}px ${ft}`,Oe.prevFontSize=Et,Oe.prevFontFamily=ft);const{width:xt}=be.measureText(it.textContent);xt>0&&(Ce=`scaleX(${ct*at/xt})`)}lt.angle!==0&&(Ce=`rotate(${lt.angle}deg) ${Ce}`),Ce.length>0&&(dt.transform=Ce)}function Ae(Oe){if(Oe._canceled)return;const it=Oe._textDivs,at=Oe._capability;if(it.length>J){at.resolve();return}if(!Oe._isReadableStream)for(const be of it)Oe._layoutText(be);at.resolve()}class ke{constructor({textContentSource:it,container:at,viewport:lt,textDivs:be,textDivProperties:Ie,textContentItemsStr:vt,isOffscreenCanvasSupported:dt}){var xt;this._textContentSource=it,this._isReadableStream=it instanceof ReadableStream,this._container=this._rootContainer=at,this._textDivs=be||[],this._textContentItemsStr=vt||[],this._isOffscreenCanvasSupported=dt,this._fontInspectorEnabled=!!((xt=globalThis.FontInspector)!=null&&xt.enabled),this._reader=null,this._textDivProperties=Ie||new WeakMap,this._canceled=!1,this._capability=new V.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:lt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Te(0,dt)};const{pageWidth:Ce,pageHeight:ft,pageX:ct,pageY:Et}=lt.rawDims;this._transform=[1,0,0,-1,-ct,Et+ft],this._pageWidth=Ce,this._pageHeight=ft,(0,W.setLayerDimensions)(at,lt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new V.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new V.AbortException("TextLayer task cancelled."))}_processItems(it,at){for(const lt of it){if(lt.str===void 0){if(lt.type==="beginMarkedContentProps"||lt.type==="beginMarkedContent"){const be=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),lt.id!==null&&this._container.setAttribute("id",`${lt.id}`),be.append(this._container)}else lt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(lt.str),st(this,lt,at)}}_layoutText(it){const at=this._layoutTextParams.properties=this._textDivProperties.get(it);if(this._layoutTextParams.div=it,nt(this._layoutTextParams),at.hasText&&this._container.append(it),at.hasEOL){const lt=document.createElement("br");lt.setAttribute("role","presentation"),this._container.append(lt)}}_render(){const it=new V.PromiseCapability;let at=Object.create(null);if(this._isReadableStream){const lt=()=>{this._reader.read().then(({value:be,done:Ie})=>{if(Ie){it.resolve();return}Object.assign(at,be.styles),this._processItems(be.items,at),lt()},it.reject)};this._reader=this._textContentSource.getReader(),lt()}else if(this._textContentSource){const{items:lt,styles:be}=this._textContentSource;this._processItems(lt,be),it.resolve()}else throw new Error('No "textContentSource" parameter specified.');it.promise.then(()=>{at=null,Ae(this)},this._capability.reject)}}B.TextLayerRenderTask=ke;function he(Oe){!Oe.textContentSource&&(Oe.textContent||Oe.textContentStream)&&((0,W.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Oe.textContentSource=Oe.textContent||Oe.textContentStream);const{container:it,viewport:at}=Oe,lt=getComputedStyle(it),be=lt.getPropertyValue("visibility"),Ie=parseFloat(lt.getPropertyValue("--scale-factor"));be==="visible"&&(!Ie||Math.abs(Ie-at.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const vt=new ke(Oe);return vt._render(),vt}function oe({container:Oe,viewport:it,textDivs:at,textDivProperties:lt,isOffscreenCanvasSupported:be,mustRotate:Ie=!0,mustRescale:vt=!0}){if(Ie&&(0,W.setLayerDimensions)(Oe,{rotation:it.rotation}),vt){const dt=Te(0,be),ft={prevFontSize:null,prevFontFamily:null,div:null,scale:it.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:dt};for(const ct of at)ft.properties=lt.get(ct),ft.div=ct,nt(ft)}}},(A,B,K)=>{var re,st,nt,Ae,ke,he,oe,Oe,it,at,lt,ka,Ie,Ui,dt,Ma,ft,Ta;Object.defineProperty(B,"__esModule",{value:!0}),B.AnnotationEditorLayer=void 0;var V=K(1),W=K(4),J=K(28),ne=K(33),ge=K(6),ve=K(34);const Et=class{constructor({uiManager:ht,pageIndex:$t,div:Ot,accessibilityManager:Vt,annotationLayer:Pt,viewport:Yt,l10n:Jt}){Ct(this,lt);Ct(this,Ie);Ct(this,dt);Ct(this,ft);Ct(this,re,void 0);Ct(this,st,!1);Ct(this,nt,null);Ct(this,Ae,this.pointerup.bind(this));Ct(this,ke,this.pointerdown.bind(this));Ct(this,he,new Map);Ct(this,oe,!1);Ct(this,Oe,!1);Ct(this,it,!1);Ct(this,at,void 0);const sn=[J.FreeTextEditor,ne.InkEditor,ve.StampEditor];if(!Et._initialized){Et._initialized=!0;for(const ln of sn)ln.initialize(Jt)}ht.registerEditorTypes(sn),Zt(this,at,ht),this.pageIndex=$t,this.div=Ot,Zt(this,re,Vt),Zt(this,nt,Pt),this.viewport=Yt,ie(this,at).addLayer(this)}get isEmpty(){return ie(this,he).size===0}updateToolbar(ht){ie(this,at).updateToolbar(ht)}updateMode(ht=ie(this,at).getMode()){Dt(this,ft,Ta).call(this),ht===V.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ht!==V.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",ht===V.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ht===V.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",ht===V.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(ht){if(!ht&&ie(this,at).getMode()!==V.AnnotationEditorType.INK)return;if(!ht){for(const Ot of ie(this,he).values())if(Ot.isEmpty()){Ot.setInBackground();return}}Dt(this,Ie,Ui).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(ht){ie(this,at).setEditingState(ht)}addCommands(ht){ie(this,at).addCommands(ht)}enable(){this.div.style.pointerEvents="auto";const ht=new Set;for(const Ot of ie(this,he).values())Ot.enableEditing(),Ot.annotationElementId&&ht.add(Ot.annotationElementId);if(!ie(this,nt))return;const $t=ie(this,nt).getEditableAnnotations();for(const Ot of $t){if(Ot.hide(),ie(this,at).isDeletedAnnotationElement(Ot.data.id)||ht.has(Ot.data.id))continue;const Vt=this.deserialize(Ot);Vt&&(this.addOrRebuild(Vt),Vt.enableEditing())}}disable(){var $t;Zt(this,it,!0),this.div.style.pointerEvents="none";const ht=new Set;for(const Ot of ie(this,he).values()){if(Ot.disableEditing(),!Ot.annotationElementId||Ot.serialize()!==null){ht.add(Ot.annotationElementId);continue}($t=this.getEditableAnnotation(Ot.annotationElementId))==null||$t.show(),Ot.remove()}if(ie(this,nt)){const Ot=ie(this,nt).getEditableAnnotations();for(const Vt of Ot){const{id:Pt}=Vt.data;ht.has(Pt)||ie(this,at).isDeletedAnnotationElement(Pt)||Vt.show()}}Dt(this,ft,Ta).call(this),this.isEmpty&&(this.div.hidden=!0),Zt(this,it,!1)}getEditableAnnotation(ht){var $t;return(($t=ie(this,nt))==null?void 0:$t.getEditableAnnotation(ht))||null}setActiveEditor(ht){ie(this,at).getActive()!==ht&&ie(this,at).setActiveEditor(ht)}enableClick(){this.div.addEventListener("pointerdown",ie(this,ke)),this.div.addEventListener("pointerup",ie(this,Ae))}disableClick(){this.div.removeEventListener("pointerdown",ie(this,ke)),this.div.removeEventListener("pointerup",ie(this,Ae))}attach(ht){ie(this,he).set(ht.id,ht);const{annotationElementId:$t}=ht;$t&&ie(this,at).isDeletedAnnotationElement($t)&&ie(this,at).removeDeletedAnnotationElement(ht)}detach(ht){var $t;ie(this,he).delete(ht.id),($t=ie(this,re))==null||$t.removePointerInTextLayer(ht.contentDiv),!ie(this,it)&&ht.annotationElementId&&ie(this,at).addDeletedAnnotationElement(ht)}remove(ht){this.detach(ht),ie(this,at).removeEditor(ht),ht.div.contains(document.activeElement)&&setTimeout(()=>{ie(this,at).focusMainContainer()},0),ht.div.remove(),ht.isAttachedToDOM=!1,ie(this,Oe)||this.addInkEditorIfNeeded(!1)}changeParent(ht){var $t;ht.parent!==this&&(ht.annotationElementId&&(ie(this,at).addDeletedAnnotationElement(ht.annotationElementId),W.AnnotationEditor.deleteAnnotationElement(ht),ht.annotationElementId=null),this.attach(ht),($t=ht.parent)==null||$t.detach(ht),ht.setParent(this),ht.div&&ht.isAttachedToDOM&&(ht.div.remove(),this.div.append(ht.div)))}add(ht){if(this.changeParent(ht),ie(this,at).addEditor(ht),this.attach(ht),!ht.isAttachedToDOM){const $t=ht.render();this.div.append($t),ht.isAttachedToDOM=!0}ht.fixAndSetPosition(),ht.onceAdded(),ie(this,at).addToAnnotationStorage(ht)}moveEditorInDOM(ht){var Ot;if(!ht.isAttachedToDOM)return;const{activeElement:$t}=document;ht.div.contains($t)&&(ht._focusEventsAllowed=!1,setTimeout(()=>{ht.div.contains(document.activeElement)?ht._focusEventsAllowed=!0:(ht.div.addEventListener("focusin",()=>{ht._focusEventsAllowed=!0},{once:!0}),$t.focus())},0)),ht._structTreeParentId=(Ot=ie(this,re))==null?void 0:Ot.moveElementInDOM(this.div,ht.div,ht.contentDiv,!0)}addOrRebuild(ht){ht.needsToBeRebuilt()?ht.rebuild():this.add(ht)}addUndoableEditor(ht){const $t=()=>ht._uiManager.rebuild(ht),Ot=()=>{ht.remove()};this.addCommands({cmd:$t,undo:Ot,mustExec:!1})}getNextId(){return ie(this,at).getId()}pasteEditor(ht,$t){ie(this,at).updateToolbar(ht),ie(this,at).updateMode(ht);const{offsetX:Ot,offsetY:Vt}=Dt(this,dt,Ma).call(this),Pt=this.getNextId(),Yt=Dt(this,lt,ka).call(this,{parent:this,id:Pt,x:Ot,y:Vt,uiManager:ie(this,at),isCentered:!0,...$t});Yt&&this.add(Yt)}deserialize(ht){switch(ht.annotationType??ht.annotationEditorType){case V.AnnotationEditorType.FREETEXT:return J.FreeTextEditor.deserialize(ht,this,ie(this,at));case V.AnnotationEditorType.INK:return ne.InkEditor.deserialize(ht,this,ie(this,at));case V.AnnotationEditorType.STAMP:return ve.StampEditor.deserialize(ht,this,ie(this,at))}return null}addNewEditor(){Dt(this,Ie,Ui).call(this,Dt(this,dt,Ma).call(this),!0)}setSelected(ht){ie(this,at).setSelected(ht)}toggleSelected(ht){ie(this,at).toggleSelected(ht)}isSelected(ht){return ie(this,at).isSelected(ht)}unselect(ht){ie(this,at).unselect(ht)}pointerup(ht){const{isMac:$t}=V.FeatureTest.platform;if(!(ht.button!==0||ht.ctrlKey&&$t)&&ht.target===this.div&&ie(this,oe)){if(Zt(this,oe,!1),!ie(this,st)){Zt(this,st,!0);return}if(ie(this,at).getMode()===V.AnnotationEditorType.STAMP){ie(this,at).unselectAll();return}Dt(this,Ie,Ui).call(this,ht,!1)}}pointerdown(ht){if(ie(this,oe)){Zt(this,oe,!1);return}const{isMac:$t}=V.FeatureTest.platform;if(ht.button!==0||ht.ctrlKey&&$t||ht.target!==this.div)return;Zt(this,oe,!0);const Ot=ie(this,at).getActive();Zt(this,st,!Ot||Ot.isEmpty())}findNewParent(ht,$t,Ot){const Vt=ie(this,at).findParent($t,Ot);return Vt===null||Vt===this?!1:(Vt.changeParent(ht),!0)}destroy(){var ht,$t;((ht=ie(this,at).getActive())==null?void 0:ht.parent)===this&&(ie(this,at).commitOrRemove(),ie(this,at).setActiveEditor(null));for(const Ot of ie(this,he).values())($t=ie(this,re))==null||$t.removePointerInTextLayer(Ot.contentDiv),Ot.setParent(null),Ot.isAttachedToDOM=!1,Ot.div.remove();this.div=null,ie(this,he).clear(),ie(this,at).removeLayer(this)}render({viewport:ht}){this.viewport=ht,(0,ge.setLayerDimensions)(this.div,ht);for(const $t of ie(this,at).getEditors(this.pageIndex))this.add($t);this.updateMode()}update({viewport:ht}){ie(this,at).commitOrRemove(),this.viewport=ht,(0,ge.setLayerDimensions)(this.div,{rotation:ht.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:ht,pageHeight:$t}=this.viewport.rawDims;return[ht,$t]}};let Te=Et;re=new WeakMap,st=new WeakMap,nt=new WeakMap,Ae=new WeakMap,ke=new WeakMap,he=new WeakMap,oe=new WeakMap,Oe=new WeakMap,it=new WeakMap,at=new WeakMap,lt=new WeakSet,ka=function(ht){switch(ie(this,at).getMode()){case V.AnnotationEditorType.FREETEXT:return new J.FreeTextEditor(ht);case V.AnnotationEditorType.INK:return new ne.InkEditor(ht);case V.AnnotationEditorType.STAMP:return new ve.StampEditor(ht)}return null},Ie=new WeakSet,Ui=function(ht,$t){const Ot=this.getNextId(),Vt=Dt(this,lt,ka).call(this,{parent:this,id:Ot,x:ht.offsetX,y:ht.offsetY,uiManager:ie(this,at),isCentered:$t});return Vt&&this.add(Vt),Vt},dt=new WeakSet,Ma=function(){const{x:ht,y:$t,width:Ot,height:Vt}=this.div.getBoundingClientRect(),Pt=Math.max(0,ht),Yt=Math.max(0,$t),Jt=Math.min(window.innerWidth,ht+Ot),sn=Math.min(window.innerHeight,$t+Vt),ln=(Pt+Jt)/2-ht,gt=(Yt+sn)/2-$t,[ce,Ee]=this.viewport.rotation%180===0?[ln,gt]:[gt,ln];return{offsetX:ce,offsetY:Ee}},ft=new WeakSet,Ta=function(){Zt(this,Oe,!0);for(const ht of ie(this,he).values())ht.isEmpty()&&ht.remove();Zt(this,Oe,!1)},Mr(Te,"_initialized",!1),B.AnnotationEditorLayer=Te},(A,B,K)=>{var ve,Te,re,st,nt,Ae,ke,he,oe,Oe,So,at,wo,be,Ao,vt,ki,Ce,Ra,ct,$o,xt,Fa;Object.defineProperty(B,"__esModule",{value:!0}),B.FreeTextEditor=void 0;var V=K(1),W=K(5),J=K(4),ne=K(29);const $t=class extends J.AnnotationEditor{constructor(Pt){super({...Pt,name:"freeTextEditor"});Ct(this,Oe);Ct(this,at);Ct(this,be);Ct(this,vt);Ct(this,Ce);Ct(this,ct);Ct(this,xt);Ct(this,ve,this.editorDivBlur.bind(this));Ct(this,Te,this.editorDivFocus.bind(this));Ct(this,re,this.editorDivInput.bind(this));Ct(this,st,this.editorDivKeydown.bind(this));Ct(this,nt,void 0);Ct(this,Ae,"");Ct(this,ke,`${this.id}-editor`);Ct(this,he,void 0);Ct(this,oe,null);Zt(this,nt,Pt.color||$t._defaultColor||J.AnnotationEditor._defaultLineColor),Zt(this,he,Pt.fontSize||$t._defaultFontSize)}static get _keyboardManager(){const Pt=$t.prototype,Yt=ln=>ln.isEmpty(),Jt=W.AnnotationEditorUIManager.TRANSLATE_SMALL,sn=W.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,V.shadow)(this,"_keyboardManager",new W.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Pt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Pt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Pt._translateEmpty,{args:[-Jt,0],checker:Yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Pt._translateEmpty,{args:[-sn,0],checker:Yt}],[["ArrowRight","mac+ArrowRight"],Pt._translateEmpty,{args:[Jt,0],checker:Yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Pt._translateEmpty,{args:[sn,0],checker:Yt}],[["ArrowUp","mac+ArrowUp"],Pt._translateEmpty,{args:[0,-Jt],checker:Yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Pt._translateEmpty,{args:[0,-sn],checker:Yt}],[["ArrowDown","mac+ArrowDown"],Pt._translateEmpty,{args:[0,Jt],checker:Yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Pt._translateEmpty,{args:[0,sn],checker:Yt}]]))}static initialize(Pt){J.AnnotationEditor.initialize(Pt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Pt,Yt){switch(Pt){case V.AnnotationEditorParamsType.FREETEXT_SIZE:$t._defaultFontSize=Yt;break;case V.AnnotationEditorParamsType.FREETEXT_COLOR:$t._defaultColor=Yt;break}}updateParams(Pt,Yt){switch(Pt){case V.AnnotationEditorParamsType.FREETEXT_SIZE:Dt(this,Oe,So).call(this,Yt);break;case V.AnnotationEditorParamsType.FREETEXT_COLOR:Dt(this,at,wo).call(this,Yt);break}}static get defaultPropertiesToUpdate(){return[[V.AnnotationEditorParamsType.FREETEXT_SIZE,$t._defaultFontSize],[V.AnnotationEditorParamsType.FREETEXT_COLOR,$t._defaultColor||J.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[V.AnnotationEditorParamsType.FREETEXT_SIZE,ie(this,he)],[V.AnnotationEditorParamsType.FREETEXT_COLOR,ie(this,nt)]]}_translateEmpty(Pt,Yt){this._uiManager.translateSelectedEditors(Pt,Yt,!0)}getInitialTranslation(){const Pt=this.parentScale;return[-$t._internalPadding*Pt,-($t._internalPadding+ie(this,he))*Pt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(V.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",ie(this,st)),this.editorDiv.addEventListener("focus",ie(this,Te)),this.editorDiv.addEventListener("blur",ie(this,ve)),this.editorDiv.addEventListener("input",ie(this,re)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",ie(this,ke)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",ie(this,st)),this.editorDiv.removeEventListener("focus",ie(this,Te)),this.editorDiv.removeEventListener("blur",ie(this,ve)),this.editorDiv.removeEventListener("input",ie(this,re)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Pt){this._focusEventsAllowed&&(super.focusin(Pt),Pt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Pt;if(this.width){Dt(this,xt,Fa).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Pt=this._initialOptions)!=null&&Pt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Pt=ie(this,Ae),Yt=Zt(this,Ae,Dt(this,be,Ao).call(this).trimEnd());if(Pt===Yt)return;const Jt=sn=>{if(Zt(this,Ae,sn),!sn){this.remove();return}Dt(this,Ce,Ra).call(this),this._uiManager.rebuild(this),Dt(this,vt,ki).call(this)};this.addCommands({cmd:()=>{Jt(Yt)},undo:()=>{Jt(Pt)},mustExec:!1}),Dt(this,vt,ki).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Pt){this.enterInEditMode()}keydown(Pt){Pt.target===this.div&&Pt.key==="Enter"&&(this.enterInEditMode(),Pt.preventDefault())}editorDivKeydown(Pt){$t._keyboardManager.exec(this,Pt)}editorDivFocus(Pt){this.isEditing=!0}editorDivBlur(Pt){this.isEditing=!1}editorDivInput(Pt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Pt,Yt;this.width&&(Pt=this.x,Yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",ie(this,ke)),this.enableEditing(),J.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(sn=>{var ln;return(ln=this.editorDiv)==null?void 0:ln.setAttribute("aria-label",sn)}),J.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(sn=>{var ln;return(ln=this.editorDiv)==null?void 0:ln.setAttribute("default-content",sn)}),this.editorDiv.contentEditable=!0;const{style:Jt}=this.editorDiv;if(Jt.fontSize=`calc(${ie(this,he)}px * var(--scale-factor))`,Jt.color=ie(this,nt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,W.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[sn,ln]=this.parentDimensions;if(this.annotationElementId){const{position:gt}=ie(this,oe);let[ce,Ee]=this.getInitialTranslation();[ce,Ee]=this.pageTranslationToScreen(ce,Ee);const[pe,rt]=this.pageDimensions,[ot,pt]=this.pageTranslation;let bt,yt;switch(this.rotation){case 0:bt=Pt+(gt[0]-ot)/pe,yt=Yt+this.height-(gt[1]-pt)/rt;break;case 90:bt=Pt+(gt[0]-ot)/pe,yt=Yt-(gt[1]-pt)/rt,[ce,Ee]=[Ee,-ce];break;case 180:bt=Pt-this.width+(gt[0]-ot)/pe,yt=Yt-(gt[1]-pt)/rt,[ce,Ee]=[-ce,-Ee];break;case 270:bt=Pt+(gt[0]-ot-this.height*rt)/pe,yt=Yt+(gt[1]-pt-this.width*pe)/rt,[ce,Ee]=[-Ee,ce];break}this.setAt(bt*sn,yt*ln,ce,Ee)}else this.setAt(Pt*sn,Yt*ln,this.width*sn,this.height*ln);Dt(this,Ce,Ra).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Pt,Yt,Jt){let sn=null;if(Pt instanceof ne.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:gt,fontColor:ce},rect:Ee,rotation:pe,id:rt},textContent:ot,textPosition:pt,parent:{page:{pageNumber:bt}}}=Pt;if(!ot||ot.length===0)return null;sn=Pt={annotationType:V.AnnotationEditorType.FREETEXT,color:Array.from(ce),fontSize:gt,value:ot.join(`
`),position:pt,pageIndex:bt-1,rect:Ee,rotation:pe,id:rt,deleted:!1}}const ln=super.deserialize(Pt,Yt,Jt);return Zt(ln,he,Pt.fontSize),Zt(ln,nt,V.Util.makeHexColor(...Pt.color)),Zt(ln,Ae,Pt.value),ln.annotationElementId=Pt.id||null,Zt(ln,oe,sn),ln}serialize(Pt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Yt=$t._internalPadding*this.parentScale,Jt=this.getRect(Yt,Yt),sn=J.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:ie(this,nt)),ln={annotationType:V.AnnotationEditorType.FREETEXT,color:sn,fontSize:ie(this,he),value:ie(this,Ae),pageIndex:this.pageIndex,rect:Jt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Pt?ln:this.annotationElementId&&!Dt(this,ct,$o).call(this,ln)?null:(ln.id=this.annotationElementId,ln)}};let ge=$t;ve=new WeakMap,Te=new WeakMap,re=new WeakMap,st=new WeakMap,nt=new WeakMap,Ae=new WeakMap,ke=new WeakMap,he=new WeakMap,oe=new WeakMap,Oe=new WeakSet,So=function(Pt){const Yt=sn=>{this.editorDiv.style.fontSize=`calc(${sn}px * var(--scale-factor))`,this.translate(0,-(sn-ie(this,he))*this.parentScale),Zt(this,he,sn),Dt(this,vt,ki).call(this)},Jt=ie(this,he);this.addCommands({cmd:()=>{Yt(Pt)},undo:()=>{Yt(Jt)},mustExec:!0,type:V.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},at=new WeakSet,wo=function(Pt){const Yt=ie(this,nt);this.addCommands({cmd:()=>{Zt(this,nt,this.editorDiv.style.color=Pt)},undo:()=>{Zt(this,nt,this.editorDiv.style.color=Yt)},mustExec:!0,type:V.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},be=new WeakSet,Ao=function(){const Pt=this.editorDiv.getElementsByTagName("div");if(Pt.length===0)return this.editorDiv.innerText;const Yt=[];for(const Jt of Pt)Yt.push(Jt.innerText.replace(/\r\n?|\n/,""));return Yt.join(`
`)},vt=new WeakSet,ki=function(){const[Pt,Yt]=this.parentDimensions;let Jt;if(this.isAttachedToDOM)Jt=this.div.getBoundingClientRect();else{const{currentLayer:sn,div:ln}=this,gt=ln.style.display;ln.style.display="hidden",sn.div.append(this.div),Jt=ln.getBoundingClientRect(),ln.remove(),ln.style.display=gt}this.rotation%180===this.parentRotation%180?(this.width=Jt.width/Pt,this.height=Jt.height/Yt):(this.width=Jt.height/Pt,this.height=Jt.width/Yt),this.fixAndSetPosition()},Ce=new WeakSet,Ra=function(){if(this.editorDiv.replaceChildren(),!!ie(this,Ae))for(const Pt of ie(this,Ae).split(`
`)){const Yt=document.createElement("div");Yt.append(Pt?document.createTextNode(Pt):document.createElement("br")),this.editorDiv.append(Yt)}},ct=new WeakSet,$o=function(Pt){const{value:Yt,fontSize:Jt,color:sn,rect:ln,pageIndex:gt}=ie(this,oe);return Pt.value!==Yt||Pt.fontSize!==Jt||Pt.rect.some((ce,Ee)=>Math.abs(ce-ln[Ee])>=1)||Pt.color.some((ce,Ee)=>ce!==sn[Ee])||Pt.pageIndex!==gt},xt=new WeakSet,Fa=function(Pt=!1){if(!this.annotationElementId)return;if(Dt(this,vt,ki).call(this),!Pt&&(this.width===0||this.height===0)){setTimeout(()=>Dt(this,xt,Fa).call(this,!0),0);return}const Yt=$t._internalPadding*this.parentScale;ie(this,oe).rect=this.getRect(Yt,Yt)},Mr(ge,"_freeTextDefaultContent",""),Mr(ge,"_internalPadding",0),Mr(ge,"_defaultColor",null),Mr(ge,"_defaultFontSize",10),Mr(ge,"_type","freetext"),B.FreeTextEditor=ge},(A,B,K)=>{var Ee,rt,fi,pt,Co,yt,Nt,It,Xt,tn,fn,an,cn,hn,un,xn,en,Bt,zt,nn,_n,En,On,Po,Vn,Gi,Jn,La,rr,Ia,jt,Rt,vn,on,ur,Er,Ut,Da,Rn,An,Fn,Dn,xo,bn,Oa;Object.defineProperty(B,"__esModule",{value:!0}),B.StampAnnotationElement=B.InkAnnotationElement=B.FreeTextAnnotationElement=B.AnnotationLayer=void 0;var V=K(1),W=K(6),J=K(3),ne=K(30),ge=K(31),ve=K(32);const Te=1e3,re=9,st=new WeakSet;function nt(In){return{width:In[2]-In[0],height:In[3]-In[1]}}class Ae{static create(wt){switch(wt.data.annotationType){case V.AnnotationType.LINK:return new he(wt);case V.AnnotationType.TEXT:return new oe(wt);case V.AnnotationType.WIDGET:switch(wt.data.fieldType){case"Tx":return new it(wt);case"Btn":return wt.data.radioButton?new be(wt):wt.data.checkBox?new lt(wt):new Ie(wt);case"Ch":return new vt(wt);case"Sig":return new at(wt)}return new Oe(wt);case V.AnnotationType.POPUP:return new dt(wt);case V.AnnotationType.FREETEXT:return new ft(wt);case V.AnnotationType.LINE:return new ct(wt);case V.AnnotationType.SQUARE:return new Et(wt);case V.AnnotationType.CIRCLE:return new xt(wt);case V.AnnotationType.POLYLINE:return new ht(wt);case V.AnnotationType.CARET:return new Ot(wt);case V.AnnotationType.INK:return new Vt(wt);case V.AnnotationType.POLYGON:return new $t(wt);case V.AnnotationType.HIGHLIGHT:return new Pt(wt);case V.AnnotationType.UNDERLINE:return new Yt(wt);case V.AnnotationType.SQUIGGLY:return new Jt(wt);case V.AnnotationType.STRIKEOUT:return new sn(wt);case V.AnnotationType.STAMP:return new ln(wt);case V.AnnotationType.FILEATTACHMENT:return new gt(wt);default:return new ke(wt)}}}const pe=class{constructor(wt,{isRenderable:fe=!1,ignoreBorder:mt=!1,createQuadrilaterals:At=!1}={}){Ct(this,Ee,!1);this.isRenderable=fe,this.data=wt.data,this.layer=wt.layer,this.linkService=wt.linkService,this.downloadManager=wt.downloadManager,this.imageResourcesPath=wt.imageResourcesPath,this.renderForms=wt.renderForms,this.svgFactory=wt.svgFactory,this.annotationStorage=wt.annotationStorage,this.enableScripting=wt.enableScripting,this.hasJSActions=wt.hasJSActions,this._fieldObjects=wt.fieldObjects,this.parent=wt.parent,fe&&(this.container=this._createContainer(mt)),At&&this._createQuadrilaterals()}static _hasPopupData({titleObj:wt,contentsObj:fe,richText:mt}){return!!(wt!=null&&wt.str||fe!=null&&fe.str||mt!=null&&mt.str)}get hasPopupData(){return pe._hasPopupData(this.data)}_createContainer(wt){const{data:fe,parent:{page:mt,viewport:At}}=this,Ft=document.createElement("section");Ft.setAttribute("data-annotation-id",fe.id),this instanceof Oe||(Ft.tabIndex=Te),Ft.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Ft.setAttribute("aria-haspopup","dialog"),fe.noRotate&&Ft.classList.add("norotate");const{pageWidth:Ht,pageHeight:Qt,pageX:mn,pageY:Pn}=At.rawDims;if(!fe.rect||this instanceof dt){const{rotation:Hn}=fe;return!fe.hasOwnCanvas&&Hn!==0&&this.setRotation(Hn,Ft),Ft}const{width:$n,height:Yn}=nt(fe.rect),Mn=V.Util.normalizeRect([fe.rect[0],mt.view[3]-fe.rect[1]+mt.view[1],fe.rect[2],mt.view[3]-fe.rect[3]+mt.view[1]]);if(!wt&&fe.borderStyle.width>0){Ft.style.borderWidth=`${fe.borderStyle.width}px`;const Hn=fe.borderStyle.horizontalCornerRadius,nr=fe.borderStyle.verticalCornerRadius;if(Hn>0||nr>0){const br=`calc(${Hn}px * var(--scale-factor)) / calc(${nr}px * var(--scale-factor))`;Ft.style.borderRadius=br}else if(this instanceof be){const br=`calc(${$n}px * var(--scale-factor)) / calc(${Yn}px * var(--scale-factor))`;Ft.style.borderRadius=br}switch(fe.borderStyle.style){case V.AnnotationBorderStyleType.SOLID:Ft.style.borderStyle="solid";break;case V.AnnotationBorderStyleType.DASHED:Ft.style.borderStyle="dashed";break;case V.AnnotationBorderStyleType.BEVELED:(0,V.warn)("Unimplemented border style: beveled");break;case V.AnnotationBorderStyleType.INSET:(0,V.warn)("Unimplemented border style: inset");break;case V.AnnotationBorderStyleType.UNDERLINE:Ft.style.borderBottomStyle="solid";break}const fr=fe.borderColor||null;fr?(Zt(this,Ee,!0),Ft.style.borderColor=V.Util.makeHexColor(fr[0]|0,fr[1]|0,fr[2]|0)):Ft.style.borderWidth=0}Ft.style.left=`${100*(Mn[0]-mn)/Ht}%`,Ft.style.top=`${100*(Mn[1]-Pn)/Qt}%`;const{rotation:Tn}=fe;return fe.hasOwnCanvas||Tn===0?(Ft.style.width=`${100*$n/Ht}%`,Ft.style.height=`${100*Yn/Qt}%`):this.setRotation(Tn,Ft),Ft}setRotation(wt,fe=this.container){if(!this.data.rect)return;const{pageWidth:mt,pageHeight:At}=this.parent.viewport.rawDims,{width:Ft,height:Ht}=nt(this.data.rect);let Qt,mn;wt%180===0?(Qt=100*Ft/mt,mn=100*Ht/At):(Qt=100*Ht/mt,mn=100*Ft/At),fe.style.width=`${Qt}%`,fe.style.height=`${mn}%`,fe.setAttribute("data-main-rotation",(360-wt)%360)}get _commonActions(){const wt=(fe,mt,At)=>{const Ft=At.detail[fe],Ht=Ft[0],Qt=Ft.slice(1);At.target.style[mt]=ne.ColorConverters[`${Ht}_HTML`](Qt),this.annotationStorage.setValue(this.data.id,{[mt]:ne.ColorConverters[`${Ht}_rgb`](Qt)})};return(0,V.shadow)(this,"_commonActions",{display:fe=>{const{display:mt}=fe.detail,At=mt%2===1;this.container.style.visibility=At?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:At,noPrint:mt===1||mt===2})},print:fe=>{this.annotationStorage.setValue(this.data.id,{noPrint:!fe.detail.print})},hidden:fe=>{const{hidden:mt}=fe.detail;this.container.style.visibility=mt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:mt,noView:mt})},focus:fe=>{setTimeout(()=>fe.target.focus({preventScroll:!1}),0)},userName:fe=>{fe.target.title=fe.detail.userName},readonly:fe=>{fe.target.disabled=fe.detail.readonly},required:fe=>{this._setRequired(fe.target,fe.detail.required)},bgColor:fe=>{wt("bgColor","backgroundColor",fe)},fillColor:fe=>{wt("fillColor","backgroundColor",fe)},fgColor:fe=>{wt("fgColor","color",fe)},textColor:fe=>{wt("textColor","color",fe)},borderColor:fe=>{wt("borderColor","borderColor",fe)},strokeColor:fe=>{wt("strokeColor","borderColor",fe)},rotation:fe=>{const mt=fe.detail.rotation;this.setRotation(mt),this.annotationStorage.setValue(this.data.id,{rotation:mt})}})}_dispatchEventFromSandbox(wt,fe){const mt=this._commonActions;for(const At of Object.keys(fe.detail)){const Ft=wt[At]||mt[At];Ft==null||Ft(fe)}}_setDefaultPropertiesFromJS(wt){if(!this.enableScripting)return;const fe=this.annotationStorage.getRawValue(this.data.id);if(!fe)return;const mt=this._commonActions;for(const[At,Ft]of Object.entries(fe)){const Ht=mt[At];if(Ht){const Qt={detail:{[At]:Ft},target:wt};Ht(Qt),delete fe[At]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:wt}=this.data;if(!wt)return;const[fe,mt,At,Ft]=this.data.rect;if(wt.length===1){const[,{x:nr,y:fr},{x:br,y:Br}]=wt[0];if(At===nr&&Ft===fr&&fe===br&&mt===Br)return}const{style:Ht}=this.container;let Qt;if(ie(this,Ee)){const{borderColor:nr,borderWidth:fr}=Ht;Ht.borderWidth=0,Qt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${nr}" stroke-width="${fr}">`],this.container.classList.add("hasBorder")}const mn=At-fe,Pn=Ft-mt,{svgFactory:$n}=this,Yn=$n.createElement("svg");Yn.classList.add("quadrilateralsContainer"),Yn.setAttribute("width",0),Yn.setAttribute("height",0);const Mn=$n.createElement("defs");Yn.append(Mn);const Tn=$n.createElement("clipPath"),Hn=`clippath_${this.data.id}`;Tn.setAttribute("id",Hn),Tn.setAttribute("clipPathUnits","objectBoundingBox"),Mn.append(Tn);for(const[,{x:nr,y:fr},{x:br,y:Br}]of wt){const Tr=$n.createElement("rect"),Kr=(br-fe)/mn,Zr=(Ft-fr)/Pn,ni=(nr-br)/mn,Ri=(fr-Br)/Pn;Tr.setAttribute("x",Kr),Tr.setAttribute("y",Zr),Tr.setAttribute("width",ni),Tr.setAttribute("height",Ri),Tn.append(Tr),Qt==null||Qt.push(`<rect vector-effect="non-scaling-stroke" x="${Kr}" y="${Zr}" width="${ni}" height="${Ri}"/>`)}ie(this,Ee)&&(Qt.push("</g></svg>')"),Ht.backgroundImage=Qt.join("")),this.container.append(Yn),this.container.style.clipPath=`url(#${Hn})`}_createPopup(){const{container:wt,data:fe}=this;wt.setAttribute("aria-haspopup","dialog");const mt=new dt({data:{color:fe.color,titleObj:fe.titleObj,modificationDate:fe.modificationDate,contentsObj:fe.contentsObj,richText:fe.richText,parentRect:fe.rect,borderStyle:0,id:`popup_${fe.id}`,rotation:fe.rotation},parent:this.parent,elements:[this]});this.parent.div.append(mt.render())}render(){(0,V.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(wt,fe=null){const mt=[];if(this._fieldObjects){const At=this._fieldObjects[wt];if(At)for(const{page:Ft,id:Ht,exportValues:Qt}of At){if(Ft===-1||Ht===fe)continue;const mn=typeof Qt=="string"?Qt:null,Pn=document.querySelector(`[data-element-id="${Ht}"]`);if(Pn&&!st.has(Pn)){(0,V.warn)(`_getElementsByName - element not allowed: ${Ht}`);continue}mt.push({id:Ht,exportValue:mn,domElement:Pn})}return mt}for(const At of document.getElementsByName(wt)){const{exportValue:Ft}=At,Ht=At.getAttribute("data-element-id");Ht!==fe&&st.has(At)&&mt.push({id:Ht,exportValue:Ft,domElement:At})}return mt}show(){var wt;this.container&&(this.container.hidden=!1),(wt=this.popup)==null||wt.maybeShow()}hide(){var wt;this.container&&(this.container.hidden=!0),(wt=this.popup)==null||wt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const wt=this.getElementsToTriggerPopup();if(Array.isArray(wt))for(const fe of wt)fe.classList.add("highlightArea");else wt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:wt,data:{id:fe}}=this;this.container.addEventListener("dblclick",()=>{var mt;(mt=this.linkService.eventBus)==null||mt.dispatch("switchannotationeditormode",{source:this,mode:wt,editId:fe})})}};let ke=pe;Ee=new WeakMap;class he extends ke{constructor(fe,mt=null){super(fe,{isRenderable:!0,ignoreBorder:!!(mt!=null&&mt.ignoreBorder),createQuadrilaterals:!0});Ct(this,rt);Ct(this,pt);this.isTooltipOnly=fe.data.isTooltipOnly}render(){const{data:fe,linkService:mt}=this,At=document.createElement("a");At.setAttribute("data-element-id",fe.id);let Ft=!1;return fe.url?(mt.addLinkAttributes(At,fe.url,fe.newWindow),Ft=!0):fe.action?(this._bindNamedAction(At,fe.action),Ft=!0):fe.attachment?(this._bindAttachment(At,fe.attachment),Ft=!0):fe.setOCGState?(Dt(this,pt,Co).call(this,At,fe.setOCGState),Ft=!0):fe.dest?(this._bindLink(At,fe.dest),Ft=!0):(fe.actions&&(fe.actions.Action||fe.actions["Mouse Up"]||fe.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(At,fe),Ft=!0),fe.resetForm?(this._bindResetFormAction(At,fe.resetForm),Ft=!0):this.isTooltipOnly&&!Ft&&(this._bindLink(At,""),Ft=!0)),this.container.classList.add("linkAnnotation"),Ft&&this.container.append(At),this.container}_bindLink(fe,mt){fe.href=this.linkService.getDestinationHash(mt),fe.onclick=()=>(mt&&this.linkService.goToDestination(mt),!1),(mt||mt==="")&&Dt(this,rt,fi).call(this)}_bindNamedAction(fe,mt){fe.href=this.linkService.getAnchorUrl(""),fe.onclick=()=>(this.linkService.executeNamedAction(mt),!1),Dt(this,rt,fi).call(this)}_bindAttachment(fe,mt){fe.href=this.linkService.getAnchorUrl(""),fe.onclick=()=>{var At;return(At=this.downloadManager)==null||At.openOrDownloadData(this.container,mt.content,mt.filename),!1},Dt(this,rt,fi).call(this)}_bindJSAction(fe,mt){fe.href=this.linkService.getAnchorUrl("");const At=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Ft of Object.keys(mt.actions)){const Ht=At.get(Ft);Ht&&(fe[Ht]=()=>{var Qt;return(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:mt.id,name:Ft}}),!1})}fe.onclick||(fe.onclick=()=>!1),Dt(this,rt,fi).call(this)}_bindResetFormAction(fe,mt){const At=fe.onclick;if(At||(fe.href=this.linkService.getAnchorUrl("")),Dt(this,rt,fi).call(this),!this._fieldObjects){(0,V.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),At||(fe.onclick=()=>!1);return}fe.onclick=()=>{var Yn;At==null||At();const{fields:Ft,refs:Ht,include:Qt}=mt,mn=[];if(Ft.length!==0||Ht.length!==0){const Mn=new Set(Ht);for(const Tn of Ft){const Hn=this._fieldObjects[Tn]||[];for(const{id:nr}of Hn)Mn.add(nr)}for(const Tn of Object.values(this._fieldObjects))for(const Hn of Tn)Mn.has(Hn.id)===Qt&&mn.push(Hn)}else for(const Mn of Object.values(this._fieldObjects))mn.push(...Mn);const Pn=this.annotationStorage,$n=[];for(const Mn of mn){const{id:Tn}=Mn;switch($n.push(Tn),Mn.type){case"text":{const nr=Mn.defaultValue||"";Pn.setValue(Tn,{value:nr});break}case"checkbox":case"radiobutton":{const nr=Mn.defaultValue===Mn.exportValues;Pn.setValue(Tn,{value:nr});break}case"combobox":case"listbox":{const nr=Mn.defaultValue||"";Pn.setValue(Tn,{value:nr});break}default:continue}const Hn=document.querySelector(`[data-element-id="${Tn}"]`);if(Hn){if(!st.has(Hn)){(0,V.warn)(`_bindResetFormAction - element not allowed: ${Tn}`);continue}}else continue;Hn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Yn=this.linkService.eventBus)==null||Yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:$n,name:"ResetForm"}})),!1}}}rt=new WeakSet,fi=function(){this.container.setAttribute("data-internal-link","")},pt=new WeakSet,Co=function(fe,mt){fe.href=this.linkService.getAnchorUrl(""),fe.onclick=()=>(this.linkService.executeSetOCGState(mt),!1),Dt(this,rt,fi).call(this)};class oe extends ke{constructor(wt){super(wt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const wt=document.createElement("img");return wt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",wt.alt="[{{type}} Annotation]",wt.dataset.l10nId="text_annotation_type",wt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(wt),this.container}}class Oe extends ke{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(wt){var fe;this.data.hasOwnCanvas&&(((fe=wt.previousSibling)==null?void 0:fe.nodeName)==="CANVAS"&&(wt.previousSibling.hidden=!0),wt.hidden=!1)}_getKeyModifier(wt){const{isWin:fe,isMac:mt}=V.FeatureTest.platform;return fe&&wt.ctrlKey||mt&&wt.metaKey}_setEventListener(wt,fe,mt,At,Ft){mt.includes("mouse")?wt.addEventListener(mt,Ht=>{var Qt;(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:At,value:Ft(Ht),shift:Ht.shiftKey,modifier:this._getKeyModifier(Ht)}})}):wt.addEventListener(mt,Ht=>{var Qt;if(mt==="blur"){if(!fe.focused||!Ht.relatedTarget)return;fe.focused=!1}else if(mt==="focus"){if(fe.focused)return;fe.focused=!0}Ft&&((Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:At,value:Ft(Ht)}}))})}_setEventListeners(wt,fe,mt,At){var Ft,Ht,Qt;for(const[mn,Pn]of mt)(Pn==="Action"||(Ft=this.data.actions)!=null&&Ft[Pn])&&((Pn==="Focus"||Pn==="Blur")&&(fe||(fe={focused:!1})),this._setEventListener(wt,fe,mn,Pn,At),Pn==="Focus"&&!((Ht=this.data.actions)!=null&&Ht.Blur)?this._setEventListener(wt,fe,"blur","Blur",null):Pn==="Blur"&&!((Qt=this.data.actions)!=null&&Qt.Focus)&&this._setEventListener(wt,fe,"focus","Focus",null))}_setBackgroundColor(wt){const fe=this.data.backgroundColor||null;wt.style.backgroundColor=fe===null?"transparent":V.Util.makeHexColor(fe[0],fe[1],fe[2])}_setTextStyle(wt){const fe=["left","center","right"],{fontColor:mt}=this.data.defaultAppearanceData,At=this.data.defaultAppearanceData.fontSize||re,Ft=wt.style;let Ht;const Qt=2,mn=Pn=>Math.round(10*Pn)/10;if(this.data.multiLine){const Pn=Math.abs(this.data.rect[3]-this.data.rect[1]-Qt),$n=Math.round(Pn/(V.LINE_FACTOR*At))||1,Yn=Pn/$n;Ht=Math.min(At,mn(Yn/V.LINE_FACTOR))}else{const Pn=Math.abs(this.data.rect[3]-this.data.rect[1]-Qt);Ht=Math.min(At,mn(Pn/V.LINE_FACTOR))}Ft.fontSize=`calc(${Ht}px * var(--scale-factor))`,Ft.color=V.Util.makeHexColor(mt[0],mt[1],mt[2]),this.data.textAlignment!==null&&(Ft.textAlign=fe[this.data.textAlignment])}_setRequired(wt,fe){fe?wt.setAttribute("required",!0):wt.removeAttribute("required"),wt.setAttribute("aria-required",fe)}}class it extends Oe{constructor(wt){const fe=wt.renderForms||!wt.data.hasAppearance&&!!wt.data.fieldValue;super(wt,{isRenderable:fe})}setPropertyOnSiblings(wt,fe,mt,At){const Ft=this.annotationStorage;for(const Ht of this._getElementsByName(wt.name,wt.id))Ht.domElement&&(Ht.domElement[fe]=mt),Ft.setValue(Ht.id,{[At]:mt})}render(){var At,Ft;const wt=this.annotationStorage,fe=this.data.id;this.container.classList.add("textWidgetAnnotation");let mt=null;if(this.renderForms){const Ht=wt.getValue(fe,{value:this.data.fieldValue});let Qt=Ht.value||"";const mn=wt.getValue(fe,{charLimit:this.data.maxLen}).charLimit;mn&&Qt.length>mn&&(Qt=Qt.slice(0,mn));let Pn=Ht.formattedValue||((At=this.data.textContent)==null?void 0:At.join(`
`))||null;Pn&&this.data.comb&&(Pn=Pn.replaceAll(/\s+/g,""));const $n={userValue:Qt,formattedValue:Pn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(mt=document.createElement("textarea"),mt.textContent=Pn??Qt,this.data.doNotScroll&&(mt.style.overflowY="hidden")):(mt=document.createElement("input"),mt.type="text",mt.setAttribute("value",Pn??Qt),this.data.doNotScroll&&(mt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(mt.hidden=!0),st.add(mt),mt.setAttribute("data-element-id",fe),mt.disabled=this.data.readOnly,mt.name=this.data.fieldName,mt.tabIndex=Te,this._setRequired(mt,this.data.required),mn&&(mt.maxLength=mn),mt.addEventListener("input",Mn=>{wt.setValue(fe,{value:Mn.target.value}),this.setPropertyOnSiblings(mt,"value",Mn.target.value,"value"),$n.formattedValue=null}),mt.addEventListener("resetform",Mn=>{const Tn=this.data.defaultFieldValue??"";mt.value=$n.userValue=Tn,$n.formattedValue=null});let Yn=Mn=>{const{formattedValue:Tn}=$n;Tn!=null&&(Mn.target.value=Tn),Mn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){mt.addEventListener("focus",Tn=>{if($n.focused)return;const{target:Hn}=Tn;$n.userValue&&(Hn.value=$n.userValue),$n.lastCommittedValue=Hn.value,$n.commitKey=1,$n.focused=!0}),mt.addEventListener("updatefromsandbox",Tn=>{this.showElementAndHideCanvas(Tn.target);const Hn={value(nr){$n.userValue=nr.detail.value??"",wt.setValue(fe,{value:$n.userValue.toString()}),nr.target.value=$n.userValue},formattedValue(nr){const{formattedValue:fr}=nr.detail;$n.formattedValue=fr,fr!=null&&nr.target!==document.activeElement&&(nr.target.value=fr),wt.setValue(fe,{formattedValue:fr})},selRange(nr){nr.target.setSelectionRange(...nr.detail.selRange)},charLimit:nr=>{var Tr;const{charLimit:fr}=nr.detail,{target:br}=nr;if(fr===0){br.removeAttribute("maxLength");return}br.setAttribute("maxLength",fr);let Br=$n.userValue;!Br||Br.length<=fr||(Br=Br.slice(0,fr),br.value=$n.userValue=Br,wt.setValue(fe,{value:Br}),(Tr=this.linkService.eventBus)==null||Tr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:fe,name:"Keystroke",value:Br,willCommit:!0,commitKey:1,selStart:br.selectionStart,selEnd:br.selectionEnd}}))}};this._dispatchEventFromSandbox(Hn,Tn)}),mt.addEventListener("keydown",Tn=>{var fr;$n.commitKey=1;let Hn=-1;if(Tn.key==="Escape"?Hn=0:Tn.key==="Enter"&&!this.data.multiLine?Hn=2:Tn.key==="Tab"&&($n.commitKey=3),Hn===-1)return;const{value:nr}=Tn.target;$n.lastCommittedValue!==nr&&($n.lastCommittedValue=nr,$n.userValue=nr,(fr=this.linkService.eventBus)==null||fr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:fe,name:"Keystroke",value:nr,willCommit:!0,commitKey:Hn,selStart:Tn.target.selectionStart,selEnd:Tn.target.selectionEnd}}))});const Mn=Yn;Yn=null,mt.addEventListener("blur",Tn=>{var nr;if(!$n.focused||!Tn.relatedTarget)return;$n.focused=!1;const{value:Hn}=Tn.target;$n.userValue=Hn,$n.lastCommittedValue!==Hn&&((nr=this.linkService.eventBus)==null||nr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:fe,name:"Keystroke",value:Hn,willCommit:!0,commitKey:$n.commitKey,selStart:Tn.target.selectionStart,selEnd:Tn.target.selectionEnd}})),Mn(Tn)}),(Ft=this.data.actions)!=null&&Ft.Keystroke&&mt.addEventListener("beforeinput",Tn=>{var Zr;$n.lastCommittedValue=null;const{data:Hn,target:nr}=Tn,{value:fr,selectionStart:br,selectionEnd:Br}=nr;let Tr=br,Kr=Br;switch(Tn.inputType){case"deleteWordBackward":{const ni=fr.substring(0,br).match(/\w*[^\w]*$/);ni&&(Tr-=ni[0].length);break}case"deleteWordForward":{const ni=fr.substring(br).match(/^[^\w]*\w*/);ni&&(Kr+=ni[0].length);break}case"deleteContentBackward":br===Br&&(Tr-=1);break;case"deleteContentForward":br===Br&&(Kr+=1);break}Tn.preventDefault(),(Zr=this.linkService.eventBus)==null||Zr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:fe,name:"Keystroke",value:fr,change:Hn||"",willCommit:!1,selStart:Tr,selEnd:Kr}})}),this._setEventListeners(mt,$n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Tn=>Tn.target.value)}if(Yn&&mt.addEventListener("blur",Yn),this.data.comb){const Tn=(this.data.rect[2]-this.data.rect[0])/mn;mt.classList.add("comb"),mt.style.letterSpacing=`calc(${Tn}px * var(--scale-factor) - 1ch)`}}else mt=document.createElement("div"),mt.textContent=this.data.fieldValue,mt.style.verticalAlign="middle",mt.style.display="table-cell";return this._setTextStyle(mt),this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class at extends Oe{constructor(wt){super(wt,{isRenderable:!!wt.data.hasOwnCanvas})}}class lt extends Oe{constructor(wt){super(wt,{isRenderable:wt.renderForms})}render(){const wt=this.annotationStorage,fe=this.data,mt=fe.id;let At=wt.getValue(mt,{value:fe.exportValue===fe.fieldValue}).value;typeof At=="string"&&(At=At!=="Off",wt.setValue(mt,{value:At})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Ft=document.createElement("input");return st.add(Ft),Ft.setAttribute("data-element-id",mt),Ft.disabled=fe.readOnly,this._setRequired(Ft,this.data.required),Ft.type="checkbox",Ft.name=fe.fieldName,At&&Ft.setAttribute("checked",!0),Ft.setAttribute("exportValue",fe.exportValue),Ft.tabIndex=Te,Ft.addEventListener("change",Ht=>{const{name:Qt,checked:mn}=Ht.target;for(const Pn of this._getElementsByName(Qt,mt)){const $n=mn&&Pn.exportValue===fe.exportValue;Pn.domElement&&(Pn.domElement.checked=$n),wt.setValue(Pn.id,{value:$n})}wt.setValue(mt,{value:mn})}),Ft.addEventListener("resetform",Ht=>{const Qt=fe.defaultFieldValue||"Off";Ht.target.checked=Qt===fe.exportValue}),this.enableScripting&&this.hasJSActions&&(Ft.addEventListener("updatefromsandbox",Ht=>{const Qt={value(mn){mn.target.checked=mn.detail.value!=="Off",wt.setValue(mt,{value:mn.target.checked})}};this._dispatchEventFromSandbox(Qt,Ht)}),this._setEventListeners(Ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ht=>Ht.target.checked)),this._setBackgroundColor(Ft),this._setDefaultPropertiesFromJS(Ft),this.container.append(Ft),this.container}}class be extends Oe{constructor(wt){super(wt,{isRenderable:wt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const wt=this.annotationStorage,fe=this.data,mt=fe.id;let At=wt.getValue(mt,{value:fe.fieldValue===fe.buttonValue}).value;typeof At=="string"&&(At=At!==fe.buttonValue,wt.setValue(mt,{value:At}));const Ft=document.createElement("input");if(st.add(Ft),Ft.setAttribute("data-element-id",mt),Ft.disabled=fe.readOnly,this._setRequired(Ft,this.data.required),Ft.type="radio",Ft.name=fe.fieldName,At&&Ft.setAttribute("checked",!0),Ft.tabIndex=Te,Ft.addEventListener("change",Ht=>{const{name:Qt,checked:mn}=Ht.target;for(const Pn of this._getElementsByName(Qt,mt))wt.setValue(Pn.id,{value:!1});wt.setValue(mt,{value:mn})}),Ft.addEventListener("resetform",Ht=>{const Qt=fe.defaultFieldValue;Ht.target.checked=Qt!=null&&Qt===fe.buttonValue}),this.enableScripting&&this.hasJSActions){const Ht=fe.buttonValue;Ft.addEventListener("updatefromsandbox",Qt=>{const mn={value:Pn=>{const $n=Ht===Pn.detail.value;for(const Yn of this._getElementsByName(Pn.target.name)){const Mn=$n&&Yn.id===mt;Yn.domElement&&(Yn.domElement.checked=Mn),wt.setValue(Yn.id,{value:Mn})}}};this._dispatchEventFromSandbox(mn,Qt)}),this._setEventListeners(Ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Qt=>Qt.target.checked)}return this._setBackgroundColor(Ft),this._setDefaultPropertiesFromJS(Ft),this.container.append(Ft),this.container}}class Ie extends he{constructor(wt){super(wt,{ignoreBorder:wt.data.hasAppearance})}render(){const wt=super.render();wt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(wt.title=this.data.alternativeText);const fe=wt.lastChild;return this.enableScripting&&this.hasJSActions&&fe&&(this._setDefaultPropertiesFromJS(fe),fe.addEventListener("updatefromsandbox",mt=>{this._dispatchEventFromSandbox({},mt)})),wt}}class vt extends Oe{constructor(wt){super(wt,{isRenderable:wt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const wt=this.annotationStorage,fe=this.data.id,mt=wt.getValue(fe,{value:this.data.fieldValue}),At=document.createElement("select");st.add(At),At.setAttribute("data-element-id",fe),At.disabled=this.data.readOnly,this._setRequired(At,this.data.required),At.name=this.data.fieldName,At.tabIndex=Te;let Ft=this.data.combo&&this.data.options.length>0;this.data.combo||(At.size=this.data.options.length,this.data.multiSelect&&(At.multiple=!0)),At.addEventListener("resetform",$n=>{const Yn=this.data.defaultFieldValue;for(const Mn of At.options)Mn.selected=Mn.value===Yn});for(const $n of this.data.options){const Yn=document.createElement("option");Yn.textContent=$n.displayValue,Yn.value=$n.exportValue,mt.value.includes($n.exportValue)&&(Yn.setAttribute("selected",!0),Ft=!1),At.append(Yn)}let Ht=null;if(Ft){const $n=document.createElement("option");$n.value=" ",$n.setAttribute("hidden",!0),$n.setAttribute("selected",!0),At.prepend($n),Ht=()=>{$n.remove(),At.removeEventListener("input",Ht),Ht=null},At.addEventListener("input",Ht)}const Qt=$n=>{const Yn=$n?"value":"textContent",{options:Mn,multiple:Tn}=At;return Tn?Array.prototype.filter.call(Mn,Hn=>Hn.selected).map(Hn=>Hn[Yn]):Mn.selectedIndex===-1?null:Mn[Mn.selectedIndex][Yn]};let mn=Qt(!1);const Pn=$n=>{const Yn=$n.target.options;return Array.prototype.map.call(Yn,Mn=>({displayValue:Mn.textContent,exportValue:Mn.value}))};return this.enableScripting&&this.hasJSActions?(At.addEventListener("updatefromsandbox",$n=>{const Yn={value(Mn){Ht==null||Ht();const Tn=Mn.detail.value,Hn=new Set(Array.isArray(Tn)?Tn:[Tn]);for(const nr of At.options)nr.selected=Hn.has(nr.value);wt.setValue(fe,{value:Qt(!0)}),mn=Qt(!1)},multipleSelection(Mn){At.multiple=!0},remove(Mn){const Tn=At.options,Hn=Mn.detail.remove;Tn[Hn].selected=!1,At.remove(Hn),Tn.length>0&&Array.prototype.findIndex.call(Tn,fr=>fr.selected)===-1&&(Tn[0].selected=!0),wt.setValue(fe,{value:Qt(!0),items:Pn(Mn)}),mn=Qt(!1)},clear(Mn){for(;At.length!==0;)At.remove(0);wt.setValue(fe,{value:null,items:[]}),mn=Qt(!1)},insert(Mn){const{index:Tn,displayValue:Hn,exportValue:nr}=Mn.detail.insert,fr=At.children[Tn],br=document.createElement("option");br.textContent=Hn,br.value=nr,fr?fr.before(br):At.append(br),wt.setValue(fe,{value:Qt(!0),items:Pn(Mn)}),mn=Qt(!1)},items(Mn){const{items:Tn}=Mn.detail;for(;At.length!==0;)At.remove(0);for(const Hn of Tn){const{displayValue:nr,exportValue:fr}=Hn,br=document.createElement("option");br.textContent=nr,br.value=fr,At.append(br)}At.options.length>0&&(At.options[0].selected=!0),wt.setValue(fe,{value:Qt(!0),items:Pn(Mn)}),mn=Qt(!1)},indices(Mn){const Tn=new Set(Mn.detail.indices);for(const Hn of Mn.target.options)Hn.selected=Tn.has(Hn.index);wt.setValue(fe,{value:Qt(!0)}),mn=Qt(!1)},editable(Mn){Mn.target.disabled=!Mn.detail.editable}};this._dispatchEventFromSandbox(Yn,$n)}),At.addEventListener("input",$n=>{var Mn;const Yn=Qt(!0);wt.setValue(fe,{value:Yn}),$n.preventDefault(),(Mn=this.linkService.eventBus)==null||Mn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:fe,name:"Keystroke",value:mn,changeEx:Yn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(At,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],$n=>$n.target.value)):At.addEventListener("input",function($n){wt.setValue(fe,{value:Qt(!0)})}),this.data.combo&&this._setTextStyle(At),this._setBackgroundColor(At),this._setDefaultPropertiesFromJS(At),this.container.append(At),this.container}}class dt extends ke{constructor(wt){const{data:fe,elements:mt}=wt;super(wt,{isRenderable:ke._hasPopupData(fe)}),this.elements=mt}render(){this.container.classList.add("popupAnnotation");const wt=new Ce({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),fe=[];for(const mt of this.elements)mt.popup=wt,fe.push(mt.data.id),mt.addHighlightArea();return this.container.setAttribute("aria-controls",fe.map(mt=>`${V.AnnotationPrefix}${mt}`).join(",")),this.container}}class Ce{constructor({container:wt,color:fe,elements:mt,titleObj:At,modificationDate:Ft,contentsObj:Ht,richText:Qt,parent:mn,rect:Pn,parentRect:$n,open:Yn}){Ct(this,On);Ct(this,Vn);Ct(this,Jn);Ct(this,rr);Ct(this,yt,null);Ct(this,Nt,Dt(this,On,Po).bind(this));Ct(this,It,Dt(this,rr,Ia).bind(this));Ct(this,Xt,Dt(this,Jn,La).bind(this));Ct(this,tn,Dt(this,Vn,Gi).bind(this));Ct(this,fn,null);Ct(this,an,null);Ct(this,cn,null);Ct(this,hn,null);Ct(this,un,null);Ct(this,xn,null);Ct(this,en,!1);Ct(this,Bt,null);Ct(this,zt,null);Ct(this,nn,null);Ct(this,_n,null);Ct(this,En,!1);var Tn;Zt(this,an,wt),Zt(this,_n,At),Zt(this,cn,Ht),Zt(this,nn,Qt),Zt(this,un,mn),Zt(this,fn,fe),Zt(this,zt,Pn),Zt(this,xn,$n),Zt(this,hn,mt);const Mn=W.PDFDateString.toDateObject(Ft);Mn&&Zt(this,yt,mn.l10n.get("annotation_date_string",{date:Mn.toLocaleDateString(),time:Mn.toLocaleTimeString()})),this.trigger=mt.flatMap(Hn=>Hn.getElementsToTriggerPopup());for(const Hn of this.trigger)Hn.addEventListener("click",ie(this,tn)),Hn.addEventListener("mouseenter",ie(this,Xt)),Hn.addEventListener("mouseleave",ie(this,It)),Hn.classList.add("popupTriggerArea");for(const Hn of mt)(Tn=Hn.container)==null||Tn.addEventListener("keydown",ie(this,Nt));ie(this,an).hidden=!0,Yn&&Dt(this,Vn,Gi).call(this)}render(){if(ie(this,Bt))return;const{page:{view:wt},viewport:{rawDims:{pageWidth:fe,pageHeight:mt,pageX:At,pageY:Ft}}}=ie(this,un),Ht=Zt(this,Bt,document.createElement("div"));if(Ht.className="popup",ie(this,fn)){const Tr=Ht.style.outlineColor=V.Util.makeHexColor(...ie(this,fn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ht.style.backgroundColor=`color-mix(in srgb, ${Tr} 30%, white)`:Ht.style.backgroundColor=V.Util.makeHexColor(...ie(this,fn).map(Zr=>Math.floor(.7*(255-Zr)+Zr)))}const Qt=document.createElement("span");Qt.className="header";const mn=document.createElement("h1");if(Qt.append(mn),{dir:mn.dir,str:mn.textContent}=ie(this,_n),Ht.append(Qt),ie(this,yt)){const Tr=document.createElement("span");Tr.classList.add("popupDate"),ie(this,yt).then(Kr=>{Tr.textContent=Kr}),Qt.append(Tr)}const Pn=ie(this,cn),$n=ie(this,nn);if($n!=null&&$n.str&&(!(Pn!=null&&Pn.str)||Pn.str===$n.str))ve.XfaLayer.render({xfaHtml:$n.html,intent:"richText",div:Ht}),Ht.lastChild.classList.add("richText","popupContent");else{const Tr=this._formatContents(Pn);Ht.append(Tr)}let Yn=!!ie(this,xn),Mn=Yn?ie(this,xn):ie(this,zt);for(const Tr of ie(this,hn))if(!Mn||V.Util.intersect(Tr.data.rect,Mn)!==null){Mn=Tr.data.rect,Yn=!0;break}const Tn=V.Util.normalizeRect([Mn[0],wt[3]-Mn[1]+wt[1],Mn[2],wt[3]-Mn[3]+wt[1]]),Hn=5,nr=Yn?Mn[2]-Mn[0]+Hn:0,fr=Tn[0]+nr,br=Tn[1],{style:Br}=ie(this,an);Br.left=`${100*(fr-At)/fe}%`,Br.top=`${100*(br-Ft)/mt}%`,ie(this,an).append(Ht)}_formatContents({str:wt,dir:fe}){const mt=document.createElement("p");mt.classList.add("popupContent"),mt.dir=fe;const At=wt.split(/(?:\r\n?|\n)/);for(let Ft=0,Ht=At.length;Ft<Ht;++Ft){const Qt=At[Ft];mt.append(document.createTextNode(Qt)),Ft<Ht-1&&mt.append(document.createElement("br"))}return mt}forceHide(){Zt(this,En,this.isVisible),ie(this,En)&&(ie(this,an).hidden=!0)}maybeShow(){ie(this,En)&&(Zt(this,En,!1),ie(this,an).hidden=!1)}get isVisible(){return ie(this,an).hidden===!1}}yt=new WeakMap,Nt=new WeakMap,It=new WeakMap,Xt=new WeakMap,tn=new WeakMap,fn=new WeakMap,an=new WeakMap,cn=new WeakMap,hn=new WeakMap,un=new WeakMap,xn=new WeakMap,en=new WeakMap,Bt=new WeakMap,zt=new WeakMap,nn=new WeakMap,_n=new WeakMap,En=new WeakMap,On=new WeakSet,Po=function(wt){wt.altKey||wt.shiftKey||wt.ctrlKey||wt.metaKey||(wt.key==="Enter"||wt.key==="Escape"&&ie(this,en))&&Dt(this,Vn,Gi).call(this)},Vn=new WeakSet,Gi=function(){Zt(this,en,!ie(this,en)),ie(this,en)?(Dt(this,Jn,La).call(this),ie(this,an).addEventListener("click",ie(this,tn)),ie(this,an).addEventListener("keydown",ie(this,Nt))):(Dt(this,rr,Ia).call(this),ie(this,an).removeEventListener("click",ie(this,tn)),ie(this,an).removeEventListener("keydown",ie(this,Nt)))},Jn=new WeakSet,La=function(){ie(this,Bt)||this.render(),this.isVisible?ie(this,en)&&ie(this,an).classList.add("focused"):(ie(this,an).hidden=!1,ie(this,an).style.zIndex=parseInt(ie(this,an).style.zIndex)+1e3)},rr=new WeakSet,Ia=function(){ie(this,an).classList.remove("focused"),!(ie(this,en)||!this.isVisible)&&(ie(this,an).hidden=!0,ie(this,an).style.zIndex=parseInt(ie(this,an).style.zIndex)-1e3)};class ft extends ke{constructor(wt){super(wt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=wt.data.textContent,this.textPosition=wt.data.textPosition,this.annotationEditorType=V.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const wt=document.createElement("div");wt.classList.add("annotationTextContent"),wt.setAttribute("role","comment");for(const fe of this.textContent){const mt=document.createElement("span");mt.textContent=fe,wt.append(mt)}this.container.append(wt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}B.FreeTextAnnotationElement=ft;class ct extends ke{constructor(fe){super(fe,{isRenderable:!0,ignoreBorder:!0});Ct(this,jt,null)}render(){this.container.classList.add("lineAnnotation");const fe=this.data,{width:mt,height:At}=nt(fe.rect),Ft=this.svgFactory.create(mt,At,!0),Ht=Zt(this,jt,this.svgFactory.createElement("svg:line"));return Ht.setAttribute("x1",fe.rect[2]-fe.lineCoordinates[0]),Ht.setAttribute("y1",fe.rect[3]-fe.lineCoordinates[1]),Ht.setAttribute("x2",fe.rect[2]-fe.lineCoordinates[2]),Ht.setAttribute("y2",fe.rect[3]-fe.lineCoordinates[3]),Ht.setAttribute("stroke-width",fe.borderStyle.width||1),Ht.setAttribute("stroke","transparent"),Ht.setAttribute("fill","transparent"),Ft.append(Ht),this.container.append(Ft),!fe.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ie(this,jt)}addHighlightArea(){this.container.classList.add("highlightArea")}}jt=new WeakMap;class Et extends ke{constructor(fe){super(fe,{isRenderable:!0,ignoreBorder:!0});Ct(this,Rt,null)}render(){this.container.classList.add("squareAnnotation");const fe=this.data,{width:mt,height:At}=nt(fe.rect),Ft=this.svgFactory.create(mt,At,!0),Ht=fe.borderStyle.width,Qt=Zt(this,Rt,this.svgFactory.createElement("svg:rect"));return Qt.setAttribute("x",Ht/2),Qt.setAttribute("y",Ht/2),Qt.setAttribute("width",mt-Ht),Qt.setAttribute("height",At-Ht),Qt.setAttribute("stroke-width",Ht||1),Qt.setAttribute("stroke","transparent"),Qt.setAttribute("fill","transparent"),Ft.append(Qt),this.container.append(Ft),!fe.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ie(this,Rt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rt=new WeakMap;class xt extends ke{constructor(fe){super(fe,{isRenderable:!0,ignoreBorder:!0});Ct(this,vn,null)}render(){this.container.classList.add("circleAnnotation");const fe=this.data,{width:mt,height:At}=nt(fe.rect),Ft=this.svgFactory.create(mt,At,!0),Ht=fe.borderStyle.width,Qt=Zt(this,vn,this.svgFactory.createElement("svg:ellipse"));return Qt.setAttribute("cx",mt/2),Qt.setAttribute("cy",At/2),Qt.setAttribute("rx",mt/2-Ht/2),Qt.setAttribute("ry",At/2-Ht/2),Qt.setAttribute("stroke-width",Ht||1),Qt.setAttribute("stroke","transparent"),Qt.setAttribute("fill","transparent"),Ft.append(Qt),this.container.append(Ft),!fe.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ie(this,vn)}addHighlightArea(){this.container.classList.add("highlightArea")}}vn=new WeakMap;class ht extends ke{constructor(fe){super(fe,{isRenderable:!0,ignoreBorder:!0});Ct(this,on,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const fe=this.data,{width:mt,height:At}=nt(fe.rect),Ft=this.svgFactory.create(mt,At,!0);let Ht=[];for(const mn of fe.vertices){const Pn=mn.x-fe.rect[0],$n=fe.rect[3]-mn.y;Ht.push(Pn+","+$n)}Ht=Ht.join(" ");const Qt=Zt(this,on,this.svgFactory.createElement(this.svgElementName));return Qt.setAttribute("points",Ht),Qt.setAttribute("stroke-width",fe.borderStyle.width||1),Qt.setAttribute("stroke","transparent"),Qt.setAttribute("fill","transparent"),Ft.append(Qt),this.container.append(Ft),!fe.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ie(this,on)}addHighlightArea(){this.container.classList.add("highlightArea")}}on=new WeakMap;class $t extends ht{constructor(wt){super(wt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ot extends ke{constructor(wt){super(wt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Vt extends ke{constructor(fe){super(fe,{isRenderable:!0,ignoreBorder:!0});Ct(this,ur,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=V.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const fe=this.data,{width:mt,height:At}=nt(fe.rect),Ft=this.svgFactory.create(mt,At,!0);for(const Ht of fe.inkLists){let Qt=[];for(const Pn of Ht){const $n=Pn.x-fe.rect[0],Yn=fe.rect[3]-Pn.y;Qt.push(`${$n},${Yn}`)}Qt=Qt.join(" ");const mn=this.svgFactory.createElement(this.svgElementName);ie(this,ur).push(mn),mn.setAttribute("points",Qt),mn.setAttribute("stroke-width",fe.borderStyle.width||1),mn.setAttribute("stroke","transparent"),mn.setAttribute("fill","transparent"),!fe.popupRef&&this.hasPopupData&&this._createPopup(),Ft.append(mn)}return this.container.append(Ft),this.container}getElementsToTriggerPopup(){return ie(this,ur)}addHighlightArea(){this.container.classList.add("highlightArea")}}ur=new WeakMap,B.InkAnnotationElement=Vt;class Pt extends ke{constructor(wt){super(wt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Yt extends ke{constructor(wt){super(wt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Jt extends ke{constructor(wt){super(wt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class sn extends ke{constructor(wt){super(wt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ln extends ke{constructor(wt){super(wt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}B.StampAnnotationElement=ln;class gt extends ke{constructor(fe){var Ft;super(fe,{isRenderable:!0});Ct(this,Ut);Ct(this,Er,null);const{filename:mt,content:At}=this.data.file;this.filename=(0,W.getFilenameFromUrl)(mt,!0),this.content=At,(Ft=this.linkService.eventBus)==null||Ft.dispatch("fileattachmentannotation",{source:this,filename:mt,content:At})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:fe,data:mt}=this;let At;mt.hasAppearance||mt.fillAlpha===0?At=document.createElement("div"):(At=document.createElement("img"),At.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(mt.name)?"paperclip":"pushpin"}.svg`,mt.fillAlpha&&mt.fillAlpha<1&&(At.style=`filter: opacity(${Math.round(mt.fillAlpha*100)}%);`)),At.addEventListener("dblclick",Dt(this,Ut,Da).bind(this)),Zt(this,Er,At);const{isMac:Ft}=V.FeatureTest.platform;return fe.addEventListener("keydown",Ht=>{Ht.key==="Enter"&&(Ft?Ht.metaKey:Ht.ctrlKey)&&Dt(this,Ut,Da).call(this)}),!mt.popupRef&&this.hasPopupData?this._createPopup():At.classList.add("popupTriggerArea"),fe.append(At),fe}getElementsToTriggerPopup(){return ie(this,Er)}addHighlightArea(){this.container.classList.add("highlightArea")}}Er=new WeakMap,Ut=new WeakSet,Da=function(){var fe;(fe=this.downloadManager)==null||fe.openOrDownloadData(this.container,this.content,this.filename)};class ce{constructor({div:wt,accessibilityManager:fe,annotationCanvasMap:mt,l10n:At,page:Ft,viewport:Ht}){Ct(this,Dn);Ct(this,bn);Ct(this,Rn,null);Ct(this,An,null);Ct(this,Fn,new Map);this.div=wt,Zt(this,Rn,fe),Zt(this,An,mt),this.l10n=At,this.page=Ft,this.viewport=Ht,this.zIndex=0,this.l10n||(this.l10n=ge.NullL10n)}async render(wt){const{annotations:fe}=wt,mt=this.div;(0,W.setLayerDimensions)(mt,this.viewport);const At=new Map,Ft={data:null,layer:mt,linkService:wt.linkService,downloadManager:wt.downloadManager,imageResourcesPath:wt.imageResourcesPath||"",renderForms:wt.renderForms!==!1,svgFactory:new W.DOMSVGFactory,annotationStorage:wt.annotationStorage||new J.AnnotationStorage,enableScripting:wt.enableScripting===!0,hasJSActions:wt.hasJSActions,fieldObjects:wt.fieldObjects,parent:this,elements:null};for(const Ht of fe){if(Ht.noHTML)continue;const Qt=Ht.annotationType===V.AnnotationType.POPUP;if(Qt){const $n=At.get(Ht.id);if(!$n)continue;Ft.elements=$n}else{const{width:$n,height:Yn}=nt(Ht.rect);if($n<=0||Yn<=0)continue}Ft.data=Ht;const mn=Ae.create(Ft);if(!mn.isRenderable)continue;if(!Qt&&Ht.popupRef){const $n=At.get(Ht.popupRef);$n?$n.push(mn):At.set(Ht.popupRef,[mn])}mn.annotationEditorType>0&&ie(this,Fn).set(mn.data.id,mn);const Pn=mn.render();Ht.hidden&&(Pn.style.visibility="hidden"),Dt(this,Dn,xo).call(this,Pn,Ht.id)}Dt(this,bn,Oa).call(this),await this.l10n.translate(mt)}update({viewport:wt}){const fe=this.div;this.viewport=wt,(0,W.setLayerDimensions)(fe,{rotation:wt.rotation}),Dt(this,bn,Oa).call(this),fe.hidden=!1}getEditableAnnotations(){return Array.from(ie(this,Fn).values())}getEditableAnnotation(wt){return ie(this,Fn).get(wt)}}Rn=new WeakMap,An=new WeakMap,Fn=new WeakMap,Dn=new WeakSet,xo=function(wt,fe){var At;const mt=wt.firstChild||wt;mt.id=`${V.AnnotationPrefix}${fe}`,this.div.append(wt),(At=ie(this,Rn))==null||At.moveElementInDOM(this.div,wt,mt,!1)},bn=new WeakSet,Oa=function(){if(!ie(this,An))return;const wt=this.div;for(const[fe,mt]of ie(this,An)){const At=wt.querySelector(`[data-annotation-id="${fe}"]`);if(!At)continue;const{firstChild:Ft}=At;Ft?Ft.nodeName==="CANVAS"?Ft.replaceWith(mt):Ft.before(mt):At.append(mt)}ie(this,An).clear()},B.AnnotationLayer=ce},(A,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.ColorConverters=void 0;function K(J){return Math.floor(Math.max(0,Math.min(1,J))*255).toString(16).padStart(2,"0")}function V(J){return Math.max(0,Math.min(255,255*J))}class W{static CMYK_G([ne,ge,ve,Te]){return["G",1-Math.min(1,.3*ne+.59*ve+.11*ge+Te)]}static G_CMYK([ne]){return["CMYK",0,0,0,1-ne]}static G_RGB([ne]){return["RGB",ne,ne,ne]}static G_rgb([ne]){return ne=V(ne),[ne,ne,ne]}static G_HTML([ne]){const ge=K(ne);return`#${ge}${ge}${ge}`}static RGB_G([ne,ge,ve]){return["G",.3*ne+.59*ge+.11*ve]}static RGB_rgb(ne){return ne.map(V)}static RGB_HTML(ne){return`#${ne.map(K).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([ne,ge,ve,Te]){return["RGB",1-Math.min(1,ne+Te),1-Math.min(1,ve+Te),1-Math.min(1,ge+Te)]}static CMYK_rgb([ne,ge,ve,Te]){return[V(1-Math.min(1,ne+Te)),V(1-Math.min(1,ve+Te)),V(1-Math.min(1,ge+Te))]}static CMYK_HTML(ne){const ge=this.CMYK_RGB(ne).slice(1);return this.RGB_HTML(ge)}static RGB_CMYK([ne,ge,ve]){const Te=1-ne,re=1-ge,st=1-ve,nt=Math.min(Te,re,st);return["CMYK",Te,re,st,nt]}}B.ColorConverters=W},(A,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.NullL10n=void 0,B.getL10nFallback=V;const K={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};K.print_progress_percent="{{progress}}%";function V(ne,ge){switch(ne){case"find_match_count":ne=`find_match_count[${ge.total===1?"one":"other"}]`;break;case"find_match_count_limit":ne=`find_match_count_limit[${ge.limit===1?"one":"other"}]`;break}return K[ne]||""}function W(ne,ge){return ge?ne.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(ve,Te)=>Te in ge?ge[Te]:"{{"+Te+"}}"):ne}const J={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(ne,ge=null,ve=V(ne,ge)){return W(ve,ge)},async translate(ne){}};B.NullL10n=J},(A,B,K)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.XfaLayer=void 0;var V=K(25);class W{static setupStorage(ne,ge,ve,Te,re){const st=Te.getValue(ge,{value:null});switch(ve.name){case"textarea":if(st.value!==null&&(ne.textContent=st.value),re==="print")break;ne.addEventListener("input",nt=>{Te.setValue(ge,{value:nt.target.value})});break;case"input":if(ve.attributes.type==="radio"||ve.attributes.type==="checkbox"){if(st.value===ve.attributes.xfaOn?ne.setAttribute("checked",!0):st.value===ve.attributes.xfaOff&&ne.removeAttribute("checked"),re==="print")break;ne.addEventListener("change",nt=>{Te.setValue(ge,{value:nt.target.checked?nt.target.getAttribute("xfaOn"):nt.target.getAttribute("xfaOff")})})}else{if(st.value!==null&&ne.setAttribute("value",st.value),re==="print")break;ne.addEventListener("input",nt=>{Te.setValue(ge,{value:nt.target.value})})}break;case"select":if(st.value!==null){ne.setAttribute("value",st.value);for(const nt of ve.children)nt.attributes.value===st.value?nt.attributes.selected=!0:nt.attributes.hasOwnProperty("selected")&&delete nt.attributes.selected}ne.addEventListener("input",nt=>{const Ae=nt.target.options,ke=Ae.selectedIndex===-1?"":Ae[Ae.selectedIndex].value;Te.setValue(ge,{value:ke})});break}}static setAttributes({html:ne,element:ge,storage:ve=null,intent:Te,linkService:re}){const{attributes:st}=ge,nt=ne instanceof HTMLAnchorElement;st.type==="radio"&&(st.name=`${st.name}-${Te}`);for(const[Ae,ke]of Object.entries(st))if(ke!=null)switch(Ae){case"class":ke.length&&ne.setAttribute(Ae,ke.join(" "));break;case"dataId":break;case"id":ne.setAttribute("data-element-id",ke);break;case"style":Object.assign(ne.style,ke);break;case"textContent":ne.textContent=ke;break;default:(!nt||Ae!=="href"&&Ae!=="newWindow")&&ne.setAttribute(Ae,ke)}nt&&re.addLinkAttributes(ne,st.href,st.newWindow),ve&&st.dataId&&this.setupStorage(ne,st.dataId,ge,ve)}static render(ne){var he;const ge=ne.annotationStorage,ve=ne.linkService,Te=ne.xfaHtml,re=ne.intent||"display",st=document.createElement(Te.name);Te.attributes&&this.setAttributes({html:st,element:Te,intent:re,linkService:ve});const nt=[[Te,-1,st]],Ae=ne.div;if(Ae.append(st),ne.viewport){const oe=`matrix(${ne.viewport.transform.join(",")})`;Ae.style.transform=oe}re!=="richText"&&Ae.setAttribute("class","xfaLayer xfaFont");const ke=[];for(;nt.length>0;){const[oe,Oe,it]=nt.at(-1);if(Oe+1===oe.children.length){nt.pop();continue}const at=oe.children[++nt.at(-1)[1]];if(at===null)continue;const{name:lt}=at;if(lt==="#text"){const Ie=document.createTextNode(at.value);ke.push(Ie),it.append(Ie);continue}const be=(he=at==null?void 0:at.attributes)!=null&&he.xmlns?document.createElementNS(at.attributes.xmlns,lt):document.createElement(lt);if(it.append(be),at.attributes&&this.setAttributes({html:be,element:at,storage:ge,intent:re,linkService:ve}),at.children&&at.children.length>0)nt.push([at,-1,be]);else if(at.value){const Ie=document.createTextNode(at.value);V.XfaText.shouldBuildText(lt)&&ke.push(Ie),be.append(Ie)}}for(const oe of Ae.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))oe.setAttribute("readOnly",!0);return{textDivs:ke}}static update(ne){const ge=`matrix(${ne.viewport.transform.join(",")})`;ne.div.style.transform=ge,ne.div.hidden=!1}}B.XfaLayer=W},(A,B,K)=>{var Te,re,st,nt,Ae,ke,he,oe,Oe,it,at,lt,be,Ie,vt,ko,Ce,Mo,ct,To,xt,Ro,$t,Na,Vt,Fo,Yt,ja,sn,Lo,gt,Io,Ee,Do,rt,Oo,pt,No,yt,ai,It,Ba,tn,qi,an,Xi,hn,Ei,xn,za,Bt,Ki,nn,jo,En,Ha,Gn,Bo,Xn,zo,Nn,Va,rn,Yi,Rt,yi;Object.defineProperty(B,"__esModule",{value:!0}),B.InkEditor=void 0;var V=K(1),W=K(4),J=K(29),ne=K(6),ge=K(5);const on=class extends W.AnnotationEditor{constructor(Ut){super({...Ut,name:"inkEditor"});Ct(this,vt);Ct(this,Ce);Ct(this,ct);Ct(this,xt);Ct(this,$t);Ct(this,Vt);Ct(this,Yt);Ct(this,sn);Ct(this,gt);Ct(this,Ee);Ct(this,rt);Ct(this,pt);Ct(this,yt);Ct(this,It);Ct(this,tn);Ct(this,an);Ct(this,hn);Ct(this,xn);Ct(this,Bt);Ct(this,Xn);Ct(this,Nn);Ct(this,rn);Ct(this,Rt);Ct(this,Te,0);Ct(this,re,0);Ct(this,st,this.canvasPointermove.bind(this));Ct(this,nt,this.canvasPointerleave.bind(this));Ct(this,Ae,this.canvasPointerup.bind(this));Ct(this,ke,this.canvasPointerdown.bind(this));Ct(this,he,new Path2D);Ct(this,oe,!1);Ct(this,Oe,!1);Ct(this,it,!1);Ct(this,at,null);Ct(this,lt,0);Ct(this,be,0);Ct(this,Ie,null);this.color=Ut.color||null,this.thickness=Ut.thickness||null,this.opacity=Ut.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Ut){W.AnnotationEditor.initialize(Ut,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Ut,yn){switch(Ut){case V.AnnotationEditorParamsType.INK_THICKNESS:on._defaultThickness=yn;break;case V.AnnotationEditorParamsType.INK_COLOR:on._defaultColor=yn;break;case V.AnnotationEditorParamsType.INK_OPACITY:on._defaultOpacity=yn/100;break}}updateParams(Ut,yn){switch(Ut){case V.AnnotationEditorParamsType.INK_THICKNESS:Dt(this,vt,ko).call(this,yn);break;case V.AnnotationEditorParamsType.INK_COLOR:Dt(this,Ce,Mo).call(this,yn);break;case V.AnnotationEditorParamsType.INK_OPACITY:Dt(this,ct,To).call(this,yn);break}}static get defaultPropertiesToUpdate(){return[[V.AnnotationEditorParamsType.INK_THICKNESS,on._defaultThickness],[V.AnnotationEditorParamsType.INK_COLOR,on._defaultColor||W.AnnotationEditor._defaultLineColor],[V.AnnotationEditorParamsType.INK_OPACITY,Math.round(on._defaultOpacity*100)]]}get propertiesToUpdate(){return[[V.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||on._defaultThickness],[V.AnnotationEditorParamsType.INK_COLOR,this.color||on._defaultColor||W.AnnotationEditor._defaultLineColor],[V.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??on._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Dt(this,tn,qi).call(this),Dt(this,an,Xi).call(this)),this.isAttachedToDOM||(this.parent.add(this),Dt(this,hn,Ei).call(this)),Dt(this,Rt,yi).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,ie(this,at).disconnect(),Zt(this,at,null),super.remove())}setParent(Ut){!this.parent&&Ut?this._uiManager.removeShouldRescale(this):this.parent&&Ut===null&&this._uiManager.addShouldRescale(this),super.setParent(Ut)}onScaleChanging(){const[Ut,yn]=this.parentDimensions,Rn=this.width*Ut,An=this.height*yn;this.setDimensions(Rn,An)}enableEditMode(){ie(this,oe)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",ie(this,ke)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",ie(this,ke)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){ie(this,oe)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Zt(this,oe,!0),this.div.classList.add("disabled"),Dt(this,Rt,yi).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Ut){this._focusEventsAllowed&&(super.focusin(Ut),this.enableEditMode())}canvasPointerdown(Ut){Ut.button!==0||!this.isInEditMode()||ie(this,oe)||(this.setInForeground(),Ut.preventDefault(),Ut.type!=="mouse"&&this.div.focus(),Dt(this,Vt,Fo).call(this,Ut.offsetX,Ut.offsetY))}canvasPointermove(Ut){Ut.preventDefault(),Dt(this,Yt,ja).call(this,Ut.offsetX,Ut.offsetY)}canvasPointerup(Ut){Ut.preventDefault(),Dt(this,It,Ba).call(this,Ut)}canvasPointerleave(Ut){Dt(this,It,Ba).call(this,Ut)}get isResizable(){return!this.isEmpty()&&ie(this,oe)}render(){if(this.div)return this.div;let Ut,yn;this.width&&(Ut=this.x,yn=this.y),super.render(),W.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(pr=>{var bn;return(bn=this.div)==null?void 0:bn.setAttribute("aria-label",pr)});const[Rn,An,Fn,Dn]=Dt(this,xt,Ro).call(this);if(this.setAt(Rn,An,0,0),this.setDims(Fn,Dn),Dt(this,tn,qi).call(this),this.width){const[pr,bn]=this.parentDimensions;this.setAspectRatio(this.width*pr,this.height*bn),this.setAt(Ut*pr,yn*bn,this.width*pr,this.height*bn),Zt(this,it,!0),Dt(this,hn,Ei).call(this),this.setDims(this.width*pr,this.height*bn),Dt(this,yt,ai).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Dt(this,an,Xi).call(this),this.div}setDimensions(Ut,yn){const Rn=Math.round(Ut),An=Math.round(yn);if(ie(this,lt)===Rn&&ie(this,be)===An)return;Zt(this,lt,Rn),Zt(this,be,An),this.canvas.style.visibility="hidden";const[Fn,Dn]=this.parentDimensions;this.width=Ut/Fn,this.height=yn/Dn,this.fixAndSetPosition(),ie(this,oe)&&Dt(this,xn,za).call(this,Ut,yn),Dt(this,hn,Ei).call(this),Dt(this,yt,ai).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Ut,yn,Rn){var Ft,Ht,Qt;if(Ut instanceof J.InkAnnotationElement)return null;const An=super.deserialize(Ut,yn,Rn);An.thickness=Ut.thickness,An.color=V.Util.makeHexColor(...Ut.color),An.opacity=Ut.opacity;const[Fn,Dn]=An.pageDimensions,pr=An.width*Fn,bn=An.height*Dn,sr=An.parentScale,In=Ut.thickness/2;Zt(An,oe,!0),Zt(An,lt,Math.round(pr)),Zt(An,be,Math.round(bn));const{paths:wt,rect:fe,rotation:mt}=Ut;for(let{bezier:mn}of wt){mn=Dt(Ft=on,Gn,Bo).call(Ft,mn,fe,mt);const Pn=[];An.paths.push(Pn);let $n=sr*(mn[0]-In),Yn=sr*(mn[1]-In);for(let Tn=2,Hn=mn.length;Tn<Hn;Tn+=6){const nr=sr*(mn[Tn]-In),fr=sr*(mn[Tn+1]-In),br=sr*(mn[Tn+2]-In),Br=sr*(mn[Tn+3]-In),Tr=sr*(mn[Tn+4]-In),Kr=sr*(mn[Tn+5]-In);Pn.push([[$n,Yn],[nr,fr],[br,Br],[Tr,Kr]]),$n=Tr,Yn=Kr}const Mn=Dt(this,nn,jo).call(this,Pn);An.bezierPath2D.push(Mn)}const At=Dt(Ht=An,Nn,Va).call(Ht);return Zt(An,re,Math.max(W.AnnotationEditor.MIN_SIZE,At[2]-At[0])),Zt(An,Te,Math.max(W.AnnotationEditor.MIN_SIZE,At[3]-At[1])),Dt(Qt=An,xn,za).call(Qt,pr,bn),An}serialize(){if(this.isEmpty())return null;const Ut=this.getRect(0,0),yn=W.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:V.AnnotationEditorType.INK,color:yn,thickness:this.thickness,opacity:this.opacity,paths:Dt(this,Xn,zo).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Ut),pageIndex:this.pageIndex,rect:Ut,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};let ve=on;Te=new WeakMap,re=new WeakMap,st=new WeakMap,nt=new WeakMap,Ae=new WeakMap,ke=new WeakMap,he=new WeakMap,oe=new WeakMap,Oe=new WeakMap,it=new WeakMap,at=new WeakMap,lt=new WeakMap,be=new WeakMap,Ie=new WeakMap,vt=new WeakSet,ko=function(Ut){const yn=this.thickness;this.addCommands({cmd:()=>{this.thickness=Ut,Dt(this,Rt,yi).call(this)},undo:()=>{this.thickness=yn,Dt(this,Rt,yi).call(this)},mustExec:!0,type:V.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ce=new WeakSet,Mo=function(Ut){const yn=this.color;this.addCommands({cmd:()=>{this.color=Ut,Dt(this,yt,ai).call(this)},undo:()=>{this.color=yn,Dt(this,yt,ai).call(this)},mustExec:!0,type:V.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ct=new WeakSet,To=function(Ut){Ut/=100;const yn=this.opacity;this.addCommands({cmd:()=>{this.opacity=Ut,Dt(this,yt,ai).call(this)},undo:()=>{this.opacity=yn,Dt(this,yt,ai).call(this)},mustExec:!0,type:V.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},xt=new WeakSet,Ro=function(){const{parentRotation:Ut,parentDimensions:[yn,Rn]}=this;switch(Ut){case 90:return[0,Rn,Rn,yn];case 180:return[yn,Rn,yn,Rn];case 270:return[yn,0,Rn,yn];default:return[0,0,yn,Rn]}},$t=new WeakSet,Na=function(){const{ctx:Ut,color:yn,opacity:Rn,thickness:An,parentScale:Fn,scaleFactor:Dn}=this;Ut.lineWidth=An*Fn/Dn,Ut.lineCap="round",Ut.lineJoin="round",Ut.miterLimit=10,Ut.strokeStyle=`${yn}${(0,ge.opacityToHex)(Rn)}`},Vt=new WeakSet,Fo=function(Ut,yn){this.canvas.addEventListener("contextmenu",ne.noContextMenu),this.canvas.addEventListener("pointerleave",ie(this,nt)),this.canvas.addEventListener("pointermove",ie(this,st)),this.canvas.addEventListener("pointerup",ie(this,Ae)),this.canvas.removeEventListener("pointerdown",ie(this,ke)),this.isEditing=!0,ie(this,it)||(Zt(this,it,!0),Dt(this,hn,Ei).call(this),this.thickness||(this.thickness=on._defaultThickness),this.color||(this.color=on._defaultColor||W.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=on._defaultOpacity)),this.currentPath.push([Ut,yn]),Zt(this,Oe,!1),Dt(this,$t,Na).call(this),Zt(this,Ie,()=>{Dt(this,Ee,Do).call(this),ie(this,Ie)&&window.requestAnimationFrame(ie(this,Ie))}),window.requestAnimationFrame(ie(this,Ie))},Yt=new WeakSet,ja=function(Ut,yn){const[Rn,An]=this.currentPath.at(-1);if(this.currentPath.length>1&&Ut===Rn&&yn===An)return;const Fn=this.currentPath;let Dn=ie(this,he);if(Fn.push([Ut,yn]),Zt(this,Oe,!0),Fn.length<=2){Dn.moveTo(...Fn[0]),Dn.lineTo(Ut,yn);return}Fn.length===3&&(Zt(this,he,Dn=new Path2D),Dn.moveTo(...Fn[0])),Dt(this,rt,Oo).call(this,Dn,...Fn.at(-3),...Fn.at(-2),Ut,yn)},sn=new WeakSet,Lo=function(){if(this.currentPath.length===0)return;const Ut=this.currentPath.at(-1);ie(this,he).lineTo(...Ut)},gt=new WeakSet,Io=function(Ut,yn){Zt(this,Ie,null),Ut=Math.min(Math.max(Ut,0),this.canvas.width),yn=Math.min(Math.max(yn,0),this.canvas.height),Dt(this,Yt,ja).call(this,Ut,yn),Dt(this,sn,Lo).call(this);let Rn;if(this.currentPath.length!==1)Rn=Dt(this,pt,No).call(this);else{const bn=[Ut,yn];Rn=[[bn,bn.slice(),bn.slice(),bn]]}const An=ie(this,he),Fn=this.currentPath;this.currentPath=[],Zt(this,he,new Path2D);const Dn=()=>{this.allRawPaths.push(Fn),this.paths.push(Rn),this.bezierPath2D.push(An),this.rebuild()},pr=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Dt(this,tn,qi).call(this),Dt(this,an,Xi).call(this)),Dt(this,Rt,yi).call(this))};this.addCommands({cmd:Dn,undo:pr,mustExec:!0})},Ee=new WeakSet,Do=function(){if(!ie(this,Oe))return;Zt(this,Oe,!1);const Ut=Math.ceil(this.thickness*this.parentScale),yn=this.currentPath.slice(-3),Rn=yn.map(Dn=>Dn[0]),An=yn.map(Dn=>Dn[1]);Math.min(...Rn)-Ut,Math.max(...Rn)+Ut,Math.min(...An)-Ut,Math.max(...An)+Ut;const{ctx:Fn}=this;Fn.save(),Fn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Dn of this.bezierPath2D)Fn.stroke(Dn);Fn.stroke(ie(this,he)),Fn.restore()},rt=new WeakSet,Oo=function(Ut,yn,Rn,An,Fn,Dn,pr){const bn=(yn+An)/2,sr=(Rn+Fn)/2,In=(An+Dn)/2,wt=(Fn+pr)/2;Ut.bezierCurveTo(bn+2*(An-bn)/3,sr+2*(Fn-sr)/3,In+2*(An-In)/3,wt+2*(Fn-wt)/3,In,wt)},pt=new WeakSet,No=function(){const Ut=this.currentPath;if(Ut.length<=2)return[[Ut[0],Ut[0],Ut.at(-1),Ut.at(-1)]];const yn=[];let Rn,[An,Fn]=Ut[0];for(Rn=1;Rn<Ut.length-2;Rn++){const[fe,mt]=Ut[Rn],[At,Ft]=Ut[Rn+1],Ht=(fe+At)/2,Qt=(mt+Ft)/2,mn=[An+2*(fe-An)/3,Fn+2*(mt-Fn)/3],Pn=[Ht+2*(fe-Ht)/3,Qt+2*(mt-Qt)/3];yn.push([[An,Fn],mn,Pn,[Ht,Qt]]),[An,Fn]=[Ht,Qt]}const[Dn,pr]=Ut[Rn],[bn,sr]=Ut[Rn+1],In=[An+2*(Dn-An)/3,Fn+2*(pr-Fn)/3],wt=[bn+2*(Dn-bn)/3,sr+2*(pr-sr)/3];return yn.push([[An,Fn],In,wt,[bn,sr]]),yn},yt=new WeakSet,ai=function(){if(this.isEmpty()){Dt(this,Bt,Ki).call(this);return}Dt(this,$t,Na).call(this);const{canvas:Ut,ctx:yn}=this;yn.setTransform(1,0,0,1,0,0),yn.clearRect(0,0,Ut.width,Ut.height),Dt(this,Bt,Ki).call(this);for(const Rn of this.bezierPath2D)yn.stroke(Rn)},It=new WeakSet,Ba=function(Ut){this.canvas.removeEventListener("pointerleave",ie(this,nt)),this.canvas.removeEventListener("pointermove",ie(this,st)),this.canvas.removeEventListener("pointerup",ie(this,Ae)),this.canvas.addEventListener("pointerdown",ie(this,ke)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",ne.noContextMenu)},10),Dt(this,gt,Io).call(this,Ut.offsetX,Ut.offsetY),this.addToAnnotationStorage(),this.setInBackground()},tn=new WeakSet,qi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",W.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Ut=>{var yn;return(yn=this.canvas)==null?void 0:yn.setAttribute("aria-label",Ut)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},an=new WeakSet,Xi=function(){Zt(this,at,new ResizeObserver(Ut=>{const yn=Ut[0].contentRect;yn.width&&yn.height&&this.setDimensions(yn.width,yn.height)})),ie(this,at).observe(this.div)},hn=new WeakSet,Ei=function(){if(!ie(this,it))return;const[Ut,yn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Ut),this.canvas.height=Math.ceil(this.height*yn),Dt(this,Bt,Ki).call(this)},xn=new WeakSet,za=function(Ut,yn){const Rn=Dt(this,rn,Yi).call(this),An=(Ut-Rn)/ie(this,re),Fn=(yn-Rn)/ie(this,Te);this.scaleFactor=Math.min(An,Fn)},Bt=new WeakSet,Ki=function(){const Ut=Dt(this,rn,Yi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Ut,this.translationY*this.scaleFactor+Ut)},nn=new WeakSet,jo=function(Ut){const yn=new Path2D;for(let Rn=0,An=Ut.length;Rn<An;Rn++){const[Fn,Dn,pr,bn]=Ut[Rn];Rn===0&&yn.moveTo(...Fn),yn.bezierCurveTo(Dn[0],Dn[1],pr[0],pr[1],bn[0],bn[1])}return yn},En=new WeakSet,Ha=function(Ut,yn,Rn){const[An,Fn,Dn,pr]=yn;switch(Rn){case 0:for(let bn=0,sr=Ut.length;bn<sr;bn+=2)Ut[bn]+=An,Ut[bn+1]=pr-Ut[bn+1];break;case 90:for(let bn=0,sr=Ut.length;bn<sr;bn+=2){const In=Ut[bn];Ut[bn]=Ut[bn+1]+An,Ut[bn+1]=In+Fn}break;case 180:for(let bn=0,sr=Ut.length;bn<sr;bn+=2)Ut[bn]=Dn-Ut[bn],Ut[bn+1]+=Fn;break;case 270:for(let bn=0,sr=Ut.length;bn<sr;bn+=2){const In=Ut[bn];Ut[bn]=Dn-Ut[bn+1],Ut[bn+1]=pr-In}break;default:throw new Error("Invalid rotation")}return Ut},Gn=new WeakSet,Bo=function(Ut,yn,Rn){const[An,Fn,Dn,pr]=yn;switch(Rn){case 0:for(let bn=0,sr=Ut.length;bn<sr;bn+=2)Ut[bn]-=An,Ut[bn+1]=pr-Ut[bn+1];break;case 90:for(let bn=0,sr=Ut.length;bn<sr;bn+=2){const In=Ut[bn];Ut[bn]=Ut[bn+1]-Fn,Ut[bn+1]=In-An}break;case 180:for(let bn=0,sr=Ut.length;bn<sr;bn+=2)Ut[bn]=Dn-Ut[bn],Ut[bn+1]-=Fn;break;case 270:for(let bn=0,sr=Ut.length;bn<sr;bn+=2){const In=Ut[bn];Ut[bn]=pr-Ut[bn+1],Ut[bn+1]=Dn-In}break;default:throw new Error("Invalid rotation")}return Ut},Xn=new WeakSet,zo=function(Ut,yn,Rn,An){var sr,In;const Fn=[],Dn=this.thickness/2,pr=Ut*yn+Dn,bn=Ut*Rn+Dn;for(const wt of this.paths){const fe=[],mt=[];for(let At=0,Ft=wt.length;At<Ft;At++){const[Ht,Qt,mn,Pn]=wt[At],$n=Ut*Ht[0]+pr,Yn=Ut*Ht[1]+bn,Mn=Ut*Qt[0]+pr,Tn=Ut*Qt[1]+bn,Hn=Ut*mn[0]+pr,nr=Ut*mn[1]+bn,fr=Ut*Pn[0]+pr,br=Ut*Pn[1]+bn;At===0&&(fe.push($n,Yn),mt.push($n,Yn)),fe.push(Mn,Tn,Hn,nr,fr,br),mt.push(Mn,Tn),At===Ft-1&&mt.push(fr,br)}Fn.push({bezier:Dt(sr=on,En,Ha).call(sr,fe,An,this.rotation),points:Dt(In=on,En,Ha).call(In,mt,An,this.rotation)})}return Fn},Nn=new WeakSet,Va=function(){let Ut=1/0,yn=-1/0,Rn=1/0,An=-1/0;for(const Fn of this.paths)for(const[Dn,pr,bn,sr]of Fn){const In=V.Util.bezierBoundingBox(...Dn,...pr,...bn,...sr);Ut=Math.min(Ut,In[0]),Rn=Math.min(Rn,In[1]),yn=Math.max(yn,In[2]),An=Math.max(An,In[3])}return[Ut,Rn,yn,An]},rn=new WeakSet,Yi=function(){return ie(this,oe)?Math.ceil(this.thickness*this.parentScale):0},Rt=new WeakSet,yi=function(Ut=!1){if(this.isEmpty())return;if(!ie(this,oe)){Dt(this,yt,ai).call(this);return}const yn=Dt(this,Nn,Va).call(this),Rn=Dt(this,rn,Yi).call(this);Zt(this,re,Math.max(W.AnnotationEditor.MIN_SIZE,yn[2]-yn[0])),Zt(this,Te,Math.max(W.AnnotationEditor.MIN_SIZE,yn[3]-yn[1]));const An=Math.ceil(Rn+ie(this,re)*this.scaleFactor),Fn=Math.ceil(Rn+ie(this,Te)*this.scaleFactor),[Dn,pr]=this.parentDimensions;this.width=An/Dn,this.height=Fn/pr,this.setAspectRatio(An,Fn);const bn=this.translationX,sr=this.translationY;this.translationX=-yn[0],this.translationY=-yn[1],Dt(this,hn,Ei).call(this),Dt(this,yt,ai).call(this),Zt(this,lt,An),Zt(this,be,Fn),this.setDims(An,Fn);const In=Ut?Rn/this.scaleFactor/2:0;this.translate(bn-this.translationX-In,sr-this.translationY-In)},Ct(ve,nn),Ct(ve,En),Ct(ve,Gn),Mr(ve,"_defaultColor",null),Mr(ve,"_defaultOpacity",1),Mr(ve,"_defaultThickness",1),Mr(ve,"_type","ink"),B.InkEditor=ve},(A,B,K)=>{var ve,Te,re,st,nt,Ae,ke,he,oe,Oe,it,Mi,lt,Ti,Ie,Zi,dt,Wa,ft,Ho,Et,Vo,ht,Ua,Ot,Ji,Pt,Wo;Object.defineProperty(B,"__esModule",{value:!0}),B.StampEditor=void 0;var V=K(1),W=K(4),J=K(6),ne=K(29);const Jt=class extends W.AnnotationEditor{constructor(gt){super({...gt,name:"stampEditor"});Ct(this,it);Ct(this,lt);Ct(this,Ie);Ct(this,dt);Ct(this,ft);Ct(this,Et);Ct(this,ht);Ct(this,Ot);Ct(this,Pt);Ct(this,ve,null);Ct(this,Te,null);Ct(this,re,null);Ct(this,st,null);Ct(this,nt,null);Ct(this,Ae,null);Ct(this,ke,null);Ct(this,he,null);Ct(this,oe,!1);Ct(this,Oe,!1);Zt(this,st,gt.bitmapUrl),Zt(this,nt,gt.bitmapFile)}static initialize(gt){W.AnnotationEditor.initialize(gt)}static get supportedTypes(){const gt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,V.shadow)(this,"supportedTypes",gt.map(ce=>`image/${ce}`))}static get supportedTypesStr(){return(0,V.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(gt){return this.supportedTypes.includes(gt)}static paste(gt,ce){ce.pasteEditor(V.AnnotationEditorType.STAMP,{bitmapFile:gt.getAsFile()})}remove(){var gt,ce;ie(this,Te)&&(Zt(this,ve,null),this._uiManager.imageManager.deleteId(ie(this,Te)),(gt=ie(this,Ae))==null||gt.remove(),Zt(this,Ae,null),(ce=ie(this,ke))==null||ce.disconnect(),Zt(this,ke,null)),super.remove()}rebuild(){if(!this.parent){ie(this,Te)&&Dt(this,Ie,Zi).call(this);return}super.rebuild(),this.div!==null&&(ie(this,Te)&&Dt(this,Ie,Zi).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(ie(this,re)||ie(this,ve)||ie(this,st)||ie(this,nt))}get isResizable(){return!0}render(){if(this.div)return this.div;let gt,ce;if(this.width&&(gt=this.x,ce=this.y),super.render(),this.div.hidden=!0,ie(this,ve)?Dt(this,dt,Wa).call(this):Dt(this,Ie,Zi).call(this),this.width){const[Ee,pe]=this.parentDimensions;this.setAt(gt*Ee,ce*pe,this.width*Ee,this.height*pe)}return this.div}static deserialize(gt,ce,Ee){if(gt instanceof ne.StampAnnotationElement)return null;const pe=super.deserialize(gt,ce,Ee),{rect:rt,bitmapUrl:ot,bitmapId:pt,isSvg:bt,accessibilityData:yt}=gt;pt&&Ee.imageManager.isValidId(pt)?Zt(pe,Te,pt):Zt(pe,st,ot),Zt(pe,oe,bt);const[Nt,It]=pe.pageDimensions;return pe.width=(rt[2]-rt[0])/Nt,pe.height=(rt[3]-rt[1])/It,yt&&(pe.altTextData=yt),pe}serialize(gt=!1,ce=null){if(this.isEmpty())return null;const Ee={annotationType:V.AnnotationEditorType.STAMP,bitmapId:ie(this,Te),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:ie(this,oe),structTreeParentId:this._structTreeParentId};if(gt)return Ee.bitmapUrl=Dt(this,Ot,Ji).call(this,!0),Ee.accessibilityData=this.altTextData,Ee;const{decorative:pe,altText:rt}=this.altTextData;if(!pe&&rt&&(Ee.accessibilityData={type:"Figure",alt:rt}),ce===null)return Ee;ce.stamps||(ce.stamps=new Map);const ot=ie(this,oe)?(Ee.rect[2]-Ee.rect[0])*(Ee.rect[3]-Ee.rect[1]):null;if(!ce.stamps.has(ie(this,Te)))ce.stamps.set(ie(this,Te),{area:ot,serialized:Ee}),Ee.bitmap=Dt(this,Ot,Ji).call(this,!1);else if(ie(this,oe)){const pt=ce.stamps.get(ie(this,Te));ot>pt.area&&(pt.area=ot,pt.serialized.bitmap.close(),pt.serialized.bitmap=Dt(this,Ot,Ji).call(this,!1))}return Ee}};let ge=Jt;ve=new WeakMap,Te=new WeakMap,re=new WeakMap,st=new WeakMap,nt=new WeakMap,Ae=new WeakMap,ke=new WeakMap,he=new WeakMap,oe=new WeakMap,Oe=new WeakMap,it=new WeakSet,Mi=function(gt,ce=!1){if(!gt){this.remove();return}Zt(this,ve,gt.bitmap),ce||(Zt(this,Te,gt.id),Zt(this,oe,gt.isSvg)),Dt(this,dt,Wa).call(this)},lt=new WeakSet,Ti=function(){Zt(this,re,null),this._uiManager.enableWaiting(!1),ie(this,Ae)&&this.div.focus()},Ie=new WeakSet,Zi=function(){if(ie(this,Te)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(ie(this,Te)).then(ce=>Dt(this,it,Mi).call(this,ce,!0)).finally(()=>Dt(this,lt,Ti).call(this));return}if(ie(this,st)){const ce=ie(this,st);Zt(this,st,null),this._uiManager.enableWaiting(!0),Zt(this,re,this._uiManager.imageManager.getFromUrl(ce).then(Ee=>Dt(this,it,Mi).call(this,Ee)).finally(()=>Dt(this,lt,Ti).call(this)));return}if(ie(this,nt)){const ce=ie(this,nt);Zt(this,nt,null),this._uiManager.enableWaiting(!0),Zt(this,re,this._uiManager.imageManager.getFromFile(ce).then(Ee=>Dt(this,it,Mi).call(this,Ee)).finally(()=>Dt(this,lt,Ti).call(this)));return}const gt=document.createElement("input");gt.type="file",gt.accept=Jt.supportedTypesStr,Zt(this,re,new Promise(ce=>{gt.addEventListener("change",async()=>{if(!gt.files||gt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Ee=await this._uiManager.imageManager.getFromFile(gt.files[0]);Dt(this,it,Mi).call(this,Ee)}ce()}),gt.addEventListener("cancel",()=>{this.remove(),ce()})}).finally(()=>Dt(this,lt,Ti).call(this))),gt.click()},dt=new WeakSet,Wa=function(){const{div:gt}=this;let{width:ce,height:Ee}=ie(this,ve);const[pe,rt]=this.pageDimensions,ot=.75;if(this.width)ce=this.width*pe,Ee=this.height*rt;else if(ce>ot*pe||Ee>ot*rt){const Nt=Math.min(ot*pe/ce,ot*rt/Ee);ce*=Nt,Ee*=Nt}const[pt,bt]=this.parentDimensions;this.setDims(ce*pt/pe,Ee*bt/rt),this._uiManager.enableWaiting(!1);const yt=Zt(this,Ae,document.createElement("canvas"));gt.append(yt),gt.hidden=!1,Dt(this,ht,Ua).call(this,ce,Ee),Dt(this,Pt,Wo).call(this),ie(this,Oe)||(this.parent.addUndoableEditor(this),Zt(this,Oe,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},ft=new WeakSet,Ho=function(gt,ce){var ot;const[Ee,pe]=this.parentDimensions;this.width=gt/Ee,this.height=ce/pe,this.setDims(gt,ce),(ot=this._initialOptions)!=null&&ot.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,ie(this,he)!==null&&clearTimeout(ie(this,he)),Zt(this,he,setTimeout(()=>{Zt(this,he,null),Dt(this,ht,Ua).call(this,gt,ce)},200))},Et=new WeakSet,Vo=function(gt,ce){const{width:Ee,height:pe}=ie(this,ve);let rt=Ee,ot=pe,pt=ie(this,ve);for(;rt>2*gt||ot>2*ce;){const bt=rt,yt=ot;rt>2*gt&&(rt=rt>=16384?Math.floor(rt/2)-1:Math.ceil(rt/2)),ot>2*ce&&(ot=ot>=16384?Math.floor(ot/2)-1:Math.ceil(ot/2));const Nt=new OffscreenCanvas(rt,ot);Nt.getContext("2d").drawImage(pt,0,0,bt,yt,0,0,rt,ot),pt=Nt.transferToImageBitmap()}return pt},ht=new WeakSet,Ua=function(gt,ce){gt=Math.ceil(gt),ce=Math.ceil(ce);const Ee=ie(this,Ae);if(!Ee||Ee.width===gt&&Ee.height===ce)return;Ee.width=gt,Ee.height=ce;const pe=ie(this,oe)?ie(this,ve):Dt(this,Et,Vo).call(this,gt,ce),rt=Ee.getContext("2d");rt.filter=this._uiManager.hcmFilter,rt.drawImage(pe,0,0,pe.width,pe.height,0,0,gt,ce)},Ot=new WeakSet,Ji=function(gt){if(gt){if(ie(this,oe)){const pe=this._uiManager.imageManager.getSvgUrl(ie(this,Te));if(pe)return pe}const ce=document.createElement("canvas");return{width:ce.width,height:ce.height}=ie(this,ve),ce.getContext("2d").drawImage(ie(this,ve),0,0),ce.toDataURL()}if(ie(this,oe)){const[ce,Ee]=this.pageDimensions,pe=Math.round(this.width*ce*J.PixelsPerInch.PDF_TO_CSS_UNITS),rt=Math.round(this.height*Ee*J.PixelsPerInch.PDF_TO_CSS_UNITS),ot=new OffscreenCanvas(pe,rt);return ot.getContext("2d").drawImage(ie(this,ve),0,0,ie(this,ve).width,ie(this,ve).height,0,0,pe,rt),ot.transferToImageBitmap()}return structuredClone(ie(this,ve))},Pt=new WeakSet,Wo=function(){Zt(this,ke,new ResizeObserver(gt=>{const ce=gt[0].contentRect;ce.width&&ce.height&&Dt(this,ft,Ho).call(this,ce.width,ce.height)})),ie(this,ke).observe(this.div)},Mr(ge,"_type","stamp"),B.StampEditor=ge}],__webpack_module_cache__={};function __w_pdfjs_require__(A){var B=__webpack_module_cache__[A];if(B!==void 0)return B.exports;var K=__webpack_module_cache__[A]={exports:{}};return __webpack_modules__[A](K,K.exports,__w_pdfjs_require__),K.exports}var __webpack_exports__={};return(()=>{var A=__webpack_exports__;Object.defineProperty(A,"__esModule",{value:!0}),Object.defineProperty(A,"AbortException",{enumerable:!0,get:function(){return B.AbortException}}),Object.defineProperty(A,"AnnotationEditorLayer",{enumerable:!0,get:function(){return J.AnnotationEditorLayer}}),Object.defineProperty(A,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return B.AnnotationEditorParamsType}}),Object.defineProperty(A,"AnnotationEditorType",{enumerable:!0,get:function(){return B.AnnotationEditorType}}),Object.defineProperty(A,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ne.AnnotationEditorUIManager}}),Object.defineProperty(A,"AnnotationLayer",{enumerable:!0,get:function(){return ge.AnnotationLayer}}),Object.defineProperty(A,"AnnotationMode",{enumerable:!0,get:function(){return B.AnnotationMode}}),Object.defineProperty(A,"CMapCompressionType",{enumerable:!0,get:function(){return B.CMapCompressionType}}),Object.defineProperty(A,"DOMSVGFactory",{enumerable:!0,get:function(){return V.DOMSVGFactory}}),Object.defineProperty(A,"FeatureTest",{enumerable:!0,get:function(){return B.FeatureTest}}),Object.defineProperty(A,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ve.GlobalWorkerOptions}}),Object.defineProperty(A,"ImageKind",{enumerable:!0,get:function(){return B.ImageKind}}),Object.defineProperty(A,"InvalidPDFException",{enumerable:!0,get:function(){return B.InvalidPDFException}}),Object.defineProperty(A,"MissingPDFException",{enumerable:!0,get:function(){return B.MissingPDFException}}),Object.defineProperty(A,"OPS",{enumerable:!0,get:function(){return B.OPS}}),Object.defineProperty(A,"PDFDataRangeTransport",{enumerable:!0,get:function(){return K.PDFDataRangeTransport}}),Object.defineProperty(A,"PDFDateString",{enumerable:!0,get:function(){return V.PDFDateString}}),Object.defineProperty(A,"PDFWorker",{enumerable:!0,get:function(){return K.PDFWorker}}),Object.defineProperty(A,"PasswordResponses",{enumerable:!0,get:function(){return B.PasswordResponses}}),Object.defineProperty(A,"PermissionFlag",{enumerable:!0,get:function(){return B.PermissionFlag}}),Object.defineProperty(A,"PixelsPerInch",{enumerable:!0,get:function(){return V.PixelsPerInch}}),Object.defineProperty(A,"PromiseCapability",{enumerable:!0,get:function(){return B.PromiseCapability}}),Object.defineProperty(A,"RenderingCancelledException",{enumerable:!0,get:function(){return V.RenderingCancelledException}}),Object.defineProperty(A,"SVGGraphics",{enumerable:!0,get:function(){return K.SVGGraphics}}),Object.defineProperty(A,"UnexpectedResponseException",{enumerable:!0,get:function(){return B.UnexpectedResponseException}}),Object.defineProperty(A,"Util",{enumerable:!0,get:function(){return B.Util}}),Object.defineProperty(A,"VerbosityLevel",{enumerable:!0,get:function(){return B.VerbosityLevel}}),Object.defineProperty(A,"XfaLayer",{enumerable:!0,get:function(){return Te.XfaLayer}}),Object.defineProperty(A,"build",{enumerable:!0,get:function(){return K.build}}),Object.defineProperty(A,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return B.createValidAbsoluteUrl}}),Object.defineProperty(A,"getDocument",{enumerable:!0,get:function(){return K.getDocument}}),Object.defineProperty(A,"getFilenameFromUrl",{enumerable:!0,get:function(){return V.getFilenameFromUrl}}),Object.defineProperty(A,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return V.getPdfFilenameFromUrl}}),Object.defineProperty(A,"getXfaPageViewport",{enumerable:!0,get:function(){return V.getXfaPageViewport}}),Object.defineProperty(A,"isDataScheme",{enumerable:!0,get:function(){return V.isDataScheme}}),Object.defineProperty(A,"isPdfFile",{enumerable:!0,get:function(){return V.isPdfFile}}),Object.defineProperty(A,"loadScript",{enumerable:!0,get:function(){return V.loadScript}}),Object.defineProperty(A,"noContextMenu",{enumerable:!0,get:function(){return V.noContextMenu}}),Object.defineProperty(A,"normalizeUnicode",{enumerable:!0,get:function(){return B.normalizeUnicode}}),Object.defineProperty(A,"renderTextLayer",{enumerable:!0,get:function(){return W.renderTextLayer}}),Object.defineProperty(A,"setLayerDimensions",{enumerable:!0,get:function(){return V.setLayerDimensions}}),Object.defineProperty(A,"shadow",{enumerable:!0,get:function(){return B.shadow}}),Object.defineProperty(A,"updateTextLayer",{enumerable:!0,get:function(){return W.updateTextLayer}}),Object.defineProperty(A,"version",{enumerable:!0,get:function(){return K.version}});var B=__w_pdfjs_require__(1),K=__w_pdfjs_require__(2),V=__w_pdfjs_require__(6),W=__w_pdfjs_require__(26),J=__w_pdfjs_require__(27),ne=__w_pdfjs_require__(5),ge=__w_pdfjs_require__(29),ve=__w_pdfjs_require__(14),Te=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);(function(A){var B=reactExports,K=pdfExports;function V(me){var ut=Object.create(null);return me&&Object.keys(me).forEach(function(St){if(St!=="default"){var kt=Object.getOwnPropertyDescriptor(me,St);Object.defineProperty(ut,St,kt.get?kt:{enumerable:!0,get:function(){return me[St]}})}}),ut.default=me,Object.freeze(ut)}var W,J=V(B),ne=V(K);A.AnnotationType=void 0,(W=A.AnnotationType||(A.AnnotationType={}))[W.Text=1]="Text",W[W.Link=2]="Link",W[W.FreeText=3]="FreeText",W[W.Line=4]="Line",W[W.Square=5]="Square",W[W.Circle=6]="Circle",W[W.Polygon=7]="Polygon",W[W.Polyline=8]="Polyline",W[W.Highlight=9]="Highlight",W[W.Underline=10]="Underline",W[W.Squiggly=11]="Squiggly",W[W.StrikeOut=12]="StrikeOut",W[W.Stamp=13]="Stamp",W[W.Caret=14]="Caret",W[W.Ink=15]="Ink",W[W.Popup=16]="Popup",W[W.FileAttachment=17]="FileAttachment";var ge=function(me,ut){return ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(St,kt){St.__proto__=kt}||function(St,kt){for(var Tt in kt)Object.prototype.hasOwnProperty.call(kt,Tt)&&(St[Tt]=kt[Tt])},ge(me,ut)};function ve(me,ut){if(typeof ut!="function"&&ut!==null)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");function St(){this.constructor=me}ge(me,ut),me.prototype=ut===null?Object.create(ut):(St.prototype=ut.prototype,new St)}var Te,re=function(){return re=Object.assign||function(me){for(var ut,St=1,kt=arguments.length;St<kt;St++)for(var Tt in ut=arguments[St])Object.prototype.hasOwnProperty.call(ut,Tt)&&(me[Tt]=ut[Tt]);return me},re.apply(this,arguments)};A.TextDirection=void 0,(Te=A.TextDirection||(A.TextDirection={})).RightToLeft="RTL",Te.LeftToRight="LTR";var st,nt=J.createContext({currentTheme:"light",direction:A.TextDirection.LeftToRight,setCurrentTheme:function(){}}),Ae=function(me){var ut=[];return Object.keys(me).forEach(function(St){St&&me[St]&&ut.push(St)}),ut.join(" ")},ke=typeof window<"u"?J.useLayoutEffect:J.useEffect,he=function(me){var ut=J.useRef(null),St=me.once,kt=me.threshold,Tt=me.onVisibilityChanged;return ke(function(){var Lt=ut.current;if(Lt){var Kt=new IntersectionObserver(function(Wt){Wt.forEach(function(Mt){var qt=Mt.isIntersecting,Gt=Mt.intersectionRatio;Tt({isVisible:qt,ratio:Gt}),qt&&St&&(Kt.unobserve(Lt),Kt.disconnect())})},{threshold:kt||0});return Kt.observe(Lt),function(){Kt.unobserve(Lt),Kt.disconnect()}}},[]),ut},oe=function(me){var ut=me.children,St=me.ignoreDirection,kt=St!==void 0&&St,Tt=me.size,Lt=Tt===void 0?24:Tt,Kt=J.useContext(nt).direction,Wt=!kt&&Kt===A.TextDirection.RightToLeft,Mt="".concat(Lt||24,"px");return J.createElement("svg",{"aria-hidden":"true",className:Ae({"rpv-core__icon":!0,"rpv-core__icon--rtl":Wt}),focusable:"false",height:Mt,viewBox:"0 0 24 24",width:Mt},ut)},Oe=function(){return J.createElement(oe,{size:16},J.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},it=function(me){var ut=me.children,St=me.testId,kt=me.onClick,Tt=J.useContext(nt).direction===A.TextDirection.RightToLeft,Lt=St?{"data-testid":St}:{};return J.createElement("button",re({className:Ae({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":Tt}),type:"button",onClick:kt},Lt),ut)},at=function(me){var ut=me.size,St=ut===void 0?"4rem":ut,kt=me.testId,Tt=J.useState(!1),Lt=Tt[0],Kt=Tt[1],Wt=kt?{"data-testid":kt}:{},Mt=he({onVisibilityChanged:function(qt){Kt(qt.isVisible)}});return J.createElement("div",re({},Wt,{className:Ae({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Lt}),ref:Mt,style:{height:St,width:St}}))},lt=function(me){var ut=me.ariaLabel,St=ut===void 0?"":ut,kt=me.autoFocus,Tt=kt!==void 0&&kt,Lt=me.placeholder,Kt=Lt===void 0?"":Lt,Wt=me.testId,Mt=me.type,qt=Mt===void 0?"text":Mt,Gt=me.value,gn=Gt===void 0?"":Gt,pn=me.onChange,dn=me.onKeyDown,kn=dn===void 0?function(){}:dn,Cn=J.useContext(nt).direction,wn=J.useRef(),hr=Cn===A.TextDirection.RightToLeft,qn={ref:wn,"data-testid":"","aria-label":St,className:Ae({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":hr}),placeholder:Kt,value:gn,onChange:function(Kn){return pn(Kn.target.value)},onKeyDown:kn};return Wt&&(qn["data-testid"]=Wt),ke(function(){if(Tt){var Kn=wn.current;if(Kn){var tr=window.scrollX,jn=window.scrollY;Kn.focus(),window.scrollTo(tr,jn)}}},[]),qt==="text"?J.createElement("input",re({type:"text"},qn)):J.createElement("input",re({type:"password"},qn))};(function(me){me[me.ExitFullScreen=0]="ExitFullScreen",me[me.FullScreenChange=1]="FullScreenChange",me[me.FullScreenElement=2]="FullScreenElement",me[me.FullScreenEnabled=3]="FullScreenEnabled",me[me.RequestFullScreen=4]="RequestFullScreen"})(st||(st={}));var be,Ie={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},vt={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},dt={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},Ce=typeof window<"u",ft=Ce&&(st.FullScreenEnabled in document&&Ie||vt.FullScreenEnabled in document&&vt||dt.FullScreenEnabled in document&&dt)||Ie,ct=function(){return Ce&&ft.FullScreenEnabled in document&&document[ft.FullScreenEnabled]===!0},Et=function(me){return Ce?me[ft.ExitFullScreen]():Promise.resolve({})},xt=function(){return Ce?document[ft.FullScreenElement]:null},ht=function(me,ut){var St=J.useRef(),kt=function(){St.current&&clearTimeout(St.current)};return J.useEffect(function(){return function(){return kt()}},[]),J.useCallback(function(){for(var Tt=[],Lt=0;Lt<arguments.length;Lt++)Tt[Lt]=arguments[Lt];kt(),St.current=setTimeout(function(){me.apply(void 0,Tt)},ut)},[me,ut])},$t=function(){var me=J.useRef(!1);return J.useEffect(function(){return me.current=!0,function(){me.current=!1}},[]),me},Ot=function(me){var ut=J.useRef(me);return J.useEffect(function(){ut.current=me},[me]),ut.current};(function(me){me.NotRenderedYet="NotRenderedYet",me.Rendering="Rendering",me.Rendered="Rendered"})(be||(be={}));var Vt,Pt=-9999,Yt=function(me){var ut=me.doc,St=ut.numPages,kt=ut.loadingTask.docId,Tt=J.useMemo(function(){return Array(St).fill(null).map(function(Wt,Mt){return{pageIndex:Mt,renderStatus:be.NotRenderedYet,visibility:Pt}})},[kt]),Lt=J.useRef({currentRenderingPage:-1,startRange:0,endRange:St-1,visibilities:Tt}),Kt=function(Wt,Mt){Lt.current.visibilities[Wt].visibility=Mt};return{getHighestPriorityPage:function(){var Wt=Lt.current.visibilities.slice(Lt.current.startRange,Lt.current.endRange+1).filter(function(pn){return pn.visibility>Pt});if(!Wt.length)return-1;for(var Mt=Wt[0].pageIndex,qt=Wt[Wt.length-1].pageIndex,Gt=Wt.length,gn=0;gn<Gt;gn++){if(Wt[gn].renderStatus===be.Rendering)return-1;if(Wt[gn].renderStatus===be.NotRenderedYet)return Wt[gn].pageIndex}return qt+1<St&&Lt.current.visibilities[qt+1].renderStatus!==be.Rendered?qt+1:Mt-1>=0&&Lt.current.visibilities[Mt-1].renderStatus!==be.Rendered?Mt-1:-1},isInRange:function(Wt){return Wt>=Lt.current.startRange&&Wt<=Lt.current.endRange},markNotRendered:function(){for(var Wt=0;Wt<St;Wt++)Lt.current.visibilities[Wt].renderStatus=be.NotRenderedYet},markRendered:function(Wt){Lt.current.visibilities[Wt].renderStatus=be.Rendered},markRendering:function(Wt){Lt.current.currentRenderingPage!==-1&&Lt.current.currentRenderingPage!==Wt&&Lt.current.visibilities[Lt.current.currentRenderingPage].renderStatus===be.Rendering&&(Lt.current.visibilities[Lt.current.currentRenderingPage].renderStatus=be.NotRenderedYet),Lt.current.visibilities[Wt].renderStatus=be.Rendering,Lt.current.currentRenderingPage=Wt},setOutOfRange:function(Wt){Kt(Wt,Pt)},setRange:function(Wt,Mt){Lt.current.startRange=Wt,Lt.current.endRange=Mt;for(var qt=0;qt<St;qt++)(qt<Wt||qt>Mt)&&(Lt.current.visibilities[qt].visibility=Pt,Lt.current.visibilities[qt].renderStatus=be.NotRenderedYet)},setVisibility:Kt}},Jt={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},sn=J.createContext({l10n:Jt,setL10n:function(){}}),ln=0,gt=function(){return ln++},ce=function(me,ut,St){var kt=function(Tt){var Lt=ut.current;if(Lt){var Kt=Tt.target;if(Kt instanceof Element&&Kt.shadowRoot){var Wt=Tt.composedPath();Wt.length>0&&!Lt.contains(Wt[0])&&St()}else Lt.contains(Kt)||St()}};J.useEffect(function(){if(me){var Tt={capture:!0};return document.addEventListener("click",kt,Tt),function(){document.removeEventListener("click",kt,Tt)}}},[])},Ee=function(me){var ut=function(St){St.key==="Escape"&&me()};J.useEffect(function(){return document.addEventListener("keyup",ut),function(){document.removeEventListener("keyup",ut)}},[])},pe=function(me){var ut=me.ariaControlsSuffix,St=me.children,kt=me.closeOnClickOutside,Tt=me.closeOnEscape,Lt=me.onToggle,Kt=J.useRef(),Wt=J.useContext(nt).direction===A.TextDirection.RightToLeft;return J.useEffect(function(){var Mt=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=Mt}},[]),Ee(function(){Kt.current&&Tt&&Lt()}),ce(kt,Kt,Lt),ke(function(){var Mt=Kt.current;if(Mt){var qt=.75*document.body.clientHeight;Mt.getBoundingClientRect().height>=qt&&(Mt.style.overflow="auto",Mt.style.maxHeight="".concat(qt,"px"))}},[]),J.createElement("div",{"aria-modal":"true",className:Ae({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Wt}),id:"rpv-core__modal-body-".concat(ut),ref:Kt,role:"dialog",tabIndex:-1},St)},rt=function(me){var ut=me.children;return J.createElement("div",{className:"rpv-core__modal-overlay"},ut)};A.ToggleStatus=void 0,(Vt=A.ToggleStatus||(A.ToggleStatus={})).Close="Close",Vt.Open="Open",Vt.Toggle="Toggle";var ot,pt=function(me){var ut=J.useState(me),St=ut[0],kt=ut[1];return{opened:St,toggle:function(Tt){switch(Tt){case A.ToggleStatus.Close:kt(!1);break;case A.ToggleStatus.Open:kt(!0);break;case A.ToggleStatus.Toggle:default:kt(function(Lt){return!Lt})}}}},bt=function(me){var ut=me.content,St=me.isOpened,kt=St!==void 0&&St,Tt=me.target,Lt=pt(kt),Kt=Lt.opened,Wt=Lt.toggle;return J.createElement(J.Fragment,null,Tt&&Tt(Wt,Kt),Kt&&ut(Wt))};A.Position=void 0,(ot=A.Position||(A.Position={})).TopLeft="TOP_LEFT",ot.TopCenter="TOP_CENTER",ot.TopRight="TOP_RIGHT",ot.RightTop="RIGHT_TOP",ot.RightCenter="RIGHT_CENTER",ot.RightBottom="RIGHT_BOTTOM",ot.BottomLeft="BOTTOM_LEFT",ot.BottomCenter="BOTTOM_CENTER",ot.BottomRight="BOTTOM_RIGHT",ot.LeftTop="LEFT_TOP",ot.LeftCenter="LEFT_CENTER",ot.LeftBottom="LEFT_BOTTOM";var yt,Nt,It,Xt,tn,fn,an,cn,hn=function(me,ut,St,kt,Tt){ke(function(){var Lt=ut.current,Kt=me.current,Wt=St.current;if(Kt&&Lt&&Wt){var Mt=Wt.getBoundingClientRect(),qt=function(pn,dn,kn,Cn){var wn=dn.getBoundingClientRect(),hr=pn.getBoundingClientRect(),qn=hr.height,Kn=hr.width,tr=0,jn=0;switch(kn){case A.Position.TopLeft:tr=wn.top-qn,jn=wn.left;break;case A.Position.TopCenter:tr=wn.top-qn,jn=wn.left+wn.width/2-Kn/2;break;case A.Position.TopRight:tr=wn.top-qn,jn=wn.left+wn.width-Kn;break;case A.Position.RightTop:tr=wn.top,jn=wn.left+wn.width;break;case A.Position.RightCenter:tr=wn.top+wn.height/2-qn/2,jn=wn.left+wn.width;break;case A.Position.RightBottom:tr=wn.top+wn.height-qn,jn=wn.left+wn.width;break;case A.Position.BottomLeft:tr=wn.top+wn.height,jn=wn.left;break;case A.Position.BottomCenter:tr=wn.top+wn.height,jn=wn.left+wn.width/2-Kn/2;break;case A.Position.BottomRight:tr=wn.top+wn.height,jn=wn.left+wn.width-Kn;break;case A.Position.LeftTop:tr=wn.top,jn=wn.left-Kn;break;case A.Position.LeftCenter:tr=wn.top+wn.height/2-qn/2,jn=wn.left-Kn;break;case A.Position.LeftBottom:tr=wn.top+wn.height-qn,jn=wn.left-Kn}return{left:jn+(Cn.left||0),top:tr+(Cn.top||0)}}(Kt,Lt,kt,Tt),Gt=qt.top,gn=qt.left;Kt.style.top="".concat(Gt-Mt.top,"px"),Kt.style.left="".concat(gn-Mt.left,"px")}},[])},un=function(me){var ut,St=me.customClassName,kt=me.position;return J.createElement("div",{className:Ae((ut={"rpv-core__arrow":!0,"rpv-core__arrow--tl":kt===A.Position.TopLeft,"rpv-core__arrow--tc":kt===A.Position.TopCenter,"rpv-core__arrow--tr":kt===A.Position.TopRight,"rpv-core__arrow--rt":kt===A.Position.RightTop,"rpv-core__arrow--rc":kt===A.Position.RightCenter,"rpv-core__arrow--rb":kt===A.Position.RightBottom,"rpv-core__arrow--bl":kt===A.Position.BottomLeft,"rpv-core__arrow--bc":kt===A.Position.BottomCenter,"rpv-core__arrow--br":kt===A.Position.BottomRight,"rpv-core__arrow--lt":kt===A.Position.LeftTop,"rpv-core__arrow--lc":kt===A.Position.LeftCenter,"rpv-core__arrow--lb":kt===A.Position.LeftBottom},ut["".concat(St)]=St!=="",ut))})},xn=function(me){var ut=me.ariaControlsSuffix,St=me.children,kt=me.closeOnClickOutside,Tt=me.offset,Lt=me.position,Kt=me.targetRef,Wt=me.onClose,Mt=J.useRef(),qt=J.useRef(),Gt=J.useRef(),gn=J.useContext(nt).direction===A.TextDirection.RightToLeft;ce(kt,Mt,Wt),hn(Mt,Kt,Gt,Lt,Tt),ke(function(){var dn=qt.current;if(dn){var kn=.75*document.body.clientHeight;dn.getBoundingClientRect().height>=kn&&(dn.style.overflow="auto",dn.style.maxHeight="".concat(kn,"px"))}},[]);var pn="rpv-core__popover-body-inner-".concat(ut);return J.createElement(J.Fragment,null,J.createElement("div",{ref:Gt,style:{left:0,position:"absolute",top:0}}),J.createElement("div",{"aria-describedby":pn,className:Ae({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":gn}),id:"rpv-core__popover-body-".concat(ut),ref:Mt,role:"dialog",tabIndex:-1},J.createElement(un,{customClassName:"rpv-core__popover-body-arrow",position:Lt}),J.createElement("div",{id:pn,ref:qt},St)))},en=function(me){var ut=me.closeOnEscape,St=me.onClose,kt=J.useRef();return Ee(function(){kt.current&&ut&&St()}),J.createElement("div",{className:"rpv-core__popover-overlay",ref:kt})},Bt=function(me){var ut=me.ariaControlsSuffix,St=me.children,kt=me.contentRef,Tt=me.offset,Lt=me.position,Kt=me.targetRef,Wt=J.useRef(),Mt=J.useContext(nt).direction===A.TextDirection.RightToLeft;return hn(kt,Kt,Wt,Lt,Tt),J.createElement(J.Fragment,null,J.createElement("div",{ref:Wt,style:{left:0,position:"absolute",top:0}}),J.createElement("div",{className:Ae({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":Mt}),id:"rpv-core__tooltip-body-".concat(ut),ref:kt,role:"tooltip"},J.createElement(un,{customClassName:"rpv-core__tooltip-body-arrow",position:Lt}),J.createElement("div",{className:"rpv-core__tooltip-body-content"},St)))};A.FullScreenMode=void 0,(yt=A.FullScreenMode||(A.FullScreenMode={})).Normal="Normal",yt.Entering="Entering",yt.Entered="Entered",yt.EnteredCompletely="EnteredCompletely",yt.Exitting="Exitting",yt.Exited="Exited",A.LayerRenderStatus=void 0,(Nt=A.LayerRenderStatus||(A.LayerRenderStatus={}))[Nt.PreRender=0]="PreRender",Nt[Nt.DidRender=1]="DidRender",A.PageMode=void 0,(It=A.PageMode||(A.PageMode={})).Attachments="UseAttachments",It.Bookmarks="UseOutlines",It.ContentGroup="UseOC",It.Default="UserNone",It.FullScreen="FullScreen",It.Thumbnails="UseThumbs",A.PasswordStatus=void 0,(Xt=A.PasswordStatus||(A.PasswordStatus={})).RequiredPassword="RequiredPassword",Xt.WrongPassword="WrongPassword",A.RotateDirection=void 0,(tn=A.RotateDirection||(A.RotateDirection={})).Backward="Backward",tn.Forward="Forward",A.ScrollMode=void 0,(fn=A.ScrollMode||(A.ScrollMode={})).Page="Page",fn.Horizontal="Horizontal",fn.Vertical="Vertical",fn.Wrapped="Wrapped",A.SpecialZoomLevel=void 0,(an=A.SpecialZoomLevel||(A.SpecialZoomLevel={})).ActualSize="ActualSize",an.PageFit="PageFit",an.PageWidth="PageWidth",A.ViewMode=void 0,(cn=A.ViewMode||(A.ViewMode={})).DualPage="DualPage",cn.DualPageWithCover="DualPageWithCover",cn.SinglePage="SinglePage";var zt,nn=function(me,ut){return me.reduce(function(St,kt,Tt){return Tt%ut?St[St.length-1].push(kt):St.push([kt]),St},[])},_n=function(me,ut){switch(ut[1].name){case"XYZ":return{bottomOffset:function(St,kt){return ut[3]===null?kt:ut[3]},leftOffset:function(St,kt){return ut[2]===null?0:ut[2]},pageIndex:me,scaleTo:ut[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:me,scaleTo:A.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:ut[2],leftOffset:0,pageIndex:me,scaleTo:A.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:me,scaleTo:1}}},En=new Map,On=new Map,Gn=function(me,ut){return"".concat(me.loadingTask.docId,"___").concat(ut.num,"R").concat(ut.gen===0?"":ut.gen)},Vn=function(me,ut,St){En.set(Gn(me,ut),St)},Xn=function(me,ut){if(!me)return Promise.reject("The document is not loaded yet");var St="".concat(me.loadingTask.docId,"___").concat(ut),kt=On.get(St);return kt?Promise.resolve(kt):new Promise(function(Tt,Lt){me.getPage(ut+1).then(function(Kt){On.set(St,Kt),Kt.ref&&Vn(me,Kt.ref,ut),Tt(Kt)})})},Jn=function(me,ut){return new Promise(function(St){new Promise(function(kt){typeof ut=="string"?me.getDestination(ut).then(function(Tt){kt(Tt)}):kt(ut)}).then(function(kt){if(typeof kt[0]=="object"&&kt[0]!==null){var Tt=kt[0],Lt=function(Wt,Mt){var qt=Gn(Wt,Mt);return En.has(qt)?En.get(qt):null}(me,Tt);Lt===null?me.getPageIndex(Tt).then(function(Wt){Vn(me,Tt,Wt),Jn(me,ut).then(function(Mt){return St(Mt)})}):St(_n(Lt,kt))}else{var Kt=_n(kt[0],kt);St(Kt)}})})};(function(me){me[me.Solid=1]="Solid",me[me.Dashed=2]="Dashed",me[me.Beveled=3]="Beveled",me[me.Inset=4]="Inset",me[me.Underline=5]="Underline"})(zt||(zt={}));var Nn,rr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),rn=function(me,ut,St,kt){var Tt=parseInt(me,10);return Tt>=ut&&Tt<=St?Tt:kt},jt=function(me){return me.contentsObj?me.contentsObj.str:me.contents||""},Rt=function(me){return me.titleObj?me.titleObj.str:me.title||""},vn=function(me){var ut=me.annotation,St=J.useContext(nt).direction,kt=Rt(ut),Tt=jt(ut),Lt=St===A.TextDirection.RightToLeft,Kt=J.useRef(),Wt="";if(ut.modificationDate){var Mt=function(qt){var Gt=rr.exec(qt);if(!Gt)return null;var gn=parseInt(Gt[1],10),pn=rn(Gt[2],1,12,1)-1,dn=rn(Gt[3],1,31,1),kn=rn(Gt[4],0,23,0),Cn=rn(Gt[5],0,59,0),wn=rn(Gt[6],0,59,0),hr=Gt[7]||"Z",qn=rn(Gt[8],0,23,0),Kn=rn(Gt[9],0,59,0);switch(hr){case"-":kn+=qn,Cn+=Kn;break;case"+":kn-=qn,Cn-=Kn}return new Date(Date.UTC(gn,pn,dn,kn,Cn,wn))}(ut.modificationDate);Wt=Mt?"".concat(Mt.toLocaleDateString(),", ").concat(Mt.toLocaleTimeString()):""}return J.useLayoutEffect(function(){if(Kt.current){var qt=document.querySelector('[data-annotation-id="'.concat(ut.id,'"]'));if(qt){var Gt=qt;return Gt.style.zIndex+=1,function(){Gt.style.zIndex="".concat(parseInt(Gt.style.zIndex,10)-1)}}}},[]),J.createElement("div",{ref:Kt,className:Ae({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Lt}),style:{top:ut.annotationType===A.AnnotationType.Popup?"":"100%"}},kt&&J.createElement(J.Fragment,null,J.createElement("div",{className:Ae({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Lt,"rpv-core__annotation-popup-title--rtl":Lt})},kt),J.createElement("div",{className:"rpv-core__annotation-popup-date"},Wt)),Tt&&J.createElement("div",{className:"rpv-core__annotation-popup-content"},Tt.split(`
`).map(function(qt,Gt){return J.createElement(J.Fragment,{key:Gt},qt,J.createElement("br",null))})))};(function(me){me.Click="Click",me.Hover="Hover"})(Nn||(Nn={}));var on,ur=function(me){var ut,St=me.annotation,kt=me.children,Tt=me.ignoreBorder,Lt=me.hasPopup,Kt=me.isRenderable,Wt=me.page,Mt=me.viewport,qt=St.rect,Gt=function(){var Qn=pt(!1),yr=Qn.opened,_r=Qn.toggle,Sr=J.useState(Nn.Hover),wr=Sr[0],$r=Sr[1];return{opened:yr,closeOnHover:function(){wr===Nn.Hover&&_r(A.ToggleStatus.Close)},openOnHover:function(){wr===Nn.Hover&&_r(A.ToggleStatus.Open)},toggleOnClick:function(){switch(wr){case Nn.Click:yr&&$r(Nn.Hover),_r(A.ToggleStatus.Toggle);break;case Nn.Hover:$r(Nn.Click),_r(A.ToggleStatus.Open)}}}}(),gn=Gt.closeOnHover,pn=Gt.opened,dn=Gt.openOnHover,kn=Gt.toggleOnClick,Cn=(ut=[qt[0],Wt.view[3]+Wt.view[1]-qt[1],qt[2],Wt.view[3]+Wt.view[1]-qt[3]],[Math.min(ut[0],ut[2]),Math.min(ut[1],ut[3]),Math.max(ut[0],ut[2]),Math.max(ut[1],ut[3])]),wn=qt[2]-qt[0],hr=qt[3]-qt[1],qn={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!Tt&&St.borderStyle.width>0){switch(St.borderStyle.style){case zt.Dashed:qn.borderStyle="dashed";break;case zt.Solid:qn.borderStyle="solid";break;case zt.Underline:qn=Object.assign({borderBottomStyle:"solid"},qn);case zt.Beveled:case zt.Inset:}var Kn=St.borderStyle.width;qn.borderWidth="".concat(Kn,"px"),St.borderStyle.style!==zt.Underline&&(wn-=2*Kn,hr-=2*Kn);var tr=St.borderStyle,jn=tr.horizontalCornerRadius,ir=tr.verticalCornerRadius;(jn>0||ir>0)&&(qn.borderRadius="".concat(jn,"px / ").concat(ir,"px")),St.color?qn.borderColor="rgb(".concat(0|St.color[0],", ").concat(0|St.color[1],", ").concat(0|St.color[2],")"):qn.borderWidth="0"}return J.createElement(J.Fragment,null,Kt&&kt({popup:{opened:pn,closeOnHover:gn,openOnHover:dn,toggleOnClick:kn},slot:{attrs:{style:Object.assign({height:"".concat(hr,"px"),left:"".concat(Cn[0],"px"),top:"".concat(Cn[1],"px"),transform:"matrix(".concat(Mt.transform.join(","),")"),transformOrigin:"-".concat(Cn[0],"px -").concat(Cn[1],"px"),width:"".concat(wn,"px")},qn)},children:J.createElement(J.Fragment,null,Lt&&pn&&J.createElement(vn,{annotation:St}))}}))},Er=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt);return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":ut.id,onClick:Mt.popup.toggleOnClick,onMouseEnter:Mt.popup.openOnHover,onMouseLeave:Mt.popup.closeOnHover}),Mt.slot.children)})},Ut=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt),Mt=ut.rect,qt=Mt[2]-Mt[0],Gt=Mt[3]-Mt[1],gn=ut.borderStyle.width;return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(pn){return J.createElement("div",re({},pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":ut.id,onClick:pn.popup.toggleOnClick,onMouseEnter:pn.popup.openOnHover,onMouseLeave:pn.popup.closeOnHover}),J.createElement("svg",{height:"".concat(Gt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(qt," ").concat(Gt),width:"".concat(qt,"px")},J.createElement("circle",{cy:Gt/2,fill:"none",rx:qt/2-gn/2,ry:Gt/2-gn/2,stroke:"transparent",strokeWidth:gn||1})),pn.slot.children)})},yn=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=Rt(ut),Lt=jt(ut),Kt=!(ut.hasPopup!==!1||!Tt&&!Lt),Wt=function(){var Mt,qt,Gt,gn,pn=ut.file;pn&&(Mt=pn.filename,qt=pn.content,Gt=typeof qt=="string"?"":URL.createObjectURL(new Blob([qt],{type:""})),(gn=document.createElement("a")).style.display="none",gn.href=Gt||Mt,gn.setAttribute("download",function(dn){var kn=dn.split("/").pop();return kn?kn.split("#")[0].split("?")[0]:dn}(Mt)),document.body.appendChild(gn),gn.click(),document.body.removeChild(gn),Gt&&URL.revokeObjectURL(Gt))};return J.createElement(ur,{annotation:ut,hasPopup:Kt,ignoreBorder:!0,isRenderable:!0,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":ut.id,onClick:Mt.popup.toggleOnClick,onDoubleClick:Wt,onMouseEnter:Mt.popup.openOnHover,onMouseLeave:Mt.popup.closeOnHover}),Mt.slot.children)})},Rn=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt);return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":ut.id,onClick:Mt.popup.toggleOnClick,onMouseEnter:Mt.popup.openOnHover,onMouseLeave:Mt.popup.closeOnHover}),Mt.slot.children)})},An=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=Rt(ut),Lt=jt(ut),Kt=!(!Tt&&!Lt),Wt=!ut.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(ut.parentType)!==-1;return ke(function(){if(ut.parentId){var Mt=document.querySelector('[data-annotation-id="'.concat(ut.parentId,'"]')),qt=document.querySelector('[data-annotation-id="'.concat(ut.id,'"]'));if(Mt&&qt){var Gt=parseFloat(Mt.style.left),gn=parseFloat(Mt.style.top)+parseFloat(Mt.style.height);qt.style.left="".concat(Gt,"px"),qt.style.top="".concat(gn,"px"),qt.style.transformOrigin="-".concat(Gt,"px -").concat(gn,"px")}}},[]),J.createElement(ur,{annotation:ut,hasPopup:Wt,ignoreBorder:!1,isRenderable:Kt,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":ut.id}),J.createElement(vn,{annotation:ut}))})},Fn=function(me){var ut=me.annotation,St=me.childAnnotation,kt=me.page,Tt=me.viewport,Lt=ut.hasPopup===!1,Kt=Rt(ut),Wt=jt(ut),Mt=!!(ut.hasPopup||Kt||Wt);if(ut.quadPoints&&ut.quadPoints.length>0){var qt=ut.quadPoints.map(function(Gt){return Object.assign({},ut,{rect:[Gt[2].x,Gt[2].y,Gt[1].x,Gt[1].y],quadPoints:[]})});return J.createElement(J.Fragment,null,qt.map(function(Gt,gn){return J.createElement(Fn,{key:gn,annotation:Gt,childAnnotation:St,page:kt,viewport:Tt})}))}return J.createElement(ur,{annotation:ut,hasPopup:Lt,ignoreBorder:!0,isRenderable:Mt,page:kt,viewport:Tt},function(Gt){return J.createElement(J.Fragment,null,J.createElement("div",re({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":ut.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children),St&&St.annotationType===A.AnnotationType.Popup&&Gt.popup.opened&&J.createElement(An,{annotation:St,page:kt,viewport:Tt}))})},Dn=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt),Mt=ut.rect,qt=Mt[2]-Mt[0],Gt=Mt[3]-Mt[1],gn=ut.borderStyle.width;return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(pn){return J.createElement("div",re({},pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":ut.id,onClick:pn.popup.toggleOnClick,onMouseEnter:pn.popup.openOnHover,onMouseLeave:pn.popup.closeOnHover}),ut.inkLists&&ut.inkLists.length&&J.createElement("svg",{height:"".concat(Gt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(qt," ").concat(Gt),width:"".concat(qt,"px")},ut.inkLists.map(function(dn,kn){return J.createElement("polyline",{key:kn,fill:"none",stroke:"transparent",strokeWidth:gn||1,points:dn.map(function(Cn){return"".concat(Cn.x-Mt[0],",").concat(Mt[3]-Cn.y)}).join(" ")})})),pn.slot.children)})},pr=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt),Mt=ut.rect,qt=Mt[2]-Mt[0],Gt=Mt[3]-Mt[1],gn=ut.borderStyle.width;return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(pn){return J.createElement("div",re({},pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":ut.id,onClick:pn.popup.toggleOnClick,onMouseEnter:pn.popup.openOnHover,onMouseLeave:pn.popup.closeOnHover}),J.createElement("svg",{height:"".concat(Gt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(qt," ").concat(Gt),width:"".concat(qt,"px")},J.createElement("line",{stroke:"transparent",strokeWidth:gn||1,x1:Mt[2]-ut.lineCoordinates[0],x2:Mt[2]-ut.lineCoordinates[2],y1:Mt[3]-ut.lineCoordinates[1],y2:Mt[3]-ut.lineCoordinates[3]})),pn.slot.children)})},bn=/^([^\w]*)(javascript|data|vbscript)/im,sr=/&#(\w+)(^\w|;)?/g,In=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,wt=/^([^:]+):/gm,fe=function(me,ut){ut===void 0&&(ut="about:blank");var St,kt=(St=me||"",St.replace(sr,function(Wt,Mt){return String.fromCharCode(Mt)})).replace(In,"").trim();if(!kt)return ut;var Tt=kt[0];if(Tt==="."||Tt==="/")return kt;var Lt=kt.match(wt);if(!Lt)return kt;var Kt=Lt[0];return bn.test(Kt)?ut:kt},mt=function(me){var ut,St=me.annotation,kt=me.annotationContainerRef,Tt=me.doc,Lt=me.outlines,Kt=me.page,Wt=me.pageIndex,Mt=me.scale,qt=me.viewport,Gt=me.onExecuteNamedAction,gn=me.onJumpFromLinkAnnotation,pn=me.onJumpToDest,dn=J.useRef(),kn=Lt&&Lt.length&&St.dest&&typeof St.dest=="string"?(ut=Lt.find(function(qn){return qn.dest===St.dest}))===null||ut===void 0?void 0:ut.title:"",Cn=!!(St.url||St.dest||St.action||St.unsafeUrl),wn={};if(St.url||St.unsafeUrl){var hr=fe(St.url||St.unsafeUrl,"");hr?wn={"data-target":"external",href:hr,rel:"noopener noreferrer nofollow",target:St.newWindow?"_blank":"",title:hr}:Cn=!1}else wn={href:"","data-annotation-link":St.id,onClick:function(qn){qn.preventDefault(),St.action?Gt(St.action):Jn(Tt,St.dest).then(function(Kn){var tr=dn.current,jn=kt.current;if(tr&&jn){var ir=tr.getBoundingClientRect();jn.style.setProperty("height","100%"),jn.style.setProperty("width","100%");var Qn=jn.getBoundingClientRect();jn.style.removeProperty("height"),jn.style.removeProperty("width");var yr=(ir.left-Qn.left)/Mt,_r=(Qn.bottom-ir.bottom+ir.height)/Mt;gn({bottomOffset:_r,label:kn,leftOffset:yr,pageIndex:Wt})}pn(Kn)})}};return kn&&(wn=Object.assign({},wn,{title:kn,"aria-label":kn})),J.createElement(ur,{annotation:St,hasPopup:!1,ignoreBorder:!1,isRenderable:Cn,page:Kt,viewport:qt},function(qn){return J.createElement("div",re({},qn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":St.id,"data-testid":"core__annotation--link-".concat(St.id)}),J.createElement("a",re({ref:dn},wn)))})},At=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt),Mt=ut.rect,qt=Mt[2]-Mt[0],Gt=Mt[3]-Mt[1],gn=ut.borderStyle.width;return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(pn){return J.createElement("div",re({},pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":ut.id,onClick:pn.popup.toggleOnClick,onMouseEnter:pn.popup.openOnHover,onMouseLeave:pn.popup.closeOnHover}),ut.vertices&&ut.vertices.length&&J.createElement("svg",{height:"".concat(Gt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(qt," ").concat(Gt),width:"".concat(qt,"px")},J.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:gn||1,points:ut.vertices.map(function(dn){return"".concat(dn.x-Mt[0],",").concat(Mt[3]-dn.y)}).join(" ")})),pn.slot.children)})},Ft=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt),Mt=ut.rect,qt=Mt[2]-Mt[0],Gt=Mt[3]-Mt[1],gn=ut.borderStyle.width;return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(pn){return J.createElement("div",re({},pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":ut.id,onClick:pn.popup.toggleOnClick,onMouseEnter:pn.popup.openOnHover,onMouseLeave:pn.popup.closeOnHover}),ut.vertices&&ut.vertices.length&&J.createElement("svg",{height:"".concat(Gt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(qt," ").concat(Gt),width:"".concat(qt,"px")},J.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:gn||1,points:ut.vertices.map(function(dn){return"".concat(dn.x-Mt[0],",").concat(Mt[3]-dn.y)}).join(" ")})),pn.slot.children)})},Ht=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt),Mt=ut.rect,qt=Mt[2]-Mt[0],Gt=Mt[3]-Mt[1],gn=ut.borderStyle.width;return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(pn){return J.createElement("div",re({},pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":ut.id,onClick:pn.popup.toggleOnClick,onMouseEnter:pn.popup.openOnHover,onMouseLeave:pn.popup.closeOnHover}),J.createElement("svg",{height:"".concat(Gt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(qt," ").concat(Gt),width:"".concat(qt,"px")},J.createElement("rect",{height:Gt-gn,fill:"none",stroke:"transparent",strokeWidth:gn||1,x:gn/2,y:gn/2,width:qt-gn})),pn.slot.children)})},Qt=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt);return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":ut.id,onClick:Mt.popup.toggleOnClick,onMouseEnter:Mt.popup.openOnHover,onMouseLeave:Mt.popup.closeOnHover}),Mt.slot.children)})},mn=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt);return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":ut.id,onClick:Mt.popup.toggleOnClick,onMouseEnter:Mt.popup.openOnHover,onMouseLeave:Mt.popup.closeOnHover}),Mt.slot.children)})},Pn=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt);return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":ut.id,onClick:Mt.popup.toggleOnClick,onMouseEnter:Mt.popup.openOnHover,onMouseLeave:Mt.popup.closeOnHover}),Mt.slot.children)})},$n=function(){return J.createElement(oe,{size:16},J.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),J.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),J.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),J.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Yn=function(){return J.createElement(oe,{size:16},J.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),J.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),J.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),J.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),J.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),J.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),J.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),J.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),J.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),J.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Mn=function(){return J.createElement(oe,{size:16},J.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),J.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Tn=function(){return J.createElement(oe,{size:16},J.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),J.createElement("path",{d:"M6 4.5L6 0.5"}),J.createElement("path",{d:"M18 4.5L18 0.5"}),J.createElement("path",{d:"M10 4.5L10 0.5"}),J.createElement("path",{d:"M14 4.5L14 0.5"}))},Hn=function(){return J.createElement(oe,{size:16},J.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),J.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),J.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},nr=function(){return J.createElement(oe,{size:16},J.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},fr=function(me){var ut=me.annotation,St=me.childAnnotation,kt=me.page,Tt=me.viewport,Lt=ut.hasPopup===!1,Kt=Rt(ut),Wt=jt(ut),Mt=!!(ut.hasPopup||Kt||Wt),qt=ut.name?ut.name.toLowerCase():"";return J.createElement(ur,{annotation:ut,hasPopup:Lt,ignoreBorder:!1,isRenderable:Mt,page:kt,viewport:Tt},function(Gt){return J.createElement(J.Fragment,null,J.createElement("div",re({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":ut.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),qt&&J.createElement("div",{className:"rpv-core__annotation-text-icon"},qt==="check"&&J.createElement(Oe,null),qt==="comment"&&J.createElement($n,null),qt==="help"&&J.createElement(Yn,null),qt==="insert"&&J.createElement(nr,null),qt==="key"&&J.createElement(Mn,null),qt==="note"&&J.createElement(Tn,null),(qt==="newparagraph"||qt==="paragraph")&&J.createElement(Hn,null)),Gt.slot.children),St&&St.annotationType===A.AnnotationType.Popup&&Gt.popup.opened&&J.createElement(An,{annotation:St,page:kt,viewport:Tt}))})},br=function(me){var ut=me.annotation,St=me.page,kt=me.viewport,Tt=ut.hasPopup===!1,Lt=Rt(ut),Kt=jt(ut),Wt=!!(ut.hasPopup||Lt||Kt);return J.createElement(ur,{annotation:ut,hasPopup:Tt,ignoreBorder:!0,isRenderable:Wt,page:St,viewport:kt},function(Mt){return J.createElement("div",re({},Mt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":ut.id,onClick:Mt.popup.toggleOnClick,onMouseEnter:Mt.popup.openOnHover,onMouseLeave:Mt.popup.closeOnHover}),Mt.slot.children)})},Br=function(me){var ut=me.annotations,St=me.doc,kt=me.outlines,Tt=me.page,Lt=me.pageIndex,Kt=me.plugins,Wt=me.rotation,Mt=me.scale,qt=me.onExecuteNamedAction,Gt=me.onJumpFromLinkAnnotation,gn=me.onJumpToDest,pn=J.useRef(),dn=Tt.getViewport({rotation:Wt,scale:Mt}).clone({dontFlip:!0}),kn=ut.filter(function(Cn){return!Cn.parentId});return ke(function(){var Cn=pn.current;Cn&&Kt.forEach(function(wn){wn.onAnnotationLayerRender&&wn.onAnnotationLayerRender({annotations:kn,container:Cn,pageIndex:Lt,rotation:Wt,scale:Mt})})},[]),J.createElement("div",{ref:pn,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Lt)},kn.map(function(Cn){var wn=ut.find(function(hr){return hr.parentId===Cn.id});switch(Cn.annotationType){case A.AnnotationType.Caret:return J.createElement(Er,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Circle:return J.createElement(Ut,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.FileAttachment:return J.createElement(yn,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.FreeText:return J.createElement(Rn,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Highlight:return J.createElement(Fn,{key:Cn.id,annotation:Cn,childAnnotation:wn,page:Tt,viewport:dn});case A.AnnotationType.Ink:return J.createElement(Dn,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Line:return J.createElement(pr,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Link:return J.createElement(mt,{key:Cn.id,annotation:Cn,annotationContainerRef:pn,doc:St,outlines:kt,page:Tt,pageIndex:Lt,scale:Mt,viewport:dn,onExecuteNamedAction:qt,onJumpFromLinkAnnotation:Gt,onJumpToDest:gn});case A.AnnotationType.Polygon:return J.createElement(At,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Polyline:return J.createElement(Ft,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Popup:return J.createElement(An,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Square:return J.createElement(Ht,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Squiggly:return J.createElement(Qt,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Stamp:return J.createElement(mn,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.StrikeOut:return J.createElement(Pn,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});case A.AnnotationType.Text:return J.createElement(fr,{key:Cn.id,annotation:Cn,childAnnotation:wn,page:Tt,viewport:dn});case A.AnnotationType.Underline:return J.createElement(br,{key:Cn.id,annotation:Cn,page:Tt,viewport:dn});default:return J.createElement(J.Fragment,{key:Cn.id})}}))},Tr=function(me){var ut=me.page,St=me.renderAnnotations,kt=$t(),Tt=J.useState({loading:!0,annotations:[]}),Lt=Tt[0],Kt=Tt[1];return J.useEffect(function(){ut.getAnnotations({intent:"display"}).then(function(Wt){kt.current&&Kt({loading:!1,annotations:Wt})})},[]),Lt.loading?J.createElement(J.Fragment,null):St(Lt.annotations)},Kr=function(me){var ut=me.doc,St=me.outlines,kt=me.page,Tt=me.pageIndex,Lt=me.plugins,Kt=me.rotation,Wt=me.scale,Mt=me.onExecuteNamedAction,qt=me.onJumpFromLinkAnnotation,Gt=me.onJumpToDest;return J.createElement(Tr,{page:kt,renderAnnotations:function(gn){return J.createElement(Br,{annotations:gn,doc:ut,outlines:St,page:kt,pageIndex:Tt,plugins:Lt,rotation:Kt,scale:Wt,onExecuteNamedAction:Mt,onJumpFromLinkAnnotation:qt,onJumpToDest:Gt})}})},Zr=function(me,ut){var St=me%ut;return St===0?me:Math.floor(me-St)},ni=function(me){var ut=me.canvasLayerRef,St=me.height,kt=me.page,Tt=me.pageIndex,Lt=me.plugins,Kt=me.rotation,Wt=me.scale,Mt=me.width,qt=me.onRenderCanvasCompleted,Gt=J.useRef();return ke(function(){var gn=Gt.current;gn&&gn.cancel();var pn=ut.current;pn.removeAttribute("data-testid"),Lt.forEach(function(Qn){Qn.onCanvasLayerRender&&Qn.onCanvasLayerRender({ele:pn,pageIndex:Tt,rotation:Kt,scale:Wt,status:A.LayerRenderStatus.PreRender})});var dn=kt.getViewport({rotation:Kt,scale:Wt}),kn=window.devicePixelRatio||1,Cn=Math.sqrt(16777216/(dn.width*dn.height)),wn=kn>Cn;wn?pn.style.transform="scale(1, 1)":pn.style.removeProperty("transform");var hr=Math.min(Cn,kn),qn=function(Qn,yr){var _r,Sr;if(Math.floor(Qn)===Qn)return[Qn,1];var wr=1/Qn;if(wr>yr)return[1,yr];if(Math.floor(wr)===wr)return[1,wr];for(var $r=Qn>1?wr:Qn,zr=0,Lr=1,Hr=1,Dr=1;;){var Nr=zr+Hr,jr=Lr+Dr;if(jr>yr)break;$r<=Nr/jr?(Hr=(_r=[Nr,jr])[0],Dr=_r[1]):(zr=(Sr=[Nr,jr])[0],Lr=Sr[1])}return $r<(zr/Lr+Hr/Dr)/2?$r===Qn?[zr,Lr]:[Lr,zr]:$r===Qn?[Hr,Dr]:[Dr,Hr]}(hr,8),Kn=qn[0],tr=qn[1];pn.width=Zr(dn.width*hr,Kn),pn.height=Zr(dn.height*hr,Kn),pn.style.width="".concat(Zr(dn.width,tr),"px"),pn.style.height="".concat(Zr(dn.height,tr),"px"),pn.hidden=!0;var jn=pn.getContext("2d",{alpha:!1}),ir=wn||kn!==1?[hr,0,0,hr,0,0]:null;return Gt.current=kt.render({canvasContext:jn,transform:ir,viewport:dn}),Gt.current.promise.then(function(){pn.hidden=!1,pn.setAttribute("data-testid","core__canvas-layer-".concat(Tt)),Lt.forEach(function(Qn){Qn.onCanvasLayerRender&&Qn.onCanvasLayerRender({ele:pn,pageIndex:Tt,rotation:Kt,scale:Wt,status:A.LayerRenderStatus.DidRender})}),qt()},function(){qt()}),function(){pn&&(pn.width=0,pn.height=0)}},[]),J.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(St,"px"),width:"".concat(Mt,"px")}},J.createElement("canvas",{ref:ut}))},Ri=function(me){var ut=me.height,St=me.page,kt=me.rotation,Tt=me.scale,Lt=me.width,Kt=J.useRef();return ke(function(){var Wt=Kt.current,Mt=St.getViewport({rotation:kt,scale:Tt});St.getOperatorList().then(function(qt){(function(){var Gt=Kt.current;Gt&&(Gt.innerHTML="")})(),new ne.SVGGraphics(St.commonObjs,St.objs).getSVG(qt,Mt).then(function(Gt){Gt.style.height="".concat(ut,"px"),Gt.style.width="".concat(Lt,"px"),Wt.appendChild(Gt)})})},[]),J.createElement("div",{className:"rpv-core__svg-layer",ref:Kt})},Uo=function(me){var ut=me.containerRef,St=me.page,kt=me.pageIndex,Tt=me.plugins,Lt=me.rotation,Kt=me.scale,Wt=me.onRenderTextCompleted,Mt=J.useRef(),qt=function(){var Gt=ut.current;Gt&&([].slice.call(Gt.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(gn){return Gt.removeChild(gn)}),[].slice.call(Gt.querySelectorAll('br[role="presentation"]')).forEach(function(gn){return Gt.removeChild(gn)}))};return ke(function(){var Gt=Mt.current;Gt&&Gt.cancel();var gn=ut.current;if(gn){gn.removeAttribute("data-testid");var pn=St.getViewport({rotation:Lt,scale:Kt});return Tt.forEach(function(dn){dn.onTextLayerRender&&dn.onTextLayerRender({ele:gn,pageIndex:kt,scale:Kt,status:A.LayerRenderStatus.PreRender})}),St.getTextContent().then(function(dn){qt(),Mt.current=ne.renderTextLayer({container:gn,textContent:dn,textContentSource:dn,viewport:pn}),Mt.current.promise.then(function(){gn.setAttribute("data-testid","core__text-layer-".concat(kt)),[].slice.call(gn.children).forEach(function(kn){kn.classList.contains("rpv-core__text-layer-text--not")||kn.classList.add("rpv-core__text-layer-text")}),Tt.forEach(function(kn){kn.onTextLayerRender&&kn.onTextLayerRender({ele:gn,pageIndex:kt,scale:Kt,status:A.LayerRenderStatus.DidRender})}),Wt()},function(){gn.removeAttribute("data-testid"),Wt()})}),function(){var dn;qt(),(dn=Mt.current)===null||dn===void 0||dn.cancel()}}},[]),J.createElement("div",{className:"rpv-core__text-layer",ref:ut})},Go=function(me){var ut=me.doc,St=me.measureRef,kt=me.outlines,Tt=me.pageIndex,Lt=me.pageRotation,Kt=me.pageSize,Wt=me.plugins,Mt=me.renderPage,qt=me.renderQueueKey,Gt=me.rotation,gn=me.scale,pn=me.shouldRender,dn=me.viewMode,kn=me.onExecuteNamedAction,Cn=me.onJumpFromLinkAnnotation,wn=me.onJumpToDest,hr=me.onRenderCompleted,qn=me.onRotatePage,Kn=$t(),tr=J.useState(null),jn=tr[0],ir=tr[1],Qn=J.useState(!1),yr=Qn[0],_r=Qn[1],Sr=J.useState(!1),wr=Sr[0],$r=Sr[1],zr=J.useRef(),Lr=J.useRef(),Hr=Math.abs(Gt+Lt)%180==0,Dr=Kt.pageWidth*gn,Nr=Kt.pageHeight*gn,jr=Hr?Dr:Nr,Or=Hr?Nr:Dr,Xr=(Kt.rotation+Gt+Lt)%360,ri=J.useRef(0),ti=Mt||function(Ur){return J.createElement(J.Fragment,null,Ur.canvasLayer.children,Ur.textLayer.children,Ur.annotationLayer.children)};return J.useEffect(function(){ir(null),_r(!1),$r(!1)},[Lt,Gt,gn]),J.useEffect(function(){pn&&Kn.current&&!jn&&Xn(ut,Tt).then(function(Ur){Kn.current&&(ri.current=qt,ir(Ur))})},[pn,jn]),J.useEffect(function(){yr&&wr&&(qt!==ri.current?(ir(null),_r(!1),$r(!1)):hr(Tt))},[yr,wr]),J.createElement("div",{className:Ae({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":dn===A.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":dn===A.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":dn===A.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(Tt),ref:St,style:{height:"".concat(Or,"px"),width:"".concat(jr,"px")}},jn?J.createElement(J.Fragment,null,ti({annotationLayer:{attrs:{},children:J.createElement(Kr,{doc:ut,outlines:kt,page:jn,pageIndex:Tt,plugins:Wt,rotation:Xr,scale:gn,onExecuteNamedAction:kn,onJumpFromLinkAnnotation:Cn,onJumpToDest:wn})},canvasLayer:{attrs:{},children:J.createElement(ni,{canvasLayerRef:zr,height:Or,page:jn,pageIndex:Tt,plugins:Wt,rotation:Xr,scale:gn,width:jr,onRenderCanvasCompleted:function(){Kn.current&&_r(!0)}})},canvasLayerRendered:yr,doc:ut,height:Or,pageIndex:Tt,rotation:Xr,scale:gn,svgLayer:{attrs:{},children:J.createElement(Ri,{height:Or,page:jn,rotation:Xr,scale:gn,width:jr})},textLayer:{attrs:{},children:J.createElement(Uo,{containerRef:Lr,page:jn,pageIndex:Tt,plugins:Wt,rotation:Xr,scale:gn,onRenderTextCompleted:function(){Kn.current&&$r(!0)}})},textLayerRendered:wr,width:jr,markRendered:hr,onRotatePage:function(Ur){return qn(Tt,Ur)}}),Wt.map(function(Ur,Yr){return Ur.renderPageLayer?J.createElement(J.Fragment,{key:Yr},Ur.renderPageLayer({canvasLayerRef:zr,canvasLayerRendered:yr,doc:ut,height:Or,pageIndex:Tt,rotation:Xr,scale:gn,textLayerRef:Lr,textLayerRendered:wr,width:jr})):J.createElement(J.Fragment,{key:Yr})})):J.createElement(at,{testId:"core__page-layer-loading-".concat(Tt)}))},qo=function(me,ut){var St=ut.rect;return me.height!==St.height||me.width!==St.width?St:me};(function(me){me.Horizontal="Horizontal",me.Vertical="Vertical",me.Both="Both"})(on||(on={}));var Xo=function(me){return 1-Math.pow(1-me,4)},Fi=1e-4,Ga={left:0,top:0},qa={capture:!1,passive:!0},Ko=function(me){var ut=me.elementRef,St=me.enableSmoothScroll,kt=me.isRtl,Tt=me.scrollDirection,Lt=me.onSmoothScroll,Kt=J.useState(Ga),Wt=Kt[0],Mt=Kt[1],qt=J.useState(ut.current),Gt=qt[0],gn=qt[1],pn=kt?-1:1,dn=J.useRef(Tt);dn.current=Tt;var kn=J.useRef(Ga),Cn=J.useRef(!0),wn=J.useCallback(function(){Cn.current=!0,St&&Mt(kn.current),Lt(!1)},[]),hr=J.useCallback(function(){if(Gt){switch(dn.current){case on.Horizontal:kn.current={left:pn*Gt.scrollLeft,top:0};break;case on.Both:kn.current={left:pn*Gt.scrollLeft,top:Gt.scrollTop};break;case on.Vertical:default:kn.current={left:0,top:Gt.scrollTop}}St&&!Cn.current||Mt(kn.current)}},[Gt]);ke(function(){gn(ut.current)}),ke(function(){if(Gt)return Gt.addEventListener("scroll",hr,qa),function(){Gt.removeEventListener("scroll",hr,qa)}},[Gt]);var qn=J.useCallback(function(Kn,tr){var jn=ut.current;if(!jn)return Promise.resolve();var ir={left:0,top:0};switch(dn.current){case on.Horizontal:ir.left=pn*Kn.left;break;case on.Both:ir.left=pn*Kn.left,ir.top=Kn.top;break;case on.Vertical:default:ir.top=Kn.top}return tr?(Cn.current=!1,Lt(!0),new Promise(function(Qn,yr){(function(_r,Sr,wr,$r,zr,Lr){zr===void 0&&(zr=function(Yr){return Yr}),Lr===void 0&&(Lr=function(){});var Hr=0,Dr=0,Nr=!1;switch(Sr){case on.Horizontal:Dr=_r.scrollLeft,Hr=0;case on.Both:Dr=_r.scrollLeft,Hr=_r.scrollTop;break;case on.Vertical:default:Dr=0,Hr=_r.scrollTop}var jr=function(){Nr||(Nr=!0,_r.scrollLeft=wr.left,_r.scrollTop=wr.top,Lr())};if(Math.abs(Hr-wr.top)<=Fi&&Sr===on.Vertical)jr();else if(Math.abs(Dr-wr.left)<=Fi&&Sr===on.Horizontal)jr();else{var Or,Xr=-1,ri=Dr-wr.left,ti=Hr-wr.top,Ur=function(Yr){Xr===-1&&(Xr=Yr);var ii=Yr-Xr,er=Math.min(ii/$r,1),Zn=zr(er),Bn={left:Dr-ri*Zn,top:Hr-ti*Zn};switch(Sr){case on.Horizontal:_r.scrollLeft=Bn.left;break;case on.Both:_r.scrollLeft=Bn.left,_r.scrollTop=Bn.top;break;case on.Vertical:default:_r.scrollTop=Bn.top}Math.abs(Bn.top-wr.top)<=Fi&&Math.abs(Bn.left-wr.left)<=Fi&&!Nr&&(window.cancelAnimationFrame(Or),jr()),ii<$r?Or=window.requestAnimationFrame(Ur):window.cancelAnimationFrame(Or)};Or=window.requestAnimationFrame(Ur)}})(jn,dn.current,ir,400,Xo,function(){wn(),Qn()})})):new Promise(function(Qn,yr){switch(dn.current){case on.Horizontal:jn.scrollLeft=ir.left;break;case on.Both:jn.scrollLeft=ir.left,jn.scrollTop=ir.top;break;case on.Vertical:default:jn.scrollTop=ir.top}Qn()})},[ut]);return{scrollOffset:Wt,scrollTo:qn}},Si=function(me,ut,St){return Math.max(me,Math.min(St,ut))},Yo=function(me,ut){if(ut!==A.ViewMode.DualPageWithCover)return 0;if(!function(Tt){var Lt=Tt.length;if(Lt===1)return!1;for(var Kt=1;Kt<Lt;Kt++)if(Tt[Kt].height!==Tt[0].height||Tt[Kt].width!==Tt[0].width)return!0;return!1}(me))return 2*me[0].width;var St=nn(me.slice(1),2).map(function(Tt){return Tt.length===2?Tt[0].width+Tt[1].width:Tt[0].width}),kt=[me[0].width].concat(St);return Math.max.apply(Math,kt)},Zo={left:0,top:0},Jo={left:0,top:0},Qi={left:0,top:0},Qo={left:0,top:0},es={height:0,width:0},Xa={left:0,top:0},Ka="data-virtual-index",ts=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],ns=function(me){var ut=me.enableSmoothScroll,St=me.isRtl,kt=me.numberOfItems,Tt=me.parentRef,Lt=me.setRenderRange,Kt=me.sizes,Wt=me.scrollMode,Mt=me.viewMode,qt=J.useState(!1),Gt=qt[0],gn=qt[1],pn=J.useCallback(function(er){return gn(er)},[]),dn=J.useRef(Wt);dn.current=Wt;var kn=J.useRef(Mt);kn.current=Mt;var Cn=Wt===A.ScrollMode.Wrapped||Mt===A.ViewMode.DualPageWithCover||Mt===A.ViewMode.DualPage?on.Both:Wt===A.ScrollMode.Horizontal?on.Horizontal:on.Vertical,wn=Ko({elementRef:Tt,enableSmoothScroll:ut,isRtl:St,scrollDirection:Cn,onSmoothScroll:pn}),hr=wn.scrollOffset,qn=wn.scrollTo,Kn=function(er){var Zn=er.elementRef,Bn=J.useState(Zn.current),Wn=Bn[0],zn=Bn[1],ar=J.useRef(!1),or=J.useReducer(qo,{height:0,width:0}),Un=or[0],Ln=or[1];return ke(function(){Zn.current!==Wn&&zn(Zn.current)}),ke(function(){if(Wn&&!ar.current){ar.current=!0;var lr=Wn.getBoundingClientRect(),mr=lr.height,Rr=lr.width;Ln({rect:{height:mr,width:Rr}})}},[Wn]),J.useEffect(function(){if(Wn){var lr=new ResizeObserver(function(mr,Rr){mr.forEach(function(xr){if(xr.target===Wn){var Gr=xr.contentRect,Jr=Gr.height,dr=Gr.width;Ln({rect:{height:Jr,width:dr}})}})});return lr.observe(Wn),function(){lr.unobserve(Wn)}}},[Wn]),Un}({elementRef:Tt}),tr=J.useRef({scrollOffset:Xa,measurements:[]});tr.current.scrollOffset=hr;var jn=J.useMemo(function(){return Array(kt).fill(-1)},[]),ir=J.useState(jn),Qn=ir[0],yr=ir[1],_r=J.useMemo(function(){var er=new IntersectionObserver(function(Zn){Zn.forEach(function(Bn){var Wn=Bn.isIntersecting?Bn.intersectionRatio:-1,zn=Bn.target.getAttribute(Ka);if(zn){var ar=parseInt(zn,10);0<=ar&&ar<kt&&yr(function(or){return or[ar]=Wn,function(Un,Ln,lr){if(lr||arguments.length===2)for(var mr,Rr=0,xr=Ln.length;Rr<xr;Rr++)!mr&&Rr in Ln||(mr||(mr=Array.prototype.slice.call(Ln,0,Rr)),mr[Rr]=Ln[Rr]);return Un.concat(mr||Array.prototype.slice.call(Ln))}([],or,!0)})}})},{threshold:ts});return er},[]),Sr=J.useMemo(function(){return Wt===A.ScrollMode.Page&&Mt===A.ViewMode.SinglePage?function(er,Zn,Bn){for(var Wn=[],zn=0;zn<er;zn++){var ar={height:Math.max(Zn.height,Bn[zn].height),width:Math.max(Zn.width,Bn[zn].width)},or=zn===0?Qo:Wn[zn-1].end,Un={left:or.left+ar.width,top:or.top+ar.height};Wn[zn]={index:zn,start:or,size:ar,end:Un,visibility:-1}}return Wn}(kt,Kn,Kt):Mt===A.ViewMode.DualPageWithCover?function(er,Zn,Bn,Wn){for(var zn=[],ar=0,or=0,Un=Qi,Ln=0;Ln<er;Ln++){var lr=Ln===0?{height:Wn===A.ScrollMode.Page?Math.max(Zn.height,Bn[Ln].height):Bn[Ln].height,width:Wn===A.ScrollMode.Page?Math.max(Zn.width,Bn[Ln].width):Bn[Ln].width}:{height:Wn===A.ScrollMode.Page?Math.max(Zn.height,Bn[Ln].height):Bn[Ln].height,width:Math.max(Zn.width/2,Bn[Ln].width)};Wn===A.ScrollMode.Page?Un=Ln===0?Qi:{left:Ln%2==0?lr.width:0,top:Math.floor((Ln-1)/2)*lr.height+zn[0].end.top}:Ln===0?(Un=Qi,ar=Bn[0].height,or=0):Ln%2==1?(Un={left:0,top:ar+=or},or=Ln===er-1?Bn[Ln].height:Math.max(Bn[Ln].height,Bn[Ln+1].height)):Un={left:zn[Ln-1].end.left,top:ar};var mr={left:Un.left+lr.width,top:Un.top+lr.height};zn[Ln]={index:Ln,start:Un,size:lr,end:mr,visibility:-1}}return zn}(kt,Kn,Kt,Wt):Mt===A.ViewMode.DualPage?function(er,Zn,Bn,Wn){for(var zn=[],ar=0,or=0,Un=Jo,Ln=0;Ln<er;Ln++){var lr={height:Wn===A.ScrollMode.Page?Math.max(Zn.height,Bn[Ln].height):Bn[Ln].height,width:Math.max(Zn.width/2,Bn[Ln].width)};Wn===A.ScrollMode.Page?Un={left:Ln%2==0?0:lr.width,top:Math.floor(Ln/2)*lr.height}:Ln%2==0?(Un={left:0,top:ar+=or},or=Ln===er-1?Bn[Ln].height:Math.max(Bn[Ln].height,Bn[Ln+1].height)):Un={left:zn[Ln-1].end.left,top:ar};var mr={left:Un.left+lr.width,top:Un.top+lr.height};zn[Ln]={index:Ln,start:Un,size:lr,end:mr,visibility:-1}}return zn}(kt,Kn,Kt,Wt):function(er,Zn,Bn,Wn){for(var zn=[],ar=0,or={left:0,top:0},Un=0,Ln=Zo,lr=0;lr<er;lr++){var mr=Bn[lr];if(lr===0)ar=mr.width,or={left:0,top:0},Un=mr.height;else switch(Wn){case A.ScrollMode.Wrapped:(ar+=mr.width)<Zn.width?(Ln={left:zn[lr-1].end.left,top:or.top},Un=Math.max(Un,mr.height)):(ar=mr.width,or={left:(Ln={left:or.left,top:or.top+Un}).left,top:Ln.top},Un=mr.height);break;case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:Ln=zn[lr-1].end}var Rr={left:Ln.left+mr.width,top:Ln.top+mr.height};zn[lr]={index:lr,start:Ln,size:mr,end:Rr,visibility:-1}}return zn}(kt,Kn,Kt,Wt)},[Wt,Kt,Mt,Kn]),wr=Sr[kt-1]?{height:Sr[kt-1].end.top,width:Sr[kt-1].end.left}:es;tr.current.measurements=Sr;var $r=J.useMemo(function(){var er=function(lr,mr,Rr,xr){var Gr=0;switch(lr){case on.Horizontal:Gr=xr.left;break;case on.Vertical:default:Gr=xr.top}var Jr=mr.length-1,dr=function(Pr,oi,mi,Ii){for(;Pr<=oi;){var di=(Pr+oi)/2|0,wi=Ii(di);if(wi<mi)Pr=di+1;else{if(!(wi>mi))return di;oi=di-1}}return Pr>0?Pr-1:0}(0,Jr,Gr,function(Pr){switch(lr){case on.Horizontal:return mr[Pr].start.left;case on.Both:case on.Vertical:default:return mr[Pr].start.top}});if(lr===on.Both)for(var qr=mr[dr].start.top;dr-1>=0&&mr[dr-1].start.top===qr&&mr[dr-1].start.left>=xr.left;)dr--;for(var Fr=dr;Fr<=Jr;){var Ir={top:mr[Fr].start.top-xr.top,left:mr[Fr].start.left-xr.left},Vr={height:Rr.height-Ir.top,width:Rr.width-Ir.left};if(lr===on.Horizontal&&Vr.width<0||lr===on.Vertical&&Vr.height<0||lr===on.Both&&(Vr.width<0||Vr.height<0))break;Fr++}return{start:dr,end:Fr}}(Cn,Sr,Kn,hr),Zn=er.start,Bn=er.end,Wn=Qn.slice(Si(0,kt,Zn),Si(0,kt,Bn)),zn=Zn+Wn.reduce(function(lr,mr,Rr,xr){return mr>xr[lr]?Rr:lr},0),ar=zn=Si(0,kt-1,zn),or=Lt({endPage:Bn,numPages:kt,startPage:Zn}),Un=or.startPage,Ln=or.endPage;switch(Un=Math.max(Un,0),Ln=Math.min(Ln,kt-1),Mt){case A.ViewMode.DualPageWithCover:zn>0&&(ar=zn%2==1?zn:zn-1),Un=Un===0?0:Un%2==1?Un:Un-1,kt-(Ln=Ln%2==1?Ln-1:Ln)<=2&&(Ln=kt-1);break;case A.ViewMode.DualPage:ar=zn%2==0?zn:zn-1,Un=Un%2==0?Un:Un-1,Ln=Ln%2==1?Ln:Ln-1;break;case A.ViewMode.SinglePage:default:ar=zn}return{startPage:Un,endPage:Ln,maxVisbilityIndex:ar}},[Sr,Kn,hr,Mt,Qn]),zr=$r.startPage,Lr=$r.endPage,Hr=$r.maxVisbilityIndex,Dr=J.useMemo(function(){for(var er=[],Zn=function(Wn){var zn=Sr[Wn],ar=re(re({},zn),{visibility:Qn[Wn]!==void 0?Qn[Wn]:-1,measureRef:function(or){or&&(or.setAttribute(Ka,"".concat(Wn)),_r.observe(or))}});er.push(ar)},Bn=zr;Bn<=Lr;Bn++)Zn(Bn);return er},[zr,Lr,Qn,Sr]),Nr=J.useCallback(function(er,Zn){var Bn=tr.current.measurements[Si(0,kt-1,er)],Wn=dn.current===A.ScrollMode.Page?Xa:Zn;return Bn?qn({left:Wn.left+Bn.start.left,top:Wn.top+Bn.start.top},ut):Promise.resolve()},[qn,ut]),jr=J.useCallback(function(er,Zn){var Bn=tr.current.measurements,Wn=Bn[er].start,zn=Bn.find(function(or){return or.start.top-Wn.top>1e-12});if(!zn)return Promise.resolve();var ar=zn.index;switch(kn.current){case A.ViewMode.DualPage:ar=ar%2==0?ar:ar+1;break;case A.ViewMode.DualPageWithCover:ar=ar%2==1?ar:ar+1}return Nr(ar,Zn)},[]),Or=J.useCallback(function(er,Zn){for(var Bn=tr.current.measurements,Wn=Bn[er].start,zn=er,ar=!1,or=kt-1;or>=0;or--)if(Wn.top-Bn[or].start.top>1e-12){ar=!0,zn=Bn[or].index;break}if(!ar)return Promise.resolve();switch(kn.current){case A.ViewMode.DualPage:zn=zn%2==0?zn:zn-1;break;case A.ViewMode.DualPageWithCover:zn=zn%2==0?zn-1:zn}return zn===er&&(zn=er-1),Nr(zn,Zn)},[]),Xr=J.useCallback(function(er,Zn){if(kn.current===A.ViewMode.DualPageWithCover||kn.current===A.ViewMode.DualPage)return jr(er,Zn);switch(dn.current){case A.ScrollMode.Wrapped:return jr(er,Zn);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Nr(er+1,Zn)}},[]),ri=J.useCallback(function(er,Zn){if(kn.current===A.ViewMode.DualPageWithCover||kn.current===A.ViewMode.DualPage)return Or(er,Zn);switch(dn.current){case A.ScrollMode.Wrapped:return Or(er,Zn);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Nr(er-1,Zn)}},[]),ti=J.useCallback(function(){return function(er,Zn){switch(Zn){case A.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(er.width,"px")};case A.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(er.height,"px"),width:"100%"}}}(wr,dn.current)},[wr]),Ur=J.useCallback(function(er){return function(Zn,Bn,Wn){return Wn!==A.ScrollMode.Page?{}:{height:"".concat(Bn.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Zn.start.top,"px)")}}(er,Kn,dn.current)},[Kn]),Yr=J.useCallback(function(er){return function(Zn,Bn,Wn,zn,ar){var or,Un,Ln,lr,mr,Rr,xr,Gr=Bn?"right":"left",Jr=Bn?-1:1,dr=Wn.length,qr=Zn.start.left*Jr,Fr=Zn.size,Ir=Fr.height,Vr=Fr.width;if(zn===A.ViewMode.DualPageWithCover){var Pr=ar===A.ScrollMode.Page?0:Zn.start.top;return Zn.index===0||dr%2==0&&Zn.index===dr-1?((or={height:"".concat(Ir,"px"),minWidth:"".concat(Yo(Wn,zn),"px"),width:"100%"})[Gr]=0,or.position="absolute",or.top=0,or.transform="translate(".concat(qr,"px, ").concat(Pr,"px)"),or):((Un={height:"".concat(Ir,"px"),width:"".concat(Vr,"px")})[Gr]=0,Un.position="absolute",Un.top=0,Un.transform="translate(".concat(qr,"px, ").concat(Pr,"px)"),Un)}if(zn===A.ViewMode.DualPage)return(Ln={height:"".concat(Ir,"px"),width:"".concat(Vr,"px")})[Gr]=0,Ln.position="absolute",Ln.top=0,Ln.transform="translate(".concat(qr,"px, ").concat(ar===A.ScrollMode.Page?0:Zn.start.top,"px)"),Ln;switch(ar){case A.ScrollMode.Horizontal:return(lr={height:"100%",width:"".concat(Vr,"px")})[Gr]=0,lr.position="absolute",lr.top=0,lr.transform="translateX(".concat(qr,"px)"),lr;case A.ScrollMode.Page:return(mr={height:"".concat(Ir,"px"),width:"".concat(Vr,"px")})[Gr]=0,mr.position="absolute",mr.top=0,mr;case A.ScrollMode.Wrapped:return(Rr={height:"".concat(Ir,"px"),width:"".concat(Vr,"px")})[Gr]=0,Rr.position="absolute",Rr.top=0,Rr.transform="translate(".concat(qr,"px, ").concat(Zn.start.top,"px)"),Rr;case A.ScrollMode.Vertical:default:return(xr={height:"".concat(Ir,"px"),width:"100%"})[Gr]=0,xr.position="absolute",xr.top=0,xr.transform="translateY(".concat(Zn.start.top,"px)"),xr}}(er,St,Kt,kn.current,dn.current)},[St,Kt]),ii=J.useCallback(function(er,Zn){var Bn=tr.current,Wn=Bn.measurements,zn=Bn.scrollOffset,ar=Wn[Si(0,kt-1,Zn)];if(ar){var or=dn.current===A.ScrollMode.Page?{left:ar.start.left,top:ar.start.top}:{left:zn.left*er,top:zn.top*er};return qn(or,!1)}return Promise.resolve()},[]);return J.useEffect(function(){return function(){_r.disconnect()}},[]),{boundingClientRect:Kn,isSmoothScrolling:Gt,startPage:zr,endPage:Lr,maxVisbilityIndex:Hr,virtualItems:Dr,getContainerStyles:ti,getItemContainerStyles:Ur,getItemStyles:Yr,scrollToItem:Nr,scrollToNextItem:Xr,scrollToPreviousItem:ri,zoom:ii}},ea=function(me,ut,St,kt,Tt,Lt){var Kt=St;switch(!0){case(Tt===A.ViewMode.DualPageWithCover&&Lt>=3):case(Tt===A.ViewMode.DualPage&&Lt>=3):Kt=2*St;break;default:Kt=St}switch(kt){case A.SpecialZoomLevel.ActualSize:return 1;case A.SpecialZoomLevel.PageFit:return Math.min((me.clientWidth-17)/Kt,(me.clientHeight-16)/ut);case A.SpecialZoomLevel.PageWidth:return(me.clientWidth-17)/Kt}},rs=function(me){var ut,St,kt=me.getCurrentPage,Tt=(ut=50,St=J.useRef([]),J.useEffect(function(){return function(){St.current=[]}},[]),{push:function(qt){var Gt=St.current;Gt.length+1>ut&&Gt.shift(),Gt.push(qt),St.current=Gt},map:function(qt){return St.current.map(function(Gt){return qt(Gt)})},pop:function(){var qt=St.current;if(qt.length===0)return null;var Gt=qt.pop();return St.current=qt,Gt}}),Lt=function(qt){var Gt=J.useRef([]);return J.useEffect(function(){return function(){Gt.current=[]}},[]),{dequeue:function(){var gn=Gt.current;if(gn.length===0)return null;var pn=gn.shift();return Gt.current=gn,pn||null},enqueue:function(gn){var pn=Gt.current;pn.length+1>qt&&pn.pop(),Gt.current=[gn].concat(pn)},map:function(gn){return Gt.current.map(function(pn){return gn(pn)})}}}(50),Kt=function(){var qt=Lt.dequeue();return qt&&Tt.push(qt),qt&&qt.pageIndex===kt()?Kt():qt},Wt=function(){var qt=Tt.pop();return qt&&Lt.enqueue(qt),qt&&qt.pageIndex===kt()?Wt():qt},Mt=J.useCallback(function(qt){Tt.push(qt)},[]);return{getNextDestination:Kt,getPreviousDestination:Wt,markVisitedDestination:Mt}},Ya=function(me){var ut=[];return me.map(function(St){ut=ut.concat(St).concat(function(kt){var Tt=[];return kt.items&&kt.items.length>0&&(Tt=Tt.concat(Ya(kt.items))),Tt}(St))}),ut},Za={capture:!1,passive:!0},is={height:0,width:0},ta={height:0,width:0},as=function(me){var ut=me.getCurrentPage,St=me.getCurrentScrollMode,kt=me.jumpToPage,Tt=me.targetRef,Lt=J.useState(A.FullScreenMode.Normal),Kt=Lt[0],Wt=Lt[1],Mt=function(){var Qn=J.useState(is),yr=Qn[0],_r=Qn[1],Sr=ht(function(){_r({height:window.innerHeight,width:window.innerWidth})},100);return ke(function(){return window.addEventListener("resize",Sr,Za),function(){window.removeEventListener("resize",Sr,Za)}},[]),yr}(),qt=J.useState(ta),Gt=qt[0],gn=qt[1],pn=J.useRef(ta),dn=J.useRef(ut()),kn=J.useRef(ta),Cn=J.useState(Tt.current),wn=Cn[0],hr=Cn[1],qn=J.useRef();ke(function(){Tt.current!==wn&&hr(Tt.current)},[]),ke(function(){if(wn){var Qn=new ResizeObserver(function(yr){yr.forEach(function(_r){var Sr=_r.target.getBoundingClientRect(),wr=Sr.height,$r=Sr.width;gn({height:wr,width:$r})})});return Qn.observe(wn),function(){Qn.unobserve(wn),Qn.disconnect()}}},[wn]);var Kn=J.useCallback(function(Qn){var yr=xt();return yr&&yr!==Qn?(Wt(A.FullScreenMode.Normal),Et(yr)):Promise.resolve()},[]),tr=J.useCallback(function(Qn){Qn&&ct()&&(hr(Qn),Kn(Qn).then(function(){qn.current=Qn,Wt(A.FullScreenMode.Entering),function(yr){Ce&&yr[ft.RequestFullScreen]()}(Qn)}))},[]),jn=J.useCallback(function(){xt()&&(Wt(A.FullScreenMode.Exitting),Et(document))},[]),ir=J.useCallback(function(){wn&&xt()!==wn&&Wt(A.FullScreenMode.Exitting)},[wn]);return J.useEffect(function(){switch(Kt){case A.FullScreenMode.Entering:qn.current&&(qn.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),dn.current=ut(),pn.current={height:window.innerHeight,width:window.innerWidth};break;case A.FullScreenMode.Entered:St()===A.ScrollMode.Page?kt(dn.current).then(function(){Wt(A.FullScreenMode.EnteredCompletely)}):Wt(A.FullScreenMode.EnteredCompletely);break;case A.FullScreenMode.Exitting:qn.current&&(qn.current.style.backgroundColor="",qn.current=null),dn.current=ut();break;case A.FullScreenMode.Exited:Wt(A.FullScreenMode.Normal),St()===A.ScrollMode.Page&&kt(dn.current)}},[Kt]),J.useEffect(function(){if(Kt!==A.FullScreenMode.Normal)return Kt===A.FullScreenMode.Entering&&Mt.height===Gt.height&&Mt.width===Gt.width&&Mt.height>0&&Mt.width>0&&(kn.current.height===0||Mt.height==kn.current.height)?(kn.current={height:window.innerHeight,width:window.innerWidth},void Wt(A.FullScreenMode.Entered)):void(Kt===A.FullScreenMode.Exitting&&pn.current.height===Mt.height&&pn.current.width===Mt.width&&Mt.height>0&&Mt.width>0&&Wt(A.FullScreenMode.Exited))},[Kt,Mt,Gt]),J.useEffect(function(){var Qn;return Qn=ir,Ce&&document.addEventListener(ft.FullScreenChange,Qn),function(){(function(yr){Ce&&document.removeEventListener(ft.FullScreenChange,yr)})(ir)}},[wn]),{enterFullScreenMode:tr,exitFullScreenMode:jn,fullScreenMode:Kt}},os={buildPageStyles:function(){return{}},transformSize:function(me){return me.size}},pi={left:0,top:0},ss=function(me){var ut=me.currentFile,St=me.defaultScale,kt=me.doc,Tt=me.enableSmoothScroll,Lt=me.initialPage,Kt=me.initialRotation,Wt=me.initialScale,Mt=me.pageLayout,qt=me.pageSizes,Gt=me.plugins,gn=me.renderPage,pn=me.scrollMode,dn=me.setRenderRange,kn=me.viewMode,Cn=me.viewerState,wn=me.onDocumentLoad,hr=me.onOpenFile,qn=me.onPageChange,Kn=me.onRotate,tr=me.onRotatePage,jn=me.onZoom,ir=kt.numPages,Qn=kt.loadingTask.docId,yr=J.useContext(sn).l10n,_r=J.useContext(nt),Sr=_r.direction===A.TextDirection.RightToLeft,wr=J.useRef(),$r=J.useRef(),zr=J.useState(Lt),Lr=zr[0],Hr=zr[1],Dr=J.useRef(null),Nr=rs({getCurrentPage:function(){return dr.current.pageIndex}}),jr=J.useState(Kt),Or=jr[0],Xr=jr[1],ri=Ot(Or),ti=J.useState(!1),Ur=ti[0],Yr=ti[1],ii=J.useState(new Map),er=ii[0],Zn=ii[1],Bn=J.useState(pn),Wn=Bn[0],zn=Bn[1],ar=Ot(Wn),or=J.useState(kn),Un=or[0],Ln=or[1],lr=Ot(Un),mr=function(Sn){var cr=$t(),gr=J.useState([]),Cr=gr[0],Ar=gr[1];return J.useEffect(function(){Sn.getOutline().then(function(vr){if(cr.current&&vr!==null){var Wr=Ya(vr);Ar(Wr)}})},[]),Cr}(kt),Rr=J.useState(Wt),xr=Rr[0],Gr=Rr[1],Jr=Ot(xr),dr=J.useRef(Cn),qr=J.useRef(typeof St=="string"?St:null),Fr=J.useRef(-1),Ir=J.useRef(-1),Vr=J.useRef(Lt),Pr=as({getCurrentPage:function(){return dr.current.pageIndex},getCurrentScrollMode:function(){return dr.current.scrollMode},jumpToPage:function(Sn){return li(Sn)},targetRef:$r}),oi=J.useState(-1),mi=oi[0],Ii=oi[1],di=J.useState(0),wi=di[0],fs=di[1],Qr=Yt({doc:kt});J.useEffect(function(){return function(){En.clear(),On.clear()}},[Qn]);var to=J.useMemo(function(){return Object.assign({},os,Mt)},[]),ps=J.useMemo(function(){return Array(ir).fill(0).map(function(Sn,cr){var gr=[qt[cr].pageHeight,qt[cr].pageWidth],Cr=Math.abs(Or)%180==0?{height:gr[0],width:gr[1]}:{height:gr[1],width:gr[0]},Ar={height:Cr.height*xr,width:Cr.width*xr};return to.transformSize({numPages:ir,pageIndex:cr,size:Ar})})},[Or,xr]),kr=ns({enableSmoothScroll:Tt,isRtl:Sr,numberOfItems:ir,parentRef:$r,scrollMode:Wn,setRenderRange:dn,sizes:ps,viewMode:Un}),ms=ht(function(){!qr.current||dr.current.fullScreenMode!==A.FullScreenMode.Normal||Lt>0&&Vr.current===Lt||hi(qr.current)},200);(function(Sn){var cr=Sn.targetRef,gr=Sn.onResize;ke(function(){var Cr=new ResizeObserver(function(vr){vr.forEach(function(Wr){gr(Wr.target)})}),Ar=cr.current;if(Ar)return Cr.observe(Ar),function(){Cr.unobserve(Ar)}},[])})({targetRef:$r,onResize:ms});var si=function(Sn){var cr=Sn;Gt.forEach(function(gr){gr.onViewerStateChange&&(cr=gr.onViewerStateChange(cr))}),dr.current=cr},gs=function(){return $r.current},vs=function(){return dr.current},bs=J.useCallback(function(Sn){Nr.markVisitedDestination(Sn)},[]),ia=J.useCallback(function(Sn){var cr=Sn.pageIndex,gr=Sn.bottomOffset,Cr=Sn.leftOffset,Ar=Sn.scaleTo,vr=$r.current,Wr=dr.current;return vr&&Wr?new Promise(function(ci,ua){Xn(kt,cr).then(function(Di){var ui=Di.getViewport({scale:1}),Oi=0,co=(typeof gr=="function"?gr(ui.width,ui.height):gr)||0,Ni=(typeof Cr=="function"?Cr(ui.width,ui.height):Cr)||0,gi=Wr.scale;switch(Ar){case A.SpecialZoomLevel.PageFit:Oi=0,Ni=0,hi(A.SpecialZoomLevel.PageFit);break;case A.SpecialZoomLevel.PageWidth:gi=ea(vr,qt[cr].pageHeight,qt[cr].pageWidth,A.SpecialZoomLevel.PageWidth,kn,ir),Oi=(ui.height-co)*gi,Ni*=gi,hi(gi);break;default:Oi=(ui.height-co)*gi,Ni*=gi}switch(Wr.scrollMode){case A.ScrollMode.Horizontal:kr.scrollToItem(cr,{left:Ni,top:0}).then(function(){ci()});break;case A.ScrollMode.Vertical:default:kr.scrollToItem(cr,{left:0,top:Oi}).then(function(){ci()})}})}):Promise.resolve()},[]),no=J.useCallback(function(Sn){return Nr.markVisitedDestination(Sn),ia(Sn)},[]),_s=J.useCallback(function(){var Sn=Nr.getNextDestination();return Sn?ia(Sn):Promise.resolve()},[]),Es=J.useCallback(function(){var Sn=Nr.getPreviousDestination();return Sn?ia(Sn):Promise.resolve()},[]),ys=J.useCallback(function(){return kr.scrollToNextItem(dr.current.pageIndex,pi)},[]),li=J.useCallback(function(Sn){return 0<=Sn&&Sn<ir?kr.scrollToItem(Sn,pi):Promise.resolve()},[]),Ss=J.useCallback(function(){return kr.scrollToPreviousItem(dr.current.pageIndex,pi)},[]),ro=J.useCallback(function(Sn){var cr,gr;(cr=Sn.name,gr=cr.split(/\./).pop(),gr?gr.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Cr){var Ar=new FileReader;Ar.readAsArrayBuffer(Sn),Ar.onload=function(){var vr=new Uint8Array(Ar.result);Cr(vr)}}).then(function(Cr){hr(Sn.name,Cr)})},[hr]),io=J.useCallback(function(Sn){var cr=Sn===A.RotateDirection.Backward?-90:90,gr=dr.current.rotation,Cr=gr===360||gr===-360?cr:gr+cr;Qr.markNotRendered(),Xr(Cr),si(re(re({},dr.current),{rotation:Cr})),Kn({direction:Sn,doc:kt,rotation:Cr})},[]),aa=J.useCallback(function(Sn,cr){var gr=cr===A.RotateDirection.Backward?-90:90,Cr=dr.current.pagesRotation,Ar=(Cr.has(Sn)?Cr.get(Sn):Kt)+gr,vr=Cr.set(Sn,Ar);Zn(vr),Yr(function(Wr){return!Wr}),si(re(re({},dr.current),{pagesRotation:vr,rotatedPage:Sn})),tr({direction:cr,doc:kt,pageIndex:Sn,rotation:Ar}),Qr.markRendering(Sn),Ii(Sn)},[]),ao=J.useCallback(function(Sn){si(re(re({},dr.current),{scrollMode:Sn})),zn(Sn)},[]),oo=J.useCallback(function(Sn){si(re(re({},dr.current),{viewMode:Sn})),Ln(Sn)},[]),hi=J.useCallback(function(Sn){var cr=$r.current,gr=dr.current.pageIndex;if(!(gr<0||gr>=ir)){var Cr=qt[gr].pageHeight,Ar=qt[gr].pageWidth,vr=cr?typeof Sn=="string"?ea(cr,Cr,Ar,Sn,dr.current.viewMode,ir):Sn:1;qr.current=typeof Sn=="string"?Sn:null,vr!==dr.current.scale&&(fs(function(Wr){return Wr+1}),Qr.markNotRendered(),Gr(vr),jn({doc:kt,scale:vr}),si(re(re({},dr.current),{scale:vr})))}},[]),ws=J.useCallback(function(Sn){Pr.enterFullScreenMode(Sn)},[]),As=J.useCallback(function(){Pr.exitFullScreenMode()},[]);J.useEffect(function(){si(re(re({},dr.current),{fullScreenMode:Pr.fullScreenMode}))},[Pr.fullScreenMode]),J.useEffect(function(){var Sn={enterFullScreenMode:ws,exitFullScreenMode:As,getPagesContainer:gs,getViewerState:vs,jumpToDestination:no,jumpToNextDestination:_s,jumpToPreviousDestination:Es,jumpToNextPage:ys,jumpToPreviousPage:Ss,jumpToPage:li,openFile:ro,rotate:io,rotatePage:aa,setViewerState:si,switchScrollMode:ao,switchViewMode:oo,zoom:hi};return Gt.forEach(function(cr){cr.install&&cr.install(Sn)}),function(){Gt.forEach(function(cr){cr.uninstall&&cr.uninstall(Sn)})}},[Qn]),J.useEffect(function(){wn({doc:kt,file:ut}),Gt.forEach(function(Sn){Sn.onDocumentLoad&&Sn.onDocumentLoad({doc:kt,file:ut})})},[Qn]);var oa,sa,la,so=kr.boundingClientRect;oa=function(){Lt&&li(Lt)},sa=so.height>0&&so.width>0,la=J.useRef(!1),ke(function(){sa&&!la.current&&(la.current=!0,oa())},[oa,sa]),ke(function(){var Sn=dr.current.pageIndex;Sn>-1&&ar!==Wn&&kr.scrollToItem(Sn,pi).then(function(){Pr.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(Tt||Qr.markNotRendered(),Fr.current=-1)})},[Wn]),ke(function(){var Sn=dr.current.pageIndex;Sn>-1&&ri!==Or&&kr.scrollToItem(Sn,pi)},[Or]),ke(function(){Jr!=0&&Jr!=dr.current.scale&&kr.zoom(dr.current.scale/Jr,dr.current.pageIndex).then(function(){Pr.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(Ir.current=-1)})},[xr]),ke(function(){if(lr!==dr.current.viewMode){var Sn=kr.startPage,cr=kr.endPage,gr=kr.virtualItems;Qr.markNotRendered(),Qr.setRange(Sn,cr);for(var Cr=function(vr){var Wr=gr.find(function(ci){return ci.index===vr});Wr&&Qr.setVisibility(vr,Wr.visibility)},Ar=Sn;Ar<=cr;Ar++)Cr(Ar);ca()}},[Un]),ke(function(){var Sn=dr.current.pageIndex;Sn>-1&&lr!==Un&&kr.scrollToItem(Sn,pi)},[Un]),ke(function(){var Sn=dr.current.pageIndex;Sn>0&&Sn===Lt&&Vr.current===Lt&&qr.current&&(Vr.current=-1,hi(qr.current))},[Lr]),J.useEffect(function(){kr.isSmoothScrolling||Dr.current!==null&&Dr.current===Lr||(Dr.current=Lr,qn({currentPage:Lr,doc:kt}))},[Lr,kr.isSmoothScrolling]),J.useEffect(function(){Pr.fullScreenMode===A.FullScreenMode.Entering&&dr.current.scrollMode===A.ScrollMode.Page&&(Fr.current=dr.current.pageIndex),Pr.fullScreenMode===A.FullScreenMode.EnteredCompletely&&dr.current.scrollMode===A.ScrollMode.Page&&Tt&&(Fr.current=-1),Pr.fullScreenMode===A.FullScreenMode.EnteredCompletely&&qr.current&&(Ir.current=dr.current.pageIndex,hi(qr.current))},[Pr.fullScreenMode]),J.useEffect(function(){if(Pr.fullScreenMode!==A.FullScreenMode.Entering&&Pr.fullScreenMode!==A.FullScreenMode.Exitting&&!kr.isSmoothScrolling){var Sn=kr.startPage,cr=kr.endPage,gr=kr.maxVisbilityIndex,Cr=kr.virtualItems,Ar=gr,vr=Pr.fullScreenMode===A.FullScreenMode.Entered||Pr.fullScreenMode===A.FullScreenMode.EnteredCompletely;if(!(vr&&Ar!==Fr.current&&Fr.current>-1||vr&&Ar!==Ir.current&&Ir.current>-1)){Hr(Ar),si(re(re({},dr.current),{pageIndex:Ar})),Qr.setRange(Sn,cr);for(var Wr=function(ua){var Di=Cr.find(function(ui){return ui.index===ua});Di&&Qr.setVisibility(ua,Di.visibility)},ci=Sn;ci<=cr;ci++)Wr(ci);ca()}}},[kr.startPage,kr.endPage,kr.isSmoothScrolling,kr.maxVisbilityIndex,Pr.fullScreenMode,Ur,Or,xr]);var $s=J.useCallback(function(Sn){Qr.markRendered(Sn),ca()},[wi]),ca=function(){var Sn=Qr.getHighestPriorityPage();Sn>-1&&Qr.isInRange(Sn)&&(Qr.markRendering(Sn),Ii(Sn))},Cs=function(Sn){var cr=Lr-1,gr=Lr+1;switch(Sn){case"FirstPage":li(0);break;case"LastPage":li(ir-1);break;case"NextPage":gr<ir&&li(gr);break;case"PrevPage":cr>=0&&li(cr)}},Ps=J.useCallback(function(){var Sn=kr.virtualItems,cr=[];switch(Un){case A.ViewMode.DualPage:cr=nn(Sn,2);break;case A.ViewMode.DualPageWithCover:Sn.length&&(cr=Sn[0].index===0?[[Sn[0]]].concat(nn(Sn.slice(1),2)):nn(Sn,2));break;case A.ViewMode.SinglePage:default:cr=nn(Sn,1)}var gr=yr&&yr.core?yr.core.pageLabel:"Page {{pageIndex}}",Cr={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:wr,style:{height:"100%"}},children:J.createElement(J.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:Ae({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Wn===A.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Sr,"rpv-core__inner-pages--single":Wn===A.ScrollMode.Page,"rpv-core__inner-pages--vertical":Wn===A.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Wn===A.ScrollMode.Wrapped}),ref:$r,style:{height:"100%",position:"relative"}},children:J.createElement("div",{"data-testid":"core__inner-current-page-".concat(Lr),style:Object.assign({"--scale-factor":xr},kr.getContainerStyles())},cr.map(function(Ar){return J.createElement("div",{className:Ae({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Wn===A.ScrollMode.Page}),style:kr.getItemContainerStyles(Ar[0]),key:"".concat(Ar[0].index,"-").concat(Un)},Ar.map(function(vr){var Wr=Un===A.ViewMode.DualPageWithCover&&(vr.index===0||ir%2==0&&vr.index===ir-1);return J.createElement("div",{"aria-label":gr.replace("{{pageIndex}}","".concat(vr.index+1)),className:Ae({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Un===A.ViewMode.DualPage&&vr.index%2==0,"rpv-core__inner-page--dual-odd":Un===A.ViewMode.DualPage&&vr.index%2==1,"rpv-core__inner-page--dual-cover":Wr,"rpv-core__inner-page--dual-cover-even":Un===A.ViewMode.DualPageWithCover&&!Wr&&vr.index%2==0,"rpv-core__inner-page--dual-cover-odd":Un===A.ViewMode.DualPageWithCover&&!Wr&&vr.index%2==1,"rpv-core__inner-page--single":Un===A.ViewMode.SinglePage&&Wn===A.ScrollMode.Page}),role:"region",key:"".concat(vr.index,"-").concat(Un),style:Object.assign({},kr.getItemStyles(vr),to.buildPageStyles({numPages:ir,pageIndex:vr.index,scrollMode:Wn,viewMode:Un}))},J.createElement(Go,{doc:kt,measureRef:vr.measureRef,outlines:mr,pageIndex:vr.index,pageRotation:er.has(vr.index)?er.get(vr.index):0,pageSize:qt[vr.index],plugins:Gt,renderPage:gn,renderQueueKey:wi,rotation:Or,scale:xr,shouldRender:mi===vr.index,viewMode:Un,onExecuteNamedAction:Cs,onJumpFromLinkAnnotation:bs,onJumpToDest:no,onRenderCompleted:$s,onRotatePage:aa}))}))}))}};return Gt.forEach(function(Ar){Ar.renderViewer&&(Cr=Ar.renderViewer({containerRef:wr,doc:kt,pagesContainerRef:$r,pagesRotation:er,pageSizes:qt,rotation:Or,slot:Cr,themeContext:_r,jumpToPage:li,openFile:ro,rotate:io,rotatePage:aa,switchScrollMode:ao,switchViewMode:oo,zoom:hi}))}),Cr},[Gt,kr]),lo=J.useCallback(function(Sn){return J.createElement("div",re({},Sn.attrs,{style:Sn.attrs&&Sn.attrs.style?Sn.attrs.style:{}}),Sn.children,Sn.subSlot&&lo(Sn.subSlot))},[]);return lo(Ps())},Ja=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ls=function(me){var ut=me.defaultScale,St=me.doc,kt=me.render,Tt=me.scrollMode,Lt=me.viewMode,Kt=J.useRef(),Wt=J.useState({pageSizes:[],scale:0}),Mt=Wt[0],qt=Wt[1];return J.useLayoutEffect(function(){var Gt=Array(St.numPages).fill(0).map(function(gn,pn){return new Promise(function(dn,kn){Xn(St,pn).then(function(Cn){var wn=Cn.getViewport({scale:1});dn({pageHeight:wn.height,pageWidth:wn.width,rotation:wn.rotation})})})});Promise.all(Gt).then(function(gn){var pn=Kt.current;if(pn&&gn.length!==0){var dn=gn[0].pageWidth,kn=gn[0].pageHeight,Cn=pn.parentElement,wn=(Cn.clientWidth-45)/dn,hr=(Cn.clientHeight-45)/kn,qn=wn;switch(Tt){case A.ScrollMode.Horizontal:qn=Math.min(wn,hr);break;case A.ScrollMode.Vertical:default:qn=wn}var Kn,tr,jn=ut?typeof ut=="string"?ea(Cn,kn,dn,ut,Lt,St.numPages):ut:(Kn=qn,(tr=Ja.findIndex(function(ir){return ir>=Kn}))===-1||tr===0?Kn:Ja[tr-1]);qt({pageSizes:gn,scale:jn})}})},[St.loadingTask.docId]),Mt.pageSizes.length===0||Mt.scale===0?J.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Kt},J.createElement(at,null)):kt(Mt.pageSizes,Mt.scale)},Li=function(){},na=function(me){function ut(St,kt){var Tt=me.call(this)||this;return Tt.verifyPassword=St,Tt.passwordStatus=kt,Tt}return ve(ut,me),ut}(Li),cs=function(me){var ut=me.passwordStatus,St=me.renderProtectedView,kt=me.verifyPassword,Tt=me.onDocumentAskPassword,Lt=J.useContext(sn).l10n,Kt=J.useState(""),Wt=Kt[0],Mt=Kt[1],qt=J.useContext(nt).direction===A.TextDirection.RightToLeft,Gt=function(){return kt(Wt)};return J.useEffect(function(){Tt&&Tt({verifyPassword:kt})},[]),St?St({passwordStatus:ut,verifyPassword:kt}):J.createElement("div",{className:"rpv-core__asking-password-wrapper"},J.createElement("div",{className:Ae({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":qt})},J.createElement("div",{className:"rpv-core__asking-password-message"},ut===A.PasswordStatus.RequiredPassword&&Lt.core.askingPassword.requirePasswordToOpen,ut===A.PasswordStatus.WrongPassword&&Lt.core.wrongPassword.tryAgain),J.createElement("div",{className:"rpv-core__asking-password-body"},J.createElement("div",{className:Ae({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!qt,"rpv-core__asking-password-input--rtl":qt})},J.createElement(lt,{testId:"core__asking-password-input",type:"password",value:Wt,onChange:Mt,onKeyDown:function(gn){gn.key==="Enter"&&Gt()}})),J.createElement(it,{onClick:Gt},Lt.core.askingPassword.submit))))},Qa=function(me){function ut(St){var kt=me.call(this)||this;return kt.doc=St,kt}return ve(ut,me),ut}(Li),eo=function(me){function ut(St){var kt=me.call(this)||this;return kt.error=St,kt}return ve(ut,me),ut}(Li),ra=function(me){function ut(St){var kt=me.call(this)||this;return kt.percentages=St,kt}return ve(ut,me),ut}(Li),us=function(me){var ut=me.characterMap,St=me.file,kt=me.httpHeaders,Tt=me.render,Lt=me.renderError,Kt=me.renderLoader,Wt=me.renderProtectedView,Mt=me.transformGetDocumentParams,qt=me.withCredentials,Gt=me.onDocumentAskPassword,gn=J.useContext(nt).direction===A.TextDirection.RightToLeft,pn=J.useState(new ra(0)),dn=pn[0],kn=pn[1],Cn=J.useRef(""),wn=$t();return J.useEffect(function(){Cn.current="",kn(new ra(0));var hr=new ne.PDFWorker({name:"PDFWorker_".concat(Date.now())}),qn=Object.assign({httpHeaders:kt,withCredentials:qt,worker:hr},typeof St=="string"?{url:St}:{data:St},ut?{cMapUrl:ut.url,cMapPacked:ut.isCompressed}:{}),Kn=Mt?Mt(qn):qn,tr=ne.getDocument(Kn);return tr.onPassword=function(jn,ir){switch(ir){case ne.PasswordResponses.NEED_PASSWORD:wn.current&&kn(new na(jn,A.PasswordStatus.RequiredPassword));break;case ne.PasswordResponses.INCORRECT_PASSWORD:wn.current&&kn(new na(jn,A.PasswordStatus.WrongPassword))}},tr.onProgress=function(jn){var ir=jn.total>0?Math.min(100,100*jn.loaded/jn.total):100;wn.current&&Cn.current===""&&kn(new ra(ir))},tr.promise.then(function(jn){Cn.current=jn.loadingTask.docId,wn.current&&kn(new Qa(jn))},function(jn){return wn.current&&!hr.destroyed&&kn(new eo({message:jn.message||"Cannot load document",name:jn.name}))}),function(){tr.destroy(),hr.destroy()}},[St]),dn instanceof na?J.createElement(cs,{passwordStatus:dn.passwordStatus,renderProtectedView:Wt,verifyPassword:dn.verifyPassword,onDocumentAskPassword:Gt}):dn instanceof Qa?Tt(dn.doc):dn instanceof eo?Lt?Lt(dn.error):J.createElement("div",{className:Ae({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":gn})},J.createElement("div",{className:"rpv-core__doc-error-text"},dn.error.message)):J.createElement("div",{"data-testid":"core__doc-loading",className:Ae({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":gn})},Kt?Kt(dn.percentages):J.createElement(at,null))},ds=function(me,ut){var St=J.useMemo(function(){return me==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":me},[]),kt=J.useState(St),Tt=kt[0],Lt=kt[1],Kt=Ot(Tt);return J.useEffect(function(){if(me==="auto"){var Wt=window.matchMedia("(prefers-color-scheme: dark)"),Mt=function(qt){Lt(qt.matches?"dark":"light")};return Wt.addEventListener("change",Mt),function(){return Wt.removeEventListener("change",Mt)}}},[]),J.useEffect(function(){Tt!==Kt&&ut&&ut(Tt)},[Tt]),J.useEffect(function(){me!==Tt&&Lt(me)},[me]),{currentTheme:Tt,setCurrentTheme:Lt}},hs=function(me){return{startPage:me.startPage-3,endPage:me.endPage+3}};A.Button=function(me){var ut=me.children,St=me.testId,kt=me.onClick,Tt=J.useContext(nt).direction===A.TextDirection.RightToLeft,Lt=St?{"data-testid":St}:{};return J.createElement("button",re({className:Ae({"rpv-core__button":!0,"rpv-core__button--rtl":Tt}),type:"button",onClick:kt},Lt),ut)},A.Icon=oe,A.LazyRender=function(me){var ut=me.attrs,St=me.children,kt=me.testId,Tt=J.useState(!1),Lt=Tt[0],Kt=Tt[1],Wt=kt?re(re({},ut),{"data-testid":kt}):ut,Mt=he({once:!0,onVisibilityChanged:function(qt){qt.isVisible&&Kt(!0)}});return J.createElement("div",re({ref:Mt},Wt),Lt&&St)},A.LocalizationContext=sn,A.Menu=function(me){var ut=me.children,St=J.useRef(),kt=J.useRef([]),Tt=J.useContext(nt).direction===A.TextDirection.RightToLeft,Lt=function(Wt){if(St.current)switch(Wt.key){case"Tab":Wt.preventDefault();break;case"ArrowDown":Wt.preventDefault(),Kt(function(Mt,qt){return qt+1});break;case"ArrowUp":Wt.preventDefault(),Kt(function(Mt,qt){return qt-1});break;case"End":Wt.preventDefault(),Kt(function(Mt,qt){return Mt.length-1});break;case"Home":Wt.preventDefault(),Kt(function(Mt,qt){return 0})}},Kt=function(Wt){if(St.current){var Mt=kt.current,qt=Mt.findIndex(function(gn){return gn.getAttribute("tabindex")==="0"}),Gt=Math.min(Mt.length-1,Math.max(0,Wt(Mt,qt)));qt>=0&&qt<=Mt.length-1&&Mt[qt].setAttribute("tabindex","-1"),Mt[Gt].setAttribute("tabindex","0"),Mt[Gt].focus()}};return ke(function(){var Wt=St.current;if(Wt){var Mt=function(qt){var Gt=[];return qt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(gn){if(gn instanceof HTMLElement){var pn=gn.parentElement;(pn===qt||window.getComputedStyle(pn).display!=="none")&&Gt.push(gn)}}),Gt}(Wt);kt.current=Mt}},[]),ke(function(){return document.addEventListener("keydown",Lt),function(){document.removeEventListener("keydown",Lt)}},[]),J.createElement("div",{ref:St,"aria-orientation":"vertical",className:Ae({"rpv-core__menu":!0,"rpv-core__menu--rtl":Tt}),role:"menu",tabIndex:0},ut)},A.MenuDivider=function(){return J.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},A.MenuItem=function(me){var ut=me.checked,St=ut!==void 0&&ut,kt=me.children,Tt=me.icon,Lt=Tt===void 0?null:Tt,Kt=me.isDisabled,Wt=Kt!==void 0&&Kt,Mt=me.testId,qt=me.onClick,Gt=J.useContext(nt).direction===A.TextDirection.RightToLeft,gn=Mt?{"data-testid":Mt}:{};return J.createElement("button",re({className:Ae({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Wt,"rpv-core__menu-item--ltr":!Gt,"rpv-core__menu-item--rtl":Gt}),role:"menuitem",tabIndex:-1,type:"button",onClick:qt},gn),J.createElement("div",{className:Ae({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Gt,"rpv-core__menu-item-icon--rtl":Gt})},Lt),J.createElement("div",{className:Ae({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Gt,"rpv-core__menu-item-label--rtl":Gt})},kt),J.createElement("div",{className:Ae({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Gt,"rpv-core__menu-item-check--rtl":Gt})},St&&J.createElement(Oe,null)))},A.MinimalButton=function(me){var ut=me.ariaLabel,St=ut===void 0?"":ut,kt=me.ariaKeyShortcuts,Tt=kt===void 0?"":kt,Lt=me.children,Kt=me.isDisabled,Wt=Kt!==void 0&&Kt,Mt=me.isSelected,qt=Mt!==void 0&&Mt,Gt=me.testId,gn=me.onClick,pn=J.useContext(nt).direction===A.TextDirection.RightToLeft,dn=Gt?{"data-testid":Gt}:{};return J.createElement("button",re({"aria-label":St},Tt&&{"aria-keyshortcuts":Tt},Wt&&{"aria-disabled":!0},{className:Ae({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Wt,"rpv-core__minimal-button--rtl":pn,"rpv-core__minimal-button--selected":qt}),type:"button",onClick:gn},dn),Lt)},A.Modal=function(me){var ut=me.ariaControlsSuffix,St=me.closeOnClickOutside,kt=me.closeOnEscape,Tt=me.content,Lt=me.isOpened,Kt=Lt!==void 0&&Lt,Wt=me.target,Mt=ut||"".concat(gt());return J.createElement(bt,{target:Wt?function(qt,Gt){return J.createElement("div",{"aria-expanded":Gt?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(Mt)},Wt(qt,Gt))}:null,content:function(qt){return J.createElement(rt,null,J.createElement(pe,{ariaControlsSuffix:Mt,closeOnClickOutside:St,closeOnEscape:kt,onToggle:qt},Tt(qt)))},isOpened:Kt})},A.Popover=function(me){var ut=me.ariaHasPopup,St=ut===void 0?"dialog":ut,kt=me.ariaControlsSuffix,Tt=me.closeOnClickOutside,Lt=me.closeOnEscape,Kt=me.content,Wt=me.lockScroll,Mt=Wt===void 0||Wt,qt=me.offset,Gt=me.position,gn=me.target,pn=pt(!1),dn=pn.opened,kn=pn.toggle,Cn=J.useRef(),wn=J.useMemo(function(){return kt||"".concat(gt())},[]);return J.createElement("div",{ref:Cn,"aria-expanded":dn?"true":"false","aria-haspopup":St,"aria-controls":"rpv-core__popver-body-".concat(wn)},gn(kn,dn),dn&&J.createElement(J.Fragment,null,Mt&&J.createElement(en,{closeOnEscape:Lt,onClose:kn}),J.createElement(xn,{ariaControlsSuffix:wn,closeOnClickOutside:Tt,offset:qt,position:Gt,targetRef:Cn,onClose:kn},Kt(kn))))},A.PrimaryButton=it,A.ProgressBar=function(me){var ut=me.progress,St=J.useContext(nt).direction===A.TextDirection.RightToLeft;return J.createElement("div",{className:Ae({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":St})},J.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(ut,"%")}},ut,"%"))},A.Separator=function(){return J.createElement("div",{className:"rpv-core__separator"})},A.Spinner=at,A.Splitter=function(me){var ut=me.constrain,St=J.useContext(nt).direction===A.TextDirection.RightToLeft,kt=J.useRef(),Tt=J.useRef(),Lt=J.useRef(),Kt=J.useRef(0),Wt=J.useRef(0),Mt=J.useRef(0),qt=J.useRef(0),Gt={capture:!0},gn=function(dn){var kn=kt.current,Cn=Tt.current,wn=Lt.current;if(kn&&Cn&&wn){var hr=qt.current,qn=dn.clientX-Kt.current,Kn=Mt.current+(St?-qn:qn),tr=kn.parentElement.getBoundingClientRect().width,jn=100*Kn/tr;if(kn.classList.add("rpv-core__splitter--resizing"),ut){var ir=tr-Kn-hr;if(!ut({firstHalfPercentage:jn,firstHalfSize:Kn,secondHalfPercentage:100*ir/tr,secondHalfSize:ir}))return}Cn.style.width="".concat(jn,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Cn.classList.add("rpv-core__splitter-sibling--resizing"),wn.classList.add("rpv-core__splitter-sibling--resizing")}},pn=function(dn){var kn=kt.current,Cn=Tt.current,wn=Lt.current;kn&&Cn&&wn&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),kn.classList.remove("rpv-core__splitter--resizing"),Cn.classList.remove("rpv-core__splitter-sibling--resizing"),wn.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",gn,Gt),document.removeEventListener("mouseup",pn,Gt))};return J.useEffect(function(){var dn=kt.current;dn&&(qt.current=dn.getBoundingClientRect().width,Tt.current=dn.previousElementSibling,Lt.current=dn.nextElementSibling)},[]),J.createElement("div",{ref:kt,className:"rpv-core__splitter",onMouseDown:function(dn){var kn=Tt.current;kn&&(Kt.current=dn.clientX,Wt.current=dn.clientY,Mt.current=kn.getBoundingClientRect().width,document.addEventListener("mousemove",gn,Gt),document.addEventListener("mouseup",pn,Gt))}})},A.TextBox=lt,A.ThemeContext=nt,A.Tooltip=function(me){var ut=me.ariaControlsSuffix,St=me.content,kt=me.offset,Tt=me.position,Lt=me.target,Kt=pt(!1),Wt=Kt.opened,Mt=Kt.toggle,qt=J.useRef(),Gt=J.useRef(),gn=J.useMemo(function(){return ut||"".concat(gt())},[]);Ee(function(){qt.current&&document.activeElement&&qt.current.contains(document.activeElement)&&dn()});var pn=function(){Mt(A.ToggleStatus.Open)},dn=function(){Mt(A.ToggleStatus.Close)};return J.createElement(J.Fragment,null,J.createElement("div",{ref:qt,"aria-describedby":"rpv-core__tooltip-body-".concat(gn),onBlur:function(kn){kn.relatedTarget instanceof HTMLElement&&kn.currentTarget.parentElement&&kn.currentTarget.parentElement.contains(kn.relatedTarget)?Gt.current&&(Gt.current.style.display="none"):dn()},onFocus:pn,onMouseEnter:pn,onMouseLeave:dn},Lt),Wt&&J.createElement(Bt,{ariaControlsSuffix:gn,contentRef:Gt,offset:kt,position:Tt,targetRef:qt},St()))},A.Viewer=function(me){var ut=me.characterMap,St=me.defaultScale,kt=me.enableSmoothScroll,Tt=kt===void 0||kt,Lt=me.fileUrl,Kt=me.httpHeaders,Wt=Kt===void 0?{}:Kt,Mt=me.initialPage,qt=Mt===void 0?0:Mt,Gt=me.pageLayout,gn=me.initialRotation,pn=gn===void 0?0:gn,dn=me.localization,kn=me.plugins,Cn=kn===void 0?[]:kn,wn=me.renderError,hr=me.renderLoader,qn=me.renderPage,Kn=me.renderProtectedView,tr=me.scrollMode,jn=tr===void 0?A.ScrollMode.Vertical:tr,ir=me.setRenderRange,Qn=ir===void 0?hs:ir,yr=me.transformGetDocumentParams,_r=me.theme,Sr=_r===void 0?{direction:A.TextDirection.LeftToRight,theme:"light"}:_r,wr=me.viewMode,$r=wr===void 0?A.ViewMode.SinglePage:wr,zr=me.withCredentials,Lr=zr!==void 0&&zr,Hr=me.onDocumentAskPassword,Dr=me.onDocumentLoad,Nr=Dr===void 0?function(){}:Dr,jr=me.onPageChange,Or=jr===void 0?function(){}:jr,Xr=me.onRotate,ri=Xr===void 0?function(){}:Xr,ti=me.onRotatePage,Ur=ti===void 0?function(){}:ti,Yr=me.onSwitchTheme,ii=Yr===void 0?function(){}:Yr,er=me.onZoom,Zn=er===void 0?function(){}:er,Bn=J.useState({data:Lt,name:typeof Lt=="string"?Lt:"",shouldLoad:!1}),Wn=Bn[0],zn=Bn[1],ar=function(Fr,Ir){zn({data:Ir,name:Fr,shouldLoad:!0})},or=J.useState(!1),Un=or[0],Ln=or[1],lr=Ot(Wn);J.useEffect(function(){var Fr,Ir,Vr,Pr;Fr=lr.data,Pr=typeof(Ir=Lt),(Vr=typeof Fr)=="string"&&Pr==="string"&&Fr===Ir||Vr==="object"&&Pr==="object"&&Fr.length===Ir.length&&Fr.every(function(oi,mi){return oi===Ir[mi]})||zn({data:Lt,name:typeof Lt=="string"?Lt:"",shouldLoad:Un})},[Lt,Un]);var mr=he({onVisibilityChanged:function(Fr){Ln(Fr.isVisible),Fr.isVisible&&zn(function(Ir){return Object.assign({},Ir,{shouldLoad:!0})})}}),Rr=typeof Sr=="string"?{direction:A.TextDirection.LeftToRight,theme:Sr}:Sr,xr=J.useState(dn||Jt),Gr=xr[0],Jr=xr[1],dr={l10n:Gr,setL10n:Jr},qr=Object.assign({},{direction:Rr.direction},ds(Rr.theme||"light",ii));return J.useEffect(function(){dn&&Jr(dn)},[dn]),J.createElement(sn.Provider,{value:dr},J.createElement(nt.Provider,{value:qr},J.createElement("div",{ref:mr,className:"rpv-core__viewer rpv-core__viewer--".concat(qr.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Wn.shouldLoad&&J.createElement(us,{characterMap:ut,file:Wn.data,httpHeaders:Wt,render:function(Fr){return J.createElement(ls,{defaultScale:St,doc:Fr,render:function(Ir,Vr){return J.createElement(ss,{currentFile:{data:Wn.data,name:Wn.name},defaultScale:St,doc:Fr,enableSmoothScroll:Tt,initialPage:qt,initialRotation:pn,initialScale:Vr,pageLayout:Gt,pageSizes:Ir,plugins:Cn,renderPage:qn,scrollMode:jn,setRenderRange:Qn,viewMode:$r,viewerState:{file:Wn,fullScreenMode:A.FullScreenMode.Normal,pageIndex:-1,pageHeight:Ir[0].pageHeight,pageWidth:Ir[0].pageWidth,pagesRotation:new Map,rotation:pn,scale:Vr,scrollMode:jn,viewMode:$r},onDocumentLoad:Nr,onOpenFile:ar,onPageChange:Or,onRotate:ri,onRotatePage:Ur,onZoom:Zn})},scrollMode:jn,viewMode:$r})},renderError:wn,renderLoader:hr,renderProtectedView:Kn,transformGetDocumentParams:yr,withCredentials:Lr,onDocumentAskPassword:Hr}))))},A.Worker=function(me){var ut=me.children,St=me.workerUrl;return ne.GlobalWorkerOptions.workerSrc=St,J.createElement(J.Fragment,null,ut)},A.chunk=nn,A.classNames=Ae,A.createStore=function(me){var ut=me||{},St={},kt=function(Lt,Kt){var Wt;ut=re(re({},ut),((Wt={})[Lt]=Kt,Wt)),(St[Lt]||[]).forEach(function(Mt){return Mt(ut[Lt])})},Tt=function(Lt){return ut[Lt]};return{subscribe:function(Lt,Kt){St[Lt]=(St[Lt]||[]).concat(Kt)},unsubscribe:function(Lt,Kt){St[Lt]=(St[Lt]||[]).filter(function(Wt){return Wt!==Kt})},update:function(Lt,Kt){kt(Lt,Kt)},updateCurrentValue:function(Lt,Kt){var Wt=Tt(Lt);Wt!==void 0&&kt(Lt,Kt(Wt))},get:function(Lt){return Tt(Lt)}}},A.getDestination=Jn,A.getPage=Xn,A.isFullScreenEnabled=ct,A.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},A.useDebounceCallback=ht,A.useIntersectionObserver=he,A.useIsMounted=$t,A.useIsomorphicLayoutEffect=ke,A.usePrevious=Ot,A.useRenderQueue=Yt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=core_min})(lib$h);var libExports$g={},lib$g={get exports(){return libExports$g},set exports(A){libExports$g=A}},defaultLayout_min={},libExports$f={},lib$f={get exports(){return libExports$f},set exports(A){libExports$f=A}},attachment_min={},e$e=libExports$h;function t$e(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var n$e=t$e(reactExports),a$e=function(A){var B=A.files,K=n$e.useRef(),V=n$e.useContext(e$e.LocalizationContext).l10n,W=n$e.useContext(e$e.ThemeContext).direction===e$e.TextDirection.RightToLeft,J=n$e.useRef([]),ne=V&&V.attachment?V.attachment.clickToDownload:"Click to download",ge=function(ve){var Te=K.current,re=[].slice.call(Te.getElementsByClassName("rpv-attachment__item"));if(re.length!==0){re.forEach(function(Ae){return Ae.setAttribute("tabindex","-1")});var st=document.activeElement,nt=re[Math.min(re.length-1,Math.max(0,ve(re,st)))];nt.setAttribute("tabindex","0"),nt.focus()}};return e$e.useIsomorphicLayoutEffect(function(){var ve=K.current;if(ve){var Te=[].slice.call(ve.getElementsByClassName("rpv-attachment__item"));if(J.current=Te,Te.length>0){var re=Te[0];re.focus(),re.setAttribute("tabindex","0")}}},[]),n$e.createElement("div",{"data-testid":"attachment__list",className:e$e.classNames({"rpv-attachment__list":!0,"rpv-attachment__list--rtl":W}),ref:K,tabIndex:-1,onKeyDown:function(ve){switch(ve.key){case"ArrowDown":ve.preventDefault(),ge(function(Te,re){return Te.indexOf(re)+1});break;case"ArrowUp":ve.preventDefault(),ge(function(Te,re){return Te.indexOf(re)-1});break;case"End":ve.preventDefault(),ge(function(Te,re){return Te.length-1});break;case"Home":ve.preventDefault(),ge(function(Te,re){return 0})}}},B.map(function(ve){return n$e.createElement("button",{className:"rpv-attachment__item",key:ve.fileName,tabIndex:-1,title:ne,type:"button",onClick:function(){return Te=ve.fileName,re=ve.data,st=typeof re=="string"?"":URL.createObjectURL(new Blob([re],{type:""})),(nt=document.createElement("a")).style.display="none",nt.href=st||Te,nt.setAttribute("download",function(Ae){var ke=Ae.split("/").pop();return ke?ke.split("#")[0].split("?")[0]:Ae}(Te)),document.body.appendChild(nt),nt.click(),document.body.removeChild(nt),void(st&&URL.revokeObjectURL(st));var Te,re,st,nt}},ve.fileName)}))},r$e=function(A){var B=A.doc,K=n$e.useContext(e$e.LocalizationContext).l10n,V=n$e.useContext(e$e.ThemeContext).direction===e$e.TextDirection.RightToLeft,W=K&&K.attachment?K.attachment.noAttachment:"There is no attachment",J=n$e.useState({files:[],isLoaded:!1}),ne=J[0],ge=J[1];return n$e.useEffect(function(){B.getAttachments().then(function(ve){var Te=ve?Object.keys(ve).map(function(re){return{data:ve[re].content,fileName:ve[re].filename}}):[];ge({files:Te,isLoaded:!0})})},[B]),ne.isLoaded?ne.files.length===0?n$e.createElement("div",{"data-testid":"attachment__empty",className:e$e.classNames({"rpv-attachment__empty":!0,"rpv-attachment__empty--rtl":V})},W):n$e.createElement(a$e,{files:ne.files}):n$e.createElement(e$e.Spinner,null)},c$e=function(A){var B=A.store,K=n$e.useState(B.get("doc")),V=K[0],W=K[1],J=function(ne){W(ne)};return n$e.useEffect(function(){return B.subscribe("doc",J),function(){B.unsubscribe("doc",J)}},[]),V?n$e.createElement(r$e,{doc:V}):n$e.createElement("div",{className:"rpv-attachment__loader"},n$e.createElement(e$e.Spinner,null))};attachment_min.attachmentPlugin=function(){var A=n$e.useMemo(function(){return e$e.createStore({})},[]);return{onDocumentLoad:function(B){A.update("doc",B.doc)},Attachments:function(){return n$e.createElement(c$e,{store:A})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=attachment_min})(lib$f);var libExports$e={},lib$e={get exports(){return libExports$e},set exports(A){libExports$e=A}},bookmark_min={},e$d=libExports$h;function t$d(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var r$d,o$d=t$d(reactExports),n$d=function(){return n$d=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},n$d.apply(this,arguments)},a$d=function(){return o$d.createElement(e$d.Icon,{size:16},o$d.createElement("path",{d:"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z"}))},i$d=function(){return o$d.createElement(e$d.Icon,{size:16},o$d.createElement("path",{d:"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z"}))},c$d=function(A){var B=A.bookmark,K=A.depth,V=A.doc,W=A.index,J=A.isBookmarkExpanded,ne=A.numberOfSiblings,ge=A.pathFromRoot,ve=A.renderBookmarkItem,Te=A.store,re=ge?"".concat(ge,".").concat(W):"".concat(W),st=o$d.useMemo(function(){return function(Ce){var ft=Ce.count,ct=Ce.items;if(ft>=0)return!1;var Et=ct.length;if(Et===0)return!1;for(var xt=ct.concat([]);xt.length>0;){var ht=xt.shift(),$t=ht.items;ht.count&&$t&&ht.count>0&&$t.length>0&&(Et+=$t.length,xt=xt.concat($t))}return Math.abs(ft)===Et}(B)},[B]),nt=Te.get("bookmarkExpandedMap"),Ae=J?J({bookmark:B,doc:V,depth:K,index:W}):nt.has(re)?nt.get(re):!st,ke=o$d.useState(Ae),he=ke[0],oe=ke[1],Oe=B.items&&B.items.length>0,it=function(){var Ce=!he;Te.updateCurrentValue("bookmarkExpandedMap",function(ft){return ft.set(re,Ce)}),oe(Ce)},at=function(){var Ce=B.dest,ft=Te.get("jumpToDestination");e$d.getDestination(V,Ce).then(function(ct){ft&&ft(n$d({label:B.title},ct))})},lt=function(){Oe&&B.dest&&at()},be=function(){!Oe&&B.dest&&at()},Ie=function(Ce,ft){return o$d.createElement("div",{className:"rpv-bookmark__item",style:{paddingLeft:"".concat(1.25*K,"rem")},onClick:Ce},ft)},vt=function(Ce,ft){return Oe?o$d.createElement("span",{className:"rpv-bookmark__toggle","data-testid":"bookmark__toggle-".concat(K,"-").concat(W),onClick:it},he?Ce:ft):o$d.createElement("span",{className:"rpv-bookmark__toggle"})},dt=function(Ce){return B.url?o$d.createElement("a",{className:"rpv-bookmark__title",href:B.url,rel:"noopener noreferrer nofollow",target:B.newWindow?"_blank":""},B.title):o$d.createElement("div",{className:"rpv-bookmark__title","aria-label":B.title,onClick:Ce},B.title)};return o$d.createElement("li",{"aria-expanded":he?"true":"false","aria-label":B.title,"aria-level":K+1,"aria-posinset":W+1,"aria-setsize":ne,role:"treeitem",tabIndex:-1},ve?ve({bookmark:B,depth:K,hasSubItems:Oe,index:W,isExpanded:he,path:re,defaultRenderItem:Ie,defaultRenderTitle:dt,defaultRenderToggle:vt,onClickItem:be,onClickTitle:lt,onToggleSubItems:it}):Ie(be,o$d.createElement(o$d.Fragment,null,vt(o$d.createElement(a$d,null),o$d.createElement(i$d,null)),dt(lt))),Oe&&he&&o$d.createElement(m$9,{bookmarks:B.items,depth:K+1,doc:V,isBookmarkExpanded:J,isRoot:!1,pathFromRoot:re,renderBookmarkItem:ve,store:Te}))},m$9=function(A){var B=A.bookmarks,K=A.depth,V=K===void 0?0:K,W=A.doc,J=A.isBookmarkExpanded,ne=A.isRoot,ge=A.pathFromRoot,ve=A.renderBookmarkItem,Te=A.store;return o$d.createElement("ul",{className:"rpv-bookmark__list",role:ne?"tree":"group",tabIndex:-1},B.map(function(re,st){return o$d.createElement(c$d,{bookmark:re,depth:V,doc:W,index:st,isBookmarkExpanded:J,key:st,numberOfSiblings:B.length,pathFromRoot:ge,renderBookmarkItem:ve,store:Te})}))};(function(A){A[A.Collapse=0]="Collapse",A[A.Expand=1]="Expand"})(r$d||(r$d={}));var l$d=function(A){var B=A.bookmarks,K=A.doc,V=A.isBookmarkExpanded,W=A.renderBookmarkItem,J=A.store,ne=o$d.useRef(),ge=function(st){var nt=ne.current;if(nt&&st.target instanceof HTMLElement&&nt.contains(st.target))switch(st.key){case"ArrowDown":st.preventDefault(),Te(function(Ae,ke){return Ae.indexOf(ke)+1});break;case"ArrowLeft":st.preventDefault(),re(r$d.Collapse);break;case"ArrowRight":st.preventDefault(),re(r$d.Expand);break;case"ArrowUp":st.preventDefault,Te(function(Ae,ke){return Ae.indexOf(ke)-1});break;case"End":st.preventDefault(),Te(function(Ae,ke){return Ae.length-1});break;case" ":case"Enter":case"Space":st.preventDefault(),ve();break;case"Home":st.preventDefault(),Te(function(Ae,ke){return 0})}},ve=function(){var st=document.activeElement.closest(".rpv-bookmark__item").querySelector(".rpv-bookmark__title");st&&st.click()},Te=function(st){var nt=ne.current,Ae=[].slice.call(nt.getElementsByClassName("rpv-bookmark__item"));if(Ae.length!==0){var ke=document.activeElement,he=Ae[Math.min(Ae.length-1,Math.max(0,st(Ae,ke)))];ke.setAttribute("tabindex","-1"),he.setAttribute("tabindex","0"),he.focus()}},re=function(st){var nt=ne.current;if([].slice.call(nt.getElementsByClassName("rpv-bookmark__item")).length!==0){var Ae=document.activeElement.closest(".rpv-bookmark__item"),ke=st===r$d.Collapse?"true":"false";if(Ae&&Ae.parentElement.getAttribute("aria-expanded")===ke){var he=Ae.querySelector(".rpv-bookmark__toggle");he&&he.click()}}};return o$d.useEffect(function(){return document.addEventListener("keydown",ge),function(){document.removeEventListener("keydown",ge)}},[]),o$d.useEffect(function(){var st=ne.current;if(st){var nt=[].slice.call(st.getElementsByClassName("rpv-bookmark__item"));nt.length>0&&(nt[0].focus(),nt[0].setAttribute("tabindex","0"))}},[]),o$d.createElement("div",{ref:ne},o$d.createElement(m$9,{bookmarks:B,depth:0,doc:K,isBookmarkExpanded:V,isRoot:!0,pathFromRoot:"",renderBookmarkItem:W,store:J}))},s$9=function(A){var B=A.doc,K=A.isBookmarkExpanded,V=A.renderBookmarkItem,W=A.store,J=o$d.useContext(e$d.LocalizationContext).l10n,ne=o$d.useContext(e$d.ThemeContext).direction===e$d.TextDirection.RightToLeft,ge=o$d.useState({isLoaded:!1,items:[]}),ve=ge[0],Te=ge[1];return o$d.useEffect(function(){Te({isLoaded:!1,items:[]}),B.getOutline().then(function(re){Te({isLoaded:!0,items:re||[]})})},[B]),ve.isLoaded?ve.items.length===0?o$d.createElement("div",{"data-testid":"bookmark__empty",className:e$d.classNames({"rpv-bookmark__empty":!0,"rpv-bookmark__empty--rtl":ne})},J&&J.bookmark?J.bookmark.noBookmark:"There is no bookmark"):o$d.createElement("div",{"data-testid":"bookmark__container",className:e$d.classNames({"rpv-bookmark__container":!0,"rpv-bookmark__container--rtl":ne})},o$d.createElement(l$d,{bookmarks:ve.items,doc:B,isBookmarkExpanded:K,renderBookmarkItem:V,store:W})):o$d.createElement("div",{className:"rpv-bookmark__loader"},o$d.createElement(e$d.Spinner,null))},u$d=function(A){var B=A.isBookmarkExpanded,K=A.renderBookmarkItem,V=A.store,W=o$d.useState(V.get("doc")),J=W[0],ne=W[1],ge=function(ve){ne(ve)};return o$d.useEffect(function(){return V.subscribe("doc",ge),function(){V.unsubscribe("doc",ge)}},[]),J?o$d.createElement(s$9,{doc:J,isBookmarkExpanded:B,renderBookmarkItem:K,store:V}):o$d.createElement("div",{className:"rpv-bookmark__loader"},o$d.createElement(e$d.Spinner,null))};bookmark_min.DownArrowIcon=a$d,bookmark_min.RightArrowIcon=i$d,bookmark_min.bookmarkPlugin=function(){var A=o$d.useMemo(function(){return e$d.createStore({bookmarkExpandedMap:new Map})},[]);return{install:function(B){A.update("jumpToDestination",B.jumpToDestination)},onDocumentLoad:function(B){A.update("doc",B.doc)},Bookmarks:function(B){return o$d.createElement(u$d,{isBookmarkExpanded:B==null?void 0:B.isBookmarkExpanded,renderBookmarkItem:B==null?void 0:B.renderBookmarkItem,store:A})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=bookmark_min})(lib$e);var libExports$d={},lib$d={get exports(){return libExports$d},set exports(A){libExports$d=A}},thumbnail_min={};(function(A){var B=libExports$h;function K(he){var oe=Object.create(null);return he&&Object.keys(he).forEach(function(Oe){if(Oe!=="default"){var it=Object.getOwnPropertyDescriptor(he,Oe);Object.defineProperty(oe,Oe,it.get?it:{enumerable:!0,get:function(){return he[Oe]}})}}),oe.default=he,Object.freeze(oe)}var V,W=K(reactExports);A.ThumbnailDirection=void 0,(V=A.ThumbnailDirection||(A.ThumbnailDirection={})).Horizontal="Horizontal",V.Vertical="Vertical";var J=function(){return J=Object.assign||function(he){for(var oe,Oe=1,it=arguments.length;Oe<it;Oe++)for(var at in oe=arguments[Oe])Object.prototype.hasOwnProperty.call(oe,at)&&(he[at]=oe[at]);return he},J.apply(this,arguments)},ne=function(he){var oe=he.doc,Oe=he.getPageIndex,it=he.renderSpinner,at=he.store,lt=he.width,be=oe.numPages,Ie=Oe?Oe({numPages:be}):0,vt=Math.max(0,Math.min(Ie,be-1)),dt=at.get("pagesRotation")||new Map,Ce=dt.has(vt)?dt.get(vt):0,ft=W.useState(""),ct=ft[0],Et=ft[1],xt=B.useIsMounted(),ht=W.useRef(),$t=W.useState(at.get("rotation")||0),Ot=$t[0],Vt=$t[1],Pt=W.useState(Ce),Yt=Pt[0],Jt=Pt[1],sn=W.useState(!1),ln=sn[0],gt=sn[1],ce=function(rt){var ot=rt.has(vt)?rt.get(vt):0;Jt(ot)},Ee=function(rt){Vt(rt)},pe=B.useIntersectionObserver({onVisibilityChanged:function(rt){gt(rt.isVisible)}});return W.useEffect(function(){if(ln){var rt=pe.current;rt&&(Et(""),B.getPage(oe,vt).then(function(ot){var pt=ot.getViewport({scale:1}),bt=(pt.rotation+Ot+Yt)%360,yt=Math.abs(Ot+Yt)%180==0,Nt=yt?pt.width:pt.height,It=yt?pt.height:pt.width,Xt=document.createElement("canvas"),tn=Xt.getContext("2d",{alpha:!1}),fn=rt.clientWidth,an=rt.clientHeight,cn=lt?lt/Nt:Math.min(fn/Nt,an/It),hn=cn*Nt,un=cn*It;Xt.height=un,Xt.width=hn,Xt.style.opacity="0";var xn=ot.getViewport({rotation:bt,scale:cn});ht.current=ot.render({canvasContext:tn,viewport:xn}),ht.current.promise.then(function(){xt.current&&Et(Xt.toDataURL()),Xt.width=0,Xt.height=0},function(){})}))}},[Yt,ln]),W.useEffect(function(){return at.subscribe("pagesRotation",ce),at.subscribe("rotation",Ee),function(){at.unsubscribe("pagesRotation",ce),at.unsubscribe("rotation",Ee)}},[]),W.useEffect(function(){return function(){var rt;(rt=ht.current)===null||rt===void 0||rt.cancel()}},[]),W.createElement("div",{ref:pe,className:"rpv-thumbnail__cover-inner","data-testid":"thumbnail__cover-inner"},ct?W.createElement("img",{className:"rpv-thumbnail__cover-image","data-testid":"thumbnail__cover-image",src:ct}):W.createElement("div",{className:"rpv-thumbnail__cover-loader","data-testid":"thumbnail__cover-loader"},it?it():W.createElement(B.Spinner,null)))},ge=function(he){var oe=he.getPageIndex,Oe=he.renderSpinner,it=he.store,at=he.width,lt=W.useState(it.get("doc")),be=lt[0],Ie=lt[1],vt=function(dt){Ie(dt)};return W.useEffect(function(){return it.subscribe("doc",vt),function(){it.unsubscribe("doc",vt)}},[]),W.createElement("div",{className:"rpv-thumbnail__cover"},be?W.createElement(ne,{doc:be,getPageIndex:oe,renderSpinner:Oe,store:it,width:at}):W.createElement("div",{className:"rpv-thumbnail__cover-loader"},Oe?Oe():W.createElement(B.Spinner,null)))},ve=function(){return W.createElement(B.Spinner,null)},Te=W.createContext({renderSpinner:ve}),re=function(he){var oe=he.children,Oe=he.doc,it=B.useIsMounted(),at=W.useState({loading:!0,labels:[]}),lt=at[0],be=at[1];return W.useEffect(function(){Oe.getPageLabels().then(function(Ie){it.current&&be({loading:!1,labels:Ie||[]})})},[Oe.loadingTask.docId]),lt.loading?W.createElement(W.Fragment,null):oe(lt.labels)},st=function(he){var oe=he.page,Oe=he.pageHeight,it=he.pageIndex,at=he.pageWidth,lt=he.rotation,be=he.thumbnailHeight,Ie=he.thumbnailWidth,vt=he.onRenderCompleted,dt=W.useContext(B.LocalizationContext).l10n,Ce=W.useRef(),ft=W.useState(""),ct=ft[0],Et=ft[1],xt=dt&&dt.thumbnail?dt.thumbnail.thumbnailLabel:"Thumbnail of page {{pageIndex}}";return W.useEffect(function(){var ht=Ce.current;ht&&ht.cancel();var $t=document.createElement("canvas"),Ot=$t.getContext("2d",{alpha:!1}),Vt=Ie,Pt=Vt/(at/Oe),Yt=Vt/at;$t.height=Pt,$t.width=Vt,$t.style.height="".concat(Pt,"px"),$t.style.width="".concat(Vt,"px");var Jt=oe.getViewport({rotation:lt,scale:Yt});return Ce.current=oe.render({canvasContext:Ot,viewport:Jt}),Ce.current.promise.then(function(){Et($t.toDataURL()),vt(it)},function(){vt(it)}),function(){var sn;(sn=Ce.current)===null||sn===void 0||sn.cancel()}},[lt]),ct?W.createElement("img",{"aria-label":xt.replace("{{pageIndex}}","".concat(it+1)),src:ct,height:"".concat(be,"px"),width:"".concat(Ie,"px")}):W.useContext(Te).renderSpinner()},nt=function(he){var oe=he.doc,Oe=he.pageHeight,it=he.pageIndex,at=he.pageRotation,lt=he.pageWidth,be=he.rotation,Ie=he.shouldRender,vt=he.thumbnailWidth,dt=he.onRenderCompleted,Ce=he.onVisibilityChanged,ft=B.useIsMounted(),ct=W.useState({height:Oe,page:null,viewportRotation:0,width:lt}),Et=ct[0],xt=ct[1],ht=Et.page,$t=Et.height,Ot=Et.width,Vt=Ot/$t,Pt=Math.abs(be+at)%180==0,Yt=Pt?vt:vt/Vt,Jt=Pt?vt/Vt:vt;W.useEffect(function(){Ie&&B.getPage(oe,it).then(function(gt){var ce=gt.getViewport({scale:1});ft.current&&xt({height:ce.height,page:gt,viewportRotation:ce.rotation,width:ce.width})})},[Ie]);var sn=(Et.viewportRotation+be+at)%360,ln=B.useIntersectionObserver({onVisibilityChanged:function(gt){Ce(it,gt)}});return W.createElement("div",{className:"rpv-thumbnail__container","data-testid":"thumbnail__container-".concat(it),ref:ln,style:{height:"".concat(Jt,"px"),width:"".concat(Yt,"px")}},ht?W.createElement(st,{page:ht,pageHeight:Pt?$t:Ot,pageIndex:it,pageWidth:Pt?Ot:$t,rotation:sn,thumbnailHeight:Jt,thumbnailWidth:Yt,onRenderCompleted:dt}):W.useContext(Te).renderSpinner())},Ae=function(he){var oe=he.currentPage,Oe=he.doc,it=he.labels,at=he.pagesRotation,lt=he.pageHeight,be=he.pageWidth,Ie=he.renderCurrentPageLabel,vt=he.renderThumbnailItem,dt=he.rotatedPage,Ce=he.rotation,ft=he.thumbnailDirection,ct=he.thumbnailWidth,Et=he.viewMode,xt=he.onJumpToPage,ht=he.onRotatePage,$t=Oe.numPages,Ot=Oe.loadingTask.docId,Vt=W.useRef(null),Pt=W.useRef([]),Yt=W.useState(oe),Jt=Yt[0],sn=Yt[1],ln=W.useContext(B.ThemeContext).direction===B.TextDirection.RightToLeft,gt=W.useState(-1),ce=gt[0],Ee=gt[1],pe=B.useIsMounted(),rt=B.usePrevious(Et),ot=W.useRef(!1),pt=B.useRenderQueue({doc:Oe}),bt=W.useMemo(function(){return Array($t).fill(0).map(function(cn,hn){return hn})},[Ot]),yt=W.useMemo(function(){switch(Et){case B.ViewMode.DualPage:return B.chunk(bt,2);case B.ViewMode.DualPageWithCover:return[[bt[0]]].concat(B.chunk(bt.slice(1),2));case B.ViewMode.SinglePage:default:return B.chunk(bt,1)}},[Ot,Et]),Nt=function(){if(Vt.current){var cn=Pt.current,hn=Jt+1;hn<cn.length&&(Jt>=0&&cn[Jt].setAttribute("tabindex","-1"),sn(hn))}},It=function(){if(Vt.current){var cn=Pt.current,hn=Jt-1;hn>=0&&(Jt>=0&&cn[Jt].setAttribute("tabindex","-1"),sn(hn))}},Xt=function(){Jt>=0&&Jt<$t&&xt(Jt)};B.useIsomorphicLayoutEffect(function(){var cn=Vt.current;cn&&(Pt.current=Array.from(cn.querySelectorAll(".rpv-thumbnail__item")))},[Et]),W.useEffect(function(){var cn=Pt.current;if(!(cn.length===0||Jt<0||Jt>cn.length)){var hn=cn[Jt];hn.setAttribute("tabindex","0"),hn.focus()}},[Jt]),B.useIsomorphicLayoutEffect(function(){var cn=Vt.current,hn=Pt.current;if(!(!cn||hn.length===0||oe<0||oe>hn.length)){var un=hn[oe].closest(".rpv-thumbnail__items");un&&(ft===A.ThumbnailDirection.Vertical?function(xn,en){var Bt=xn.getBoundingClientRect().top-en.getBoundingClientRect().top,zt=xn.clientHeight,nn=en.clientHeight;Bt<0?en.scrollTop+=Bt:Bt+zt<=nn||(en.scrollTop+=Bt+zt-nn)}(un,cn):function(xn,en){var Bt=xn.getBoundingClientRect().left-en.getBoundingClientRect().left,zt=xn.clientWidth,nn=en.clientWidth;Bt<0?en.scrollLeft+=Bt:Bt+zt<=nn||(en.scrollLeft+=Bt+zt-nn)}(un,cn))}},[oe,ft]);var tn=W.useCallback(function(cn){pe.current&&(pt.markRendered(cn),ot.current=!1,an())},[Ot]),fn=W.useCallback(function(cn,hn){hn.isVisible?pt.setVisibility(cn,hn.ratio):pt.setOutOfRange(cn),an()},[Ot]),an=W.useCallback(function(){if(!ot.current){var cn=pt.getHighestPriorityPage();cn>-1&&(pt.markRendering(cn),ot.current=!0,Ee(cn))}},[Ot]);return W.useEffect(function(){dt>=0&&(pt.markRendering(dt),ot.current=!0,Ee(dt))},[Ot,dt]),B.useIsomorphicLayoutEffect(function(){rt!==Et&&(pt.markNotRendered(),an())},[Et]),W.createElement("div",{ref:Vt,"data-testid":"thumbnail__list",className:B.classNames({"rpv-thumbnail__list":!0,"rpv-thumbnail__list--horizontal":ft===A.ThumbnailDirection.Horizontal,"rpv-thumbnail__list--rtl":ln,"rpv-thumbnail__list--vertical":ft===A.ThumbnailDirection.Vertical}),onKeyDown:function(cn){switch(cn.key){case"ArrowDown":Nt();break;case"ArrowUp":It();break;case"Enter":Xt()}}},yt.map(function(cn,hn){var un=!1;switch(Et){case B.ViewMode.DualPage:un=oe===2*hn||oe===2*hn+1;break;case B.ViewMode.DualPageWithCover:un=oe===0&&hn===0||hn>0&&oe===2*hn-1||hn>0&&oe===2*hn;break;case B.ViewMode.SinglePage:default:un=oe===hn}return W.createElement("div",{className:B.classNames({"rpv-thumbnail__items":!0,"rpv-thumbnail__items--dual":Et===B.ViewMode.DualPage,"rpv-thumbnail__items--dual-cover":Et===B.ViewMode.DualPageWithCover,"rpv-thumbnail__items--single":Et===B.ViewMode.SinglePage,"rpv-thumbnail__items--selected":un}),key:"".concat(hn,"___").concat(Et)},cn.map(function(xn){return function(en){var Bt=Et===B.ViewMode.DualPageWithCover&&(en===0||$t%2==0&&en===$t-1),zt="".concat(Oe.loadingTask.docId,"___").concat(en),nn=it.length===$t?it[en]:"".concat(en+1),_n=Ie?Ie({currentPage:oe,pageIndex:en,numPages:$t,pageLabel:nn}):nn,En=at.has(en)?at.get(en):0,On=W.createElement(nt,{doc:Oe,pageHeight:lt,pageIndex:en,pageRotation:En,pageWidth:be,rotation:Ce,shouldRender:ce===en,thumbnailWidth:ct,onRenderCompleted:tn,onVisibilityChanged:fn});return vt?vt({currentPage:oe,key:zt,numPages:$t,pageIndex:en,renderPageLabel:W.createElement(W.Fragment,null,_n),renderPageThumbnail:On,onJumpToPage:function(){return xt(en)},onRotatePage:function(Gn){return ht(en,Gn)}}):W.createElement("div",{key:zt},W.createElement("div",{className:B.classNames({"rpv-thumbnail__item":!0,"rpv-thumbnail__item--dual-even":Et===B.ViewMode.DualPage&&en%2==0,"rpv-thumbnail__item--dual-odd":Et===B.ViewMode.DualPage&&en%2==1,"rpv-thumbnail__item--dual-cover":Bt,"rpv-thumbnail__item--dual-cover-even":Et===B.ViewMode.DualPageWithCover&&!Bt&&en%2==0,"rpv-thumbnail__item--dual-cover-odd":Et===B.ViewMode.DualPageWithCover&&!Bt&&en%2==1,"rpv-thumbnail__item--single":Et===B.ViewMode.SinglePage,"rpv-thumbnail__item--selected":oe===en}),role:"button",tabIndex:oe===en?0:-1,onClick:function(){return xt(en)}},On),W.createElement("div",{"data-testid":"thumbnail__label-".concat(en),className:"rpv-thumbnail__label"},_n))}(xn)}))}))},ke=function(he){var oe=he.renderCurrentPageLabel,Oe=he.renderThumbnailItem,it=he.store,at=he.thumbnailDirection,lt=he.thumbnailWidth,be=W.useState(it.get("doc")),Ie=be[0],vt=be[1],dt=W.useState(it.get("currentPage")||0),Ce=dt[0],ft=dt[1],ct=W.useState(it.get("pageHeight")||0),Et=ct[0],xt=ct[1],ht=W.useState(it.get("pageWidth")||0),$t=ht[0],Ot=ht[1],Vt=W.useState(it.get("rotation")||0),Pt=Vt[0],Yt=Vt[1],Jt=W.useState(it.get("pagesRotation")||new Map),sn=Jt[0],ln=Jt[1],gt=W.useState(it.get("rotatedPage")||-1),ce=gt[0],Ee=gt[1],pe=W.useState(it.get("viewMode")),rt=pe[0],ot=pe[1],pt=function(hn){ft(hn)},bt=function(hn){vt(hn)},yt=function(hn){xt(hn)},Nt=function(hn){Ot(hn)},It=function(hn){Yt(hn)},Xt=function(hn){ln(hn)},tn=function(hn){Ee(hn)},fn=function(hn){ot(hn)},an=function(hn){var un=it.get("jumpToPage");un&&un(hn)},cn=function(hn,un){it.get("rotatePage")(hn,un)};return W.useEffect(function(){return it.subscribe("doc",bt),it.subscribe("pageHeight",yt),it.subscribe("pageWidth",Nt),it.subscribe("rotatedPage",tn),it.subscribe("rotation",It),it.subscribe("pagesRotation",Xt),it.subscribe("viewMode",fn),function(){it.unsubscribe("doc",bt),it.unsubscribe("pageHeight",yt),it.unsubscribe("pageWidth",Nt),it.unsubscribe("rotatedPage",tn),it.unsubscribe("rotation",It),it.unsubscribe("pagesRotation",Xt),it.unsubscribe("viewMode",fn)}},[]),B.useIsomorphicLayoutEffect(function(){return it.subscribe("currentPage",pt),function(){it.unsubscribe("currentPage",pt)}},[]),Ie?W.createElement(B.LazyRender,{testId:"thumbnail__list-container",attrs:{className:"rpv-thumbnail__list-container"}},W.createElement(re,{doc:Ie},function(hn){return W.createElement(Ae,{currentPage:Ce,doc:Ie,labels:hn,pagesRotation:sn,pageHeight:Et,pageWidth:$t,renderCurrentPageLabel:oe,renderThumbnailItem:Oe,rotatedPage:ce,rotation:Pt,thumbnailDirection:at,thumbnailWidth:lt,viewMode:rt,onJumpToPage:an,onRotatePage:cn})})):W.createElement("div",{"data-testid":"thumbnail-list__loader",className:"rpv-thumbnail__loader"},W.useContext(Te).renderSpinner())};A.thumbnailPlugin=function(he){var oe=W.useMemo(function(){return B.createStore({rotatePage:function(){},viewMode:B.ViewMode.SinglePage})},[]),Oe=W.useState(""),it=Oe[0],at=Oe[1];return{install:function(lt){oe.update("jumpToPage",lt.jumpToPage),oe.update("rotatePage",lt.rotatePage)},onDocumentLoad:function(lt){at(lt.doc.loadingTask.docId),oe.update("doc",lt.doc)},onViewerStateChange:function(lt){return oe.update("currentPage",lt.pageIndex),oe.update("pagesRotation",lt.pagesRotation),oe.update("pageHeight",lt.pageHeight),oe.update("pageWidth",lt.pageWidth),oe.update("rotation",lt.rotation),oe.update("rotatedPage",lt.rotatedPage),oe.update("viewMode",lt.viewMode),lt},Cover:function(lt){return W.createElement(ge,J({},lt,{renderSpinner:he==null?void 0:he.renderSpinner,store:oe}))},Thumbnails:W.useCallback(function(lt){return W.createElement(Te.Provider,{value:{renderSpinner:(he==null?void 0:he.renderSpinner)||ve}},W.createElement(ke,{renderCurrentPageLabel:he==null?void 0:he.renderCurrentPageLabel,renderThumbnailItem:lt==null?void 0:lt.renderThumbnailItem,store:oe,thumbnailDirection:(lt==null?void 0:lt.thumbnailDirection)||A.ThumbnailDirection.Vertical,thumbnailWidth:(he==null?void 0:he.thumbnailWidth)||100}))},[it])}}})(thumbnail_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=thumbnail_min})(lib$d);var libExports$c={},lib$c={get exports(){return libExports$c},set exports(A){libExports$c=A}},toolbar_min={},libExports$b={},lib$b={get exports(){return libExports$b},set exports(A){libExports$b=A}},selectionMode_min={};(function(A){var B=libExports$h;function K(ke){var he=Object.create(null);return ke&&Object.keys(ke).forEach(function(oe){if(oe!=="default"){var Oe=Object.getOwnPropertyDescriptor(ke,oe);Object.defineProperty(he,oe,Oe.get?Oe:{enumerable:!0,get:function(){return ke[oe]}})}}),he.default=ke,Object.freeze(he)}var V,W=K(reactExports),J=function(){return W.createElement(B.Icon,{size:16},W.createElement("path",{d:`M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4
            c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335
            c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67
            c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6`}))},ne=function(){return ne=Object.assign||function(ke){for(var he,oe=1,Oe=arguments.length;oe<Oe;oe++)for(var it in he=arguments[oe])Object.prototype.hasOwnProperty.call(he,it)&&(ke[it]=he[it]);return ke},ne.apply(this,arguments)};A.SelectionMode=void 0,(V=A.SelectionMode||(A.SelectionMode={})).Hand="Hand",V.Text="Text";var ge=function(){return W.createElement(B.Icon,{size:16},W.createElement("path",{d:`M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906
            L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262
            c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0
            l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z`}))},ve=function(ke){var he=ke.children,oe=ke.mode,Oe=ke.onClick,it=W.useContext(B.LocalizationContext).l10n,at="",lt=W.createElement(ge,null);switch(oe){case A.SelectionMode.Hand:at=it&&it.selectionMode?it.selectionMode.handTool:"Hand tool",lt=W.createElement(J,null);break;case A.SelectionMode.Text:default:at=it&&it.selectionMode?it.selectionMode.textSelectionTool:"Text selection tool",lt=W.createElement(ge,null)}return he({icon:lt,label:at,onClick:Oe})},Te={left:0,top:8},re=function(ke){var he=ke.isSelected,oe=ke.mode,Oe=ke.onClick,it="";switch(oe){case A.SelectionMode.Hand:it="selection-mode__hand-button";break;case A.SelectionMode.Text:default:it="selection-mode__text-button"}return W.createElement(ve,{mode:oe,onClick:Oe},function(at){return W.createElement(B.Tooltip,{ariaControlsSuffix:"selection-mode-switch",position:B.Position.BottomCenter,target:W.createElement(B.MinimalButton,{ariaLabel:at.label,isSelected:he,testId:it,onClick:at.onClick},at.icon),content:function(){return at.label},offset:Te})})},st=function(ke){var he=ke.children,oe=ke.mode,Oe=ke.store,it=oe===Oe.get("selectionMode");return(he||function(at){return W.createElement(re,{isSelected:it,mode:at.mode,onClick:at.onClick})})({isSelected:it,mode:oe,onClick:function(){return Oe.update("selectionMode",oe)}})},nt=function(ke){var he=ke.isSelected,oe=ke.mode,Oe=ke.onClick,it="";switch(oe){case A.SelectionMode.Hand:it="selection-mode__hand-menu";break;case A.SelectionMode.Text:default:it="selection-mode__text-menu"}return W.createElement(ve,{mode:oe,onClick:Oe},function(at){return W.createElement(B.MenuItem,{checked:he,icon:at.icon,testId:it,onClick:at.onClick},at.label)})},Ae=function(ke){var he=ke.store,oe=W.useRef(null),Oe=W.useState(A.SelectionMode.Text),it=Oe[0],at=Oe[1],lt=W.useRef({top:0,left:0,x:0,y:0}),be=function(ft){var ct=oe.current;ct&&(ct.scrollTop=lt.current.top-(ft.clientY-lt.current.y),ct.scrollLeft=lt.current.left-(ft.clientX-lt.current.x))},Ie=function(){var ft=oe.current;ft&&(ft.classList.add("rpv-selection-mode__grab"),ft.classList.remove("rpv-selection-mode__grabbing"),document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",Ie))},vt=function(ft){var ct=oe.current;ct&&it!==A.SelectionMode.Text&&(ct.classList.remove("rpv-selection-mode__grab"),ct.classList.add("rpv-selection-mode__grabbing"),ft.preventDefault(),ft.stopPropagation(),lt.current={left:ct.scrollLeft,top:ct.scrollTop,x:ft.clientX,y:ft.clientY},document.addEventListener("mousemove",be),document.addEventListener("mouseup",Ie))},dt=function(ft){oe.current=ft()},Ce=function(ft){at(ft)};return W.useEffect(function(){var ft=oe.current;if(ft)return it===A.SelectionMode.Hand?ft.classList.add("rpv-selection-mode__grab"):ft.classList.remove("rpv-selection-mode__grab"),ft.addEventListener("mousedown",vt),function(){ft.removeEventListener("mousedown",vt)}},[it]),W.useEffect(function(){return he.subscribe("getPagesContainer",dt),he.subscribe("selectionMode",Ce),function(){he.unsubscribe("getPagesContainer",dt),he.unsubscribe("selectionMode",Ce)}},[]),W.createElement(W.Fragment,null)};A.HandToolIcon=J,A.TextSelectionIcon=ge,A.selectionModePlugin=function(ke){var he=W.useMemo(function(){return B.createStore()},[]),oe=function(Oe){return W.createElement(st,ne({},Oe,{store:he}))};return{install:function(Oe){he.update("selectionMode",ke&&ke.selectionMode?ke.selectionMode:A.SelectionMode.Text),he.update("getPagesContainer",Oe.getPagesContainer)},renderViewer:function(Oe){var it=Oe.slot;return it.subSlot&&it.subSlot.children&&(it.subSlot.children=W.createElement(W.Fragment,null,W.createElement(Ae,{store:he}),it.subSlot.children)),it},SwitchSelectionMode:oe,SwitchSelectionModeButton:function(Oe){return W.createElement(oe,{mode:Oe.mode},function(it){return W.createElement(re,{isSelected:it.isSelected,mode:it.mode,onClick:function(){it.onClick()}})})},SwitchSelectionModeMenuItem:function(Oe){return W.createElement(oe,{mode:Oe.mode},function(it){return W.createElement(nt,{isSelected:it.isSelected,mode:it.mode,onClick:function(){it.onClick(),Oe.onClick()}})})}}}})(selectionMode_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=selectionMode_min})(lib$b);var libExports$a={},lib$a={get exports(){return libExports$a},set exports(A){libExports$a=A}},fullScreen_min={},e$c=libExports$h;function t$c(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var n$c=t$c(reactExports),r$c=function(){return n$c.createElement(e$c.Icon,{size:16},n$c.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),n$c.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),n$c.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),n$c.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),n$c.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},l$c=function(){return n$c.createElement(e$c.Icon,{size:16},n$c.createElement("path",{d:"M0.5 12L23.5 12"}),n$c.createElement("path",{d:"M11.5 1L11.5 23"}),n$c.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),n$c.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),n$c.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),n$c.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},c$c=function(){return c$c=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},c$c.apply(this,arguments)},u$c={left:0,top:8},o$c=function(A){var B=A.enableShortcuts,K=A.onClick,V=n$c.useContext(e$c.LocalizationContext).l10n,W=V&&V.fullScreen?V.fullScreen.enterFullScreen:"Full screen",J=B?e$c.isMac()?"Meta+Ctrl+F":"F11":"";return n$c.createElement(e$c.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:e$c.Position.BottomCenter,target:n$c.createElement(e$c.MinimalButton,{ariaKeyShortcuts:J,ariaLabel:W,isDisabled:!e$c.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:K},n$c.createElement(l$c,null)),content:function(){return W},offset:u$c})},i$c={left:0,top:8},a$c=function(A){var B=A.onClick,K=n$c.useContext(e$c.LocalizationContext).l10n,V=K&&K.fullScreen?K.fullScreen.exitFullScreen:"Exit full screen";return n$c.createElement(e$c.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:e$c.Position.BottomCenter,target:n$c.createElement(e$c.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:V,testId:"full-screen__exit-button-with-tooltip",onClick:B},n$c.createElement(r$c,null)),content:function(){return V},offset:i$c})},f$9=function(A,B){var K=n$c.useState(B.get("fullScreenMode")),V=K[0],W=K[1],J=n$c.useCallback(function(ne){W(ne)},[]);return n$c.useEffect(function(){return B.subscribe("fullScreenMode",J),function(){B.unsubscribe("fullScreenMode",J)}},[]),{enterFullScreen:function(){var ne=B.get("getPagesContainer");if(ne){var ge=A(ne());B.get("enterFullScreenMode")(ge)}},exitFullScreen:function(){B.get("exitFullScreenMode")()},isFullScreen:V===e$c.FullScreenMode.Entering||V===e$c.FullScreenMode.EnteredCompletely}},s$8=function(A){var B=A.children,K=A.enableShortcuts,V=A.getFullScreenTarget,W=A.store,J=f$9(V,W),ne=J.enterFullScreen,ge=J.exitFullScreen,ve=J.isFullScreen;return(B||function(Te){return ve?n$c.createElement(a$c,{onClick:Te.onClick}):n$c.createElement(o$c,{enableShortcuts:K,onClick:Te.onClick})})({onClick:ve?ge:ne})},S$4=function(A){var B=A.onClick,K=n$c.useContext(e$c.LocalizationContext).l10n,V=K&&K.fullScreen?K.fullScreen.enterFullScreen:"Full screen";return n$c.createElement(e$c.MenuItem,{icon:n$c.createElement(l$c,null),isDisabled:!e$c.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:B},V)},d$9=function(A){var B=A.onClick,K=n$c.useContext(e$c.LocalizationContext).l10n,V=n$c.useContext(e$c.ThemeContext).direction===e$c.TextDirection.RightToLeft,W=K&&K.fullScreen?K.fullScreen.exitFullScreen:"Exit full screen";return n$c.createElement("div",{className:e$c.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!V,"rpv-full-screen__exit-button--rtl":V})},n$c.createElement(e$c.MinimalButton,{ariaLabel:W,testId:"full-screen__exit-button",onClick:B},n$c.createElement(r$c,null)))},m$8=function(A){var B=A.children,K=A.getFullScreenTarget,V=A.store,W=f$9(K,V),J=W.enterFullScreen,ne=W.exitFullScreen,ge=W.isFullScreen;return ge&&(B||function(ve){return n$c.createElement(d$9,{onClick:ve.onClick})})({onClick:ge?ne:J})},E$5=function(A){var B=A.store,K=A.onEnterFullScreen,V=A.onExitFullScreen,W=n$c.useState(B.get("fullScreenMode")),J=W[0],ne=W[1],ge=n$c.useCallback(function(ve){ne(ve)},[]);return n$c.useEffect(function(){switch(J){case e$c.FullScreenMode.EnteredCompletely:K(B.get("zoom"));break;case e$c.FullScreenMode.Exited:V(B.get("zoom"))}},[J]),n$c.useEffect(function(){return B.subscribe("fullScreenMode",ge),function(){B.unsubscribe("fullScreenMode",ge)}},[]),(J===e$c.FullScreenMode.Entering||J===e$c.FullScreenMode.Entered)&&n$c.createElement("div",{className:"rpv-full-screen__overlay"},n$c.createElement(e$c.Spinner,null))},F=function(A){var B=A.containerRef,K=A.getFullScreenTarget,V=A.store,W=f$9(K,V).enterFullScreen,J=function(ne){if(!ne.shiftKey&&!ne.altKey&&(e$c.isMac()?ne.metaKey&&ne.ctrlKey&&ne.key==="f":ne.key==="F11")){var ge=B.current;ge&&document.activeElement&&ge.contains(document.activeElement)&&(ne.preventDefault(),W())}};return n$c.useEffect(function(){if(B.current)return document.addEventListener("keydown",J),function(){document.removeEventListener("keydown",J)}},[B.current]),n$c.createElement(n$c.Fragment,null)};fullScreen_min.ExitFullScreenIcon=r$c,fullScreen_min.FullScreenIcon=l$c,fullScreen_min.fullScreenPlugin=function(A){var B=(A==null?void 0:A.getFullScreenTarget)||function(ne){return ne},K=n$c.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},A)},[]),V=n$c.useMemo(function(){return e$c.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:e$c.FullScreenMode.Normal,zoom:function(){}})},[]),W=function(ne){return n$c.createElement(s$8,c$c({},ne,{enableShortcuts:K.enableShortcuts,getFullScreenTarget:B,store:V}))},J=function(){return n$c.createElement(m$8,{getFullScreenTarget:B,store:V},A==null?void 0:A.renderExitFullScreenButton)};return{install:function(ne){V.update("enterFullScreenMode",ne.enterFullScreenMode),V.update("exitFullScreenMode",ne.exitFullScreenMode),V.update("getPagesContainer",ne.getPagesContainer),V.update("zoom",ne.zoom)},onViewerStateChange:function(ne){return V.update("fullScreenMode",ne.fullScreenMode),ne},renderViewer:function(ne){var ge=ne.slot;return ge.subSlot&&(ge.subSlot.children=n$c.createElement(n$c.Fragment,null,K.enableShortcuts&&n$c.createElement(F,{containerRef:ne.containerRef,getFullScreenTarget:B,store:V}),n$c.createElement(E$5,{store:V,onEnterFullScreen:K.onEnterFullScreen,onExitFullScreen:K.onExitFullScreen}),n$c.createElement(J,null),ge.subSlot.children)),ge},EnterFullScreen:W,EnterFullScreenButton:function(){return n$c.createElement(W,null,function(ne){return n$c.createElement(o$c,c$c({enableShortcuts:K.enableShortcuts},ne))})},EnterFullScreenMenuItem:function(ne){return n$c.createElement(W,null,function(ge){return n$c.createElement(S$4,{onClick:function(){ge.onClick(),ne.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=fullScreen_min})(lib$a);var libExports$9={},lib$9={get exports(){return libExports$9},set exports(A){libExports$9=A}},getFile_min={},e$b=libExports$h;function t$b(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var n$b=t$b(reactExports),o$b=function(){return n$b.createElement(e$b.Icon,{size:16},n$b.createElement("path",{d:"M5.5,11.5c-.275,0-.341.159-.146.354l6.292,6.293a.5.5,0,0,0,.709,0l6.311-6.275c.2-.193.13-.353-.145-.355L15.5,11.5V1.5a1,1,0,0,0-1-1h-5a1,1,0,0,0-1,1V11a.5.5,0,0,1-.5.5Z"}),n$b.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},r$b=function(){return r$b=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},r$b.apply(this,arguments)},i$b={left:0,top:8},a$b=function(A){var B=A.onClick,K=n$b.useContext(e$b.LocalizationContext).l10n,V=K&&K.download?K.download.download:"Download";return n$b.createElement(e$b.Tooltip,{ariaControlsSuffix:"get-file",position:e$b.Position.BottomCenter,target:n$b.createElement(e$b.MinimalButton,{ariaLabel:V,testId:"get-file__download-button",onClick:B},n$b.createElement(o$b,null)),content:function(){return V},offset:i$b})},c$b=function(A,B){var K=document.createElement("a");K.style.display="none",K.href=A,K.setAttribute("download",B),document.body.appendChild(K),K.click(),document.body.removeChild(K)},l$b=function(A,B,K){var V=URL.createObjectURL(new Blob([A],{type:K}));c$b(V,B),V&&URL.revokeObjectURL(V)},u$b=function(A,B){A.getData().then(function(K){/iphone|ipod|ipad/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)?l$b(K,B,"application/octet-stream"):/iphone|ipod|ipad/i.test(navigator.userAgent)&&/CriOS/i.test(navigator.userAgent)?c$b("data:application/pdf;base64,".concat(function(V){return btoa(Array(V.length).fill("").map(function(W,J){return String.fromCharCode(V[J])}).join(""))}(K)),B):l$b(K,B,"application/pdf")})},f$8=function(A){var B=A.children,K=A.fileNameGenerator,V=A.store,W=n$b.useState(V.get("file")),J=W[0],ne=W[1],ge=n$b.useState(V.get("doc")),ve=ge[0],Te=ge[1],re=function(nt){Te(nt)},st=function(nt){ne(nt)};return n$b.useEffect(function(){return V.subscribe("doc",re),V.subscribe("file",st),function(){V.subscribe("doc",re),V.unsubscribe("file",st)}},[]),(B||function(nt){return n$b.createElement(a$b,{onClick:nt.onClick})})({onClick:function(){ve&&J&&u$b(ve,K(J))}})},d$8=function(A){var B=A.onClick,K=n$b.useContext(e$b.LocalizationContext).l10n,V=K&&K.download?K.download.download:"Download";return n$b.createElement(e$b.MenuItem,{icon:n$b.createElement(o$b,null),testId:"get-file__download-menu",onClick:B},V)};getFile_min.DownloadIcon=o$b,getFile_min.getFilePlugin=function(A){var B=n$b.useMemo(function(){return e$b.createStore({})},[]),K=function(W){return W.name?(J=W.name,(ne=J.split("/").pop())?ne.split("#")[0].split("?")[0]:J):"document.pdf";var J,ne},V=function(W){return n$b.createElement(f$8,r$b({},W,{fileNameGenerator:A&&A.fileNameGenerator||K,store:B}))};return{onDocumentLoad:function(W){B.update("doc",W.doc),B.update("file",W.file)},Download:V,DownloadButton:function(){return n$b.createElement(V,null,function(W){return n$b.createElement(a$b,r$b({},W))})},DownloadMenuItem:function(W){return n$b.createElement(V,null,function(J){return n$b.createElement(d$8,{onClick:function(){J.onClick(),W.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=getFile_min})(lib$9);var libExports$8={},lib$8={get exports(){return libExports$8},set exports(A){libExports$8=A}},open_min={},e$a=libExports$h;function t$a(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var n$a=t$a(reactExports),r$a=function(){return n$a.createElement(e$a.Icon,{size:16},n$a.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),n$a.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},o$a=function(){return o$a=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},o$a.apply(this,arguments)},i$a=function(A){var B=n$a.useRef(),K=function(){var W=B.current;W&&(W.click(),A.get("triggerOpenFile")&&A.update("triggerOpenFile",!1))},V=function(W){W&&K()};return n$a.useEffect(function(){return A.subscribe("triggerOpenFile",V),function(){A.unsubscribe("triggerOpenFile",V)}},[]),{inputRef:B,openFile:K}},c$a={left:0,top:8},u$a=function(A){var B=A.enableShortcuts,K=A.store,V=A.onClick,W=n$a.useContext(e$a.LocalizationContext).l10n,J=W&&W.open?W.open.openFile:"Open file",ne=i$a(K),ge=ne.inputRef,ve=ne.openFile,Te=B?e$a.isMac()?"Meta+O":"Ctrl+O":"";return n$a.createElement(e$a.Tooltip,{ariaControlsSuffix:"open",position:e$a.Position.BottomCenter,target:n$a.createElement("div",{className:"rpv-open__input-wrapper"},n$a.createElement("input",{accept:".pdf",ref:ge,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:V}),n$a.createElement(e$a.MinimalButton,{ariaKeyShortcuts:Te,ariaLabel:J,testId:"open__button",onClick:ve},n$a.createElement(r$a,null))),content:function(){return J},offset:c$a})},a$a=function(A){var B=A.children,K=A.enableShortcuts,V=A.store;return(B||function(W){return n$a.createElement(u$a,{enableShortcuts:K,store:V,onClick:W.onClick})})({onClick:function(W){var J=W.target.files;if(J&&J.length){var ne=V.get("openFile");ne&&ne(J[0])}}})},l$a=function(A){var B=A.store,K=A.onClick,V=n$a.useContext(e$a.LocalizationContext).l10n,W=V&&V.open?V.open.openFile:"Open file",J=i$a(B),ne=J.inputRef,ge=J.openFile;return n$a.createElement(e$a.MenuItem,{icon:n$a.createElement(r$a,null),testId:"open__menu",onClick:ge},n$a.createElement("div",{className:"rpv-open__input-wrapper"},n$a.createElement("input",{accept:".pdf",ref:ne,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:K}),W))},p$7=function(A){var B=A.containerRef,K=A.store,V=function(W){if(!W.shiftKey&&!W.altKey&&W.key==="o"&&(e$a.isMac()?W.metaKey:W.ctrlKey)){var J=B.current;J&&document.activeElement&&J.contains(document.activeElement)&&(W.preventDefault(),K.update("triggerOpenFile",!0))}};return n$a.useEffect(function(){if(B.current)return document.addEventListener("keydown",V),function(){document.removeEventListener("keydown",V)}},[B.current]),n$a.createElement(n$a.Fragment,null)};open_min.OpenFileIcon=r$a,open_min.openPlugin=function(A){var B=n$a.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),K=n$a.useMemo(function(){return e$a.createStore({})},[]),V=function(W){return n$a.createElement(a$a,o$a({enableShortcuts:B.enableShortcuts},W,{store:K}))};return{install:function(W){K.update("openFile",W.openFile)},renderViewer:function(W){var J=W.slot,ne={children:n$a.createElement(n$a.Fragment,null,B.enableShortcuts&&n$a.createElement(p$7,{containerRef:W.containerRef,store:K}),J.children)};return o$a(o$a({},J),ne)},Open:V,OpenButton:function(){return n$a.createElement(V,null)},OpenMenuItem:function(){return n$a.createElement(V,null,function(W){return n$a.createElement(l$a,{store:K,onClick:W.onClick})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=open_min})(lib$8);var libExports$7={},lib$7={get exports(){return libExports$7},set exports(A){libExports$7=A}},pageNavigation_min={},e$9=libExports$h;function t$9(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var n$9=t$9(reactExports),a$9=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552
            c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11
            C1.96,3.016,2.138,2.966,2.32,2.966z`}))},r$9=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o$9=function(){return o$9=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},o$9.apply(this,arguments)},i$9=function(A){var B=n$9.useState(A.get("currentPage")||0),K=B[0],V=B[1],W=function(J){V(J)};return e$9.useIsomorphicLayoutEffect(function(){return A.subscribe("currentPage",W),function(){A.unsubscribe("currentPage",W)}},[]),{currentPage:K}},u$9=function(A){var B=n$9.useState(A.get("numberOfPages")||0),K=B[0],V=B[1],W=function(J){V(J)};return n$9.useEffect(function(){return A.subscribe("numberOfPages",W),function(){A.unsubscribe("numberOfPages",W)}},[]),{numberOfPages:K}},c$9=function(A){var B=A.store,K=n$9.useContext(e$9.LocalizationContext).l10n,V=n$9.useState("1"),W=V[0],J=V[1],ne=i$9(B).currentPage,ge=u$9(B).numberOfPages;n$9.useEffect(function(){return J("".concat(ne+1))},[ne]);var ve=function(re){var st=B.get("jumpToPage");st&&st(re)},Te=K&&K.pageNavigation?K.pageNavigation.enterPageNumber:"Enter a page number";return n$9.createElement("span",{className:"rpv-page-navigation__current-page-input"},n$9.createElement(e$9.TextBox,{ariaLabel:Te,testId:"page-navigation__current-page-input",type:"text",value:W,onChange:J,onKeyDown:function(re){switch(re.key){case"ArrowUp":(Ae=ne-1)>=0&&(J("".concat(Ae+1)),ve(Ae));break;case"ArrowDown":(nt=ne+1)<ge&&(J("".concat(nt+1)),ve(nt));break;case"Enter":st=parseInt(W,10),W===""||st<1||st>ge?J("".concat(ne+1)):ve(st-1)}var st,nt,Ae}}))},l$9=function(A){var B=A.children,K=A.doc,V=e$9.useIsMounted(),W=n$9.useState({loading:!0,labels:[]}),J=W[0],ne=W[1];return n$9.useEffect(function(){K.getPageLabels().then(function(ge){V.current&&ne({loading:!1,labels:ge||[]})})},[K.loadingTask.docId]),J.loading?n$9.createElement(n$9.Fragment,null):B(J.labels)},s$7=function(A){var B=A.children,K=A.store,V=function(ge){var ve=n$9.useState(ge.get("doc")),Te=ve[0],re=ve[1],st=function(nt){re(nt)};return n$9.useEffect(function(){return ge.subscribe("doc",st),function(){ge.unsubscribe("doc",st)}},[]),Te}(K),W=i$9(K).currentPage,J=u$9(K).numberOfPages,ne=B||function(ge){return n$9.createElement(n$9.Fragment,null,ge.currentPage+1)};return V?n$9.createElement(l$9,{doc:V},function(ge){var ve=ge.length===J&&J>0?ge[W]:"";return ne({currentPage:W,numberOfPages:J,pageLabel:ve})}):n$9.createElement(n$9.Fragment,null)},g$5=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448
            c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373
            C22.143,20.984,21.965,21.034,21.783,21.034z`}))},f$7={left:0,top:8},m$7=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToFirstPage:"First page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-first",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:W,isDisabled:B,testId:"page-navigation__first-button",onClick:K},n$9.createElement(g$5,null)),content:function(){return W},offset:f$7})},p$6=function(A){var B=A.children,K=A.store;return(B||function(V){return n$9.createElement(m$7,{isDisabled:V.isDisabled,onClick:V.onClick})})({isDisabled:i$9(K).currentPage===0,onClick:function(){var V=K.get("jumpToPage");V&&V(0)}})},v$5=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToFirstPage:"First page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(g$5,null),isDisabled:B,testId:"page-navigation__first-menu",onClick:K},W)},d$7={left:0,top:8},P$2=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToLastPage:"Last page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-last",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:W,isDisabled:B,testId:"page-navigation__last-button",onClick:K},n$9.createElement(a$9,null)),content:function(){return W},offset:d$7})},b$4=function(A){var B=A.children,K=A.store,V=i$9(K).currentPage,W=u$9(K).numberOfPages;return(B||function(J){return n$9.createElement(P$2,{isDisabled:J.isDisabled,onClick:J.onClick})})({isDisabled:V+1>=W,onClick:function(){var J=K.get("jumpToPage");J&&J(W-1)}})},E$4=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToLastPage:"Last page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(a$9,null),isDisabled:B,testId:"page-navigation__last-menu",onClick:K},W)},C$3={left:0,top:8},D=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToNextPage:"Next page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-next",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:W,isDisabled:B,testId:"page-navigation__next-button",onClick:K},n$9.createElement(r$9,null)),content:function(){return W},offset:C$3})},k$3=function(A){var B=A.children,K=A.store;return(B||function(V){return n$9.createElement(D,{onClick:V.onClick,isDisabled:V.isDisabled})})({isDisabled:i$9(K).currentPage+1>=u$9(K).numberOfPages,onClick:function(){var V=K.get("jumpToNextPage");V&&V()}})},T=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToNextPage:"Next page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(r$9,null),isDisabled:B,testId:"page-navigation__next-menu",onClick:K},W)},x$1=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},L={left:0,top:8},N=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToPreviousPage:"Previous page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-previous",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:W,isDisabled:B,testId:"page-navigation__previous-button",onClick:K},n$9.createElement(x$1,null)),content:function(){return W},offset:L})},j=function(A){var B=A.store;return(A.children||function(K){return n$9.createElement(N,{isDisabled:K.isDisabled,onClick:K.onClick})})({isDisabled:i$9(B).currentPage<=0,onClick:function(){var K=B.get("jumpToPreviousPage");K&&K()}})},I$2=function(A){var B=A.isDisabled,K=A.onClick,V=n$9.useContext(e$9.LocalizationContext).l10n,W=V&&V.pageNavigation?V.pageNavigation.goToPreviousPage:"Previous page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(x$1,null),isDisabled:B,testId:"page-navigation__previous-menu",onClick:K},W)},h$5=function(A){var B=A.children,K=A.store,V=u$9(K).numberOfPages;return B?B({numberOfPages:V}):n$9.createElement(n$9.Fragment,null,V)},y$1=function(A){var B=A.containerRef,K=A.numPages,V=A.store,W=i$9(V).currentPage,J=n$9.useRef(W);J.current=W;var ne=n$9.useRef(!1),ge=function(){ne.current=!0},ve=function(){ne.current=!1},Te=function(re){var st=B.current,nt=ne.current||document.activeElement&&st.contains(document.activeElement);if(st&&nt){var Ae,ke,he=re.altKey&&re.key==="ArrowDown"||!re.shiftKey&&!re.altKey&&re.key==="PageDown",oe=re.altKey&&re.key==="ArrowUp"||!re.shiftKey&&!re.altKey&&re.key==="PageUp";if(he)return re.preventDefault(),Ae=V.get("jumpToPage"),ke=J.current+1,void(Ae&&ke<K&&Ae(ke));if(oe)return re.preventDefault(),void function(){var Oe=V.get("jumpToPage"),it=J.current-1;Oe&&it>=0&&Oe(it)}();if(e$9.isMac()?re.metaKey&&!re.ctrlKey:re.altKey)switch(re.key){case"ArrowLeft":re.preventDefault(),function(){var Oe=V.get("jumpToPreviousDestination");Oe&&Oe()}();break;case"ArrowRight":re.preventDefault(),function(){var Oe=V.get("jumpToNextDestination");Oe&&Oe()}()}}};return n$9.useEffect(function(){var re=B.current;if(re)return document.addEventListener("keydown",Te),re.addEventListener("mouseenter",ge),re.addEventListener("mouseleave",ve),function(){document.removeEventListener("keydown",Te),re.removeEventListener("mouseenter",ge),re.removeEventListener("mouseleave",ve)}},[B.current]),n$9.createElement(n$9.Fragment,null)};pageNavigation_min.DownArrowIcon=a$9,pageNavigation_min.NextIcon=r$9,pageNavigation_min.PreviousIcon=x$1,pageNavigation_min.UpArrowIcon=g$5,pageNavigation_min.pageNavigationPlugin=function(A){var B=n$9.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),K=n$9.useMemo(function(){return e$9.createStore()},[]),V=function(ge){return n$9.createElement(p$6,o$9({},ge,{store:K}))},W=function(ge){return n$9.createElement(b$4,o$9({},ge,{store:K}))},J=function(ge){return n$9.createElement(k$3,o$9({},ge,{store:K}))},ne=function(ge){return n$9.createElement(j,o$9({},ge,{store:K}))};return{install:function(ge){K.update("jumpToDestination",ge.jumpToDestination),K.update("jumpToNextDestination",ge.jumpToNextDestination),K.update("jumpToNextPage",ge.jumpToNextPage),K.update("jumpToPage",ge.jumpToPage),K.update("jumpToPreviousDestination",ge.jumpToPreviousDestination),K.update("jumpToPreviousPage",ge.jumpToPreviousPage)},renderViewer:function(ge){var ve=ge.slot;if(!B.enableShortcuts)return ve;var Te={children:n$9.createElement(n$9.Fragment,null,n$9.createElement(y$1,{containerRef:ge.containerRef,numPages:ge.doc.numPages,store:K}),ve.children)};return o$9(o$9({},ve),Te)},onDocumentLoad:function(ge){K.update("doc",ge.doc),K.update("numberOfPages",ge.doc.numPages)},onViewerStateChange:function(ge){return K.update("currentPage",ge.pageIndex),ge},jumpToNextPage:function(){var ge=K.get("jumpToNextPage");ge&&ge()},jumpToPage:function(ge){var ve=K.get("jumpToPage");ve&&ve(ge)},jumpToPreviousPage:function(){var ge=K.get("jumpToPreviousPage");ge&&ge()},CurrentPageInput:function(){return n$9.createElement(c$9,{store:K})},CurrentPageLabel:function(ge){return n$9.createElement(s$7,o$9({},ge,{store:K}))},GoToFirstPage:V,GoToFirstPageButton:function(){return n$9.createElement(V,null,function(ge){return n$9.createElement(m$7,o$9({},ge))})},GoToFirstPageMenuItem:function(ge){return n$9.createElement(V,null,function(ve){return n$9.createElement(v$5,{isDisabled:ve.isDisabled,onClick:function(){ve.onClick(),ge.onClick()}})})},GoToLastPage:W,GoToLastPageButton:function(){return n$9.createElement(W,null,function(ge){return n$9.createElement(P$2,o$9({},ge))})},GoToLastPageMenuItem:function(ge){return n$9.createElement(W,null,function(ve){return n$9.createElement(E$4,{isDisabled:ve.isDisabled,onClick:function(){ve.onClick(),ge.onClick()}})})},GoToNextPage:J,GoToNextPageButton:function(){return n$9.createElement(J,null,function(ge){return n$9.createElement(D,o$9({},ge))})},GoToNextPageMenuItem:function(ge){return n$9.createElement(J,null,function(ve){return n$9.createElement(T,{isDisabled:ve.isDisabled,onClick:function(){ve.onClick(),ge.onClick()}})})},GoToPreviousPage:ne,GoToPreviousPageButton:function(){return n$9.createElement(ne,null,function(ge){return n$9.createElement(N,o$9({},ge))})},GoToPreviousPageMenuItem:function(ge){return n$9.createElement(ne,null,function(ve){return n$9.createElement(I$2,{isDisabled:ve.isDisabled,onClick:function(){ve.onClick(),ge.onClick()}})})},NumberOfPages:function(ge){return n$9.createElement(h$5,o$9({},ge,{store:K}))}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=pageNavigation_min})(lib$7);var libExports$6={},lib$6={get exports(){return libExports$6},set exports(A){libExports$6=A}},print_min={},e$8=libExports$h,t$8=reactExports,n$8=reactDomExports;function r$8(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var o$8,a$8=r$8(t$8),i$8=function(){return a$8.createElement(e$8.Icon,{size:16},a$8.createElement("path",{d:`M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19
            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3
            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414
            C18.395,3.394,18.5,3.649,18.5,3.914V4.5
            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z
            M3.5,8.499
            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z
            M14.5,0.499v4h4`}))},c$8=function(){return c$8=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},c$8.apply(this,arguments)},u$8={left:0,top:8},s$6=function(A){var B=A.enableShortcuts,K=A.onClick,V=a$8.useContext(e$8.LocalizationContext).l10n,W=V&&V.print?V.print.print:"Print",J=B?e$8.isMac()?"Meta+P":"Ctrl+P":"";return a$8.createElement(e$8.Tooltip,{ariaControlsSuffix:"print",position:e$8.Position.BottomCenter,target:a$8.createElement(e$8.MinimalButton,{ariaKeyShortcuts:J,ariaLabel:W,testId:"print__button",onClick:K},a$8.createElement(i$8,null)),content:function(){return W},offset:u$8})};(function(A){A.CheckingPermission="CheckingPermission",A.Inactive="Inactive",A.Preparing="Preparing",A.Cancelled="Cancelled",A.Ready="Ready"})(o$8||(o$8={}));var l$8=function(A){var B=A.children,K=A.enableShortcuts,V=A.store;return(B||s$6)({enableShortcuts:K,onClick:function(){V.update("printStatus",o$8.CheckingPermission)}})},p$5=function(A){var B=A.doc,K=A.store,V=a$8.useContext(e$8.LocalizationContext).l10n,W=a$8.useState(!0),J=W[0],ne=W[1];return a$8.useEffect(function(){B.getPermissions().then(function(ge){ge===null||ge.includes(4)||ge.includes(2048)?K.update("printStatus",o$8.Preparing):ne(!1)})},[]),J?a$8.createElement(a$8.Fragment,null):a$8.createElement(e$8.Modal,{ariaControlsSuffix:"print-permission",closeOnClickOutside:!1,closeOnEscape:!1,content:function(ge){return a$8.createElement(a$8.Fragment,null,a$8.createElement("div",{className:"rpv-print__permission-body"},V&&V.print?V.print.disallowPrint:"The document does not allow to print"),a$8.createElement("div",{className:"rpv-print__permission-footer"},a$8.createElement(e$8.Button,{onClick:function(){ge(),K.update("printStatus",o$8.Cancelled)}},V&&V.print?V.print.close:"Close")))},isOpened:!0})},m$6=function(A){var B=A.numLoadedPages,K=A.numPages,V=A.onCancel,W=a$8.useContext(e$8.LocalizationContext).l10n,J=a$8.useContext(e$8.ThemeContext).direction===e$8.TextDirection.RightToLeft,ne=Math.floor(100*B/K);return a$8.createElement("div",{className:"rpv-print__progress"},a$8.createElement("div",{className:e$8.classNames({"rpv-print__progress-body":!0,"rpv-print__progress-body--rtl":J})},a$8.createElement("div",{className:"rpv-print__progress-message"},W&&W.print?W.print.preparingDocument:"Preparing document ..."),a$8.createElement("div",{className:"rpv-print__progress-bar"},a$8.createElement(e$8.ProgressBar,{progress:ne})),a$8.createElement(e$8.Button,{onClick:V},W&&W.print?W.print.cancel:"Cancel")))},d$6=function(A){var B=A.canvas,K=A.page,V=A.pageHeight,W=A.pageIndex,J=A.pageWidth,ne=A.rotation,ge=A.onLoad,ve=e$8.useIsMounted(),Te=a$8.useRef(),re=a$8.useState(""),st=re[0],nt=re[1],Ae=a$8.useMemo(function(){return typeof process<"u"&&{}.JEST_WORKER_ID!==void 0},[]);return a$8.useEffect(function(){var ke=Te.current;ke&&ke.cancel();var he=150/72;B.height=Math.floor(V*he),B.width=Math.floor(J*he);var oe=B.getContext("2d");oe.save(),oe.fillStyle="rgb(255, 255, 255)",oe.fillRect(0,0,B.width,B.height),oe.restore();var Oe=K.getViewport({rotation:ne,scale:1});Te.current=K.render({canvasContext:oe,intent:"print",transform:[he,0,0,he,0,0],viewport:Oe}),Te.current.promise.then(function(){"toBlob"in B&&"createObjectURL"in URL?B.toBlob(function(it){ve.current&&nt(URL.createObjectURL(it)),Ae&&ge()}):(ve.current&&nt(B.toDataURL()),Ae&&ge())},function(){})},[]),st&&a$8.createElement("div",{className:"rpv-print__page"},a$8.createElement("img",{"data-testid":"print__thumbnail-".concat(W),src:st,onLoad:function(){Ae||ge()}}))},f$6=function(A){var B=A.canvas,K=A.doc,V=A.pageIndex,W=A.pageRotation,J=A.pageSize,ne=A.rotation,ge=A.shouldRender,ve=A.onLoad,Te=e$8.useIsMounted(),re=a$8.useState(null),st=re[0],nt=re[1],Ae=Math.abs(ne+W)%180==0;a$8.useEffect(function(){ge&&e$8.getPage(K,V).then(function(he){Te.current&&nt(he)})},[ge]);var ke=(J.rotation+ne+W)%360;return st&&a$8.createElement(d$6,{canvas:B,page:st,pageHeight:Ae?J.pageHeight:J.pageWidth,pageIndex:V,pageWidth:Ae?J.pageWidth:J.pageHeight,rotation:ke,onLoad:ve})},g$4=function(A){var B=A.doc,K=A.numLoadedPages,V=A.pagesRotation,W=A.pageSizes,J=A.printPages,ne=A.printStatus,ge=A.rotation,ve=A.onCancel,Te=A.onLoad,re=a$8.useMemo(function(){return document.createElement("canvas")},[]),st=a$8.useMemo(function(){var ke=document.querySelector(".rpv-print__zone");if(ke)return ke;var he=document.createElement("div");return he.classList.add("rpv-print__zone"),he.setAttribute("data-testid","print__zone"),document.body.appendChild(he),he},[]);a$8.useEffect(function(){ne===o$8.Ready&&(document.documentElement.classList.add("rpv-print__html-printing"),document.body.classList.add("rpv-print__body-printing"),window.print());var ke=function(){if(ne===o$8.Ready){document.documentElement.classList.remove("rpv-print__html-printing"),document.body.classList.remove("rpv-print__body-printing");var he=document.querySelectorAll(".rpv-print__zone");he&&he.forEach(function(oe){oe.parentElement.removeChild(oe)}),re.height=0,re.width=0,document.removeEventListener("mousemove",ke),ve()}};return document.addEventListener("mousemove",ke),function(){return document.removeEventListener("mousemove",ke)}},[ne]);var nt=W[0].pageHeight,Ae=W[0].pageWidth;return n$8.createPortal(a$8.createElement(a$8.Fragment,null,J.map(function(ke,he){return a$8.createElement(f$6,{key:ke,canvas:re,doc:B,pageIndex:ke,pageRotation:V.has(ke)?V.get(ke):0,pageSize:W[ke],rotation:ge,shouldRender:he===K,onLoad:Te})}),a$8.createElement("style",{dangerouslySetInnerHTML:{__html:"@page { size: ".concat(Ae,"pt ").concat(nt,"pt }")}})),st)},v$4=function(A){var B=A.doc,K=A.pagesRotation,V=A.pageSizes,W=A.renderProgressBar,J=A.rotation,ne=A.setPages,ge=A.store,ve=a$8.useState(o$8.Inactive),Te=ve[0],re=ve[1],st=a$8.useState(0),nt=st[0],Ae=st[1],ke=a$8.useMemo(function(){var it=B.numPages;return ne(B).filter(function(at){return at>=0&&at<it})},[B,ne]),he=ke.length,oe=function(){Ae(0),re(o$8.Inactive)},Oe=function(it){return re(it)};return a$8.useEffect(function(){return ge.subscribe("printStatus",Oe),function(){ge.unsubscribe("printStatus",Oe)}},[]),a$8.createElement(a$8.Fragment,null,Te===o$8.CheckingPermission&&a$8.createElement(p$5,{doc:B,store:ge}),Te===o$8.Preparing&&(W?W(nt,he,oe):a$8.createElement(m$6,{numLoadedPages:nt,numPages:he,onCancel:oe})),(Te===o$8.Preparing||Te===o$8.Ready)&&nt<=he&&a$8.createElement(g$4,{doc:B,numLoadedPages:nt,pagesRotation:K,pageSizes:V,printPages:ke,printStatus:Te,rotation:J,onCancel:oe,onLoad:function(){var it=nt+1;it<=he&&(Ae(it),it===he&&re(o$8.Ready))}}))},h$4=function(A){var B=A.onClick,K=a$8.useContext(e$8.LocalizationContext).l10n,V=K&&K.print?K.print.print:"Print";return a$8.createElement(e$8.MenuItem,{icon:a$8.createElement(i$8,null),testId:"print__menu",onClick:B},V)},E$3=function(A){var B=A.containerRef,K=A.store,V=function(W){if(!W.shiftKey&&!W.altKey&&W.key==="p"&&(e$8.isMac()?W.metaKey:W.ctrlKey)){var J=B.current;J&&document.activeElement&&J.contains(document.activeElement)&&(W.preventDefault(),K.update("printStatus",o$8.Preparing))}};return a$8.useEffect(function(){if(B.current)return document.addEventListener("keydown",V),function(){document.removeEventListener("keydown",V)}},[B.current]),a$8.createElement(a$8.Fragment,null)};print_min.PrintIcon=i$8,print_min.getAllPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function(B,K){return K})},print_min.getCustomPagesNumbers=function(A){return function(B){var K,V=[];return A.replace(/\s+/g,"").split(",").forEach(function(W){var J,ne,ge=W.split("-").map(function(ve){return parseInt(ve,10)}).filter(function(ve){return Number.isInteger(ve)});ge.length===1?V.push(ge[0]-1):ge.length===2&&V.push.apply(V,(J=ge[0]-1,ne=ge[1]-1,Array(ne-J+1).fill(0).map(function(ve,Te){return J+Te})))}),(K=V,K.filter(function(W){return K.indexOf(W)===K.lastIndexOf(W)})).filter(function(W){return W>=0&&W<B.numPages})}},print_min.getEvenPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function(B,K){return K}).filter(function(B){return(B+1)%2==0})},print_min.getOddPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function(B,K){return K}).filter(function(B){return(B+1)%2==1})},print_min.printPlugin=function(A){var B=a$8.useMemo(function(){return Object.assign({},{enableShortcuts:!0,setPages:function(W){return Array(W.numPages).fill(0).map(function(J,ne){return ne})}},A)},[]),K=a$8.useMemo(function(){return e$8.createStore({printStatus:o$8.Inactive})},[]),V=function(W){return a$8.createElement(l$8,c$8({enableShortcuts:B.enableShortcuts},W,{store:K}))};return{print:function(){K.update("printStatus",o$8.CheckingPermission)},renderViewer:function(W){var J=W.slot,ne={children:a$8.createElement(a$8.Fragment,null,B.enableShortcuts&&a$8.createElement(E$3,{containerRef:W.containerRef,store:K}),a$8.createElement(v$4,{doc:W.doc,pagesRotation:W.pagesRotation,pageSizes:W.pageSizes,renderProgressBar:A==null?void 0:A.renderProgressBar,rotation:W.rotation,setPages:B.setPages,store:K}),J.children)};return c$8(c$8({},J),ne)},Print:V,PrintButton:function(){return a$8.createElement(V,null,function(W){return a$8.createElement(s$6,c$8({},W))})},PrintMenuItem:function(W){return a$8.createElement(V,null,function(J){return a$8.createElement(h$4,{onClick:function(){J.onClick(),W.onClick()}})})},setPages:function(W){B.setPages=W}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=print_min})(lib$6);var libExports$5={},lib$5={get exports(){return libExports$5},set exports(A){libExports$5=A}},properties_min={},e$7=libExports$h;function t$7(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var r$7=t$7(reactExports),n$7=function(){return r$7.createElement(e$7.Icon,{size:16},r$7.createElement("path",{d:`M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z
            M14.5,17.005H13
            c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10
            M11.745,6.504L11.745,6.504
            M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25
            S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5`}))},o$7=function(){return o$7=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},o$7.apply(this,arguments)},a$7=function(A){var B=A.doc,K=A.render,V=r$7.useState(),W=V[0],J=V[1];return r$7.useEffect(function(){B.getMetadata().then(function(ne){return Promise.resolve(ne)}).then(function(ne){return B.getDownloadInfo().then(function(ge){return Promise.resolve({fileName:ne.contentDispositionFilename||"",info:ne.info,length:ge.length})})}).then(function(ne){J(ne)})},[]),W?K(W):r$7.createElement("div",{className:"rpv-properties__loader"},r$7.createElement(e$7.Spinner,null))},i$7=function(A){var B=A.label,K=A.value,V=r$7.useContext(e$7.ThemeContext).direction===e$7.TextDirection.RightToLeft;return r$7.createElement("dl",{className:e$7.classNames({"rpv-properties__item":!0,"rpv-properties__item--rtl":V})},r$7.createElement("dt",{className:"rpv-properties__item-label"},B,":"),r$7.createElement("dd",{className:"rpv-properties__item-value"},K||"-"))},l$7=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),c$7=function(A,B,K,V){var W=parseInt(A,10);return W>=B&&W<=K?W:V},p$4=function(A){var B=A.doc,K=A.fileName,V=A.onToggle,W=r$7.useContext(e$7.LocalizationContext).l10n,J=function(ne){var ge=function(ve){var Te=l$7.exec(ve);if(!Te)return null;var re=parseInt(Te[1],10),st=c$7(Te[2],1,12,1)-1,nt=c$7(Te[3],1,31,1),Ae=c$7(Te[4],0,23,0),ke=c$7(Te[5],0,59,0),he=c$7(Te[6],0,59,0),oe=Te[7]||"Z",Oe=c$7(Te[8],0,23,0),it=c$7(Te[9],0,59,0);switch(oe){case"-":Ae+=Oe,ke+=it;break;case"+":Ae-=Oe,ke-=it}return new Date(Date.UTC(re,st,nt,Ae,ke,he))}(ne);return ge?"".concat(ge.toLocaleDateString(),", ").concat(ge.toLocaleTimeString()):""};return r$7.createElement("div",{className:"rpv-properties__modal"},r$7.createElement(a$7,{doc:B,render:function(ne){return r$7.createElement(r$7.Fragment,null,r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:W&&W.properties?W.properties.fileName:"File name",value:ne.fileName||(Te=K,re=Te.split("/").pop(),re?re.split("#")[0].split("?")[0]:Te)}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.fileSize:"File size",value:(ge=ne.length,ve=Math.floor(Math.log(ge)/Math.log(1024)),"".concat((ge/Math.pow(1024,ve)).toFixed(2)," ").concat(["B","kB","MB","GB","TB"][ve]))})),r$7.createElement(e$7.Separator,null),r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:W&&W.properties?W.properties.title:"Title",value:ne.info.Title}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.author:"Author",value:ne.info.Author}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.subject:"Subject",value:ne.info.Subject}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.keywords:"Keywords",value:ne.info.Keywords}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.creator:"Creator",value:ne.info.Creator}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.creationDate:"Creation date",value:J(ne.info.CreationDate)}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.modificationDate:"Modification date",value:J(ne.info.ModDate)})),r$7.createElement(e$7.Separator,null),r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:W&&W.properties?W.properties.pdfProducer:"PDF producer",value:ne.info.Producer}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.pdfVersion:"PDF version",value:ne.info.PDFFormatVersion}),r$7.createElement(i$7,{label:W&&W.properties?W.properties.pageCount:"Page count",value:"".concat(B.numPages)})));var ge,ve,Te,re}}),r$7.createElement("div",{className:"rpv-properties__modal-footer"},r$7.createElement(e$7.Button,{onClick:V},W&&W.properties?W.properties.close:"Close")))},s$5={left:0,top:8},u$7=function(A){var B=A.onClick,K=r$7.useContext(e$7.LocalizationContext).l10n,V=K&&K.properties?K.properties.showProperties:"Show properties";return r$7.createElement(e$7.Tooltip,{ariaControlsSuffix:"properties",position:e$7.Position.BottomCenter,target:r$7.createElement(e$7.MinimalButton,{ariaLabel:V,testId:"properties__button",onClick:B},r$7.createElement(n$7,null)),content:function(){return V},offset:s$5})},m$5=function(A){var B=A.children,K=A.store,V=function(ne){var ge=r$7.useState(ne.get("doc")),ve=ge[0],Te=ge[1],re=function(st){Te(st)};return r$7.useEffect(function(){return ne.subscribe("doc",re),function(){ne.unsubscribe("doc",re)}},[]),{currentDoc:ve}}(K).currentDoc,W=K.get("fileName")||"",J=B||function(ne){return r$7.createElement(u$7,o$7({},ne))};return V?r$7.createElement(e$7.Modal,{ariaControlsSuffix:"properties",target:function(ne){return J({onClick:ne})},content:function(ne){return r$7.createElement(p$4,{doc:V,fileName:W,onToggle:ne})},closeOnClickOutside:!0,closeOnEscape:!0}):r$7.createElement(r$7.Fragment,null)},f$5=function(A){var B=A.onClick,K=r$7.useContext(e$7.LocalizationContext).l10n,V=K&&K.properties?K.properties.showProperties:"Show properties";return r$7.createElement(e$7.MenuItem,{icon:r$7.createElement(n$7,null),testId:"properties__menu",onClick:B},V)};properties_min.InfoIcon=n$7,properties_min.propertiesPlugin=function(){var A=r$7.useMemo(function(){return e$7.createStore({fileName:""})},[]),B=function(K){return r$7.createElement(m$5,o$7({},K,{store:A}))};return{onDocumentLoad:function(K){A.update("doc",K.doc)},onViewerStateChange:function(K){return A.update("fileName",K.file.name),K},ShowProperties:B,ShowPropertiesButton:function(){return r$7.createElement(m$5,{store:A})},ShowPropertiesMenuItem:function(K){return r$7.createElement(B,null,function(V){return r$7.createElement(f$5,o$7({},V))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=properties_min})(lib$5);var libExports$4={},lib$4={get exports(){return libExports$4},set exports(A){libExports$4=A}},rotate_min={},t$6=libExports$h;function e$6(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var r$6=e$6(reactExports),n$6=function(){return r$6.createElement(t$6.Icon,{ignoreDirection:!0,size:16},r$6.createElement("path",{d:`M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274
            M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863
            M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711
            M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2
            M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431
            M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945
            M13.5,1.75L10,4.25l3.5,2.5`}))},o$6=function(){return r$6.createElement(t$6.Icon,{ignoreDirection:!0,size:16},r$6.createElement("path",{d:`M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274
            M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863
            M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713
            M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2
            M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431
            M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945
            M10.5,1.75l3.5,2.5l-3.5,2.5`}))},c$6=function(){return c$6=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},c$6.apply(this,arguments)},a$6={left:0,top:8},i$6=function(A){var B=A.direction,K=A.onClick,V=r$6.useContext(t$6.LocalizationContext).l10n,W=V&&V.rotate?V.rotate.rotateBackward:"Rotate counterclockwise",J=V&&V.rotate?V.rotate.rotateForward:"Rotate clockwise",ne=B===t$6.RotateDirection.Backward?W:J,ge=B===t$6.RotateDirection.Backward?r$6.createElement(n$6,null):r$6.createElement(o$6,null);return r$6.createElement(t$6.Tooltip,{ariaControlsSuffix:"rotate",position:t$6.Position.BottomCenter,target:r$6.createElement(t$6.MinimalButton,{ariaLabel:ne,testId:B===t$6.RotateDirection.Backward?"rotate__backward-button":"rotate__forward-button",onClick:K},ge),content:function(){return ne},offset:a$6})},u$6=function(A){var B=A.children,K=A.direction,V=A.store;return(B||function(W){return r$6.createElement(i$6,{direction:W.direction,onClick:W.onClick})})({direction:K,onClick:function(){var W=V.get("rotate");W&&W(K)}})},l$6=function(A){var B=A.direction,K=A.onClick,V=r$6.useContext(t$6.LocalizationContext).l10n,W=V&&V.rotate?V.rotate.rotateBackward:"Rotate counterclockwise",J=V&&V.rotate?V.rotate.rotateForward:"Rotate clockwise",ne=B===t$6.RotateDirection.Backward?W:J,ge=B===t$6.RotateDirection.Backward?r$6.createElement(n$6,null):r$6.createElement(o$6,null);return r$6.createElement(t$6.MenuItem,{icon:ge,testId:B===t$6.RotateDirection.Backward?"rotate__backward-menu":"rotate__forward-menu",onClick:K},ne)},d$5=function(A){var B=A.children,K=A.store;return B({onRotatePage:function(V,W){var J=K.get("rotatePage");J&&J(V,W)}})};rotate_min.RotateBackwardIcon=n$6,rotate_min.RotateForwardIcon=o$6,rotate_min.rotatePlugin=function(){var A=r$6.useMemo(function(){return t$6.createStore()},[]),B=function(K){return r$6.createElement(u$6,c$6({},K,{store:A}))};return{install:function(K){A.update("rotate",K.rotate),A.update("rotatePage",K.rotatePage)},Rotate:B,RotateBackwardButton:function(){return r$6.createElement(B,{direction:t$6.RotateDirection.Backward},function(K){return r$6.createElement(i$6,c$6({},K))})},RotateBackwardMenuItem:function(K){return r$6.createElement(B,{direction:t$6.RotateDirection.Backward},function(V){return r$6.createElement(l$6,{direction:V.direction,onClick:function(){V.onClick(),K.onClick()}})})},RotateForwardButton:function(){return r$6.createElement(B,{direction:t$6.RotateDirection.Forward},function(K){return r$6.createElement(i$6,c$6({},K))})},RotateForwardMenuItem:function(K){return r$6.createElement(B,{direction:t$6.RotateDirection.Forward},function(V){return r$6.createElement(l$6,{direction:V.direction,onClick:function(){V.onClick(),K.onClick()}})})},RotatePage:function(K){return r$6.createElement(d$5,c$6({},K,{store:A}))}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=rotate_min})(lib$4);var libExports$3={},lib$3={get exports(){return libExports$3},set exports(A){libExports$3=A}},scrollMode_min={},e$5=libExports$h;function o$5(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var t$5=o$5(reactExports),l$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),t$5.createElement("line",{x1:"0.5",y1:"6.497",x2:"22.5",y2:"6.497"}),t$5.createElement("line",{x1:"11.5",y1:"6.497",x2:"11.5",y2:"22.497"}))},c$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),t$5.createElement("line",{x1:"11.5",y1:"0.497",x2:"11.5",y2:"22.497"}))},n$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z`}))},r$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}))},i$5=function(){return i$5=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},i$5.apply(this,arguments)},a$5=function(A,B){A.get("switchScrollMode")(B);var K=A.get("viewMode");B!==e$5.ScrollMode.Horizontal&&B!==e$5.ScrollMode.Wrapped||K===e$5.ViewMode.SinglePage||A.get("switchViewMode")(e$5.ViewMode.SinglePage)},d$4=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z
            M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z
            M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z`}))},s$4=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},u$5=function(A){var B=A.children,K=A.mode,V=A.onClick,W=t$5.useContext(e$5.LocalizationContext).l10n,J="",ne=t$5.createElement(d$4,null);switch(K){case e$5.ScrollMode.Horizontal:J=W&&W.scrollMode?W.scrollMode.horizontalScrolling:"Horizontal scrolling",ne=t$5.createElement(n$5,null);break;case e$5.ScrollMode.Page:J=W&&W.scrollMode?W.scrollMode.pageScrolling:"Page scrolling",ne=t$5.createElement(r$5,null);break;case e$5.ScrollMode.Wrapped:J=W&&W.scrollMode?W.scrollMode.wrappedScrolling:"Wrapped scrolling",ne=t$5.createElement(s$4,null);break;case e$5.ScrollMode.Vertical:default:J=W&&W.scrollMode?W.scrollMode.verticalScrolling:"Vertical scrolling",ne=t$5.createElement(d$4,null)}return B({icon:ne,label:J,onClick:V})},m$4={left:0,top:8},M$2=function(A){var B=A.isDisabled,K=A.isSelected,V=A.mode,W=A.onClick,J="";switch(V){case e$5.ScrollMode.Horizontal:J="scroll-mode__horizontal-button";break;case e$5.ScrollMode.Page:J="scroll-mode__page-button";break;case e$5.ScrollMode.Wrapped:J="scroll-mode__wrapped-button";break;case e$5.ScrollMode.Vertical:default:J="scroll-mode__vertical-button"}return t$5.createElement(u$5,{mode:V,onClick:W},function(ne){return t$5.createElement(e$5.Tooltip,{ariaControlsSuffix:"scroll-mode-switch",position:e$5.Position.BottomCenter,target:t$5.createElement(e$5.MinimalButton,{ariaLabel:ne.label,isDisabled:B,isSelected:K,testId:J,onClick:ne.onClick},ne.icon),content:function(){return ne.label},offset:m$4})})},f$4=function(A){var B=t$5.useState(A.get("scrollMode")||e$5.ScrollMode.Vertical),K=B[0],V=B[1],W=function(J){V(J)};return t$5.useEffect(function(){return A.subscribe("scrollMode",W),function(){A.unsubscribe("scrollMode",W)}},[]),{scrollMode:K}},w$1=function(A){var B=t$5.useState(A.get("viewMode")||e$5.ViewMode.SinglePage),K=B[0],V=B[1],W=function(J){V(J)};return t$5.useEffect(function(){return A.subscribe("viewMode",W),function(){A.unsubscribe("viewMode",W)}},[]),{viewMode:K}},S$3=function(A){var B=A.children,K=A.mode,V=A.store,W=w$1(V).viewMode,J=f$4(V).scrollMode===K,ne=(K===e$5.ScrollMode.Horizontal||K===e$5.ScrollMode.Wrapped)&&W!==e$5.ViewMode.SinglePage;return(B||function(ge){return t$5.createElement(M$2,{isDisabled:ne,isSelected:J,mode:ge.mode,onClick:ge.onClick})})({isDisabled:ne,isSelected:J,mode:K,onClick:function(){a$5(V,K)}})},g$3=function(A){var B=A.isDisabled,K=A.isSelected,V=A.mode,W=A.onClick,J="";switch(V){case e$5.ScrollMode.Horizontal:J="scroll-mode__horizontal-menu";break;case e$5.ScrollMode.Page:J="scroll-mode__page-menu";break;case e$5.ScrollMode.Wrapped:J="scroll-mode__wrapped-menu";break;case e$5.ScrollMode.Vertical:default:J="scroll-mode__vertical-menu"}return t$5.createElement(u$5,{mode:V,onClick:W},function(ne){return t$5.createElement(e$5.MenuItem,{checked:K,icon:ne.icon,isDisabled:B,testId:J,onClick:ne.onClick},ne.label)})},h$3=function(A,B){A.get("switchViewMode")(B);var K=A.get("scrollMode");K!==e$5.ScrollMode.Horizontal&&K!==e$5.ScrollMode.Wrapped||B===e$5.ViewMode.SinglePage||A.get("switchScrollMode")(e$5.ScrollMode.Vertical)},b$3=function(A){var B=A.children,K=A.mode,V=A.onClick,W=t$5.useContext(e$5.LocalizationContext).l10n,J="",ne=t$5.createElement(r$5,null);switch(K){case e$5.ViewMode.DualPage:J=W&&W.scrollMode?W.scrollMode.dualPage:"Dual page",ne=t$5.createElement(c$5,null);break;case e$5.ViewMode.DualPageWithCover:J=W&&W.scrollMode?W.scrollMode.dualPageCover:"Dual page with cover",ne=t$5.createElement(l$5,null);break;case e$5.ViewMode.SinglePage:default:J=W&&W.scrollMode?W.scrollMode.singlePage:"Single page",ne=t$5.createElement(r$5,null)}return B({icon:ne,label:J,onClick:V})},p$3={left:0,top:8},v$3=function(A){var B=A.isDisabled,K=A.isSelected,V=A.mode,W=A.onClick,J="";switch(V){case e$5.ViewMode.DualPage:J="view-mode__dual-button";break;case e$5.ViewMode.DualPageWithCover:J="view-mode__dual-cover-button";break;case e$5.ViewMode.SinglePage:default:J="view-mode__single-button"}return t$5.createElement(b$3,{mode:V,onClick:W},function(ne){return t$5.createElement(e$5.Tooltip,{ariaControlsSuffix:"view-mode-switch",position:e$5.Position.BottomCenter,target:t$5.createElement(e$5.MinimalButton,{ariaLabel:ne.label,isDisabled:B,isSelected:K,testId:J,onClick:ne.onClick},ne.icon),content:function(){return ne.label},offset:p$3})})},k$2=function(A){var B=A.children,K=A.mode,V=A.store,W=w$1(V).viewMode,J=f$4(V).scrollMode,ne=W===K,ge=(J===e$5.ScrollMode.Horizontal||J===e$5.ScrollMode.Wrapped)&&K!==e$5.ViewMode.SinglePage;return(B||function(ve){return t$5.createElement(v$3,{isDisabled:ge,isSelected:ne,mode:ve.mode,onClick:ve.onClick})})({isDisabled:ge,isSelected:ne,mode:K,onClick:function(){h$3(V,K)}})},C$2=function(A){var B=A.isDisabled,K=A.isSelected,V=A.mode,W=A.onClick,J="";switch(V){case e$5.ViewMode.DualPage:J="view-mode__dual-menu";break;case e$5.ViewMode.DualPageWithCover:J="view-mode__dual-cover-menu";break;case e$5.ViewMode.SinglePage:default:J="view-mode__single-menu"}return t$5.createElement(b$3,{mode:V,onClick:W},function(ne){return t$5.createElement(e$5.MenuItem,{checked:K,icon:ne.icon,isDisabled:B,testId:J,onClick:ne.onClick},ne.label)})};scrollMode_min.DualPageCoverViewModeIcon=l$5,scrollMode_min.DualPageViewModeIcon=c$5,scrollMode_min.HorizontalScrollingIcon=n$5,scrollMode_min.PageScrollingIcon=r$5,scrollMode_min.VerticalScrollingIcon=d$4,scrollMode_min.WrappedScrollingIcon=s$4,scrollMode_min.scrollModePlugin=function(){var A=t$5.useMemo(function(){return e$5.createStore({scrollMode:e$5.ScrollMode.Vertical,viewMode:e$5.ViewMode.SinglePage,switchScrollMode:function(){},switchViewMode:function(){}})},[]),B=function(V){return t$5.createElement(S$3,i$5({},V,{store:A}))},K=function(V){return t$5.createElement(k$2,i$5({},V,{store:A}))};return{install:function(V){A.update("switchScrollMode",V.switchScrollMode),A.update("switchViewMode",V.switchViewMode)},onViewerStateChange:function(V){return A.update("scrollMode",V.scrollMode),A.update("viewMode",V.viewMode),V},switchScrollMode:function(V){a$5(A,V)},switchViewMode:function(V){h$3(A,V)},SwitchScrollMode:B,SwitchScrollModeButton:function(V){return t$5.createElement(B,{mode:V.mode},function(W){return t$5.createElement(M$2,{isDisabled:W.isDisabled,isSelected:W.isSelected,mode:W.mode,onClick:function(){W.onClick()}})})},SwitchScrollModeMenuItem:function(V){return t$5.createElement(B,{mode:V.mode},function(W){return t$5.createElement(g$3,{isDisabled:W.isDisabled,isSelected:W.isSelected,mode:W.mode,onClick:function(){W.onClick(),V.onClick()}})})},SwitchViewMode:K,SwitchViewModeButton:function(V){return t$5.createElement(K,{mode:V.mode},function(W){return t$5.createElement(v$3,{isDisabled:W.isDisabled,isSelected:W.isSelected,mode:W.mode,onClick:function(){W.onClick()}})})},SwitchViewModeMenuItem:function(V){return t$5.createElement(K,{mode:V.mode},function(W){return t$5.createElement(C$2,{isDisabled:W.isDisabled,isSelected:W.isSelected,mode:W.mode,onClick:function(){W.onClick(),V.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=scrollMode_min})(lib$3);var libExports$2={},lib$2={get exports(){return libExports$2},set exports(A){libExports$2=A}},search_min={},e$4=libExports$h;function t$4(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var r$4=t$4(reactExports),n$4=function(){return r$4.createElement(e$4.Icon,{size:16},r$4.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o$4=function(){return r$4.createElement(e$4.Icon,{size:16},r$4.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},a$4=function(){return r$4.createElement(e$4.Icon,{ignoreDirection:!0,size:16},r$4.createElement("path",{d:`M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z
            M23.5,23.5
            l-5.929-5.929`}))},c$4=function(){return c$4=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},c$4.apply(this,arguments)},u$4={keyword:"",regExp:new RegExp(" "),wholeWords:!1},i$4=function(A){return{left:"".concat(A.left,"%"),top:"".concat(A.top,"%"),height:"".concat(A.height,"%"),width:"".concat(A.width,"%")}},s$3=function(A){var B=A.index,K=A.area,V=A.onHighlightKeyword,W=r$4.useRef();return e$4.useIsomorphicLayoutEffect(function(){var J=W.current;V&&J&&V({highlightEle:J,keyword:K.keyword})},[]),r$4.createElement("div",{className:"rpv-search__highlight","data-index":B,ref:W,style:i$4(K),title:K.keywordStr.trim()})},l$4=function(A){var B=A.parentNode;B&&B.removeChild(A)},h$2=function(A){var B=A.parentNode;if(B){var K=document.createRange();K.selectNodeContents(A),function(V,W){l$4(V);var J=W.parentNode;J&&J.insertBefore(V,W),l$4(W)}(K.extractContents(),A),B.normalize()}},d$3=function(A,B){return A.top<B.top?-1:A.top>B.top?1:A.left<B.left?-1:A.left>B.left?1:0},f$3=function(A){var B=A.numPages,K=A.pageIndex,V=A.renderHighlights,W=A.store,J=A.onHighlightKeyword,ne=r$4.useRef(),ge=r$4.useCallback(function(ht){return r$4.createElement(r$4.Fragment,null,ht.highlightAreas.map(function($t,Ot){return r$4.createElement(s$3,{index:Ot,key:Ot,area:$t,onHighlightKeyword:J})}))},[]),ve=V||ge,Te=r$4.useState(W.get("matchPosition")),re=Te[0],st=Te[1],nt=r$4.useState(W.get("keyword")||[u$4]),Ae=nt[0],ke=nt[1],he=r$4.useState({pageIndex:K,scale:1,status:e$4.LayerRenderStatus.PreRender}),oe=he[0],Oe=he[1],it=r$4.useRef(null),at=r$4.useRef([]),lt=r$4.useState([]),be=lt[0],Ie=lt[1],vt=function(){return!0},dt=r$4.useCallback(function(){return W.get("targetPageFilter")||vt},[W.get("targetPageFilter")]),Ce=function(ht){var $t=at.current;if($t.length===0)return[];var Ot=[],Vt=[].slice.call(ht.querySelectorAll(".rpv-core__text-layer-text")),Pt=$t.map(function(Yt){return Yt.char}).join("");return Ae.forEach(function(Yt){var Jt=Yt.keyword;if(Jt.trim()){for(var sn,ln=Yt.regExp.flags.indexOf("g")===-1?new RegExp(Yt.regExp,"".concat(Yt.regExp.flags,"g")):Yt.regExp,gt=[];(sn=ln.exec(Pt))!==null;)gt.push({keyword:ln,startIndex:sn.index,endIndex:ln.lastIndex});gt.map(function(ce){return{keyword:ce.keyword,indexes:$t.slice(ce.startIndex,ce.endIndex)}}).forEach(function(ce){var Ee=ce.indexes.reduce(function(pe,rt){return pe[rt.spanIndex]=(pe[rt.spanIndex]||[]).concat([rt]),pe},{});Object.values(Ee).forEach(function(pe){if(pe.length!==1||pe[0].char.trim()!==""){var rt=Yt.wholeWords?pe.slice(1,-1):pe,ot=function(pt,bt,yt,Nt,It){var Xt=document.createRange(),tn=Nt.firstChild;if(!tn||tn.nodeType!==Node.TEXT_NODE)return null;var fn=tn.textContent.length,an=It[0].charIndexInSpan,cn=It.length===1?an:It[It.length-1].charIndexInSpan;if(an>fn||cn+1>fn)return null;Xt.setStart(tn,an),Xt.setEnd(tn,cn+1);var hn=document.createElement("span");Xt.surroundContents(hn);var un=hn.getBoundingClientRect(),xn=yt.getBoundingClientRect(),en=xn.height,Bt=xn.width,zt=100*(un.left-xn.left)/Bt,nn=100*(un.top-xn.top)/en,_n=100*un.height/en,En=100*un.width/Bt;return h$2(hn),{keyword:bt,keywordStr:pt,numPages:B,pageIndex:K,left:zt,top:nn,height:_n,width:En,pageHeight:en,pageWidth:Bt}}(Jt,ce.keyword,ht,Vt[rt[0].spanIndex],rt);ot&&Ot.push(ot)}})})}}),Ot.sort(d$3)},ft=function(ht){ht&&ht.length>0&&ke(ht)},ct=function(ht){return st(ht)},Et=function(ht){if(ht.has(K)){var $t=ht.get(K);$t&&Oe({ele:$t.ele,pageIndex:K,scale:$t.scale,status:$t.status})}},xt=function(){return Ae.length===0||Ae.length===1&&Ae[0].keyword.trim()===""};return r$4.useEffect(function(){if(!xt()&&oe.status===e$4.LayerRenderStatus.DidRender&&!at.current.length){var ht=oe.ele,$t=[].slice.call(ht.querySelectorAll(".rpv-core__text-layer-text")).map(function(Ot){return Ot.textContent}).reduce(function(Ot,Vt,Pt){return Ot.concat(Vt.split("").map(function(Yt,Jt){return{char:Yt,charIndexInSpan:Jt,spanIndex:Pt}}))},[{char:"",charIndexInSpan:0,spanIndex:0}]).slice(1);at.current=$t}},[Ae,oe.status]),r$4.useEffect(function(){if(!xt()&&oe.ele&&oe.status===e$4.LayerRenderStatus.DidRender&&dt()({pageIndex:K,numPages:B})){var ht=oe.ele,$t=Ce(ht);Ie($t)}},[Ae,re,oe.status,at.current]),r$4.useEffect(function(){xt()&&oe.ele&&oe.status===e$4.LayerRenderStatus.DidRender&&Ie([])},[Ae,oe.status]),r$4.useEffect(function(){if(be.length!==0){var ht=ne.current;if(re.pageIndex===K&&ht&&oe.status===e$4.LayerRenderStatus.DidRender){var $t=ht.querySelector('.rpv-search__highlight[data-index="'.concat(re.matchIndex,'"]'));if($t){var Ot=function(Jt,sn){for(var ln=Jt.offsetTop,gt=Jt.offsetLeft,ce=Jt.parentElement;ce&&ce!==sn;)ln+=ce.offsetTop,gt+=ce.offsetLeft,ce=ce.parentElement;return{left:gt,top:ln}}($t,ht),Vt=Ot.left,Pt=Ot.top,Yt=W.get("jumpToDestination");Yt&&(Yt({pageIndex:K,bottomOffset:(ht.getBoundingClientRect().height-Pt)/oe.scale,leftOffset:Vt/oe.scale,scaleTo:oe.scale}),it.current&&it.current.classList.remove("rpv-search__highlight--current"),it.current=$t,$t.classList.add("rpv-search__highlight--current"))}}}},[be,re]),r$4.useEffect(function(){return W.subscribe("keyword",ft),W.subscribe("matchPosition",ct),W.subscribe("renderStatus",Et),function(){W.unsubscribe("keyword",ft),W.unsubscribe("matchPosition",ct),W.unsubscribe("renderStatus",Et)}},[]),r$4.createElement("div",{className:"rpv-search__highlights","data-testid":"search__highlights-".concat(K),ref:ne},ve({getCssProperties:i$4,highlightAreas:be}))},p$2=function(A){var B,K=A.wholeWords?" ".concat(A.keyword," "):A.keyword,V=A.matchCase?"g":"gi";return{keyword:A.keyword,regExp:new RegExp((B=K,B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),V),wholeWords:A.wholeWords||!1}},g$2=function(A,B,K){return A instanceof RegExp?{keyword:A.source,regExp:A,wholeWords:K||!1}:typeof A=="string"?A===""?u$4:p$2({keyword:A,matchCase:B||!1,wholeWords:K||!1}):(B!==void 0&&(A.matchCase=B),K!==void 0&&(A.wholeWords=K),p$2(A))},m$3=function(A){var B,K=A.get("initialKeyword"),V=r$4.useMemo(function(){if(K&&K.length===1){var ct=g$2(K[0]);return{matchCase:ct.regExp.flags.indexOf("i")===-1,wholeWords:ct.wholeWords}}return{matchCase:!1,wholeWords:!1}},[]),W=function(ct){var Et=r$4.useRef(ct.get("doc")),xt=function(ht){Et.current=ht};return r$4.useEffect(function(){return ct.subscribe("doc",xt),function(){ct.unsubscribe("doc",xt)}},[]),Et}(A),J=r$4.useState(K),ne=J[0],ge=J[1],ve=r$4.useState([]),Te=ve[0],re=ve[1],st=r$4.useState(0),nt=st[0],Ae=st[1],ke=r$4.useState(V.matchCase),he=ke[0],oe=ke[1],Oe=r$4.useRef([]),it=r$4.useState(V.wholeWords),at=it[0],lt=it[1],be=function(){return!0},Ie=r$4.useCallback(function(){return A.get("targetPageFilter")||be},[A.get("targetPageFilter")]),vt=function(ct){var Et=Te.length;if(ne.length===0||Et===0)return null;var xt=ct===Et+1?1:Math.max(1,Math.min(Et,ct));return Ae(xt),Ce(Te[xt-1])},dt=function(ct){return ge(ct===""?[]:[ct])},Ce=function(ct){var Et=A.get("jumpToPage");return Et&&Et(ct.pageIndex),A.update("matchPosition",{matchIndex:ct.matchIndex,pageIndex:ct.pageIndex}),ct},ft=function(ct,Et,xt){var ht=W.current;if(!ht)return Promise.resolve([]);var $t=ht.numPages,Ot=ct.map(function(Vt){return g$2(Vt,Et,xt)});return A.update("keyword",Ot),Ae(0),re([]),new Promise(function(Vt,Pt){var Yt=Oe.current.length===0?function(){var Jt=W.current;if(!Jt)return Promise.resolve([]);var sn=Array(Jt.numPages).fill(0).map(function(ln,gt){return e$4.getPage(Jt,gt).then(function(ce){return ce.getTextContent()}).then(function(ce){var Ee=ce.items.map(function(pe){return pe.str||""}).join("");return Promise.resolve({pageContent:Ee,pageIndex:gt})})});return Promise.all(sn).then(function(ln){return ln.sort(function(gt,ce){return gt.pageIndex-ce.pageIndex}),Promise.resolve(ln.map(function(gt){return gt.pageContent}))})}().then(function(Jt){return Oe.current=Jt,Promise.resolve(Jt)}):Promise.resolve(Oe.current);Yt.then(function(Jt){var sn=[];Jt.forEach(function(ln,gt){Ie()({pageIndex:gt,numPages:$t})&&Ot.forEach(function(ce){for(var Ee,pe=0;(Ee=ce.regExp.exec(ln))!==null;)sn.push({keyword:ce.regExp,matchIndex:pe,pageIndex:gt,pageText:ln,startIndex:Ee.index,endIndex:ce.regExp.lastIndex}),pe++})}),re(sn),sn.length>0&&(Ae(1),Ce(sn[0])),Vt(sn)})})};return r$4.useEffect(function(){Oe.current=[]},[W.current]),{clearKeyword:function(){A.update("keyword",[u$4]),dt(""),Ae(0),re([]),oe(!1),lt(!1)},changeMatchCase:function(ct){oe(ct),ne.length>0&&ft(ne,ct,at)},changeWholeWords:function(ct){lt(ct),ne.length>0&&ft(ne,he,ct)},currentMatch:nt,jumpToMatch:vt,jumpToNextMatch:function(){return vt(nt+1)},jumpToPreviousMatch:function(){return vt(nt-1)},keywords:ne,matchCase:he,numberOfMatches:Te.length,wholeWords:at,search:function(){return ft(ne,he,at)},searchFor:ft,setKeywords:ge,keyword:ne.length===0?"":(B=ne[0],B instanceof RegExp?B.source:typeof B=="string"?B:B.keyword),setKeyword:dt,setTargetPages:function(ct){A.update("targetPageFilter",ct)}}},v$2=function(A){var B=A.children,K=A.store,V=m$3(K),W=r$4.useState(!1),J=W[0],ne=W[1],ge=function(ve){return ne(!0)};return r$4.useEffect(function(){return K.subscribe("doc",ge),function(){K.unsubscribe("doc",ge)}},[]),B(c$4(c$4({},V),{isDocumentLoaded:J}))},x=function(A){var B=A.containerRef,K=A.store,V=r$4.useRef(!1),W=function(){V.current=!0},J=function(){V.current=!1},ne=function(ge){var ve=B.current;ve&&(ge.shiftKey||ge.altKey||ge.key!=="f"||(e$4.isMac()?ge.metaKey&&!ge.ctrlKey:ge.ctrlKey)&&(V.current||document.activeElement&&ve.contains(document.activeElement))&&(ge.preventDefault(),K.update("areShortcutsPressed",!0)))};return r$4.useEffect(function(){var ge=B.current;if(ge)return document.addEventListener("keydown",ne),ge.addEventListener("mouseenter",W),ge.addEventListener("mouseleave",J),function(){document.removeEventListener("keydown",ne),ge.removeEventListener("mouseenter",W),ge.removeEventListener("mouseleave",J)}},[B.current]),r$4.createElement(r$4.Fragment,null)},y={left:0,top:8},E$2=function(A){var B=A.store,K=A.onToggle,V=r$4.useContext(e$4.LocalizationContext).l10n,W=r$4.useContext(e$4.ThemeContext).direction,J=r$4.useState(!1),ne=J[0],ge=J[1],ve=r$4.useState(!1),Te=ve[0],re=ve[1],st=W===e$4.TextDirection.RightToLeft,nt=m$3(B),Ae=nt.clearKeyword,ke=nt.changeMatchCase,he=nt.changeWholeWords,oe=nt.currentMatch,Oe=nt.jumpToNextMatch,it=nt.jumpToPreviousMatch,at=nt.keyword,lt=nt.matchCase,be=nt.numberOfMatches,Ie=nt.wholeWords,vt=nt.search,dt=nt.setKeyword,Ce=function(ht){ge(!0),vt().then(function($t){ge(!1),re(!0),ht&&ht()})};r$4.useEffect(function(){var ht=B.get("initialKeyword");ht&&ht.length===1&&at&&Ce(function(){B.update("initialKeyword",[])})},[]);var ft=V&&V.search?V.search.enterToSearch:"Enter to search",ct=V&&V.search?V.search.previousMatch:"Previous match",Et=V&&V.search?V.search.nextMatch:"Next match",xt=V&&V.search?V.search.close:"Close";return r$4.createElement("div",{className:"rpv-search__popover"},r$4.createElement("div",{className:"rpv-search__popover-input-counter"},r$4.createElement(e$4.TextBox,{ariaLabel:ft,autoFocus:!0,placeholder:ft,type:"text",value:at,onChange:function(ht){re(!1),dt(ht)},onKeyDown:function(ht){ht.key==="Enter"&&at&&(Te?Oe():Ce())}}),r$4.createElement("div",{className:e$4.classNames({"rpv-search__popover-counter":!0,"rpv-search__popover-counter--ltr":!st,"rpv-search__popover-counter--rtl":st})},ne&&r$4.createElement(e$4.Spinner,{testId:"search__popover-searching",size:"1rem"}),!ne&&r$4.createElement("span",{"data-testid":"search__popover-num-matches"},oe,"/",be))),r$4.createElement("label",{className:"rpv-search__popover-label"},r$4.createElement("input",{className:"rpv-search__popover-label-checkbox","data-testid":"search__popover-match-case",checked:lt,type:"checkbox",onChange:function(ht){re(!1),ke(ht.target.checked)}})," ",V&&V.search?V.search.matchCase:"Match case"),r$4.createElement("label",{className:"rpv-search__popover-label"},r$4.createElement("input",{className:"rpv-search__popover-label-checkbox",checked:Ie,"data-testid":"search__popover-whole-words",type:"checkbox",onChange:function(ht){re(!1),he(ht.target.checked)}})," ",V&&V.search?V.search.wholeWords:"Whole words"),r$4.createElement("div",{className:"rpv-search__popover-footer"},r$4.createElement("div",{className:"rpv-search__popover-footer-item"},r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-previous-match",position:st?e$4.Position.BottomRight:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaLabel:ct,isDisabled:oe<=1,onClick:it},r$4.createElement(o$4,null)),content:function(){return ct},offset:y})),r$4.createElement("div",{className:"rpv-search__popover-footer-item"},r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-next-match",position:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaLabel:Et,isDisabled:oe>be-1,onClick:Oe},r$4.createElement(n$4,null)),content:function(){return Et},offset:y})),r$4.createElement("div",{className:e$4.classNames({"rpv-search__popover-footer-button":!0,"rpv-search__popover-footer-button--ltr":!st,"rpv-search__popover-footer-button--rtl":st})},r$4.createElement(e$4.Button,{onClick:function(){K(),Ae()}},xt))))},w=function(A){var B=A.children,K=A.onClick,V=r$4.useContext(e$4.LocalizationContext).l10n,W=V&&V.search?V.search.search:"Search";return B({icon:r$4.createElement(a$4,null),label:W,onClick:K})},b$2={left:0,top:8},k$1=function(A){var B=A.enableShortcuts,K=A.store,V=A.onClick,W=B?e$4.isMac()?"Meta+F":"Ctrl+F":"",J=function(ne){ne&&V()};return r$4.useEffect(function(){return K.subscribe("areShortcutsPressed",J),function(){K.unsubscribe("areShortcutsPressed",J)}},[]),r$4.createElement(w,{onClick:V},function(ne){return r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-popover",position:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaKeyShortcuts:W,ariaLabel:ne.label,testId:"search__popover-button",onClick:V},ne.icon),content:function(){return ne.label},offset:b$2})})},S$2={left:0,top:8},C$1=function(A){var B=A.children,K=A.enableShortcuts,V=A.store,W=r$4.useContext(e$4.ThemeContext).direction===e$4.TextDirection.RightToLeft?e$4.Position.BottomRight:e$4.Position.BottomLeft,J=B||function(ne){return r$4.createElement(k$1,c$4({enableShortcuts:K,store:V},ne))};return r$4.createElement(e$4.Popover,{ariaControlsSuffix:"search",lockScroll:!1,position:W,target:function(ne){return J({onClick:ne})},content:function(ne){return r$4.createElement(E$2,{store:V,onToggle:ne})},offset:S$2,closeOnClickOutside:!1,closeOnEscape:!0})},P$1=function(A){return Array.isArray(A)?A.map(function(B){return g$2(B)}):[g$2(A)]};search_min.NextIcon=n$4,search_min.PreviousIcon=o$4,search_min.SearchIcon=a$4,search_min.searchPlugin=function(A){var B=r$4.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onHighlightKeyword:function(){}},A)},[]),K=r$4.useMemo(function(){return e$4.createStore({initialKeyword:A&&A.keyword?Array.isArray(A.keyword)?A.keyword:[A.keyword]:[],keyword:A&&A.keyword?P$1(A.keyword):[u$4],matchPosition:{matchIndex:-1,pageIndex:-1},renderStatus:new Map})},[]),V=m$3(K),W=V.clearKeyword,J=V.jumpToMatch,ne=V.jumpToNextMatch,ge=V.jumpToPreviousMatch,ve=V.searchFor,Te=V.setKeywords,re=V.setTargetPages,st=function(nt){return r$4.createElement(C$1,c$4({enableShortcuts:B.enableShortcuts},nt,{store:K}))};return{install:function(nt){var Ae=A&&A.keyword?Array.isArray(A.keyword)?A.keyword:[A.keyword]:[],ke=A&&A.keyword?P$1(A.keyword):[u$4];K.update("initialKeyword",Ae),K.update("jumpToDestination",nt.jumpToDestination),K.update("jumpToPage",nt.jumpToPage),K.update("keyword",ke)},renderPageLayer:function(nt){return r$4.createElement(f$3,{key:nt.pageIndex,numPages:nt.doc.numPages,pageIndex:nt.pageIndex,renderHighlights:A==null?void 0:A.renderHighlights,store:K,onHighlightKeyword:B.onHighlightKeyword})},renderViewer:function(nt){var Ae=nt.slot;return Ae.subSlot&&(Ae.subSlot.children=r$4.createElement(r$4.Fragment,null,B.enableShortcuts&&r$4.createElement(x,{containerRef:nt.containerRef,store:K}),Ae.subSlot.children)),Ae},uninstall:function(nt){var Ae=K.get("renderStatus");Ae&&Ae.clear()},onDocumentLoad:function(nt){K.update("doc",nt.doc)},onTextLayerRender:function(nt){var Ae=K.get("renderStatus");Ae&&(Ae=Ae.set(nt.pageIndex,nt),K.update("renderStatus",Ae))},Search:function(nt){return r$4.createElement(v$2,c$4({},nt,{store:K}))},ShowSearchPopover:st,ShowSearchPopoverButton:function(){return r$4.createElement(st,null,function(nt){return r$4.createElement(k$1,c$4({enableShortcuts:B.enableShortcuts,store:K},nt))})},clearHighlights:function(){W()},highlight:function(nt){var Ae=Array.isArray(nt)?nt:[nt];return Te(Ae),ve(Ae)},jumpToMatch:J,jumpToNextMatch:ne,jumpToPreviousMatch:ge,setTargetPages:re}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=search_min})(lib$2);var libExports$1={},lib$1={get exports(){return libExports$1},set exports(A){libExports$1=A}},theme_min={},e$3=libExports$h;function t$3(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var n$3=t$3(reactExports),r$3=function(){return n$3.createElement(e$3.Icon,{size:16},n$3.createElement("path",{d:"M19.5,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.106l-2.4-2.4a1,1,0,0,0-1.414,0l-2.4,2.4H5.5a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.894l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4H18.5a1,1,0,0,0,1-1Z"}),n$3.createElement("path",{d:"M10,6.349a6,6,0,0,1,0,11.3,6,6,0,1,0,0-11.3Z"}))},c$3=function(){return n$3.createElement(e$3.Icon,{size:16},n$3.createElement("path",{d:"M19.491,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.1L12.7,2.1a1,1,0,0,0-1.414,0l-2.4,2.4H5.491a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.885l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4h3.394a1,1,0,0,0,1-1Z"}),n$3.createElement("path",{d:"M11.491,6c4,0,6,2.686,6,6s-2,6-6,6Z"}))},o$3=function(){return o$3=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},o$3.apply(this,arguments)},a$3={left:0,top:8},i$3=function(A){var B=A.onClick,K=n$3.useContext(e$3.ThemeContext),V=n$3.useContext(e$3.LocalizationContext).l10n,W=K.currentTheme==="dark",J=V&&V.theme?W?V.theme.switchLightTheme:V.theme.switchDarkTheme:W?"Switch to the light theme":"Switch to the dark theme";return n$3.createElement(e$3.Tooltip,{ariaControlsSuffix:"theme-switch",position:e$3.Position.BottomCenter,target:n$3.createElement(e$3.MinimalButton,{ariaLabel:J,testId:"theme__switch-button",onClick:B},W?n$3.createElement(c$3,null):n$3.createElement(r$3,null)),content:function(){return J},offset:a$3})},l$3=function(A){var B=A.children,K=n$3.useContext(e$3.ThemeContext);return(B||function(V){return n$3.createElement(i$3,{onClick:V.onClick})})({onClick:function(){return K.setCurrentTheme(K.currentTheme==="dark"?"light":"dark")}})},u$3=function(A){var B=A.onClick,K=n$3.useContext(e$3.ThemeContext),V=n$3.useContext(e$3.LocalizationContext).l10n,W=K.currentTheme==="dark",J=V&&V.theme?W?V.theme.switchLightTheme:V.theme.switchDarkTheme:W?"Switch to the light theme":"Switch to the dark theme";return n$3.createElement(e$3.MenuItem,{icon:W?n$3.createElement(c$3,null):n$3.createElement(r$3,null),testId:"theme__switch-menu",onClick:B},J)};theme_min.DarkIcon=r$3,theme_min.LightIcon=c$3,theme_min.themePlugin=function(){var A=function(B){return n$3.createElement(l$3,o$3({},B))};return{SwitchTheme:A,SwitchThemeButton:function(){return n$3.createElement(A,null,function(B){return n$3.createElement(i$3,o$3({},B))})},SwitchThemeMenuItem:function(B){return n$3.createElement(A,null,function(K){return n$3.createElement(u$3,{onClick:function(){K.onClick(),B.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=theme_min})(lib$1);var libExports={},lib={get exports(){return libExports},set exports(A){libExports=A}},zoom_min={},e$2=libExports$h;function t$2(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var n$2=t$2(reactExports),o$2=function(){return n$2.createElement(e$2.Icon,{ignoreDirection:!0,size:16},n$2.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r$2=function(){return n$2.createElement(e$2.Icon,{ignoreDirection:!0,size:16},n$2.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c$2=function(){return c$2=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},c$2.apply(this,arguments)},a$2=function(A){var B=n$2.useState(A.get("scale")||0),K=B[0],V=B[1],W=function(J){V(J)};return n$2.useEffect(function(){return A.subscribe("scale",W),function(){A.unsubscribe("scale",W)}},[]),{scale:K}},u$2=function(A){var B=A.children,K=A.store;return(B||function(V){return n$2.createElement(n$2.Fragment,null,"".concat(Math.round(100*V.scale),"%"))})({scale:a$2(K).scale})},l$2={passive:!1},i$2=null,s$2=function(A){var B=A.pagesContainerRef,K=A.store,V=e$2.useDebounceCallback(function(J){var ne=K.get("zoom");ne&&ne(J)},40),W=function(J){if(J.ctrlKey){J.preventDefault();var ne=J.target.getBoundingClientRect(),ge=1-J.deltaY/100,ve=J.clientX-ne.left,Te=J.clientY-ne.top,re=K.get("scale"),st=(i$2||(i$2=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(ve,Te).scale(ge).translate(-ve,-Te).scale(re);V(st.a)}};return e$2.useIsomorphicLayoutEffect(function(){var J=B.current;if(J)return J.addEventListener("wheel",W,l$2),function(){J.removeEventListener("wheel",W)}},[]),n$2.createElement(n$2.Fragment,null)},m$2=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f$2=function(A){return m$2.find(function(B){return B>A})||A},v$1=function(A){var B=m$2.findIndex(function(K){return K>=A});return B===-1||B===0?A:m$2[B-1]},p$1=function(A){var B=A.containerRef,K=A.store,V=function(W){if(!W.shiftKey&&!W.altKey&&(e$2.isMac()?W.metaKey:W.ctrlKey)){var J=B.current;if(J&&document.activeElement&&J.contains(document.activeElement)){var ne=K.get("zoom");if(ne){var ge=K.get("scale")||1,ve=1;switch(W.key){case"-":ve=v$1(ge);break;case"=":ve=f$2(ge);break;case"0":ve=1;break;default:ve=ge}ve!==ge&&(W.preventDefault(),ne(ve))}}}};return n$2.useEffect(function(){if(B.current)return document.addEventListener("keydown",V),function(){document.removeEventListener("keydown",V)}},[B.current]),n$2.createElement(n$2.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E$1={left:0,top:8},d$2=function(A){var B=A.levels,K=B===void 0?z:B,V=A.scale,W=A.onZoom,J=n$2.useContext(e$2.LocalizationContext).l10n,ne=n$2.useContext(e$2.ThemeContext).direction===e$2.TextDirection.RightToLeft,ge=J&&J.zoom?J.zoom.zoomDocument:"Zoom document";return n$2.createElement(e$2.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e$2.Position.BottomCenter,target:function(ve){return n$2.createElement(e$2.MinimalButton,{ariaLabel:ge,testId:"zoom__popover-target",onClick:function(){ve()}},n$2.createElement("span",{className:"rpv-zoom__popover-target"},n$2.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e$2.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!ne,"rpv-zoom__popover-target-scale--rtl":ne})},Math.round(100*V),"%"),n$2.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(ve){return n$2.createElement(e$2.Menu,null,Object.keys(e$2.SpecialZoomLevel).map(function(Te){var re=Te;return n$2.createElement(e$2.MenuItem,{key:re,onClick:function(){ve(),W(re)}},function(st){switch(st){case e$2.SpecialZoomLevel.ActualSize:return J&&J.zoom?J.zoom.actualSize:"Actual size";case e$2.SpecialZoomLevel.PageFit:return J&&J.zoom?J.zoom.pageFit:"Page fit";case e$2.SpecialZoomLevel.PageWidth:return J&&J.zoom?J.zoom.pageWidth:"Page width"}}(re))}),n$2.createElement(e$2.MenuDivider,null),K.map(function(Te){return n$2.createElement(e$2.MenuItem,{key:Te,onClick:function(){ve(),W(Te)}},"".concat(Math.round(100*Te),"%"))}))},offset:E$1,closeOnClickOutside:!0,closeOnEscape:!0})},g$1=function(A){var B=A.children,K=A.levels,V=A.store;return(B||function(W){return n$2.createElement(d$2,{levels:K,scale:W.scale,onZoom:W.onZoom})})({scale:a$2(V).scale,onZoom:function(W){var J=V.get("zoom");J&&J(W)}})},C={left:0,top:8},h$1=function(A){var B=A.enableShortcuts,K=A.onClick,V=n$2.useContext(e$2.LocalizationContext).l10n,W=V&&V.zoom?V.zoom.zoomIn:"Zoom in",J=B?e$2.isMac()?"Meta+=":"Ctrl+=":"";return n$2.createElement(e$2.Tooltip,{ariaControlsSuffix:"zoom-in",position:e$2.Position.BottomCenter,target:n$2.createElement(e$2.MinimalButton,{ariaKeyShortcuts:J,ariaLabel:W,testId:"zoom__in-button",onClick:K},n$2.createElement(o$2,null)),content:function(){return W},offset:C})},b$1=function(A){var B=A.children,K=A.enableShortcuts,V=A.store,W=a$2(V).scale;return(B||h$1)({enableShortcuts:K,onClick:function(){var J=V.get("zoom");J&&J(f$2(W))}})},k=function(A){var B=A.onClick,K=n$2.useContext(e$2.LocalizationContext).l10n,V=K&&K.zoom?K.zoom.zoomIn:"Zoom in";return n$2.createElement(e$2.MenuItem,{icon:n$2.createElement(o$2,null),testId:"zoom__in-menu",onClick:B},V)},S$1={left:0,top:8},M$1=function(A){var B=A.enableShortcuts,K=A.onClick,V=n$2.useContext(e$2.LocalizationContext).l10n,W=V&&V.zoom?V.zoom.zoomOut:"Zoom out",J=B?e$2.isMac()?"Meta+-":"Ctrl+-":"";return n$2.createElement(e$2.Tooltip,{ariaControlsSuffix:"zoom-out",position:e$2.Position.BottomCenter,target:n$2.createElement(e$2.MinimalButton,{ariaKeyShortcuts:J,ariaLabel:W,testId:"zoom__out-button",onClick:K},n$2.createElement(r$2,null)),content:function(){return W},offset:S$1})},I$1=function(A){var B=A.children,K=A.enableShortcuts,V=A.store,W=a$2(V).scale;return(B||M$1)({enableShortcuts:K,onClick:function(){var J=V.get("zoom");J&&J(v$1(W))}})},Z=function(A){var B=A.onClick,K=n$2.useContext(e$2.LocalizationContext).l10n,V=K&&K.zoom?K.zoom.zoomOut:"Zoom out";return n$2.createElement(e$2.MenuItem,{icon:n$2.createElement(r$2,null),testId:"zoom__out-menu",onClick:B},V)};zoom_min.ZoomInIcon=o$2,zoom_min.ZoomOutIcon=r$2,zoom_min.zoomPlugin=function(A){var B=n$2.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),K=n$2.useMemo(function(){return e$2.createStore({})},[]),V=function(ne){return n$2.createElement(b$1,c$2({enableShortcuts:B.enableShortcuts},ne,{store:K}))},W=function(ne){return n$2.createElement(I$1,c$2({enableShortcuts:B.enableShortcuts},ne,{store:K}))},J=function(ne){return n$2.createElement(g$1,c$2({},ne,{store:K}))};return{renderViewer:function(ne){var ge=ne.slot;if(!B.enableShortcuts)return ge;var ve={children:n$2.createElement(n$2.Fragment,null,n$2.createElement(p$1,{containerRef:ne.containerRef,store:K}),n$2.createElement(s$2,{pagesContainerRef:ne.pagesContainerRef,store:K}),ge.children)};return c$2(c$2({},ge),ve)},install:function(ne){K.update("zoom",ne.zoom)},onViewerStateChange:function(ne){return K.update("scale",ne.scale),ne},zoomTo:function(ne){var ge=K.get("zoom");ge&&ge(ne)},CurrentScale:function(ne){return n$2.createElement(u$2,c$2({},ne,{store:K}))},ZoomIn:V,ZoomInButton:function(){return n$2.createElement(V,null,function(ne){return n$2.createElement(h$1,c$2({},ne))})},ZoomInMenuItem:function(ne){return n$2.createElement(V,null,function(ge){return n$2.createElement(k,{onClick:function(){ge.onClick(),ne.onClick()}})})},ZoomOut:W,ZoomOutButton:function(){return n$2.createElement(W,null,function(ne){return n$2.createElement(M$1,c$2({},ne))})},ZoomOutMenuItem:function(ne){return n$2.createElement(W,null,function(ge){return n$2.createElement(Z,{onClick:function(){ge.onClick(),ne.onClick()}})})},Zoom:J,ZoomPopover:function(ne){return n$2.createElement(J,null,function(ge){return n$2.createElement(d$2,c$2({levels:ne==null?void 0:ne.levels},ge))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=zoom_min})(lib);var e$1=libExports$h,t$1=libExports$b,r$1=reactExports,n$1=libExports$a,o$1=libExports$9,a$1=libExports$8,l$1=libExports$7,i$1=libExports$6,c$1=libExports$5,m$1=libExports$4,u$1=libExports$3,s$1=libExports$2,d$1=libExports$1,p=libExports;function v(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var _=v(r$1),E=function(){return _.createElement(e$1.Icon,{size:16},_.createElement("path",{d:`M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z
            M12,9.5
            c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z
            M12,18.5c1.381,0,2.5,1.119,2.5,2.5
            s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z`}))},g={left:0,top:8},P=function(A){var B=A.toolbarSlot,K=_.useContext(e$1.LocalizationContext).l10n,V=_.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft?e$1.Position.BottomLeft:e$1.Position.BottomRight,W=B.DownloadMenuItem,J=B.EnterFullScreenMenuItem,ne=B.GoToFirstPageMenuItem,ge=B.GoToLastPageMenuItem,ve=B.GoToNextPageMenuItem,Te=B.GoToPreviousPageMenuItem,re=B.OpenMenuItem,st=B.PrintMenuItem,nt=B.RotateBackwardMenuItem,Ae=B.RotateForwardMenuItem,ke=B.ShowPropertiesMenuItem,he=B.SwitchScrollModeMenuItem,oe=B.SwitchSelectionModeMenuItem,Oe=B.SwitchViewModeMenuItem,it=B.SwitchThemeMenuItem;return _.createElement(e$1.Popover,{ariaControlsSuffix:"toolbar-more-actions",ariaHasPopup:"menu",position:V,target:function(at,lt){var be=K&&K.toolbar?K.toolbar.moreActions:"More actions";return _.createElement(e$1.Tooltip,{ariaControlsSuffix:"toolbar-more-actions",position:V,target:_.createElement(e$1.MinimalButton,{ariaLabel:be,isSelected:lt,testId:"toolbar__more-actions-popover-target",onClick:at},_.createElement(E,null)),content:function(){return be},offset:g})},content:function(at){return _.createElement(e$1.Menu,null,_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(it,{onClick:at})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(J,{onClick:at})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(re,null)),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(st,{onClick:at})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(W,{onClick:at})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(e$1.MenuDivider,null)),_.createElement(ne,{onClick:at}),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(Te,{onClick:at})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(ve,{onClick:at})),_.createElement(ge,{onClick:at}),_.createElement(e$1.MenuDivider,null),_.createElement(Ae,{onClick:at}),_.createElement(nt,{onClick:at}),_.createElement(e$1.MenuDivider,null),_.createElement(oe,{mode:t$1.SelectionMode.Text,onClick:at}),_.createElement(oe,{mode:t$1.SelectionMode.Hand,onClick:at}),_.createElement(e$1.MenuDivider,null),_.createElement(he,{mode:e$1.ScrollMode.Page,onClick:at}),_.createElement(he,{mode:e$1.ScrollMode.Vertical,onClick:at}),_.createElement(he,{mode:e$1.ScrollMode.Horizontal,onClick:at}),_.createElement(he,{mode:e$1.ScrollMode.Wrapped,onClick:at}),_.createElement(e$1.MenuDivider,null),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(Oe,{mode:e$1.ViewMode.SinglePage,onClick:at})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(Oe,{mode:e$1.ViewMode.DualPage,onClick:at})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(Oe,{mode:e$1.ViewMode.DualPageWithCover,onClick:at})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(e$1.MenuDivider,null)),_.createElement(ke,{onClick:at}))},offset:g,closeOnClickOutside:!0,closeOnEscape:!0})},M=function(){return M=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},M.apply(this,arguments)},h=function(A){return function(B){var K=_.useMemo(function(){return A(B)},[]),V=_.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft,W=K.CurrentPageInput,J=K.Download,ne=K.EnterFullScreen,ge=K.GoToNextPage,ve=K.GoToPreviousPage,Te=K.NumberOfPages,re=K.Open,st=K.Print,nt=K.ShowSearchPopover,Ae=K.SwitchTheme,ke=K.Zoom,he=K.ZoomIn,oe=K.ZoomOut;return _.createElement("div",{"data-testid":"toolbar",className:e$1.classNames({"rpv-toolbar":!0,"rpv-toolbar--rtl":V}),role:"toolbar","aria-orientation":"horizontal"},_.createElement("div",{className:"rpv-toolbar__left"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(nt,null)),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ve,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(W,null),_.createElement("span",{className:"rpv-toolbar__label"},_.createElement(Te,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ge,null)))),_.createElement("div",{className:"rpv-toolbar__center"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(oe,null)),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ke,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(he,null))),_.createElement("div",{className:"rpv-toolbar__right"},_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(Ae,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ne,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(re,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(J,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(st,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(P,{toolbarSlot:K}))))}},f$1=function(A){var B=A.NumberOfPages;return Object.assign({},A,{NumberOfPages:function(){return _.createElement(_.Fragment,null,"/ ",_.createElement(B,null))}})},S=function(A){return h(f$1)(A)},I=function(A){var B=A.children,K=A.slot;return(B||S)(K)};toolbar_min.MoreActionsPopover=P,toolbar_min.MoreIcon=E,toolbar_min.toolbarPlugin=function(A){var B=n$1.fullScreenPlugin(A?A.fullScreenPlugin:{}),K=o$1.getFilePlugin(A?A.getFilePlugin:{}),V=a$1.openPlugin(A?A.openPlugin:{}),W=l$1.pageNavigationPlugin(A?A.pageNavigationPlugin:{}),J=i$1.printPlugin(A?A.printPlugin:{}),ne=c$1.propertiesPlugin(),ge=m$1.rotatePlugin(),ve=u$1.scrollModePlugin(),Te=s$1.searchPlugin(A?A.searchPlugin:{}),re=t$1.selectionModePlugin(A?A.selectionModePlugin:{}),st=d$1.themePlugin(),nt=p.zoomPlugin(A?A.zoomPlugin:{}),Ae=[B,K,V,W,J,ne,ge,ve,Te,re,st,nt],ke=_.useCallback(function(he){var oe=B.EnterFullScreen,Oe=B.EnterFullScreenMenuItem,it=K.Download,at=K.DownloadMenuItem,lt=V.Open,be=V.OpenMenuItem,Ie=W.CurrentPageInput,vt=W.CurrentPageLabel,dt=W.GoToFirstPage,Ce=W.GoToFirstPageMenuItem,ft=W.GoToLastPage,ct=W.GoToLastPageMenuItem,Et=W.GoToNextPage,xt=W.GoToNextPageMenuItem,ht=W.GoToPreviousPage,$t=W.GoToPreviousPageMenuItem,Ot=W.NumberOfPages,Vt=J.Print,Pt=J.PrintMenuItem,Yt=ne.ShowProperties,Jt=ne.ShowPropertiesMenuItem,sn=ge.Rotate,ln=ge.RotateBackwardMenuItem,gt=ge.RotateForwardMenuItem,ce=ve.SwitchScrollMode,Ee=ve.SwitchScrollModeMenuItem,pe=ve.SwitchViewMode,rt=ve.SwitchViewModeMenuItem,ot=Te.Search,pt=Te.ShowSearchPopover,bt=re.SwitchSelectionMode,yt=re.SwitchSelectionModeMenuItem,Nt=st.SwitchTheme,It=st.SwitchThemeMenuItem,Xt=nt.CurrentScale,tn=nt.Zoom,fn=nt.ZoomIn,an=nt.ZoomInMenuItem,cn=nt.ZoomOut,hn=nt.ZoomOutMenuItem;return _.createElement(I,M({},he,{slot:{CurrentPageInput:Ie,CurrentPageLabel:vt,CurrentScale:Xt,Download:it,DownloadMenuItem:at,EnterFullScreen:oe,EnterFullScreenMenuItem:Oe,GoToFirstPage:dt,GoToFirstPageMenuItem:Ce,GoToLastPage:ft,GoToLastPageMenuItem:ct,GoToNextPage:Et,GoToNextPageMenuItem:xt,GoToPreviousPage:ht,GoToPreviousPageMenuItem:$t,NumberOfPages:Ot,Open:lt,OpenMenuItem:be,Print:Vt,PrintMenuItem:Pt,Rotate:sn,RotateBackwardMenuItem:ln,RotateForwardMenuItem:gt,Search:ot,ShowProperties:Yt,ShowPropertiesMenuItem:Jt,ShowSearchPopover:pt,SwitchScrollMode:ce,SwitchScrollModeMenuItem:Ee,SwitchSelectionMode:bt,SwitchSelectionModeMenuItem:yt,SwitchViewMode:pe,SwitchViewModeMenuItem:rt,SwitchTheme:Nt,SwitchThemeMenuItem:It,Zoom:tn,ZoomIn:fn,ZoomInMenuItem:an,ZoomOut:cn,ZoomOutMenuItem:hn}}))},[]);return{fullScreenPluginInstance:B,getFilePluginInstance:K,openPluginInstance:V,pageNavigationPluginInstance:W,printPluginInstance:J,propertiesPluginInstance:ne,rotatePluginInstance:ge,scrollModePluginInstance:ve,searchPluginInstance:Te,selectionModePluginInstance:re,themePluginInstance:st,zoomPluginInstance:nt,install:function(he){Ae.forEach(function(oe){oe.install&&oe.install(he)})},renderPageLayer:function(he){return _.createElement(_.Fragment,null,Ae.map(function(oe,Oe){return oe.renderPageLayer?_.createElement(_.Fragment,{key:Oe},oe.renderPageLayer(he)):_.createElement(_.Fragment,{key:Oe})}))},renderViewer:function(he){var oe=he.slot;return Ae.forEach(function(Oe){Oe.renderViewer&&(oe=Oe.renderViewer(M(M({},he),{slot:oe})))}),oe},uninstall:function(he){Ae.forEach(function(oe){oe.uninstall&&oe.uninstall(he)})},onDocumentLoad:function(he){Ae.forEach(function(oe){oe.onDocumentLoad&&oe.onDocumentLoad(he)})},onAnnotationLayerRender:function(he){Ae.forEach(function(oe){oe.onAnnotationLayerRender&&oe.onAnnotationLayerRender(he)})},onTextLayerRender:function(he){Ae.forEach(function(oe){oe.onTextLayerRender&&oe.onTextLayerRender(he)})},onViewerStateChange:function(he){var oe=he;return Ae.forEach(function(Oe){Oe.onViewerStateChange&&(oe=Oe.onViewerStateChange(oe))}),oe},renderDefaultToolbar:h,Toolbar:ke}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=toolbar_min})(lib$c);var e=libExports$h,t=reactExports,n=libExports$f,a=libExports$e,r=libExports$d,o=libExports$c;function l(A){var B=Object.create(null);return A&&Object.keys(A).forEach(function(K){if(K!=="default"){var V=Object.getOwnPropertyDescriptor(A,K);Object.defineProperty(B,K,V.get?V:{enumerable:!0,get:function(){return A[K]}})}}),B.default=A,Object.freeze(B)}var u=l(t),c=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3
            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5
            c0.552,0,1,0.448,1,1L11.5,10.5z
            M14.5,6.499h6
            M14.5,10.499h6
            M3.5,14.499h17
            M3.5,18.499h16.497`}))},i=function(){return i=Object.assign||function(A){for(var B,K=1,V=arguments.length;K<V;K++)for(var W in B=arguments[K])Object.prototype.hasOwnProperty.call(B,W)&&(A[W]=B[W]);return A},i.apply(this,arguments)},s=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883
            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0
            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9`}))},d=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},b={left:8,top:0},f={left:-8,top:0},m=function(A){var B=A.attachmentTabContent,K=A.bookmarkTabContent,V=A.store,W=A.thumbnailTabContent,J=A.tabs,ne=u.useRef(),ge=u.useContext(e.LocalizationContext).l10n,ve=u.useState(V.get("isCurrentTabOpened")||!1),Te=ve[0],re=ve[1],st=u.useState(Math.max(V.get("currentTab")||0,0)),nt=st[0],Ae=st[1],ke=u.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,he=[{content:W,icon:u.createElement(d,null),title:ge&&ge.defaultLayout?ge.defaultLayout.thumbnail:"Thumbnail"},{content:K,icon:u.createElement(c,null),title:ge&&ge.defaultLayout?ge.defaultLayout.bookmark:"Bookmark"},{content:B,icon:u.createElement(s,null),title:ge&&ge.defaultLayout?ge.defaultLayout.attachment:"Attachment"}],oe=J?J(he):he,Oe=function(at){at>=0&&at<=oe.length-1&&(V.update("isCurrentTabOpened",!0),Ae(at))},it=function(at){re(at)};return u.useEffect(function(){return V.subscribe("currentTab",Oe),V.subscribe("isCurrentTabOpened",it),function(){V.unsubscribe("currentTab",Oe),V.unsubscribe("isCurrentTabOpened",it)}},[]),oe.length===0?u.createElement(u.Fragment,null):u.createElement(u.Fragment,null,u.createElement("div",{"data-testid":"default-layout__sidebar",className:e.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":Te,"rpv-default-layout__sidebar--ltr":!ke,"rpv-default-layout__sidebar--rtl":ke}),ref:ne},u.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},u.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},oe.map(function(at,lt){return u.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":nt===lt,key:lt,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(lt),role:"tab"},u.createElement(e.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(lt),position:ke?e.Position.LeftCenter:e.Position.RightCenter,target:u.createElement(e.MinimalButton,{ariaLabel:at.title,isSelected:nt===lt,onClick:function(){return function(be){if(nt===be){V.update("isCurrentTabOpened",!V.get("isCurrentTabOpened"));var Ie=ne.current;Ie&&Ie.style.width&&Ie.style.removeProperty("width")}else V.update("currentTab",be)}(lt)}},at.icon),content:function(){return at.title},offset:ke?f:b}))})),u.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(nt),id:"rpv-default-layout__sidebar-content",className:e.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":Te,"rpv-default-layout__sidebar-content--ltr":!ke,"rpv-default-layout__sidebar-content--rtl":ke}),role:"tabpanel",tabIndex:-1},oe[nt].content))),Te&&u.createElement(e.Splitter,{constrain:function(at){return at.firstHalfPercentage>=20&&at.firstHalfPercentage<=80}}))};defaultLayout_min.BookmarkIcon=c,defaultLayout_min.FileIcon=s,defaultLayout_min.ThumbnailIcon=d,defaultLayout_min.defaultLayoutPlugin=function(A){var B=u.useMemo(function(){return e.createStore({isCurrentTabOpened:!1,currentTab:0})},[]),K=n.attachmentPlugin(),V=a.bookmarkPlugin(),W=r.thumbnailPlugin(A?A.thumbnailPlugin:{}),J=o.toolbarPlugin(A?A.toolbarPlugin:{}),ne=K.Attachments,ge=V.Bookmarks,ve=W.Thumbnails,Te=J.Toolbar,re=A?A.sidebarTabs:function(nt){return nt},st=[K,V,W,J];return{attachmentPluginInstance:K,bookmarkPluginInstance:V,thumbnailPluginInstance:W,toolbarPluginInstance:J,activateTab:function(nt){B.update("currentTab",nt)},toggleTab:function(nt){var Ae=B.get("currentTab");B.update("isCurrentTabOpened",!B.get("isCurrentTabOpened")),Ae!==nt&&B.update("currentTab",nt)},install:function(nt){st.forEach(function(Ae){Ae.install&&Ae.install(nt)})},renderPageLayer:function(nt){return u.createElement(u.Fragment,null,st.map(function(Ae,ke){return Ae.renderPageLayer?u.createElement(u.Fragment,{key:ke},Ae.renderPageLayer(nt)):u.createElement(u.Fragment,{key:ke},u.createElement(u.Fragment,null))}))},renderViewer:function(nt){var Ae=nt.slot;st.forEach(function(he){he.renderViewer&&(Ae=he.renderViewer(i(i({},nt),{slot:Ae})))});var ke=Ae.subSlot&&Ae.subSlot.attrs?{className:Ae.subSlot.attrs.className,"data-testid":Ae.subSlot.attrs["data-testid"],ref:Ae.subSlot.attrs.ref,style:Ae.subSlot.attrs.style}:{};return Ae.children=u.createElement("div",{className:"rpv-default-layout__container"},u.createElement("div",{"data-testid":"default-layout__main",className:e.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":nt.themeContext.direction===e.TextDirection.RightToLeft})},u.createElement(m,{attachmentTabContent:u.createElement(ne,null),bookmarkTabContent:u.createElement(ge,null),store:B,thumbnailTabContent:u.createElement(ve,null),tabs:re}),u.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},u.createElement("div",{className:"rpv-default-layout__toolbar"},A&&A.renderToolbar?A.renderToolbar(Te):u.createElement(Te,null)),u.createElement("div",i({},ke),Ae.subSlot.children))),Ae.children),Ae.subSlot.attrs={},Ae.subSlot.children=u.createElement(u.Fragment,null),Ae},uninstall:function(nt){st.forEach(function(Ae){Ae.uninstall&&Ae.uninstall(nt)})},onDocumentLoad:function(nt){st.forEach(function(Ae){Ae.onDocumentLoad&&Ae.onDocumentLoad(nt)}),A&&A.setInitialTab&&A.setInitialTab(nt.doc).then(function(Ae){B.update("currentTab",Ae),B.update("isCurrentTabOpened",!0)})},onAnnotationLayerRender:function(nt){st.forEach(function(Ae){Ae.onAnnotationLayerRender&&Ae.onAnnotationLayerRender(nt)})},onTextLayerRender:function(nt){st.forEach(function(Ae){Ae.onTextLayerRender&&Ae.onTextLayerRender(nt)})},onViewerStateChange:function(nt){var Ae=nt;return st.forEach(function(ke){ke.onViewerStateChange&&(Ae=ke.onViewerStateChange(Ae))}),Ae}}},defaultLayout_min.setInitialTabFromPageMode=function(A){return new Promise(function(B,K){A.getPageMode().then(function(V){if(V)switch(V){case e.PageMode.Attachments:B(2);break;case e.PageMode.Bookmarks:B(1);break;case e.PageMode.Thumbnails:B(0);break;default:B(-1)}else B(-1)})})};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */(function(A){A.exports=defaultLayout_min})(lib$g);function MyModal({isOpen:A,setIsOpen:B,docUrl:K}){function V(){B(!1)}const W=K==null?void 0:K.split(".").pop();return console.log(W),jsxs(Fragment,{children:[W=="png"||W=="jpg"||W=="jepg"?jsx("img",{src:K,className:"w-full h-full",alt:K}):jsx("iframe",{className:"w-full h-full",src:K,frameborder:"0"}),jsx(qe,{appear:!0,show:A,as:reactExports.Fragment,children:jsxs(_t,{as:"div",className:"relative z-10",onClose:V,children:[jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:jsx("div",{className:"fixed inset-0 bg-black/25"})}),jsx("div",{className:"fixed inset-0 overflow-y-auto",children:jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:jsx(qe.Child,{as:reactExports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:jsxs(_t.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[jsx(_t.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 justify-end flex",children:jsx("div",{className:"bg-gray-200 p-1 rounded-md hover:bg-gray-400 cursor-pointer",children:jsx(IoClose,{onClick:V})})}),W=="png"||W=="jpg"||W=="jepg"?jsx("img",{src:K,className:"w-full h-full",alt:K}):jsx("iframe",{width:"100%",height:"500px",src:K,frameborder:"0"})]})})})})]})})]})}Modal.setAppElement("#root");function HostelDetailsEntry(){var oe,Oe,it,at;const{api_HostelApplicationFullDetailById:A,api_HostelViewDocuments:B}=AdvertisementApiList();useSetTitle("Agency Details");const[K,V]=reactExports.useState(!1),[W,J]=reactExports.useState();reactExports.useState(),useNavigate();const{id:ne}=useParams(),[ge,ve]=reactExports.useState(),[Te,re]=reactExports.useState(!1);reactExports.useState(!1);const[st,nt]=reactExports.useState("");reactExports.useEffect(()=>{Ae()},[]);const Ae=()=>{console.log("before document fetch ",ne);let lt={applicationId:ne};AxiosInterceptors.post(B,lt,ApiHeader()).then(be=>{var Ie,vt;console.log("document list at saf application details 12",(Ie=be==null?void 0:be.data)==null?void 0:Ie.data),J((vt=be==null?void 0:be.data)==null?void 0:vt.data)}).catch(be=>{console.log("error at saf application details ",be)})},ke=lt=>{console.log("incoming doc url modal => ",lt),nt(lt),V(!0)},he=()=>{re(!0);const be={headers:{Authorization:`Bearer ${window.localStorage.getItem("token")}`,Accept:"application/json"}};AxiosInterceptors.post(A,{applicationId:ne,type:"Active"},be).then(function(Ie){console.log("agency application details",Ie.data.data),ve(Ie.data.data),re(!1)}).catch(function(Ie){console.log("agency application details error...",Ie),re(!1)})};return reactExports.useEffect(()=>{he()},[]),jsxs(Fragment,{children:[Te&&jsx(BarLoader,{}),K&&jsx(MyModal,{isOpen:K,setIsOpen:V,docUrl:st}),jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-2 container mx-auto w-full",children:jsxs("div",{className:"col-span-12 rounded-lg  p-4",children:[jsx("h1",{className:"mb-2 pl-2 font-bold text-3xl text-gray-700 uppercase underline text-center",children:nullToNA((Oe=(oe=ge==null?void 0:ge.fullDetailsData)==null?void 0:oe.cardArray)==null?void 0:Oe.headerTitle)}),jsxs("h1",{className:"flex-1 flex pl-2 font-bold text-2xl text-gray-700",children:["Application No. -",nullToNA((ge==null?void 0:ge.application_no)||"")]}),jsxs("div",{className:"p-4",children:[jsxs("h1",{className:"px-1 font-semibold font-serif  text-gray-500",children:[jsx(MdTag,{className:"inline"})," Basic Details"]}),(at=(it=ge==null?void 0:ge.fullDetailsData)==null?void 0:it.dataArray)==null?void 0:at.map(lt=>{var be;return jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 container mx-auto bg-white rounded-lg shadow-xl p-4 mt-4",children:(be=lt==null?void 0:lt.data)==null?void 0:be.map(Ie=>jsxs("div",{className:"pl-4 p-2",children:[jsxs("h1",{className:"font-bold text-sm",children:[nullToNA((Ie==null?void 0:Ie.value)||"N/A")," "]}),jsx("h1",{className:"text-gray-500 text-xs",children:nullToNA(Ie==null?void 0:Ie.displayString)})]}))})})]})]})}),jsxs("div",{className:"container mx-auto mt-10  px-5 pb-48  rounded-lg",children:[jsxs("h1",{className:"px-1 font-semibold font-serif text-gray-500 mt-10",children:[jsx(MdTag,{className:"inline"})," Document List"]}),jsx("div",{className:"py-0 shadow-xl mt-3",children:jsx("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 overflow-x-auto",children:jsx("div",{className:"inline-block min-w-full rounded-lg overflow-hidden",children:jsxs("table",{className:"min-w-full leading-normal",children:[jsx("thead",{className:"bg-white",children:jsxs("tr",{className:"font-semibold",children:[jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm ",children:"#"}),jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm ",children:"Document Name"}),jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm ",children:"View"}),jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm ",children:"Status"}),jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm ",children:"Remarks"})]})}),jsxs("tbody",{children:[(W==null?void 0:W.length)==0&&!Te&&jsx("tr",{className:"mt-10 py-20",children:jsx("td",{colSpan:5,className:"text-center",children:jsx("span",{className:"bg-red-200 text-sm text-red-400 italic my-4 px-4 py-2 rounded-md shadow-lg ",children:"No Document Found !!"})})}),W==null?void 0:W.map((lt,be)=>jsx(PilotWorkflowDocumentRow,{openModal:ke,docList:lt,index:be}))]})]})})})})]})]})}export{HostelDetailsEntry as default};
