import{a as L,r as E,b as c,j as e,R as q,A as k}from"./index-dd1288ad.js";import{P}from"./Page-c37fa378.js";import{B as T}from"./Breadcrumb-5eaf1e4d.js";import{u as B,F as D,a as K}from"./formik.esm-5fbe598e.js";import{C as W}from"./index-0f60d4d6.js";import{a as Y}from"./index.esm-a97a4a89.js";import{S as $}from"./LoadingButton-8b46375a.js";import"./TextField-b2648471.js";import{u as n}from"./useQuery-53a02e0f.js";const z=()=>{var x,y,u,p,b,g,h,j,f,N;const{api_fy:C,class_wise_demand_report:w,class_wise_received_amount_report:A}=k;L();const[i,I]=E.useState(!1),{data:o,isLoading:V,error:H}=n({queryKey:["fy"],queryFn:async()=>(await c.post(`${C}`,{})).data.data}),t=B({initialValues:{fyId:""},onSubmit:async r=>{_()}}),d=r=>{console.log(r==null?void 0:r.data)},m=r=>{console.log(r)},{data:s,isLoading:M,error:Q,refetch:_,isFetching:R}=n({queryKey:["classWiseDemandReportData",t.values.fyId],queryFn:async()=>await c.post(`${w}`,{fyId:t.values.fyId}),onSuccess:d,onError:m,enabled:!!t.values.fyId}),{data:a,isLoading:G,error:J,refetch:O,isFetching:U}=n({queryKey:["classWiseReceivedAmountData",t.values.fyId],queryFn:async()=>await c.post(`${A}`,{fyId:t.values.fyId}),onSuccess:d,onError:m,enabled:!!t.values.fyId});return console.log("esddsfsd",(y=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:y.details),e.jsxs("div",{children:[e.jsxs("div",{className:"px-5 py-1 flex justify-end cursor-pointer",children:[e.jsx(Y,{size:30,color:"green",onClick:()=>I(!i)}),i&&e.jsx(W,{data:[["Sl No.","FY Year","Total Demand","Total Collection","Total Due"],[1,t.values.fyName,(u=s==null?void 0:s.data)==null?void 0:u.actualAmount,(p=s==null?void 0:s.data)==null?void 0:p.receiveAmount,(b=s==null?void 0:s.data)==null?void 0:b.diff]],target:"_blank"})]}),e.jsx("div",{className:"border p-6 mx-auto w-[97%]",children:e.jsx(D,{value:t,children:e.jsx(K,{autoComplete:"off",onSubmit:t.handleSubmit,children:e.jsx("div",{className:"flex mx-auto px-0 justify-center w-96",children:e.jsx("div",{className:"grid grid-cols-1",children:e.jsx("div",{children:e.jsx($,{name:"fyId",selectedText:"fyName",label:"Financial Year",formik:t,isRequiredLabel:!0,size:"xs",style:{width:"200px"},children:(o==null?void 0:o.length)>0&&(o==null?void 0:o.map(r=>e.jsx("option",{value:r==null?void 0:r.id,children:r==null?void 0:r.financial_year})))})})})})})})}),e.jsx("div",{className:"w-[24rem] lg:w-full overflow-x-auto px-6 mx-auto py-3",children:R?e.jsx("div",{role:"status",className:"animate-pulse",children:Array(1).fill("").map((r,l)=>e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"h-36 bg-gray-200 rounded-lg dark:bg-gray-700 w-full mb-4"}),e.jsx("span",{className:"sr-only",children:"Loading..."})]},l))}):e.jsx(e.Fragment,{children:((j=(h=(g=s==null?void 0:s.data)==null?void 0:g.data)==null?void 0:h.classWiseDetails)==null?void 0:j.length)>0?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-md ",children:e.jsxs("tr",{className:"text-white bg-[#0F766E]",children:[e.jsx("th",{scope:"col",className:" py-2 text-center border border-gray-400 ",children:"Sl No."}),e.jsx("th",{scope:"col",className:" py-2 text-center border border-gray-400 ",children:"Class"}),e.jsx("th",{scope:"col",className:" py-2 text-center border border-gray-400 ",children:"Class Wise Fee"}),e.jsx("th",{scope:"col",colSpan:2,className:" py-2 text-center border border-gray-400 ",children:"Student Count"}),e.jsx("th",{scope:"col",colSpan:2,className:" py-2 text-center border border-gray-400",children:"Actual Amount"}),e.jsx("th",{scope:"col",className:" py-2 text-center border border-gray-400 ",children:"Received Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:" py-2  text-center border border-gray-400 "}),e.jsx("td",{className:" py-2  text-center border border-gray-400 "}),e.jsx("td",{className:" py-2  text-center border border-gray-400 "}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-blue-100",children:"Active"}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-red-100",children:"Inactive"}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-blue-100",children:"Active"}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-red-100",children:"Inactive"}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-stale-100"})]}),(N=(f=s==null?void 0:s.data)==null?void 0:f.data)==null?void 0:N.classWiseDetails.map((r,l)=>{var v,F,S;return console.log(r),e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:" py-2  text-center border border-gray-400 ",children:l+1}),e.jsx("td",{className:" py-2  text-center border border-gray-400",children:r==null?void 0:r.class_id}),e.jsx("td",{className:" py-2  text-center border border-gray-400",children:r==null?void 0:r.classWisePerStudentFees}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-blue-100",children:r==null?void 0:r.activeStudentsCounts}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-red-100",children:r==null?void 0:r.inactiveStudentsCounts}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-blue-100",children:r==null?void 0:r.totalFeesFromActiveStudents}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-red-100",children:r==null?void 0:r.totalFeesFromDeactiveStudents}),e.jsx("td",{className:" py-2  text-center border border-gray-400 bg-stale-100",children:(S=(F=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:F.details[l])==null?void 0:S.receivedAmount})]},l)})})]})]}):e.jsx("div",{className:"text-center text-red-500",children:"No Data Found"})})})]})},ce=()=>e.jsxs(P,{title:"Comparison Report",pageName:"Comparison Report",children:[e.jsx(T,{list:[{title:"Home",path:"/home"},{title:"Comparison Report",path:"#"}]}),e.jsx(z,{})]});export{ce as default};
