import{j as e,c as D,P,b as _}from"./index-K9wnwIEh.js";import{h as w,d as y}from"./router-WshRxXk2.js";import{r}from"./tailwind-Ucrx0-S6.js";import{u as A,F as R,T as f,S as T}from"./TextArea-wmoREJF1.js";import{b as M}from"./useCustomQuery-5jXXRIIF.js";import{S as O}from"./index-lU8bpgwB.js";import{F as k}from"./index-ydtxq-TG.js";import"./reactQuery-2daanlHr.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-YpSsR79r.js";import"./reactLazyLoadImageComponent-2lnvQYCj.js";import"./reactIcons-UnuJhE_7.js";import"./headlessui-oHdMYZDI.js";function I({data:l}){const n=w();return e.jsx(e.Fragment,{children:l==null?void 0:l.map((t,i)=>e.jsx(r.Card,{className:"mt-4",children:e.jsxs(r.CardBody,{children:[e.jsxs("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:["Sno : ",i+1]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:"Application No"}),e.jsx("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:"Challan No"}),e.jsx("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:"Name"}),e.jsx("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:"Date:"}),e.jsx("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:"Amount:"}),e.jsx("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:"Type:"}),e.jsx("h1",{className:"text-sm font-semibold text-blue-gray-500 mt-2",children:"Payment Mode:"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm  text-blue-gray-500 mt-2",children:t.application_no}),e.jsx("p",{className:"text-sm  text-blue-gray-500 mt-2",children:t.challan_no}),e.jsx("p",{className:"text-sm  text-blue-gray-500 mt-2",children:t.full_name}),e.jsx("p",{className:"text-sm  text-blue-gray-500 mt-2",children:t.challan_date}),e.jsx("p",{className:"text-sm  text-blue-gray-500 mt-2",children:t.amount}),e.jsx("p",{className:"text-sm  text-blue-gray-500 mt-2",children:t.challan_type}),e.jsx("p",{className:"text-sm  text-blue-gray-500 mt-2",children:t.payment_mode})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-4"}),e.jsx("div",{className:"flex justify-between mt-4",children:e.jsx("button",{className:"text-xs w-full bg-blue-800 text-white py-1.5 rounded-md",onClick:()=>{n("/fines-app/today-challan-details/".concat(t.id))},children:"View Details"})})]})},t.id))})}function W(){var o,m,d,c,x,p,h,u,j;const[l,n]=y.useState(1),[t,i]=y.useState(10),s=A({enableReinitialize:!0,initialValues:{fromDate:new Date().toISOString().split("T")[0],uptoDate:new Date().toISOString().split("T")[0],type:"mobile",paymentMode:""},onSubmit:async S=>{N()}}),a=M({api:D.api_collection_report,config:{fromDate:s.values.fromDate,uptoDate:s.values.uptoDate,paymentMode:s.values.paymentMode,type:s.values.type,page:l,perPage:t},value:[l,t],options:{enabled:!0}}),N=()=>{a.refetch()},v=()=>{var b,g;return(g=(b=a.data)==null?void 0:b.data)==null?void 0:g.data.reduce((F,C)=>parseFloat(F)+parseFloat(C.amount),0)};return e.jsx(P,{title:"Collection Report",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"",children:e.jsx("h1",{className:"text-base font-semibold text-blue-gray-500",children:"Collection Report"})}),e.jsx(r.Card,{className:"mt-2",children:e.jsx(r.CardBody,{children:e.jsxs(R,{formik:s,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(f,{type:"date",name:"fromDate",label:"From Date",formik:s})}),e.jsx("div",{children:e.jsx(f,{type:"date",name:"uptoDate",label:"Upto Date",formik:s})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(T,{name:"paymentMode",formik:s,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"ONLINE",children:"Online"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-lg text-xs",children:"Search"})})]})})}),e.jsx("div",{className:"border-t border-gray-200 my-4"}),a.isFetching?e.jsx("div",{className:"flex justify-center items-center h-80",children:e.jsx(_,{})}):e.jsx(e.Fragment,{children:((d=(m=(o=a.data)==null?void 0:o.data)==null?void 0:m.data)==null?void 0:d.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{page:l,setPage:n,perPage:t,setPerPage:i,noOfPage:(x=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:x.last_page}),e.jsxs("p",{className:"text-green-500 font-bold",children:["Total: ","â‚¹"," ",((h=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:h.total_amount)||v()]})]}),e.jsx(I,{data:((j=(u=a.data)==null?void 0:u.data)==null?void 0:j.data)||[]})]}):e.jsxs("div",{className:"flex flex-col justify-center items-center h-[300px]",children:[e.jsx(k,{className:"text-2xl text-blue-gray-500"}),e.jsx("div",{className:"mt-2 w-52 text-center",children:e.jsx("p",{className:"text-blue-gray-500 text-xs font-semibold ",children:"No Data Found !"})})]})})]})})}export{W as default};
