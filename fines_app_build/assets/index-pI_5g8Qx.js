import{j as t,u as w,_ as m,a as v,P as L}from"./index-K9wnwIEh.js";import{r as y,d as P}from"./router-WshRxXk2.js";import{T as C,u as R,F as S,P as q,L as A}from"./TextArea-wmoREJF1.js";import{c as T,a as x}from"./index.esm-Wdru5IDi.js";import{u as N}from"./useErrorFocusField-dZsYFtof.js";import{u as U}from"./useCustomQuery-5jXXRIIF.js";import"./reactQuery-2daanlHr.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-YpSsR79r.js";import"./tailwind-Ucrx0-S6.js";import"./reactLazyLoadImageComponent-2lnvQYCj.js";import"./reactIcons-UnuJhE_7.js";import"./headlessui-oHdMYZDI.js";const k=()=>{const[l,p]=y.useState(""),s=()=>{const i=Math.random().toString(36).slice(2,8).toUpperCase();p(i)},u=(i,e)=>i===l?!0:(e({captcha:""},!1),s(),!1),r=document.createElement("canvas");r.style.margin="0",r.style.padding="0",r.width=100,r.height=22;const c=r.getContext("2d");c.font="bold 15px Arial",c.fillStyle="blue",c.fillText(l,21,16);const n=r.toDataURL();return y.useEffect(()=>{s()},[]),{catptchaTextField:i=>t.jsx("div",{children:t.jsx(C,{name:"captcha",placeholder:"Enter captcha",formik:i})}),captcha:l,dataUrl:n,verifyCaptcha:u,generateCaptcha:s}},I=k;function W(){const{captcha:l,catptchaTextField:p,generateCaptcha:s,verifyCaptcha:u,dataUrl:r}=I(),{AutoFocusErrorField:c}=N(),n=w(),{mutateAsync:g,isLoading:i}=U({}),e=R({initialValues:{email:"",password:"",type:"mobile",captcha:""},validationSchema:T({email:x().required("Required").email("Invalid email address"),password:x().required("Required"),captcha:x().required("Required")}),onSubmit:async(o,{resetForm:d})=>{u(o==null?void 0:o.captcha,d)?await b(o):m.error("Invalid Captcha")}}),b=async o=>{var d,h,f;try{const a=await g({api:v.login1,data:o});((d=a==null?void 0:a.data)==null?void 0:d.status)===!0?(n==null||n.login(a),m.success((h=a==null?void 0:a.data)==null?void 0:h.message)):(m.error((f=a==null?void 0:a.data)==null?void 0:f.message),s(),e.resetForm())}catch(a){console.log(a),m.error("Something went wrong"),e.resetForm()}},{isSubmitting:j,submitCount:F,errors:E}=e;return P.useEffect(()=>{c({formik:e})},[E,F,j]),t.jsx(L,{title:"Login",children:t.jsx("div",{children:t.jsxs(S,{formik:e,children:[t.jsx(C,{label:"Email",name:"email",type:"email",inputValidation:["email"],formik:e,placeholder:"Enter your register Email ID"}),t.jsx(q,{label:"Password",name:"password",formik:e}),t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("div",{className:"bg-gray-400 px-4 py-1 rounded-sm",children:t.jsx("img",{src:r,alt:"captcha"})}),t.jsx("button",{type:"button",onClick:s,className:"text-[#5846BE] text-sm",children:"Reload Captcha"})]}),p(e)," ",t.jsx("div",{className:"text-center mt-8",children:t.jsx(A,{type:"submit",loading:i,disabled:i,children:"Login"})})]})})})}export{W as default};
