import{j as e,m as f,_ as y,r as d,B as H}from"./index-CN_yBJeq.js";import{a as z}from"./index-0qDIXVAa.js";import{C as J,a as U,c as V,d as O}from"./card-TqYYswqf.js";import{S as F,a as G,T as K,b as Q,c as P,d as N,e as W,f as I}from"./Spinner-CxNBWiLx.js";import{a as D,o as k,F as R,S as A,B,c as $,d as X,b as j}from"./SelectField-B8hVbjqK.js";import{R as Y}from"./RHFTextField-qw0lwjzl.js";import{g as Z}from"./services-KQnp_8oA.js";import"./input-DQjPs7rI.js";import{D as ee}from"./index-DFOvG1-m.js";import{u as ae,b as E,c as se,a as te}from"./useCustomQuery-evZbl-nJ.js";import{L as re,c as le}from"./index.es-CZnMXyZ7.js";import{L as de}from"./label-Bxenu6LX.js";const ne=$().shape({module_id:X().required("Role name is required"),service_name:j().required("Description is required")});function ie({open:g,setOpen:b,title:m,edit:L,setEdit:x,serviceList:M}){var p,l,h;const S=ae({}),n=D({defaultValues:{module_id:0,service_name:""},resolver:k(ne)}),v=async r=>{var t,o,c,u;try{const s=await S.mutateAsync({api:(t=f)==null?void 0:t.createService,data:r});(o=s==null?void 0:s.data)!=null&&o.success?(y.success((c=s==null?void 0:s.data)==null?void 0:c.message),b(!1),x(!1),M.refetch()):y.error((u=s==null?void 0:s.data)==null?void 0:u.message)}catch(s){y.error(Z(s))}},i=E({api:(p=f)==null?void 0:p.userManagementModuleList,key:"userManagementModuleList",options:{enabled:!0}});return e.jsx(ee,{open:g,setOpen:b,title:m,setEdit:x,edit:L,children:e.jsx(R,{methods:n,onSubmit:n.handleSubmit(v),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(A,{name:"module_id",data:((h=(l=i==null?void 0:i.data)==null?void 0:l.data)==null?void 0:h.map(r=>({value:r==null?void 0:r.id,label:r==null?void 0:r.module_name})))??[]})}),e.jsx("div",{children:e.jsx(Y,{name:"service_name",placeholder:"Enter Service name"})}),e.jsx(F,{}),e.jsx("div",{children:e.jsx(B,{isLoading:n.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const oe=$().shape({ulbId:j(),moduleId:j(),complaintRefNo:j()});function ce(){var o,c,u,s,C,T,_,w;const[g,b]=d.useState(1);se({});const[m,L]=d.useState(10),[x,M]=d.useState(!1);d.useState(""),d.useState("");const[S,n]=d.useState(!1),[v]=d.useState(""),[i,p]=d.useState(!1),l=D({resolver:k(oe),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),h=async a=>{t==null||t.refetch()},r=E({api:(o=f)==null?void 0:o.userManagementModuleList,key:"userManagementModuleList",options:{enabled:!0}}),t=te({api:`${(c=f)==null?void 0:c.serviceList}?module=${(u=l==null?void 0:l.watch())==null?void 0:u.moduleId}`,key:"serviceList",options:{enabled:!0}});return e.jsxs("main",{className:"grid items-start",children:[x&&e.jsx("div",{style:{zIndex:1001},className:"fixed left-0 top-0 z-50 flex h-full w-full items-center justify-center bg-white",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(re,{className:"w-24",animationData:le,loop:!0}),e.jsx("div",{className:"font-semibold",children:"Permission Updated"})]})}),e.jsx(ie,{open:S,setOpen:n,title:i?"Edit Service":"Add Service",id:v,edit:i,setEdit:p,serviceList:t}),e.jsx("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:e.jsxs(J,{children:[e.jsx(R,{methods:l,onSubmit:l.handleSubmit(h),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 pt-4",children:[e.jsxs("div",{children:[e.jsx(de,{htmlFor:"moduleId",children:"Module name"}),e.jsx(A,{className:"cursor-pointer bg-background",name:"moduleId",data:((C=(s=r.data)==null?void 0:s.data)==null?void 0:C.map(a=>({value:a==null?void 0:a.id,label:a==null?void 0:a.module_name})))??[]})]}),e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(B,{variant:"secondary",isLoading:l.formState.isSubmitting,type:"submit",className:"float-right  w-auto px-10",children:"Search"})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(H,{type:"button",className:"flex items-center gap-2",onClick:()=>n(!0),children:"Add New"})})]})}),e.jsx(U,{className:"px-7",children:e.jsx(V,{})}),e.jsx(O,{children:t.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(G,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[e.jsx(Q,{children:e.jsxs(P,{children:[e.jsx(N,{className:"",children:"#"}),e.jsx(N,{className:"",children:"Service"}),e.jsx(N,{className:"",children:"Module"})]})}),e.jsx(W,{children:(w=(_=(T=t==null?void 0:t.data)==null?void 0:T.data)==null?void 0:_.data)==null?void 0:w.map((a,q)=>e.jsxs(P,{children:[e.jsx(I,{children:g*m-m+q+1}),e.jsx(I,{children:a==null?void 0:a.service_name}),e.jsx(I,{children:a==null?void 0:a.module_name})]},a==null?void 0:a.id))})]}),e.jsx(F,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end"})]})})]})})]})}function Ne(){return e.jsx(z,{title:"JUIDCO Service Control",subTitle:"Control all services here",children:e.jsx("div",{children:e.jsx(ce,{})})})}export{Ne as default};
