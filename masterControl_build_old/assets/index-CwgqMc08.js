import{r as t,j as e,m as A,_ as q,B}from"./index-CN_yBJeq.js";import{a as ye}from"./index-0qDIXVAa.js";import{C as Z,d as ee,b as me,a as Se,c as Ie}from"./card-TqYYswqf.js";import{S as W,a as se,T as ae,b as te,c as U,d as V,e as le,f as F}from"./Spinner-CxNBWiLx.js";import{u as K,b as O,a as Pe}from"./useCustomQuery-evZbl-nJ.js";import{a as G,o as J,F as Y,S as xe,B as ne,c as X,b as E}from"./SelectField-B8hVbjqK.js";import"./input-DQjPs7rI.js";import{L as Me}from"./label-Bxenu6LX.js";import{F as ce,P as de,a as ie,D as ge,b as fe,c as Ne,X as be}from"./dialog-D2M_B8AV.js";import{R as H}from"./RHFTextField-qw0lwjzl.js";import{g as Q}from"./services-KQnp_8oA.js";import{D as re}from"./index-DFOvG1-m.js";import{T as we,a as _e,b as Ce,c as Le,d as Ee,e as Te,f as oe,g as ue}from"./tabs-KPjgUyc9.js";import"./createLucideIcon-GsbXppMf.js";const pe=X().shape({menuName:E().required("menu name is required"),serial:E(),route:E(),parentId:E()});function ke({open:s,setOpen:_,title:k,edit:d,setEdit:r,menuMasterList:I,moduleList:g,id:u,paginatedMenuList:b,menuId:v,editData:n}){var m,T,L,S,P,$;const C=K({}),c=G({defaultValues:{menuName:"",serial:"",route:""},resolver:J(pe)}),{reset:o}=c;t.useEffect(()=>{s&&o(d&&u?n?{menuName:n.menu_string||"",serial:n.serial||"",route:n.route||"",parentId:n.parent_id||""}:{menuName:"",serial:"",route:"",parentId:""}:{menuName:"",serial:"",route:"",parentId:""})},[s,d,u,o,n]);const j=async i=>{var R,a,M,f,x;try{const p=d&&u?{...i,moduleId:u,id:v}:{...i,moduleId:u},N=d?(R=A)==null?void 0:R.editMenuDetailsByModule:(a=A)==null?void 0:a.addMenuByModule,l=await C.mutateAsync({api:N,data:p});(M=l==null?void 0:l.data)!=null&&M.status?(q.success((f=l==null?void 0:l.data)==null?void 0:f.message),_(!1),r(!1),I.refetch()):q.error((x=l==null?void 0:l.data)==null?void 0:x.message)}catch(p){q.error(Q(p))}};console.log("paginatedMenuList",b),console.log("paginatedMenuList",u),console.log("paginatedMenuList",v);const h=O({api:(m=A)==null?void 0:m.parentMenuList,key:"parentMenuListByModule",config:{moduleId:String(u)},options:{enabled:!0}}),y=O({api:(T=A)==null?void 0:T.workFlowByModule,key:"getWorkFlowByModule",config:{moduleId:String(u)},options:{enabled:!0}});return console.log(n),e.jsx(re,{open:s,setOpen:_,title:k,setEdit:r,edit:d,children:e.jsx(Y,{methods:c,onSubmit:c.handleSubmit(j),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(xe,{label:"Parent Menu Name",name:"parentId",data:((S=(L=h==null?void 0:h.data)==null?void 0:L.data)==null?void 0:S.map(i=>({label:String(i==null?void 0:i.menu_string),value:String(i==null?void 0:i.id)})))||[]})}),e.jsx("div",{children:e.jsx(H,{label:"Menu Name",name:"menuName",placeholder:"Enter menu name"})}),e.jsx("div",{children:e.jsx(H,{label:"Menu Route",name:"route",placeholder:"Enter menu url "})}),e.jsx("div",{children:e.jsx(H,{label:"Serial No.",name:"serial",placeholder:"Enter Serial No."})}),e.jsx("div",{children:e.jsx(xe,{label:e.jsxs(e.Fragment,{children:["Workflow ",e.jsx("span",{className:"text-sm",children:"(select module to get workflow list)"})]}),name:"workflowId",data:(($=(P=y==null?void 0:y.data)==null?void 0:P.data)==null?void 0:$.map(i=>({label:String(i==null?void 0:i.workflow_name),value:String(i==null?void 0:i.id)})))||[]})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(ne,{isLoading:c.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:d?"Update":"Submit"})})]})})})}function Ae({id:s,mid:_}){var L,S,P,$,i,R;const[k,d]=t.useState(1),[r,I]=t.useState(10),[g,u]=t.useState(!1),[b,v]=t.useState(!1),[n,C]=t.useState(null),c=O({api:(L=A)==null?void 0:L.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),o=O({api:(S=A)==null?void 0:S.getMenuDetailsByModule,key:"getMenuDetailsForEdit",config:{menuId:String(n)},value:[n],options:{enabled:!!n}}),j=(($=(P=c==null?void 0:c.data)==null?void 0:P.data)==null?void 0:$.filter(a=>(a==null?void 0:a.module_id)===s))||[],h=j.slice((k-1)*r,k*r),y=a=>d(a),m=a=>{I(a),d(1)},T=a=>{C(a),v(!0),u(!0)};return console.log(_),console.log((i=o==null?void 0:o.data)==null?void 0:i.data),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(B,{type:"button",className:"flex items-center gap-2",onClick:()=>{C(null),v(!1),u(!0)},children:"Add Menu List"})}),e.jsx(ke,{open:g,setOpen:u,title:b?"Edit Menu":"Add Menu",id:_,edit:b,setEdit:v,paginatedMenuList:h,refetch:c==null?void 0:c.refetch,menuMasterList:c,menuId:n,editData:(R=o==null?void 0:o.data)==null?void 0:R.data}),e.jsx(Z,{children:e.jsx(ee,{children:c.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(se,{})}):c.isError?e.jsx("div",{className:"text-center text-red-500",children:"Failed to load menu list. Please try again."}):e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(V,{children:"#"}),e.jsx(V,{children:"Parent Menu"}),e.jsx(V,{children:"Menu"}),e.jsx(V,{children:"Path"}),e.jsx(V,{children:"Serial"}),e.jsx(V,{children:"Actions"})]})}),e.jsx(le,{children:h.map((a,M)=>e.jsxs(U,{children:[e.jsx(F,{children:k*r-r+M+1}),e.jsx(F,{children:a.parentName||"#"}),e.jsx(F,{children:a.menu_string}),e.jsx(F,{children:a.route}),e.jsx(F,{children:a.serial}),e.jsx(F,{children:e.jsxs(B,{variant:"secondary",onClick:()=>T(a.id),children:[e.jsx(ce,{})," Edit"]})})]},a.id))})]}),e.jsx(W,{className:"my-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:k,totalItems:j.length,itemsPerPage:r,onPageChange:y,onItemsPerPageChange:m})})]})})})]})})}const Re=X().shape({serviceName:E().required("menu name is required"),path:E().required("path is required")});function Ve({open:s,setOpen:_,title:k,edit:d,setEdit:r,serviceList:I,id:g,paginatedMenuList:u,moduleId:b}){const v=K({}),n=G({defaultValues:{serviceName:""},resolver:J(Re)}),{reset:C}=n;t.useEffect(()=>{var o,j;if(s)if(d&&g){const h=(j=(o=I==null?void 0:I.data)==null?void 0:o.data)==null?void 0:j.find(y=>y.id==g);h&&C({serviceName:h.service_name||"",path:h.path||""})}else C({serviceName:"",path:""})},[s,d,g,C]);const c=async o=>{var j,h,y,m,T;try{const L=d?(j=A)==null?void 0:j.updateServiceByModule:(h=A)==null?void 0:h.addServiceByModule,S=d?{...o,id:g}:{...o,moduleId:b},P=await v.mutateAsync({api:L,data:S});(y=P==null?void 0:P.data)!=null&&y.status?(q.success((m=P==null?void 0:P.data)==null?void 0:m.message),_(!1),r(!1),I.refetch()):q.error((T=P==null?void 0:P.data)==null?void 0:T.message)}catch(L){q.error(Q(L))}};return console.log("paginatedMenuList",g),console.log(b),e.jsx(re,{open:s,setOpen:_,title:k,setEdit:r,edit:d,children:e.jsx(Y,{methods:n,onSubmit:n.handleSubmit(c),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(H,{label:"Service Name",name:"serviceName",placeholder:"Enter menu name"})}),e.jsx("div",{children:e.jsx(H,{label:"service Path",name:"path",placeholder:"Enter path"})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(ne,{isLoading:n.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Fe=X().shape({ulbId:E(),moduleId:E(),complaintRefNo:E()});function qe(s){var a,M,f;const[_,k]=t.useState(1),[d,r]=t.useState(10),[I,g]=t.useState(!1),[u,b]=t.useState(""),[v,n]=t.useState(!1),[C,c]=t.useState(!1),[o,j]=t.useState(null),{moduleId:h}=s,[y,m]=t.useState(1),[T,L]=t.useState(10),S=100,P=x=>{m(x)},$=x=>{L(x),m(1)};console.log(s==null?void 0:s.id,"props id"),console.log(h,"props id"),G({resolver:J(Fe),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}});const i=O({api:(a=A)==null?void 0:a.serviceList,key:"serviceMasterList",config:{moduleId:s==null?void 0:s.mId},options:{enabled:!0}});console.log("the servicemId",s==null?void 0:s.mId);const R=x=>{j(x),c(!0)};return e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(B,{type:"button",className:"flex items-center gap-2",onClick:()=>{b(""),n(!1),g(!0)},children:"Add Service List"})})}),e.jsx(Ve,{open:I,setOpen:g,title:v?"Edit Service":"Add Service",id:u,edit:v,setEdit:n,moduleId:s==null?void 0:s.id,serviceList:i}),e.jsx(Z,{children:e.jsx(ee,{children:i.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(se,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Service Name"}),e.jsx(V,{className:"",children:"Service Path"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(le,{children:(f=(M=i==null?void 0:i.data)==null?void 0:M.data)==null?void 0:f.map((x,p)=>e.jsxs(U,{children:[e.jsx(F,{children:_*d-d+p+1}),e.jsx(F,{children:x==null?void 0:x.service_name}),e.jsx(F,{children:x==null?void 0:x.path}),e.jsxs(F,{children:[e.jsxs(B,{variant:"secondary",onClick:()=>{b(x==null?void 0:x.id),n(!0),g(!0)},children:[e.jsx(ce,{})," Edit"]}),e.jsxs(B,{onClick:()=>R(x),className:"ml-2",variant:"secondary",children:[e.jsx(ie,{})," View"]})]})]},x==null?void 0:x.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:y,totalItems:S,itemsPerPage:T,onPageChange:P,onItemsPerPageChange:$})})]})})})]})})}const $e=X().shape({module_name:E().required("module name is required"),module_id:E().required("Module ID is required"),module_url:E().required("Module URL is required")});function De({open:s,setOpen:_,title:k,edit:d,setEdit:r,serviceList:I,moduleList:g,id:u}){const b=K({}),v=G({defaultValues:{module_name:"",module_id:"",module_url:""},resolver:J($e)}),{reset:n}=v;t.useEffect(()=>{var c,o;if(s)if(d&&u){const j=(o=(c=g==null?void 0:g.data)==null?void 0:c.data)==null?void 0:o.find(h=>h.id==u);j&&n({module_name:j.module_name||"",module_id:j.id||"",module_url:j.url||""})}else n({module_name:"",module_id:"",module_url:""})},[s,d,u,g,n]);const C=async c=>{var o,j,h;try{const y=d?"EditModuleList":"AddmoduleList",m=await b.mutateAsync({api:y,data:c});(o=m==null?void 0:m.data)!=null&&o.success?(q.success((j=m==null?void 0:m.data)==null?void 0:j.message),_(!1),r(!1),I.refetch()):q.error((h=m==null?void 0:m.data)==null?void 0:h.message)}catch(y){q.error(Q(y))}};return e.jsx(re,{open:s,setOpen:_,title:k,setEdit:r,edit:d,children:e.jsx(Y,{methods:v,onSubmit:v.handleSubmit(C),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(H,{label:"Module Name",name:"module_name",placeholder:"Enter module name"})}),e.jsx("div",{children:e.jsx(H,{label:"Module ID",name:"module_id",placeholder:"Enter module id "})}),e.jsx("div",{children:e.jsx(H,{label:"Module URL",name:"module_url",placeholder:"Enter module url "})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(ne,{isLoading:v.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Be=X().shape({menuRoleName:E().required("menu name is required")});function Oe({open:s,setOpen:_,title:k,edit:d,setEdit:r,id:I,menuRoleList:g,moduleId:u}){const b=K({}),v=G({defaultValues:{menuRoleName:""},resolver:J(Be)}),{reset:n}=v;console.log(u,"id"),t.useEffect(()=>{var c,o;if(s)if(d&&I){const j=(o=(c=g==null?void 0:g.data)==null?void 0:c.data)==null?void 0:o.find(h=>h.id===I);j&&n({menuRoleName:j.menu_role_name||""})}else n({menuRoleName:""})},[s,d,I,g,n]);const C=async c=>{var o,j,h,y,m;try{const T=d?(o=A)==null?void 0:o.editMenuList:(j=A)==null?void 0:j.addMenuList,L=d&&I?{...c,id:I}:{...c,moduleId:u},S=await b.mutateAsync({api:T,data:L});(h=S==null?void 0:S.data)!=null&&h.status?(q.success((y=S==null?void 0:S.data)==null?void 0:y.message),_(!1),r(!1),g.refetch()):q.error((m=S==null?void 0:S.data)==null?void 0:m.message)}catch(T){q.error(Q(T))}};return e.jsx(re,{open:s,setOpen:_,title:k,setEdit:r,edit:d,children:e.jsx(Y,{methods:v,onSubmit:v.handleSubmit(C),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(H,{label:"Service Name",name:"menuRoleName",placeholder:"Enter menu name"})}),e.jsx(W,{}),e.jsx("div",{children:e.jsx(ne,{isLoading:v.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Ue=X().shape({service_name:E().required("menu name is required")});function He({open:s,setOpen:_,title:k,edit:d,setEdit:r,serviceList:I,moduleList:g,id:u,menuRoleList:b,moduleId:v,menuRoleId:n,moduleName:C}){var L,S,P,$,i,R;const c=K({}),o=K({}),j=G({defaultValues:{service_name:""},resolver:J(Ue)}),{reset:h}=j;console.log(v,"id"),t.useEffect(()=>{var a,M;if(s)if(d&&u){const f=(M=(a=b==null?void 0:b.data)==null?void 0:a.data)==null?void 0:M.find(x=>x.id===u);f&&h({service_name:f.menu_role_name||""})}else h({service_name:""})},[s,d,u,b,h]);const y=async a=>{var M,f,x;try{const p=d?"EditModuleList":"AddmoduleList",N=d&&u?{...a,moduleId:u}:{...a,moduleId:v},l=await c.mutateAsync({api:p,data:N});(M=l==null?void 0:l.data)!=null&&M.success?(q.success((f=l==null?void 0:l.data)==null?void 0:f.message),_(!1),r(!1),I.refetch()):q.error((x=l==null?void 0:l.data)==null?void 0:x.message)}catch(p){q.error(Q(p))}},m=O({api:(L=A)==null?void 0:L.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:n,moduleId:v},options:{enabled:!0}}),T=async(a,M,f)=>{var x,p,N,l;console.log(f);try{const z={isSuspended:f,menuId:a,menuRoleId:n},D=await o.mutateAsync({api:(x=A)==null?void 0:x.addRemoveMenuPermission,data:z});(p=D==null?void 0:D.data)!=null&&p.status?(q.success(((N=D==null?void 0:D.data)==null?void 0:N.message)||"Permission updated successfully"),m.refetch()):q.error(((l=D==null?void 0:D.data)==null?void 0:l.message)||"Failed to update permission")}catch(z){q.error(Q(z))}};return console.log(C),console.log((P=(S=m==null?void 0:m.data)==null?void 0:S.data)==null?void 0:P[C],"permitedMenuList"),e.jsx(re,{open:s,setOpen:_,title:k,setEdit:r,edit:d,children:e.jsx(Y,{methods:j,onSubmit:j.handleSubmit(y),children:e.jsx("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Sl."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Menu Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Permission"})]})}),e.jsx("tbody",{children:((R=(i=($=m==null?void 0:m.data)==null?void 0:$.data)==null?void 0:i[C])==null?void 0:R.map((a,M)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:M+1}),e.jsx("td",{className:`border border-gray-300 px-4 py-2 ${a.is_suspended?"text-black":"text-green-600"}`,children:a.menu_string}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:a.is_suspended?e.jsx("button",{className:"text-green-600 bg-green-200 hover:bg-green-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>T(a.id,a.menu_role_id,!a.is_suspended),children:"Add"}):e.jsx("button",{className:"text-red-600  bg-red-200 hover:bg-red-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>T(a.id,a.menu_role_id,!a.is_suspended),children:"Remove"})})]},a.id)))||e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-4",children:"No data available"})})})]})})})})})}X().shape({ulbId:E(),moduleId:E(),complaintRefNo:E()});function We(s){var a,M,f,x,p,N;const[_,k]=t.useState(1),[d,r]=t.useState(10),[I,g]=t.useState(!1),[u,b]=t.useState(""),[v,n]=t.useState(!1),[C,c]=t.useState(!1),[o,j]=t.useState(null),[h,y]=t.useState(1),[m,T]=t.useState(10),L=100,S=l=>{y(l)},P=l=>{T(l),y(1)},$=O({api:(a=A)==null?void 0:a.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),i=O({api:(M=A)==null?void 0:M.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:s==null?void 0:s.id,moduleId:s==null?void 0:s.moduleId},options:{enabled:!0}}),R=l=>{j(l),c(!0)};return console.log(s==null?void 0:s.moduleName),e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(B,{type:"button",className:"flex items-center gap-2",onClick:()=>{b(""),n(!1),g(!0)},children:"Add More Menu Permission"})})}),e.jsx(He,{open:I,setOpen:g,title:v?"Edit Menu":"Add Menu",id:u,edit:v,setEdit:n,moduleId:s==null?void 0:s.moduleId,menuRoleId:s==null?void 0:s.id,moduleName:s==null?void 0:s.moduleName}),e.jsx(Z,{className:"",children:e.jsx(ee,{children:$.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(se,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Menu"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(le,{children:(N=(p=(x=(f=i==null?void 0:i.data)==null?void 0:f.data)==null?void 0:x[s==null?void 0:s.moduleName])==null?void 0:p.filter(l=>(l==null?void 0:l.menu_role_id)==(s==null?void 0:s.id)))==null?void 0:N.map((l,z)=>e.jsxs(U,{children:[e.jsx(F,{children:_*d-d+z+1}),e.jsx(F,{children:l==null?void 0:l.menu_string}),e.jsxs(F,{children:[e.jsxs(B,{variant:"secondary",onClick:()=>{b(l==null?void 0:l.id),n(!0),g(!0)},children:[e.jsx(ce,{})," Edit"]}),e.jsxs(B,{onClick:()=>R(l),className:"ml-2",variant:"secondary",children:[e.jsx(ie,{})," View"]})]})]},l==null?void 0:l.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:h,totalItems:L,itemsPerPage:m,onPageChange:S,onItemsPerPageChange:P})})]})})})]})})}const Xe=X().shape({ulbId:E(),moduleId:E(),complaintRefNo:E()});function ze(s){var f,x,p;const[_,k]=t.useState(1),[d,r]=t.useState(10),[I,g]=t.useState(!1),[u,b]=t.useState(""),[v,n]=t.useState(!1);t.useState(!1),t.useState(null);const[C,c]=t.useState(!1),[o,j]=t.useState(!1),[h,y]=t.useState(1),[m,T]=t.useState(10),L=100,{moduleId:S}=s,P=N=>{y(N)},$=N=>{T(N),y(1)};console.log(s==null?void 0:s.moduleId,"props id"),console.log(S,"props id"),G({resolver:J(Xe),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}});const i=O({api:(f=A)==null?void 0:f.serviceList,key:"serviceMasterList",config:{moduleId:s==null?void 0:s.mId},options:{enabled:!0}}),R=O({api:(x=A)==null?void 0:x.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}});console.log(u);const M=(((p=R==null?void 0:R.data)==null?void 0:p.data.filter(N=>(N==null?void 0:N.module_id)==(s==null?void 0:s.moduleId)))||[]).slice((h-1)*m,h*m);return console.log("the service maste rlist..",s==null?void 0:s.moduleName),e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2 ",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end ",children:e.jsx(B,{type:"button",className:"flex items-center gap-2",onClick:()=>{b(""),n(!1),g(!0)},children:"Add Role List"})}),e.jsx(Oe,{open:I,setOpen:g,title:v?"Edit Role":"Add Role",id:u,edit:v,setEdit:n,menuRoleList:R,moduleId:s==null?void 0:s.moduleId})]}),e.jsxs(ge,{open:o,children:[e.jsx(fe,{}),e.jsxs(Ne,{className:"sm:max-w-[1200px] h-[700px] max-h-[700px] overflow-scroll",children:[e.jsx(me,{className:" text-xl text-gray-500 font-bold flex justify-between",children:e.jsxs("div",{children:["Module : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:s==null?void 0:s.moduleName})]})}),e.jsxs(me,{className:" text-xl text-gray-500 font-bold flex justify-between",children:[e.jsxs("div",{children:["Role : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:C==null?void 0:C.menu_role_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(be,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>j(!1)})})})]}),e.jsxs(we,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"py-4 flex justify-between",children:e.jsx(_e,{className:"grid w-auto grid-cols-2",children:e.jsx(Ce,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white rounded-lg px-2",value:"MENULIST",children:"Permitted Menu List"})})}),e.jsx(Le,{value:"MENULIST",children:e.jsx(We,{moduleId:s==null?void 0:s.moduleId,id:u,moduleName:s==null?void 0:s.moduleName})})]})]})]}),e.jsx(Z,{children:e.jsx(ee,{children:i.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(se,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Role Name"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(le,{children:M.map((N,l)=>e.jsxs(U,{children:[e.jsx(F,{children:_*d-d+l+1}),e.jsx(F,{children:N==null?void 0:N.menu_role_name}),e.jsxs(F,{children:[e.jsxs(B,{variant:"secondary",onClick:()=>{b(N==null?void 0:N.id),n(!0),g(!0)},children:[e.jsx(ce,{})," Edit"]}),e.jsxs(B,{onClick:()=>{c(N),j(!0),b(N==null?void 0:N.id)},className:"ml-2",variant:"secondary",children:[e.jsx(ie,{})," View"]})]})]},N==null?void 0:N.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:h,totalItems:L,itemsPerPage:m,onPageChange:P,onItemsPerPageChange:$})})]})})})]})})}const Ge=X().shape({ulbId:E(),moduleId:E(),complaintRefNo:E()});function Je(){var x,p,N,l,z,D,he,je;const[s,_]=t.useState(1),[k,d]=t.useState(10),[r,I]=t.useState(!1),[g,u]=t.useState(!1),[b,v]=t.useState(""),[n,C]=t.useState(""),[c,o]=t.useState(!1),[j,h]=t.useState(1),[y,m]=t.useState(10),[T,L]=t.useState(!1),S=100,P=w=>{h(w)},$=w=>{m(w),h(1)},i=G({resolver:J(Ge),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),R=async w=>{f==null||f.refetch()},a=O({api:(x=A)==null?void 0:x.userManagementModuleList,key:"moduleMasterList",options:{enabled:!0}}),M=O({api:(p=A)==null?void 0:p.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}}),f=Pe({api:`${(N=A)==null?void 0:N.serviceList}?module=${(l=i==null?void 0:i.watch())==null?void 0:l.moduleId}`,key:"serviceList",options:{enabled:!0}});return console.log(r==null?void 0:r.id,"id"),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsxs(ge,{open:T,children:[e.jsx(fe,{}),e.jsxs(Ne,{className:"sm:max-w-[1200px] h-auto max-h-[700px]  overflow-scroll",children:[e.jsxs(me,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[e.jsxs("div",{children:["Module : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:r==null?void 0:r.module_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(be,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>L(!1)})})})]}),e.jsxs(Ee,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"py-4 flex justify-between",children:e.jsxs(Te,{className:"grid w-auto grid-cols-3",children:[e.jsx(oe,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"MENULIST",children:"Menu List Master"}),e.jsx(oe,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"SERVICE_LIST",children:"Service List Master"}),e.jsx(oe,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"ROLE_LIST",children:"Role List Master"})]})}),e.jsx(ue,{value:"MENULIST",children:e.jsx(Ae,{id:b,mid:r==null?void 0:r.id,setEdit:o,setOpen:u,edit:c,refetch:f==null?void 0:f.refetch,serviceList:f,moduleName:n,moduleId:r==null?void 0:r.id})}),e.jsx(ue,{value:"SERVICE_LIST",children:e.jsx(qe,{id:b,setEdit:o,setOpen:u,edit:c,refetch:f==null?void 0:f.refetch,serviceList:f,moduleId:r==null?void 0:r.id,mId:b})}),e.jsx(ue,{value:"ROLE_LIST",children:e.jsx(ze,{id:b,setEdit:o,setOpen:u,edit:c,refetch:M==null?void 0:M.refetch,serviceList:M,moduleId:r==null?void 0:r.id,moduleName:n,mId:b})})]})]})]}),e.jsxs(Z,{children:[e.jsx(Y,{methods:i,onSubmit:i.handleSubmit(R),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 pt-4",children:[e.jsxs("div",{children:[e.jsx(Me,{htmlFor:"moduleId",children:"Module name"}),e.jsx(xe,{className:"cursor-pointer bg-background",name:"moduleId",data:((D=(z=a.data)==null?void 0:z.data)==null?void 0:D.map(w=>({value:w==null?void 0:w.id,label:w==null?void 0:w.module_name})))??[]})]}),e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(ne,{variant:"secondary",isLoading:i.formState.isSubmitting,type:"submit",className:"float-right w-auto px-10",children:"Search"})}),e.jsx("div",{className:"mt-6 flex justify-end "}),e.jsx(De,{open:g,setOpen:u,title:c?"Edit Module":"Add Module",id:b,edit:c,setEdit:o,serviceList:f,moduleList:a})]})}),e.jsx(Se,{className:"px-7",children:e.jsx(Ie,{})}),e.jsx(ee,{children:f.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(se,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Module"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(le,{children:(je=(he=a==null?void 0:a.data)==null?void 0:he.data)==null?void 0:je.map((w,ve)=>e.jsxs(U,{children:[e.jsx(F,{children:s*k-k+ve+1}),e.jsx(F,{children:w==null?void 0:w.module_name}),e.jsx(F,{children:e.jsxs(B,{variant:"secondary",onClick:()=>{v(w==null?void 0:w.id),C(w==null?void 0:w.module_name),I(w),L(!0)},className:"ml-2",children:[e.jsx(ie,{})," View"]})})]},w==null?void 0:w.id))})]}),e.jsx(W,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:j,totalItems:S,itemsPerPage:y,onPageChange:P,onItemsPerPageChange:$})})]})})]})]})})}function os(){return e.jsx(ye,{title:"Module List (master)",subTitle:"Control all Module here",children:e.jsx("div",{children:e.jsx(Je,{})})})}export{os as default};
