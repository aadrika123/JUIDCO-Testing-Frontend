import{r as t,j as e,m as k,_ as F,B as O}from"./index-Dkt__Xic.js";import{a as we}from"./index-CS2NUbM0.js";import{C as te,d as le,b as je,a as Ce,c as _e}from"./card-DQa5Tc8i.js";import{S as X,a as ne,T as de,b as ce,c as z,d as V,e as re,f as D}from"./Spinner-Dl07qqYH.js";import{u as Q,b as B}from"./useCustomQuery-NR9yHuLV.js";import{a as G,o as J,F as ee,S as fe,B as ie,c as Y,b as A}from"./SelectField-DQlMFVw9.js";import"./input-pRXD90yN.js";import{L as Le}from"./label-DJAQ3ybb.js";import{F as me,a as Ee,P as oe,b as xe,D as ve,c as Se,d as Ie,X as Pe}from"./dialog-CiJumVAd.js";import{R as W}from"./RHFTextField-WUzuukEo.js";import{g as Z}from"./services-KQnp_8oA.js";import{D as ue}from"./index-DA52_pEo.js";import{T as ke,a as Te,b as pe,c as Ae,d as Re,e as Fe,f as he,g as ge}from"./tabs-dGW4k1qC.js";import"./createLucideIcon-vLxG6OSU.js";const Ve=Y().shape({menuName:A().required("menu name is required"),serial:A(),route:A(),parentId:A()});function De({open:s,setOpen:T,title:R,edit:d,setEdit:c,menuMasterList:w,moduleList:b,id:i,paginatedMenuList:g,menuId:y,editData:r}){var o,p,L,M,_,$;const C=Q({}),m=G({defaultValues:{menuName:"",serial:"",route:""},resolver:J(Ve)}),{reset:x}=m;t.useEffect(()=>{s&&x(d&&i?r?{menuName:r.menu_string||"",serial:r.serial||"",route:r.route||"",parentId:r.parent_id||""}:{menuName:"",serial:"",route:"",parentId:""}:{menuName:"",serial:"",route:"",parentId:""})},[s,d,i,x,r]);const h=async j=>{var q,f,E,N,n;try{const S=d&&i?{...j,moduleId:i,id:y}:{...j,moduleId:i},u=d?(q=k)==null?void 0:q.editMenuDetailsByModule:(f=k)==null?void 0:f.addMenuByModule,a=await C.mutateAsync({api:u,data:S});(E=a==null?void 0:a.data)!=null&&E.status?(F.success((N=a==null?void 0:a.data)==null?void 0:N.message),T(!1),c(!1),w.refetch(),l.refetch()):F.error((n=a==null?void 0:a.data)==null?void 0:n.message)}catch(S){F.error(Z(S))}};console.log("paginatedMenuList",g),console.log("paginatedMenuList",i),console.log("paginatedMenuList",y);const l=B({api:(o=k)==null?void 0:o.parentMenuList,key:"parentMenuListByModule",config:{moduleId:String(i)},options:{enabled:!0}}),I=B({api:(p=k)==null?void 0:p.workFlowByModule,key:"getWorkFlowByModule",config:{moduleId:String(i)},options:{enabled:!0}});return console.log(r),e.jsx(ue,{open:s,setOpen:T,title:R,setEdit:c,edit:d,children:e.jsx(ee,{methods:m,onSubmit:m.handleSubmit(h),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(fe,{label:"Parent Menu Name",name:"parentId",data:((M=(L=l==null?void 0:l.data)==null?void 0:L.data)==null?void 0:M.map(j=>({label:String(j==null?void 0:j.menu_string),value:String(j==null?void 0:j.id)})))||[]})}),e.jsx("div",{children:e.jsx(W,{label:"Menu Name",name:"menuName",placeholder:"Enter menu name"})}),e.jsx("div",{children:e.jsx(W,{label:"Menu Route",name:"route",placeholder:"Enter menu url "})}),e.jsx("div",{children:e.jsx(W,{label:"Serial No.",name:"serial",placeholder:"Enter Serial No."})}),e.jsx("div",{children:e.jsx(fe,{label:e.jsxs(e.Fragment,{children:["Workflow ",e.jsx("span",{className:"text-sm",children:"(select module to get workflow list)"})]}),name:"workflowId",data:(($=(_=I==null?void 0:I.data)==null?void 0:_.data)==null?void 0:$.map(j=>({label:String(j==null?void 0:j.workflow_name),value:String(j==null?void 0:j.id)})))||[]})}),e.jsx(X,{}),e.jsx("div",{children:e.jsx(ie,{isLoading:m.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:d?"Update":"Submit"})})]})})})}function qe({id:s,mid:T}){var f,E,N,n,S,u,a,H;const[R,d]=t.useState(1),[c,w]=t.useState(10),[b,i]=t.useState(!1),[g,y]=t.useState(!1),[r,C]=t.useState(null),[m,x]=t.useState(null),h=Q({}),l=B({api:(f=k)==null?void 0:f.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),I=B({api:(E=k)==null?void 0:E.getMenuDetailsByModule,key:"getMenuDetailsForEdit",config:{menuId:String(m)},value:[m],options:{enabled:!!m}});B({api:(N=k)==null?void 0:N.serviceList,key:"serviceMasterList",config:{moduleId:s},options:{enabled:!!s}});const o=B({api:(n=k)==null?void 0:n.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}}),p=((u=(S=l==null?void 0:l.data)==null?void 0:S.data)==null?void 0:u.filter(v=>(v==null?void 0:v.module_id)==s))??[],L=p.slice((R-1)*c,R*c),M=v=>d(v),_=v=>{w(v),d(1)},$=v=>{x(v),y(!0),i(!0)},j=B({api:(a=k)==null?void 0:a.parentMenuList,key:"parentMenuListByModule",config:{moduleId:String(s)},options:{enabled:!0}}),q=async()=>{var v,K,se,ae;try{const U=await h.mutateAsync({api:(v=k)==null?void 0:v.deleteMenu,data:{id:r}});(K=U==null?void 0:U.data)!=null&&K.status?(F.success((se=U==null?void 0:U.data)==null?void 0:se.message),i(!1),y(!1),C(null),l.refetch(),o.refetch(),j.refetch()):(F.error((ae=U==null?void 0:U.data)==null?void 0:ae.message),C(null))}catch(U){console.error("Error deleting menu:",U),alert("An error occurred while deleting the menu. Please try again.")}};return e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{x(null),y(!1),i(!0)},children:"Add Menu List"})}),e.jsx(De,{open:b,setOpen:i,title:g?"Edit Menu":"Add Menu",id:T,edit:g,setEdit:y,paginatedMenuList:L,refetch:l==null?void 0:l.refetch,menuMasterList:l,menuId:m,editData:(H=I==null?void 0:I.data)==null?void 0:H.data}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 h-screen ",children:e.jsxs("div",{className:"bg-white py-6 px-8 w-[30%] rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-center items-center text-lg font-medium mb-4",children:"Are you sure you want to delete?"}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-2",children:[e.jsx(O,{variant:"destructive",size:"sm",onClick:()=>q(),children:"Yes"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>C(null),children:"No"})]})]})}),e.jsx(te,{children:e.jsx(le,{children:l.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ne,{})}):l.isError?e.jsx("div",{className:"text-center text-red-500",children:"Failed to load menu list. Please try again."}):e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(z,{children:[e.jsx(V,{children:"#"}),e.jsx(V,{children:"Parent Menu"}),e.jsx(V,{children:"Menu"}),e.jsx(V,{children:"Path"}),e.jsx(V,{children:"Serial"}),e.jsx(V,{children:"Actions"})]})}),e.jsx(re,{children:L==null?void 0:L.map((v,K)=>e.jsxs(z,{children:[e.jsx(D,{children:R*c-c+K+1}),e.jsx(D,{children:v.parentName||"#"}),e.jsx(D,{children:v.menu_string}),e.jsx(D,{children:v.route}),e.jsx(D,{children:v.serial}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>$(v.id),children:[e.jsx(me,{})," Edit"]}),e.jsx(O,{className:"ml-2",variant:"secondary",onClick:()=>C(v.id),children:e.jsx(Ee,{})})]})]},v.id))})]}),e.jsx(X,{className:"my-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(oe,{currentPage:R,totalItems:p.length,itemsPerPage:c,onPageChange:M,onItemsPerPageChange:_})})]})})})]})})}const Be=Y().shape({serviceName:A().required("menu name is required"),path:A().required("path is required")});function $e({open:s,setOpen:T,title:R,edit:d,setEdit:c,serviceList:w,id:b,paginatedMenuList:i,moduleId:g}){const y=Q({}),r=G({defaultValues:{serviceName:""},resolver:J(Be)}),{reset:C}=r;t.useEffect(()=>{var x,h;if(s)if(d&&b){const l=(h=(x=w==null?void 0:w.data)==null?void 0:x.data)==null?void 0:h.find(I=>I.id==b);l&&C({serviceName:l.service_name||"",path:l.path||""})}else C({serviceName:"",path:""})},[s,d,b,C]);const m=async x=>{var h,l,I,o,p;try{const L=d?(h=k)==null?void 0:h.updateServiceByModule:(l=k)==null?void 0:l.addServiceByModule,M=d?{...x,id:b}:{...x,moduleId:g},_=await y.mutateAsync({api:L,data:M});(I=_==null?void 0:_.data)!=null&&I.status?(F.success((o=_==null?void 0:_.data)==null?void 0:o.message),T(!1),c(!1),w.refetch()):F.error((p=_==null?void 0:_.data)==null?void 0:p.message)}catch(L){F.error(Z(L))}};return console.log("paginatedMenuList",b),console.log(g),e.jsx(ue,{open:s,setOpen:T,title:R,setEdit:c,edit:d,children:e.jsx(ee,{methods:r,onSubmit:r.handleSubmit(m),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(W,{label:"Service Name",name:"serviceName",placeholder:"Enter menu name"})}),e.jsx("div",{children:e.jsx(W,{label:"service Path",name:"path",placeholder:"Enter path"})}),e.jsx(X,{}),e.jsx("div",{children:e.jsx(ie,{isLoading:r.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Oe=Y().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function Ue(s){var f,E,N;const[T,R]=t.useState(1),[d,c]=t.useState(10),[w,b]=t.useState(!1),[i,g]=t.useState(""),[y,r]=t.useState(!1),[C,m]=t.useState(!1),[x,h]=t.useState(null),{moduleId:l}=s,[I,o]=t.useState(1),[p,L]=t.useState(10),M=100,_=n=>{o(n)},$=n=>{L(n),o(1)};console.log(s==null?void 0:s.id,"props id"),console.log(l,"props id"),G({resolver:J(Oe),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}});const j=B({api:(f=k)==null?void 0:f.serviceList,key:"serviceMasterList",config:{moduleId:s==null?void 0:s.mId},options:{enabled:!!(s!=null&&s.mId)}});console.log("the servicemId",s==null?void 0:s.mId);const q=n=>{h(n),m(!0)};return e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{g(""),r(!1),b(!0)},children:"Add Service List"})})}),e.jsx($e,{open:w,setOpen:b,title:y?"Edit Service":"Add Service",id:i,edit:y,setEdit:r,moduleId:s==null?void 0:s.id,serviceList:j}),e.jsx(te,{children:e.jsx(le,{children:j.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ne,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(z,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Service Name"}),e.jsx(V,{className:"",children:"Service Path"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(re,{children:(N=(E=j==null?void 0:j.data)==null?void 0:E.data)==null?void 0:N.map((n,S)=>e.jsxs(z,{children:[e.jsx(D,{children:T*d-d+S+1}),e.jsx(D,{children:n==null?void 0:n.service_name}),e.jsx(D,{children:n==null?void 0:n.path}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>{g(n==null?void 0:n.id),r(!0),b(!0)},children:[e.jsx(me,{})," Edit"]}),e.jsxs(O,{onClick:()=>q(n),className:"ml-2",variant:"secondary",children:[e.jsx(xe,{})," View"]})]})]},n==null?void 0:n.id))})]}),e.jsx(X,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(oe,{currentPage:I,totalItems:M,itemsPerPage:p,onPageChange:_,onItemsPerPageChange:$})})]})})})]})})}const He=Y().shape({module_name:A().required("module name is required"),module_id:A().required("Module ID is required"),module_url:A().required("Module URL is required")});function ze({open:s,setOpen:T,title:R,edit:d,setEdit:c,serviceList:w,moduleList:b,id:i}){const g=Q({}),y=G({defaultValues:{module_name:"",module_id:"",module_url:""},resolver:J(He)}),{reset:r}=y;t.useEffect(()=>{var m,x;if(s)if(d&&i){const h=(x=(m=b==null?void 0:b.data)==null?void 0:m.data)==null?void 0:x.find(l=>l.id==i);h&&r({module_name:h.module_name||"",module_id:h.id||"",module_url:h.url||""})}else r({module_name:"",module_id:"",module_url:""})},[s,d,i,b,r]);const C=async m=>{var x,h,l;try{const I=d?"EditModuleList":"AddmoduleList",o=await g.mutateAsync({api:I,data:m});(x=o==null?void 0:o.data)!=null&&x.success?(F.success((h=o==null?void 0:o.data)==null?void 0:h.message),T(!1),c(!1),w.refetch()):F.error((l=o==null?void 0:o.data)==null?void 0:l.message)}catch(I){F.error(Z(I))}};return e.jsx(ue,{open:s,setOpen:T,title:R,setEdit:c,edit:d,children:e.jsx(ee,{methods:y,onSubmit:y.handleSubmit(C),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(W,{label:"Module Name",name:"module_name",placeholder:"Enter module name"})}),e.jsx("div",{children:e.jsx(W,{label:"Module ID",name:"module_id",placeholder:"Enter module id "})}),e.jsx("div",{children:e.jsx(W,{label:"Module URL",name:"module_url",placeholder:"Enter module url "})}),e.jsx(X,{}),e.jsx("div",{children:e.jsx(ie,{isLoading:y.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const We=Y().shape({menuRoleName:A().required("menu name is required")});function Xe({open:s,setOpen:T,title:R,edit:d,setEdit:c,id:w,menuRoleList:b,moduleId:i}){const g=Q({}),y=G({defaultValues:{menuRoleName:""},resolver:J(We)}),{reset:r}=y;console.log(i,"id"),t.useEffect(()=>{var m,x;if(s)if(d&&w){const h=(x=(m=b==null?void 0:b.data)==null?void 0:m.data)==null?void 0:x.find(l=>l.id===w);h&&r({menuRoleName:h.menu_role_name||""})}else r({menuRoleName:""})},[s,d,w,b,r]);const C=async m=>{var x,h,l,I,o;try{const p=d?(x=k)==null?void 0:x.editMenuList:(h=k)==null?void 0:h.addMenuList,L=d&&w?{...m,id:w}:{...m,moduleId:i},M=await g.mutateAsync({api:p,data:L});(l=M==null?void 0:M.data)!=null&&l.status?(F.success((I=M==null?void 0:M.data)==null?void 0:I.message),T(!1),c(!1),b.refetch()):F.error((o=M==null?void 0:M.data)==null?void 0:o.message)}catch(p){F.error(Z(p))}};return e.jsx(ue,{open:s,setOpen:T,title:R,setEdit:c,edit:d,children:e.jsx(ee,{methods:y,onSubmit:y.handleSubmit(C),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(W,{label:"Service Name",name:"menuRoleName",placeholder:"Enter menu name"})}),e.jsx(X,{}),e.jsx("div",{children:e.jsx(ie,{isLoading:y.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Ye=Y().shape({service_name:A().required("menu name is required")});function Ge({open:s,setOpen:T,title:R,edit:d,setEdit:c,serviceList:w,moduleList:b,id:i,menuRoleList:g,moduleId:y,menuRoleId:r,moduleName:C}){var L,M,_,$,j,q;const m=Q({}),x=Q({}),h=G({defaultValues:{service_name:""},resolver:J(Ye)}),{reset:l}=h;console.log(y,"id"),t.useEffect(()=>{var f,E;if(s)if(d&&i){const N=(E=(f=g==null?void 0:g.data)==null?void 0:f.data)==null?void 0:E.find(n=>n.id===i);N&&l({service_name:N.menu_role_name||""})}else l({service_name:""})},[s,d,i,g,l]);const I=async f=>{var E,N,n;try{const S=d?"EditModuleList":"AddmoduleList",u=d&&i?{...f,moduleId:i}:{...f,moduleId:y},a=await m.mutateAsync({api:S,data:u});(E=a==null?void 0:a.data)!=null&&E.success?(F.success((N=a==null?void 0:a.data)==null?void 0:N.message),T(!1),c(!1),w.refetch()):F.error((n=a==null?void 0:a.data)==null?void 0:n.message)}catch(S){F.error(Z(S))}},o=B({api:(L=k)==null?void 0:L.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:r,moduleId:y},options:{enabled:!0}}),p=async(f,E,N)=>{var n,S,u,a;console.log(N);try{const H={isSuspended:N,menuId:f,menuRoleId:r},v=await x.mutateAsync({api:(n=k)==null?void 0:n.addRemoveMenuPermission,data:H});(S=v==null?void 0:v.data)!=null&&S.status?(F.success(((u=v==null?void 0:v.data)==null?void 0:u.message)||"Permission updated successfully"),o.refetch()):F.error(((a=v==null?void 0:v.data)==null?void 0:a.message)||"Failed to update permission")}catch(H){F.error(Z(H))}};return console.log(C),console.log((_=(M=o==null?void 0:o.data)==null?void 0:M.data)==null?void 0:_[C],"permitedMenuList"),e.jsx(ue,{open:s,setOpen:T,title:R,setEdit:c,edit:d,children:e.jsx(ee,{methods:h,onSubmit:h.handleSubmit(I),children:e.jsx("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Sl."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Menu Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Permission"})]})}),e.jsx("tbody",{children:((q=(j=($=o==null?void 0:o.data)==null?void 0:$.data)==null?void 0:j[C])==null?void 0:q.map((f,E)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:E+1}),e.jsx("td",{className:`border border-gray-300 px-4 py-2 ${f.is_suspended?"text-black":"text-green-600"}`,children:f.menu_string}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:f.is_suspended?e.jsx("button",{className:"text-green-600 bg-green-200 hover:bg-green-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>p(f.id,f.menu_role_id,!f.is_suspended),children:"Add"}):e.jsx("button",{className:"text-red-600  bg-red-200 hover:bg-red-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>p(f.id,f.menu_role_id,!f.is_suspended),children:"Remove"})})]},f.id)))||e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-4",children:"No data available"})})})]})})})})})}Y().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function Je(s){var f,E,N,n,S,u;const[T,R]=t.useState(1),[d,c]=t.useState(10),[w,b]=t.useState(!1),[i,g]=t.useState(""),[y,r]=t.useState(!1),[C,m]=t.useState(!1),[x,h]=t.useState(null),[l,I]=t.useState(1),[o,p]=t.useState(10),L=100,M=a=>{I(a)},_=a=>{p(a),I(1)},$=B({api:(f=k)==null?void 0:f.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),j=B({api:(E=k)==null?void 0:E.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:s==null?void 0:s.id,moduleId:s==null?void 0:s.moduleId},options:{enabled:!0}}),q=a=>{h(a),m(!0)};return console.log(s==null?void 0:s.moduleName),e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{g(""),r(!1),b(!0)},children:"Add More Menu Permission"})})}),e.jsx(Ge,{open:w,setOpen:b,title:y?"Edit Menu":"Add Menu",id:i,edit:y,setEdit:r,moduleId:s==null?void 0:s.moduleId,menuRoleId:s==null?void 0:s.id,moduleName:s==null?void 0:s.moduleName}),e.jsx(te,{className:"",children:e.jsx(le,{children:$.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ne,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(z,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Menu"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(re,{children:(u=(S=(n=(N=j==null?void 0:j.data)==null?void 0:N.data)==null?void 0:n[s==null?void 0:s.moduleName])==null?void 0:S.filter(a=>(a==null?void 0:a.menu_role_id)==(s==null?void 0:s.id)))==null?void 0:u.map((a,H)=>e.jsxs(z,{children:[e.jsx(D,{children:T*d-d+H+1}),e.jsx(D,{children:a==null?void 0:a.menu_string}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>{g(a==null?void 0:a.id),r(!0),b(!0)},children:[e.jsx(me,{})," Edit"]}),e.jsxs(O,{onClick:()=>q(a),className:"ml-2",variant:"secondary",children:[e.jsx(xe,{})," View"]})]})]},a==null?void 0:a.id))})]}),e.jsx(X,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(oe,{currentPage:l,totalItems:L,itemsPerPage:o,onPageChange:M,onItemsPerPageChange:_})})]})})})]})})}const Ke=Y().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function Qe(s){var N,n,S;const[T,R]=t.useState(1),[d,c]=t.useState(10),[w,b]=t.useState(!1),[i,g]=t.useState(""),[y,r]=t.useState(!1);t.useState(!1),t.useState(null);const[C,m]=t.useState(!1),[x,h]=t.useState(!1),[l,I]=t.useState(1),[o,p]=t.useState(10),L=100,{moduleId:M}=s,_=u=>{I(u)},$=u=>{p(u),I(1)};console.log(s==null?void 0:s.moduleId,"props id"),console.log(M,"props id"),G({resolver:J(Ke),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}});const j=B({api:(N=k)==null?void 0:N.serviceList,key:"serviceMasterList",config:{moduleId:s==null?void 0:s.mId},options:{enabled:!0}}),q=B({api:(n=k)==null?void 0:n.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}});console.log(i);const E=(((S=q==null?void 0:q.data)==null?void 0:S.data.filter(u=>(u==null?void 0:u.module_id)==(s==null?void 0:s.moduleId)))||[]).slice((l-1)*o,l*o);return console.log("the service maste rlist..",s==null?void 0:s.moduleName),e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2 ",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end ",children:e.jsx(O,{type:"button",className:"flex items-center gap-2",onClick:()=>{g(""),r(!1),b(!0)},children:"Add Role List"})}),e.jsx(Xe,{open:w,setOpen:b,title:y?"Edit Role":"Add Role",id:i,edit:y,setEdit:r,menuRoleList:q,moduleId:s==null?void 0:s.moduleId})]}),e.jsxs(ve,{open:x,children:[e.jsx(Se,{}),e.jsxs(Ie,{className:"sm:max-w-[1200px] h-[700px] max-h-[700px] overflow-scroll",children:[e.jsx(je,{className:" text-xl text-gray-500 font-bold flex justify-between",children:e.jsxs("div",{children:["Module : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:s==null?void 0:s.moduleName})]})}),e.jsxs(je,{className:" text-xl text-gray-500 font-bold flex justify-between",children:[e.jsxs("div",{children:["Role : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:C==null?void 0:C.menu_role_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(Pe,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>h(!1)})})})]}),e.jsxs(ke,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"py-4 flex justify-between",children:e.jsx(Te,{className:"grid w-auto grid-cols-2",children:e.jsx(pe,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white rounded-lg px-2",value:"MENULIST",children:"Permitted Menu List"})})}),e.jsx(Ae,{value:"MENULIST",children:e.jsx(Je,{moduleId:s==null?void 0:s.moduleId,id:i,moduleName:s==null?void 0:s.moduleName})})]})]})]}),e.jsx(te,{children:e.jsx(le,{children:j.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ne,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(z,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Role Name"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(re,{children:E.map((u,a)=>e.jsxs(z,{children:[e.jsx(D,{children:T*d-d+a+1}),e.jsx(D,{children:u==null?void 0:u.menu_role_name}),e.jsxs(D,{children:[e.jsxs(O,{variant:"secondary",onClick:()=>{g(u==null?void 0:u.id),r(!0),b(!0)},children:[e.jsx(me,{})," Edit"]}),e.jsxs(O,{onClick:()=>{m(u),h(!0),g(u==null?void 0:u.id)},className:"ml-2",variant:"secondary",children:[e.jsx(xe,{})," View"]})]})]},u==null?void 0:u.id))})]}),e.jsx(X,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(oe,{currentPage:l,totalItems:L,itemsPerPage:o,onPageChange:_,onItemsPerPageChange:$})})]})})})]})})}const Ze=Y().shape({ulbId:A(),moduleId:A(),complaintRefNo:A()});function es(){var a,H,v,K,se,ae,U,Ne,be,ye;const[s,T]=t.useState(1),[R,d]=t.useState(10),[c,w]=t.useState(!1),[b,i]=t.useState(!1),[g,y]=t.useState(""),[r,C]=t.useState(""),[m,x]=t.useState(!1),[h,l]=t.useState(""),[I,o]=t.useState(1),[p,L]=t.useState(10),[M,_]=t.useState(!1),$=100,j=P=>{o(P)},q=P=>{L(P),o(1)},f=G({resolver:J(Ze),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),E=async P=>{console.log(P==null?void 0:P.moduleId),l(P.moduleId)},N=B({api:(a=k)==null?void 0:a.userManagementModuleList,key:"moduleMasterList",options:{enabled:!0}}),n=B({api:(H=k)==null?void 0:H.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}}),S=B({api:(v=k)==null?void 0:v.serviceList,key:"serviceMasterList",config:{moduleId:g},options:{enabled:!!g}});console.log(c==null?void 0:c.id,"id");const u=(se=(K=N==null?void 0:N.data)==null?void 0:K.data)==null?void 0:se.filter(P=>P.id==h);return console.log(u),console.log((ae=N==null?void 0:N.data)==null?void 0:ae.data),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsxs(ve,{open:M,children:[e.jsx(Se,{}),e.jsxs(Ie,{className:"sm:max-w-[1200px] h-auto max-h-[700px]  overflow-scroll",children:[e.jsxs(je,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[e.jsxs("div",{children:["Module : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:c==null?void 0:c.module_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(Pe,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>_(!1)})})})]}),e.jsxs(Re,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"py-4 flex justify-between",children:e.jsxs(Fe,{className:"grid w-auto grid-cols-3",children:[e.jsx(he,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"MENULIST",children:"Menu List Master"}),e.jsx(he,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"SERVICE_LIST",children:"Service List Master"}),e.jsx(he,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"ROLE_LIST",children:"Role List Master"})]})}),e.jsx(ge,{value:"MENULIST",children:e.jsx(qe,{id:g,mid:c==null?void 0:c.id,setEdit:x,setOpen:i,edit:m,refetch:S==null?void 0:S.refetch,serviceList:S,moduleName:r,moduleId:c==null?void 0:c.id,menuRoleList:n})}),e.jsx(ge,{value:"SERVICE_LIST",children:e.jsx(Ue,{id:g,setEdit:x,setOpen:i,edit:m,refetch:S==null?void 0:S.refetch,serviceList:S,moduleId:c==null?void 0:c.id,moduleName:r,mId:g})}),e.jsx(ge,{value:"ROLE_LIST",children:e.jsx(Qe,{id:g,setEdit:x,setOpen:i,edit:m,refetch:n==null?void 0:n.refetch,serviceList:n,moduleId:c==null?void 0:c.id,moduleName:r,mId:g})})]})]})]}),e.jsxs(te,{children:[e.jsx(ee,{methods:f,onSubmit:f.handleSubmit(E),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 pt-4",children:[e.jsxs("div",{children:[e.jsx(Le,{htmlFor:"moduleId",children:"Module name"}),e.jsx(fe,{className:"cursor-pointer bg-background",name:"moduleId",data:((Ne=(U=N.data)==null?void 0:U.data)==null?void 0:Ne.map(P=>({value:P==null?void 0:P.id,label:P==null?void 0:P.module_name})))??[]})]}),e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(ie,{variant:"secondary",isLoading:f.formState.isSubmitting,type:"submit",className:"float-right w-auto px-10",children:"Search"})}),e.jsx("div",{className:"mt-6 flex justify-end "}),e.jsx(ze,{open:b,setOpen:i,title:m?"Edit Module":"Add Module",id:g,edit:m,setEdit:x,serviceList:S,moduleList:N})]})}),e.jsx(Ce,{className:"px-7",children:e.jsx(_e,{})}),e.jsx(le,{children:S.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ne,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(z,{children:[e.jsx(V,{className:"",children:"#"}),e.jsx(V,{className:"",children:"Module"}),e.jsx(V,{className:"",children:"Actions"})]})}),e.jsx(re,{children:(ye=(u==null?void 0:u.length)>0?u:(be=N==null?void 0:N.data)==null?void 0:be.data)==null?void 0:ye.map((P,Me)=>e.jsxs(z,{children:[e.jsx(D,{children:s*R-R+Me+1}),e.jsx(D,{children:P==null?void 0:P.module_name}),e.jsx(D,{children:e.jsxs(O,{variant:"secondary",onClick:()=>{y(P==null?void 0:P.id),C(P==null?void 0:P.module_name),w(P),_(!0)},className:"ml-2",children:[e.jsx(xe,{})," View"]})})]},P==null?void 0:P.id))})]}),e.jsx(X,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(oe,{currentPage:I,totalItems:$,itemsPerPage:p,onPageChange:j,onItemsPerPageChange:q})})]})})]})]})})}function gs(){return e.jsx(we,{title:"Module List (master)",subTitle:"Control all Module here",children:e.jsx("div",{children:e.jsx(es,{})})})}export{gs as default};
