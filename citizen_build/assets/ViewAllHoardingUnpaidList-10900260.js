import{j as e}from"./mui-8bd1858b.js";import{b as de,r as t,u as ce}from"./router-56e993c5.js";import{M as G,A as C,Q as j,b as re,B as me}from"./index-44fe4f08.js";import{H as xe}from"./HoardingApplicationFullDetail-3547764a.js";import{R as he}from"./RazorpayPaymentScreen-70677a63.js";import{A as z}from"./AdvertisementApiList-708a97a0.js";import{A as Q}from"./ReuploadDocumentModal-bc250e8a.js";import{C as ge}from"./CommonModal-f6cb1fda.js";import{S as pe}from"./ServerErrorCard-11df06de.js";import{A as ue}from"./AdvtListTablePagination-07a942d3.js";import"./axios-ab7cc016.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-80676409.js";import"./moment-a9aaa855.js";import"./redux-a3f69129.js";import"./i18next-2edfafb0.js";import"./UseRazorpay-4579b10c.js";import"./index-1cc92de0.js";import"./useRazorPayForApp-00a62b48.js";const fe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}};function ve(a){var p,c,u,S,f,r;const[y,x]=de.useState(!1),{api_getHoardingOrderIdForPayment:N}=z(),[L,b]=t.useState(),d=ce();t.useEffect(()=>{a.openPaymentModal>0&&x(!0)},[a.openPaymentModal]),console.log("payment card details",a==null?void 0:a.applicationDetails);function H(){}function h(){x(!1)}const g=(i,o)=>{j.dismiss(),o=="success"&&j.success(i),o=="error"&&j.error(i)},_=i=>{var o;console.log("Payment Status =>",i),(i==null?void 0:i.status)==!0?(d(`/paymentScreen/${i.data.razorpay_payment_id}/${(o=a==null?void 0:a.applicationDetails)==null?void 0:o.workflow_id}`),g("Payment Successfull","success")):(j.error("Payment failed...."),g("Payment Failed","error"),d("/advertDashboard"))},w=i=>{console.log("payment id on click pay",i.target.id);const A={id:i.target.id};C.post(`${N}`,A,Q()).then(function(s){console.log("generate order id",s.data),s.data.status==!0&&(console.log("OrderId Generated True",s.data),he(s.data.data,_)),b(s)}).catch(function(s){alert("Backend Server error. Unable to Generate Order Id")})};return e.jsx("div",{className:"",children:e.jsx(G,{isOpen:y,onAfterOpen:H,onRequestClose:h,style:fe,contentLabel:"Example Modal",children:e.jsx("div",{className:"bg-violet-200 text-slate-50 drop-shadow-2xl border border-violet-500 p-5 m-5 rounded-md",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"shadow-md shadow-violet-300 py-1 pl-3 bg-white border-gray-400 text-gray-600 flex",children:["Make Payment For",e.jsxs("span",{className:"font-bold text-md ml-4 uppercase ",children:[(p=a==null?void 0:a.applicationDetails)==null?void 0:p.type," "]})]}),e.jsxs("div",{className:"md:flex block w-full h-56",children:[e.jsxs("div",{className:"grid grid-cols-12 px-8 pt-3 leading-8 ",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("p",{children:"Application No. -"}),e.jsx("p",{children:"Applied date -"})]}),e.jsxs("div",{className:"col-span-6 text-gray-500 font-bold",children:[e.jsxs("p",{children:[(c=a==null?void 0:a.applicationDetails)==null?void 0:c.application_no," "]}),e.jsx("p",{children:(u=a==null?void 0:a.applicationDetails)==null?void 0:u.application_date})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("p",{children:"Approve Date -"})}),e.jsx("div",{className:"col-span-6 text-gray-500 font-bold",children:e.jsxs("p",{children:[(S=a==null?void 0:a.applicationDetails)==null?void 0:S.approve_date,"  "]})})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg ",children:"Payable Amount"})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg bg-violet-300 px-2 ",children:(f=a==null?void 0:a.applicationDetails)==null?void 0:f.payment_amount})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("button",{onClick:h,className:"mx-2 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:w,id:(r=a==null?void 0:a.applicationDetails)==null?void 0:r.id,className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/256/7057/7057515.png",className:"h-16"})})})})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:""})})]})]})})})})}function Re(){const[a,y]=t.useState(),[x,N]=t.useState(),{api_getHoardingUnpaidApplicationList:L,api_getHoardingApplicationDetailForPayment:b}=z(),[d,H]=t.useState([]),[h,g]=t.useState(),[_,w]=t.useState(!1),[p,c]=t.useState(!1),[u,S]=t.useState(!1),f=()=>c(!0),r=()=>c(!1),i=()=>{},[o,A]=t.useState(0);t.useState(!1);const[s,J]=t.useState(!1),[k,F]=t.useState(!1),[K,P]=t.useState(!1),[W,X]=t.useState(0),[I,Y]=t.useState(1),[Z,E]=t.useState(0),[D,ee]=t.useState(10),[M,ae]=t.useState(""),[te,R]=t.useState(!1),se=[{Header:"#",Cell:({row:n})=>e.jsx("div",{className:"pr-2",children:n.index+1})},{Header:"Application No",accessor:"application_no"},{Header:"Apply Date",accessor:"application_date"},{Header:"Payment Amount",accessor:"payment_amount"},{Header:"Action",accessor:"id",Cell:({cell:n})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(n.row.values.id,"Approve"),className:`bg-indigo-500 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                    hover:text-white text-white`,children:"View"}),e.jsx("button",{onClick:()=>ne(n.row.values.id),className:`bg-indigo-500 ml-4 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                 hover:text-white text-white`,children:"Pay"})]})}],ie=(n,m)=>{console.log("..............application id..............",n),console.log("..............application type..............",m),N(n),y(m),f()},ne=n=>{const O={applicationId:n};C.post(`${b}`,O,Q()).then(function(l){console.log("application detail for payment 1",l),g(l.data.data),A(v=>v+1)}).catch(function(l){console.log("errorrr.... ",l)})};t.useEffect(()=>{T(I,D,M)},[I,M,D]);const T=(n,m,O="")=>{R(!0),P(!0),C.post(L,{page:n,perPage:m,key:O},re()).then(l=>{var v,U,B,V,q,$;J((U=(v=l.data)==null?void 0:v.data)==null?void 0:U.data),F(!0),P(!1),X((V=(B=l.data)==null?void 0:B.data)==null?void 0:V.total),E(($=(q=l.data)==null?void 0:q.data)==null?void 0:$.last_page)}).catch(l=>{console.log("Error while fetching Filter Data",l),F(!1),P(!1)}),setTimeout(()=>{R(!1)},[500])},le={totalDataCount:W,currentPageIndex:I,setcurrentPageIndex:Y,pageLength:D,setpageLength:ee,lastPageIndex:Z,setlastPageIndex:E,fetchInboxList:T,searchValue:M,setsearchValue:ae,refreshStatus:te},oe=n=>{w(n)};return K?e.jsx(e.Fragment,{children:e.jsx(me,{})}):u?e.jsx(ge,{children:e.jsx(pe,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):(console.log("unpaid application full list",d==null?void 0:d.data),e.jsx(e.Fragment,{children:e.jsx("div",{className:"container bg-white text-gray-600 h-screen mx-auto mt-16",children:e.jsxs("div",{children:[e.jsx(ve,{openPaymentModal:o,applicationDetails:h}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-4 container mx-auto pt-4 ",children:e.jsx("div",{className:"col-span-12 p-2",children:e.jsxs("div",{className:"flex flex-row bg-white mb-4 rounded leading-5 shadow-md shadow-violet-100 ",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3288/3288006.png",className:"h-10 ml-3 mt-2"}),e.jsx("h1",{className:"text-xl text-gray-700 font-semibold p-4",children:"HOARDING UNPAID APPLICATIONS"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 p-2",children:[k&&(s==null?void 0:s.length)!=0&&e.jsx(ue,{columns:se,dataList:s,values:le}),k&&(s==null?void 0:s.length)==0&&e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx(G,{isOpen:p,onAfterOpen:i,onRequestClose:r,contentLabel:"Example Modal",children:e.jsx("div",{class:" rounded-lg shadow-xl border-2 border-gray-50 mx-auto px-0 ",style:{width:"80vw",height:"100%"},children:e.jsx("div",{className:"h-[44rem] bg-white overflow-y-auto",children:e.jsx(xe,{data:x,applicationType:a,showLoader:oe,closeModal:r})})})})})]})})}))}export{Re as default};
