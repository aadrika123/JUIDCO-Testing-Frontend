import{j as t}from"./mui-8bd1858b.js";import{f as Me,r as a,u as We}from"./router-56e993c5.js";import{A as k,b as ve,c as Qe,e as Ye,d as Ge,u as Je,ad as Ke,s as Xe,N as Ze,Q as x,r as et,C as tt}from"./index-44fe4f08.js";import{f as st}from"./folders-c40af08a.js";import{B as at}from"./BarLoader-d40f3cdf.js";import{F as we}from"./index.esm-3ed6923b.js";import"./axios-ab7cc016.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-80676409.js";import"./moment-a9aaa855.js";import"./redux-a3f69129.js";import"./i18next-2edfafb0.js";function vt(N){var E,q,z,M;const h=Xe,{id:f,type:l}=Me();console.log("id in upload........",f,"and type => ",l);const{get_ConcessionDocumentsToUpload:ye,post_ConcessionDocumentUpload:De,get_ObjectionDocumentsToUpload:Se,post_ObjectionDocumentUpload:Ue,get_HarvestingDocumentsToUpload:Ce,post_HarvestingDocumentUpload:ke,get_ConcessionDetailsById:Ie,get_HarvestingDetailsById:Oe,get_ObjectionDetailsById:Pe}=tt(),[I,r]=a.useState(!1),[p,O]=a.useState(""),[lt,_e]=a.useState(""),[v,P]=a.useState(0),[Ae,g]=a.useState(!1),[nt,Fe]=a.useState(""),[_,A]=a.useState(1);a.useState(0);const[F,$e]=a.useState(),[j,$]=a.useState(""),[R,B]=a.useState(!0),[b,w]=a.useState(!1),[y,Re]=a.useState();a.useState();const[n,Be]=a.useState(),[D,T]=a.useState(null),[S,U]=a.useState(null),[ot,Te]=a.useState(!1),[rt,H]=a.useState(!1),He=()=>H(!0),Ve=()=>{w(!1),Te(!1),g(!1),H(!1),A(_+1),console.log("modal m end => ",Ae,b)};a.useEffect(()=>{V()},[v]),a.useEffect(()=>{let e="";l=="Concession"&&(e=Ie),l=="Rain Water Harvesting"&&(e=Oe),l=="Objection"&&(e=Pe),r(!0),k.post(e,{applicationId:f},ve()).then(function(s){var o;r(!1),console.log("view full details...",s.data.data),Be((o=s==null?void 0:s.data)==null?void 0:o.data)}).catch(function(s){r(!1),console.log("==2 details by id error...",s)})},[]);const V=()=>{let e="";l=="Concession"&&(e=ye),l=="Rain Water Harvesting"&&(e=Ce),l=="Objection"&&(e=Se),r(!0),console.log("before fetch upload doc"),k.post(`${e}`,{applicationId:f},ve()).then(s=>{var o;console.log("list of doc to upload at pilotworkflowdocumentupload => ",s==null?void 0:s.data),Re((o=s==null?void 0:s.data)==null?void 0:o.data),r(!1)}).catch(s=>{console.log("data submission error bo doc upload => ",s),g(!1),r(!1)})};console.log("temp doc => ",b);const Le=Qe({docId:Ye().required("Select document type"),docUpload:Ge().required("Select document")}),m=Je({initialValues:{docId:"",docUpload:"",docName:""},onSubmit:e=>{console.log("use effect 2"),console.log("values submission => ",e),L()},validationSchema:Le}),Ee=e=>{let s=e.target.files[0];Ze(s)&&($(e.target.name),$e(URL.createObjectURL(e.target.files[0])),O(e.target.files[0]),m.setFieldValue("docUpload",URL.createObjectURL(e.target.files[0])),console.log("use effect change ",m.values.docId,m.values.docUpload),console.log("file on change bo doc upload => ",s,"and doc upload => ",p,"and url => ",F,"and name => ",s==null?void 0:s.name,"file name => ",j),(s==null?void 0:s.name).substring((s==null?void 0:s.name).lastIndexOf(".")+1)=="pdf"?B(!1):B(!0))};console.log("and doc name => ",j);const L=e=>{if(S==null){x.error("Select Document Type"),T(null),U(null);return}console.log("doc ref name...",e);let s=new FormData;console.log("document  => ",p);let o={applicationId:N==null?void 0:N.id,ownerId:D,docCode:S,document:p};if(s.append("applicationId",f),D!=null&&s.append("ownerId",D),s.append("docCode",S),s.append("document",p),console.log("form data bo doc upload => ",o),p!=""){Ve(),r(!0);let d="";l=="Concession"&&(d=De),l=="Rain Water Harvesting"&&(d=ke),l=="Objection"&&(d=Ue),console.log("before fetch doc to upload...",s),k.post(`${d}`,s,et()).then(i=>{var u;console.log("data submitted bo doc upload => ",i.data),(u=i==null?void 0:i.data)!=null&&u.status?(x.success("Document Uploaded Successfully !!"),g(!1),_e(""),O(""),r(!1),P(v+1),$(""),m.setFieldValue("docUpload",""),P(v+1),T(null),U(null),V()):(console.log("something went"),x.error("Something went wrongg !!!"))}).catch(i=>{console.log("data submission error bo doc upload => ",i),g(!1),r(!1)})}else x.error("Select file")},C=e=>{console.log("getting doc name => ",e),e==""&&x.error("File not uploaded !!!"),e!=""&&(Fe(e),He(),A(_+1))},qe=e=>{U(e.target.value)},ze=We();return t.jsxs(t.Fragment,{children:[t.jsx(Ke,{position:"top-right",autoClose:2e3}),I&&t.jsx(at,{}),t.jsxs("div",{className:"overflow-x-auto mx-auto w-full px-36 relative",children:[t.jsx("button",{className:"absolute top-2 left-2 bg-indigo-500 px-4 py-1 shadow-lg rounded-sm text-white hover:bg-white poppins border-2 border-indigo-500 hover:text-indigo-600 transition-all duration-200 mt-1 hover:border-2 hover:border-indigo-600",onClick:()=>ze("/propertyDashboard"),children:"Back"}),l=="Objection"?t.jsxs("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[(n==null?void 0:n.objection_for)=="Clerical Mistake"&&t.jsx(t.Fragment,{children:"Clerical Objection"})," ",(n==null?void 0:n.objection_for)=="Assessment Error"&&t.jsx(t.Fragment,{children:"Assessment Objection"})," ",(n==null?void 0:n.objection_for)=="Forgery"&&t.jsx(t.Fragment,{children:"Forgery Objection"}),"  Document Upload"]}):t.jsxs("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[l," Document Upload"]}),t.jsx("div",{className:"text-gray-700 py-6 ",children:t.jsx("div",{className:"grid md:grid-cols-2 text-sm bg-white shadow-lg rounded-sm py-4",children:(z=(q=(E=n==null?void 0:n.fullDetailsData)==null?void 0:E.cardArray)==null?void 0:q.data)==null?void 0:z.map(e=>t.jsxs("div",{className:"grid grid-cols-2",children:[t.jsxs("div",{className:"px-4 py-2 font-semibold",children:[e==null?void 0:e.displayString," : "]}),t.jsx("div",{className:"px-4 py-2",children:e==null?void 0:e.value})]}))})}),t.jsx("div",{className:"text-red-500 font-semibold poppins 2xl:text-sm text-xs",children:"You have been redirected as Back To Citizen to re-upload documents."}),t.jsx("div",{className:"w-full flex md:px-4 bg-white font-sans overflow-x-auto py-6",children:t.jsxs("div",{className:"w-full",children:[t.jsxs("h1",{className:"text-xs poppins",children:[l," Documents"]}),t.jsx("div",{className:"bg-white shadow-md rounded my-2",children:t.jsxs("table",{className:"min-w-max w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-indigo-100 text-gray-600 uppercase text-sm leading-normal",children:[t.jsx("th",{className:"py-3 px-6 text-center",children:"#"}),t.jsx("th",{className:"py-3 px-6 text-left cursor-pointer",children:"Document Name"}),t.jsx("th",{className:"py-3 px-6 text-left",children:"Type"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Document"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Status"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Remarks"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Preview"}),t.jsx("th",{className:"py-3 px-6 text-center",children:"Upload"})]})}),t.jsx("tbody",{className:"text-gray-600 text-sm font-light bg-white",children:(M=y==null?void 0:y.listDocs)==null?void 0:M.map((e,s)=>{var o,d,i,u,W,Q,Y,G,J,K,X,Z,ee,te,se,ae,le,ne,oe,re,ie,ce,de,me,pe,ue,xe,he,fe,ge,je,be,Ne;return t.jsxs("tr",{className:"border-b border-gray-200 ",onSubmit:m.handleSubmit,onChange:m.handleChange,children:[t.jsx("td",{className:"py-3 px-6 font-semibold",children:s+1}),t.jsx("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-2 bg-white shadow-lg rounded-full p-2",children:t.jsx("img",{src:st,alt:"rain",className:"w-4"})}),t.jsxs("span",{className:"font-medium poppins",value:e==null?void 0:e.docName,children:[(e==null?void 0:e.docType)=="R"&&((o=e==null?void 0:e.masters[0])==null?void 0:o.docVal),(e==null?void 0:e.docType)=="O"&&"Additional"]})]})}),t.jsx("td",{className:"py-3 px-6",children:t.jsx("div",{className:"font-semibold text-sm",children:t.jsx("div",{className:"",children:t.jsxs("select",{className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md w-36",name:"docId",onChange:qe,children:[t.jsx("option",{value:"",selected:!0,children:"--select--"}),(d=e==null?void 0:e.masters)==null?void 0:d.map((c,it)=>t.jsx("option",{value:c==null?void 0:c.documentCode,children:c==null?void 0:c.docVal}))]})})})}),t.jsx("td",{className:"py-3 px-6 text-center relative",children:(e==null?void 0:e.uploadedDoc)==""?t.jsx("i",{className:"font-semibold",children:"N/A"}):t.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>{var c;return C(`${h}/${(c=e==null?void 0:e.uploadedDoc)==null?void 0:c.docPath}`)},children:t.jsxs("div",{className:"flex items-center",children:[((Y=(i=e==null?void 0:e.uploadedDoc)==null?void 0:i.docPath)==null?void 0:Y.split(".")[((Q=(W=(u=e==null?void 0:e.uploadedDoc)==null?void 0:u.docPath)==null?void 0:W.split("."))==null?void 0:Q.length)-1])=="pdf"&&t.jsx("div",{className:"flex-shrink-0 text-[28px]",children:t.jsx(we,{})}),((Z=(G=e==null?void 0:e.uploadedDoc)==null?void 0:G.docPath)==null?void 0:Z.split(".")[((X=(K=(J=e==null?void 0:e.uploadedDoc)==null?void 0:J.docPath)==null?void 0:K.split("."))==null?void 0:X.length)-1])=="jpg"&&t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:`${h}/${(ee=e==null?void 0:e.uploadedDoc)==null?void 0:ee.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((ne=(te=e==null?void 0:e.uploadedDoc)==null?void 0:te.docPath)==null?void 0:ne.split(".")[((le=(ae=(se=e==null?void 0:e.uploadedDoc)==null?void 0:se.docPath)==null?void 0:ae.split("."))==null?void 0:le.length)-1])=="jpeg"&&t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:`${h}/${(oe=e==null?void 0:e.uploadedDoc)==null?void 0:oe.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((me=(re=e==null?void 0:e.uploadedDoc)==null?void 0:re.docPath)==null?void 0:me.split(".")[((de=(ce=(ie=e==null?void 0:e.uploadedDoc)==null?void 0:ie.docPath)==null?void 0:ce.split("."))==null?void 0:de.length)-1])=="png"&&t.jsx("div",{className:"flex-shrink-0",children:t.jsx("img",{src:`${h}/${(pe=e==null?void 0:e.uploadedDoc)==null?void 0:pe.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})}),t.jsx("td",{className:"py-3 px-6 text-center font-semibold",children:(e==null?void 0:e.uploadedDoc)==""?t.jsx("i",{className:"font-semibold",children:"N/A"}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"whitespace-no-wrap",children:((ue=e==null?void 0:e.uploadedDoc)==null?void 0:ue.verifyStatus)==0&&t.jsx(t.Fragment,{children:"Pending"})}),t.jsx("p",{className:"text-green-500 whitespace-no-wrap",children:((xe=e==null?void 0:e.uploadedDoc)==null?void 0:xe.verifyStatus)==1&&t.jsx(t.Fragment,{children:"Verified"})}),t.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:((he=e==null?void 0:e.uploadedDoc)==null?void 0:he.verifyStatus)==2&&t.jsx(t.Fragment,{children:"Rejected"})})]})}),t.jsx("td",{className:"py-3 px-6 text-center",children:((fe=e==null?void 0:e.uploadedDoc)==null?void 0:fe.remarks)==""||((ge=e==null?void 0:e.uploadedDoc)==null?void 0:ge.remarks)==null?t.jsx("i",{className:"font-semibold",children:"N/A"}):(je=e==null?void 0:e.uploadedDoc)==null?void 0:je.remarks}),t.jsxs("td",{className:"py-3 px-6 text-center",children:[(e==null?void 0:e.docName)==j&&R==!0&&t.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>C(w(!b)),children:t.jsx("img",{src:F,alt:"",srcset:"",className:"md:w-[3vw] w-[5vw] text-center"})}),(e==null?void 0:e.docName)==j&&R==!1&&t.jsx("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:()=>C(w(!b)),children:t.jsx("div",{className:"text-[40px] text-center",children:t.jsx(we,{})})})]}),t.jsx("td",{className:"py-3 px-6 flex flex-wrap gap-2",children:t.jsx("div",{className:"font-semibold text-sm",children:((be=e==null?void 0:e.uploadedDoc)==null?void 0:be.verifyStatus)!=1&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"",children:t.jsx("input",{accept:".pdf,.jpg,.jpeg",type:"file",name:e==null?void 0:e.docName,onChange:Ee,className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 foc}us:outline-none cursor-pointer shadow-md w-36"})}),(((Ne=e==null?void 0:e.uploadedDoc)==null?void 0:Ne.verify_status)!=1||(e==null?void 0:e.uploadedDoc)=="")&&t.jsx("div",{className:"mt-2",children:!I&&t.jsx("button",{onClick:()=>L(e==null?void 0:e.docName),type:"submit",className:" px-4 py-1.5 bg-indigo-500 text-white text-xs leading-tight rounded shadow-md hover:bg-indigo-700 poppins hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Upload"})})," "]})})})]})})})]})})]})})]})]})}export{vt as default};
