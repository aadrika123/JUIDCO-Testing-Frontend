import{l as r,v as N,W as V,I as _,y as j,z as v,B as M,m as P,q as z,A as $,k as n,o as I,j as a,D as R,G,H as U}from"./index-4c3b7050.js";function oe(){const[l,S]=r.useState();N();const[J,d]=r.useState(!1),[K,h]=r.useState(),[Q,i]=r.useState(),[w,u]=r.useState(!1),[A,X]=r.useState(1);r.useState("");const[B,Y]=r.useState(5),[C,Z]=r.useState(""),[E,ee]=r.useState(0);r.useState(10);const{api_waterSearchActiveApplication:p,header:ae}=V(),{filterBy:H,parameter:F}=N();_("Water Application Search");const[m,L]=r.useState(null),[k,q]=r.useState(null),D=j({filterBy:v().required("This is a required field !"),entry:v().required("This is a required field !")}),o=M({initialValues:{filterBy:"",entry:""},onSubmit:e=>{var s;L({filterBy:e==null?void 0:e.filterBy,parameter:(s=o==null?void 0:o.values)==null?void 0:s.entry}),f(e),q(t=>t+1)},validationSchema:D}),g=P();r.useEffect(()=>{E>0&&f()},[H,F]);const f=e=>{u(!0),d(!1);const s={filterBy:e?e.filterBy:o.values.filterBy,parameter:e?e.entry:o.values.entry,pages:B,page:A,search:C};console.log("before fetch applied application..",s),z.post(p,s,$()).then(t=>{var c,y,b,x;console.log("applied application. in ...",(y=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:y.data),(b=t==null?void 0:t.data)!=null&&b.status?(S((x=t==null?void 0:t.data)==null?void 0:x.data),d(!0)):(h(t.data.message),notify("No data found","error")),u(!1)}).catch(t=>{console.log("Error while fetching Filter Data",t),d(!1),u(!1)})};console.log("readymadeListData.data",l==null?void 0:l.data);const O=e=>{o.values.filterBy=e.target.value,e.target.value=="holdingNo"&&i("Enter Holding No."),e.target.value=="safNo"&&i("Enter SAF No."),e.target.value=="newConnection"&&i("Enter Application No."),e.target.value=="regularization"&&i("Enter Application No."),e.target.value=="name"&&i("Enter Owner Name"),e.target.value=="mobileNo"&&i("Enter Mobile No.")},T=()=>{h(),o.values&&i(o.values.filterBy)},W=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Application No",accessor:"application_no"},{Header:" Holding No",accessor:"holding_no"},{Header:"Applicant Name",accessor:"applicantname"},{Header:"Address",accessor:"address"},{Header:"Mobile No",accessor:"mobileno"},{Header:"Action",accessor:"id",Cell:({cell:e})=>{var t,c;const s=(c=(t=e==null?void 0:e.row)==null?void 0:t.original)==null?void 0:c.charge_category;return console.log("Charge Category:",s),a("button",{onClick:()=>{s==="WATER_DISCONNECTION"?g(`/waterdisconViewApplication/${e.row.values.id}`,{replace:!0}):g(`/waterViewApplication/${e.row.values.id}`,{replace:!0})},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}}];return console.log("readymadeListData.data",l==null?void 0:l.data),n(I,{children:[w&&a(R,{}),n("div",{className:"border shadow-xl bg-white mt-6",children:[a("div",{className:"flex ml-5 mt-2 ",children:a("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Applied Applications"})}),a("form",{onChange:T,onSubmit:o.handleSubmit,children:n("div",{className:"flex max-sm:flex-col justify-center space-x-8 max-sm:space-x-0 max-sm:space-y-5 my-5 m-10",children:[n("div",{children:[n("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",a("span",{className:"text-red-500",children:"*"})]}),n("select",{name:"filterBy",onChange:O,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[a("option",{value:"",children:"Select"}),a("option",{value:"newConnection",children:"New Connection"}),a("option",{value:"regularization",children:"Regularization"}),a("option",{value:"discConnection",children:"Disconnection"}),a("option",{value:"name",children:"Name"}),a("option",{value:"safNo",children:"SAF No"}),a("option",{value:"holdingNo",children:"Holding No"})]}),a("p",{className:"text-red-500 text-xs",children:o.touched.filterBy&&o.errors.filterBy?o.errors.filterBy:null})]}),n("div",{children:[n("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Searching Parameter",a("span",{className:"text-red-500",children:"*"})]}),a("input",{type:"text",name:"entry",onChange:o.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),a("p",{className:"text-red-500 text-xs",children:o.touched.entry&&o.errors.entry?o.errors.entry:null})]}),a("div",{className:"mt-4",children:n("button",{type:"submit",className:"w-full border border-indigo-600 bg-indigo-600 hover:bg-indigo-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 max-sm:m-0 py-1",children:[" ",n("p",{className:"flex justify-center",children:[" ",n("span",{className:"mt-1",children:[" ",a(G,{})," "]})," ","Search record"]})]})})]})}),a("div",{className:" rounded-md  mt-10",children:m!=null&&a(U,{columns:W,requestBody:m,changeData:k,api:p})})]})]})}export{oe as default};
