import{l as t,v as A,x as z,W as G,A as I,m as J,q as K,y as Q,z as H,B as X,k as o,o as Y,j as e,D as Z,E as ee,G as ae,H as te}from"./index-4c3b7050.js";function me(){const[re,n]=t.useState(),[se,d]=t.useState(!1),{type:m}=A(),[k,u]=t.useState(!1),[l,F]=t.useState(),[oe,p]=t.useState(!1),{notify:b}=t.useContext(z),[W,h]=t.useState(),[x,le]=t.useState(1);t.useState("");const[y,ne]=t.useState(5),[q,ie]=t.useState(""),[M,ce]=t.useState(0),{api_waterSearchConsumer:N}=G(),{filterBy:i,parameter:f,pages:O}=A(),V=()=>{i!=null&&i!=""&&(console.log("This is What i need ",i,f),g({filterBy:i,parameter:f}))},[S,_]=t.useState(null),[j,E]=t.useState(null);t.useEffect(()=>{V()},[i,f,O]);const L=I(),P=J();t.useEffect(()=>{M>0&&g()},[x,y]);const D=()=>{window.history.pushState(null,"",`/water/waterViewApplication/${r.values.filterBy}/${r.values.parameter} `)},g=a=>{console.log("data",a),h(),p(!1),u(!0);const c={filterBy:a?a.filterBy:r.values.filterBy,parameter:a?a.parameter:r.values.parameter,pages:y,page:x,search:q};console.log("th paypayload",c),console.log("before fetch holding details....",c),K.post(N,c,L).then(s=>{var w,v,B,C;console.log("search property list",(v=(w=s==null?void 0:s.data)==null?void 0:w.data)==null?void 0:v.data),(B=s==null?void 0:s.data)!=null&&B.status?(F((C=s==null?void 0:s.data)==null?void 0:C.data),p(!0)):(h(s.data.message),b("No data found","error")),u(!1)}).catch(s=>{console.log("Error while fetching Filter Data",s),b("Something went wrong!!","error"),u(!1),h("Something Went Wrong"),p(!1)})};console.log(l==null?void 0:l.data,l==null?void 0:l.data);const $=Q({filterBy:H().required("This is a required field !"),parameter:H().required("This is a required field !")}),r=X({initialValues:{filterBy:"",parameter:""},onSubmit:a=>{_({filterBy:a==null?void 0:a.filterBy,parameter:a==null?void 0:a.parameter}),g(a),E(c=>c+1)},validationSchema:$}),T=a=>{r.values.filterBy=a.target.value,a.target.value=="holdingNo"&&(n("Holding No"),d(!0)),a.target.value=="ownerDetails"&&(n("Owner Details"),d(!1)),a.target.value=="address"&&(n("Address"),d(!1)),a.target.value=="applicationNo"&&(n("Application No"),d(!1))};console.log("readymadeListData.data",l==null?void 0:l.data);const R=[{Header:"S.No.",Cell:({row:a})=>e("div",{children:(a==null?void 0:a.index)+1})},{Header:"Ward No.",accessor:"ward_name"},{Header:"Owner's Name",accessor:"applicant_name"},{Header:"Consumer No",accessor:"consumer_no"},{Header:"Holding No",accessor:"holding_no"},{Header:"SAF No",accessor:"saf_no"},{Header:"Mobile No",accessor:"mobile_no"},{Header:"Address",accessor:"address"},{Header:"Action",accessor:"id",Cell:({cell:a})=>e("button",{onClick:()=>{D(),P(`/waterViewConsumer/${a.row.values.id}`,{replace:!0})},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}],U=()=>{h(),r.values&&n(r.values.filterBy)};return o(Y,{children:[k&&e(Z,{}),(m=="re"||m=="mu")&&o("div",{className:"bg-amber-50 px-4 py-4 mb-4 text-lg rounded-lg shadow-lg text-amber-600 inline-block",children:[e(ee,{className:"inline mr-2 text-3xl"}),"For"," ",e("span",{className:"font-semibold",children:m=="re"?"Re-Assessment":"Mutation"})," ","of property search the property and then apply for"," ",m=="re"?"Re-Assessment":"Mutation"]}),o("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Consumer"})}),e("form",{onChange:U,onSubmit:r.handleSubmit,children:o("div",{className:"flex max-sm:flex-col justify-center space-x-8 max-sm:space-x-0 max-sm:space-y-3 my-5 m-10",children:[o("div",{children:[o("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",e("span",{className:"text-red-500",children:"*"})]}),o("select",{name:"filterBy",onChange:T,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"consumerNo",children:"Consumer No"}),e("option",{value:"holdingNo",children:"Holding No"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"applicantName",children:"Applicant Name"}),e("option",{value:"mobileNo",children:"Mobile No"}),e("option",{value:"applicationNo",children:"Application No"})]}),e("p",{className:"text-red-500 text-xs",children:r.touched.filterBy&&r.errors.filterBy?r.errors.filterBy:null})]}),o("div",{children:[o("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Searching Parameter ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"parameter",onChange:r.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:r.touched.parameter&&r.errors.parameter?r.errors.parameter:null})]}),e("div",{className:"mt-4 ",children:e("button",{type:"submit",className:"w-full border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5  max-sm:m-0 max-sm:mt-5 m-3 py-1",children:o("p",{className:"flex justify-center",children:[o("span",{className:"mt-1 mr-2",children:[" ",e(ae,{})," "]})," ","Search record"," "]})})})]})}),e("div",{className:"flex justify-center text-red-600 mb-2 font-semibold",children:W})]}),e("div",{className:" rounded-md  mt-10",children:S!=null&&e(te,{columns:R,requestBody:S,changeData:j,api:N})})]})}export{me as default};
