import{R as Y,x as E,j as e,k as n,l as s,m as P,o as h,D as z,M as j,h as S,a0 as B,a1 as Q,a2 as U,a3 as D,I as $,W as q,w as J,q as H,a4 as K}from"./index-4c3b7050.js";import O from"./WaterJskDashboard-f2c8f6db.js";function V(){const{notify:t}=Y.useContext(E);return t}const F=t=>{var d;return e("div",{className:"divide-y-2 m-2",children:n("div",{className:"w-full rounded overflow-hidden shadow-lg bg-white",children:[n("div",{className:"px-6 py-4 flex items-center border-b border-gray-200",children:[n("div",{className:"flex-initial",children:[" ",e("span",{className:"w-10 h-10 bg-indigo-100 rounded-full flex justify-center items-center",children:e("img",{className:"bg-indigo-50 rounded-full p-1",src:t==null?void 0:t.image,alt:""})})," "]}),e("div",{className:"font-bold text-md mb-2 flex-1 text-center text-gray-700",children:t==null?void 0:t.heading}),e("div",{className:"font-bold text-2xl mb-2 flex-initial",children:e("span",{className:"bg-indigo-50 text-indigo-600 px-2 py-1 rounded-lg",children:t==null?void 0:t.total})})]}),e("div",{className:"px-6 py-4 flex items-center justify-evenly border-b",children:Array.isArray(t==null?void 0:t.appDetails)&&((d=t==null?void 0:t.appDetails)==null?void 0:d.map(c=>n("div",{className:"flex flex-col items-center",children:[e("div",{className:"font-bold text-lg flex-1 text-gray-700",children:c==null?void 0:c.number}),e("div",{className:"text-xs mb-2 font-semibold text-gray-400",children:c==null?void 0:c.type})]})))})]})})};function Z(t){var r,M,m,p,C,u,T,R,A,k,_,L,f,y,o,g,b,w,N;const[d,c]=s.useState(!1);s.useState();const[a,W]=s.useState("recent");V();const v=P(),i=t==null?void 0:t.applicationDashboardData;return n(h,{children:[d&&n("div",{className:"inline",children:[" ",e(z,{})," "]}),n("div",{className:" z-0 rounded-lg",children:[n("div",{className:"grid md:grid-cols-3 grid-cols-1 mt-10",children:[e(F,{image:"https://cdn-icons-png.flaticon.com/512/281/281760.png",heading:"Today's Applied Applications",total:(r=i==null?void 0:i.applicationDetails)==null?void 0:r.applicationCount,appDetails:[{number:(M=i==null?void 0:i.applicationDetails)==null?void 0:M.newConnectionList,type:"New Connection"},{number:(m=i==null?void 0:i.applicationDetails)==null?void 0:m.RegulizationList,type:"Regularization"}]}),e(F,{image:"https://cdn-icons-png.flaticon.com/512/925/925014.png",heading:"Today's Total Collection",total:"â‚¹"+((p=i==null?void 0:i.amountData)==null?void 0:p.totalCollection),appDetails:[{number:(C=i==null?void 0:i.amountData)==null?void 0:C.cashAmount,type:"CASH"},{number:(u=i==null?void 0:i.amountData)==null?void 0:u.onlineAmount,type:"QR/UPI"},{number:(T=i==null?void 0:i.amountData)==null?void 0:T.ddAmount,type:"DD"},{number:(R=i==null?void 0:i.amountData)==null?void 0:R.chequeAmount,type:"CHEQUE"}]}),e(F,{image:"https://cdn-icons-png.flaticon.com/512/925/925547.png",heading:"Today's Total Transactions",total:(A=i==null?void 0:i.transactionCount)==null?void 0:A.totalCollectionCount,appDetails:[{number:(k=i==null?void 0:i.transactionCount)==null?void 0:k.cashCollection,type:"CASH"},{number:(_=i==null?void 0:i.transactionCount)==null?void 0:_.onlineCollection,type:"QR/UPI"},{number:(L=i==null?void 0:i.transactionCount)==null?void 0:L.ddCollection,type:"DD"},{number:(f=i==null?void 0:i.transactionCount)==null?void 0:f.chequeCollection,type:"CHEQUE"}]})]}),e("p",{className:"mt-5"}),n("div",{className:"flex space-x-5",children:[e("button",{onClick:()=>W("recent"),className:`${a=="recent"?"bg-indigo-500 text-white":"border border-indigo-500 text-indigo-500 hover:text-white bg-white"}   px-4 py-0.5 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white}`,children:"Recent Applications"}),e("button",{onClick:()=>W("search"),className:`${a=="search"?"bg-indigo-500 text-white":"border border-indigo-500 text-indigo-500 hover:text-white bg-white"}   px-4 py-0.5 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white}`,children:"Search Applications"})]}),a=="recent"&&n(h,{children:[e("div",{className:"px-1 font-semibold  text-gray-500 mt-5 google-roboto",children:n("div",{className:"flex-initial",children:[e(j,{className:"inline"})," Recent Applications"]})}),e("div",{className:"container mx-auto mt-2  rounded-lg bg-white",children:e("div",{className:"py-0 shadow-xl mt-3",children:e("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 overflow-x-auto w-full",children:e("div",{className:"inline-block min-w-full rounded-lg overflow-hidden",children:n("table",{className:"min-w-full leading-normal",children:[e("thead",{className:"bg-indigo-100",children:n("tr",{className:"font-semibold",children:[e("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"#"}),e("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Application No."}),e("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Applicant Name"}),e("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Assessment Type"}),e("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Apply Date"}),e("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Action"})]})}),n("tbody",{children:[((y=i==null?void 0:i.applicationList)==null?void 0:y.length)!=0&&((o=i==null?void 0:i.applicationList)==null?void 0:o.map((l,x)=>n("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e("td",{className:"px-2 py-2 text-sm",children:x+1}),e("td",{className:"px-2 py-2 text-sm",children:l==null?void 0:l.application_no}),e("td",{className:"px-2 py-2 text-sm",children:l==null?void 0:l.applicantname}),n("td",{className:"px-2 py-2 text-sm",children:[(l==null?void 0:l.connection_type_id)==1&&"New Connection",(l==null?void 0:l.connection_type_id)==2&&"Regularization"]}),n("td",{className:"px-2 py-2 text-sm text-left",children:[" ",S(l==null?void 0:l.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")]}),e("td",{className:"px-2 py-2 text-sm text-left",children:e("button",{type:"button",onClick:()=>v(`/waterViewApplication/${l==null?void 0:l.id}`),className:"cypress_owner_add_update px-4 py-2 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View"})})]}))),((g=i==null?void 0:i.applicationList)==null?void 0:g.length)==0&&e("tr",{children:e("td",{colSpan:5,className:"text-center text-red-500 font-semibold py-4",children:"No Application Found"})})]})]})})})})}),n("div",{className:"container mx-auto mt-10 rounded-lg",children:[e("div",{className:"px-1 font-semibold  text-gray-500 mt-10 google-roboto",children:n("div",{className:"flex-initial",children:[e(j,{className:"inline"})," Recent Payments"]})}),e("div",{className:"py-0 shadow-xl mt-3 bg-white",children:e("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 overflow-x-auto w-full",children:e("div",{className:"inline-block min-w-full rounded-lg overflow-hidden",children:n("table",{className:"min-w-full leading-normal",children:[e("thead",{className:"bg-indigo-100",children:n("tr",{className:"font-semibold",children:[e("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"#"}),e("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Transaction No."}),e("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Amount"}),e("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Payment Mode"}),e("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Date"}),e("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm",children:"Action"})]})}),n("tbody",{children:[((b=i==null?void 0:i.transactionDetails)==null?void 0:b.length)!=0&&((w=i==null?void 0:i.transactionDetails)==null?void 0:w.map((l,x)=>n("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e("td",{className:"px-2 py-2 text-sm text-left",children:x+1}),e("td",{className:"px-2 py-2 text-sm text-left",children:l==null?void 0:l.tran_no}),e("td",{className:"px-2 py-2 text-sm text-left",children:l==null?void 0:l.amount}),e("td",{className:"px-2 py-2 text-sm text-left",children:l==null?void 0:l.payment_mode}),e("td",{className:"px-2 py-2 text-sm text-left",children:S(l==null?void 0:l.tran_date,"YYYY-MM-DD").format("DD-MMM-yy")}),e("td",{className:"px-2 py-2 text-sm text-left",children:e("button",{type:"button",onClick:()=>v(`/water-payment-receipt/${l==null?void 0:l.tran_no}/consumer`),className:"px-4 py-2 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View"})})]}))),((N=i==null?void 0:i.transactionDetails)==null?void 0:N.length)==0&&e("tr",{children:e("td",{colSpan:5,className:"text-center text-red-500 font-semibold py-4",children:"No Payment Found"})})]})]})})})})]})]}),a=="search"&&n(h,{children:[e("div",{className:"px-1 font-semibold  text-gray-500 mt-5 google-roboto",children:n("div",{className:"flex-initial",children:[e(j,{className:"inline"})," Search Applications by date"]})}),e(O,{})]})]})]})}const G="/assets/forward-40be1d8b.png",X="/assets/pending-8d2a86b8.png",ee="/assets/received-89599cf5.png",I=t=>e("div",{class:"transform hover:scale-105 transition duration-300 shadow-lg  m-2",children:n("div",{class:"p-5 bg-white",children:[n("div",{class:"flex justify-between border-b pb-4",children:[e("span",{className:"w-10 h-10 bg-indigo-100 rounded-full flex justify-center items-center",children:e("img",{className:"bg-indigo-50 rounded-full p-1",src:t==null?void 0:t.image,alt:""})}),e("div",{class:"bg-indigo-100 rounded-full h-6 px-2 flex justify-items-center text-indigo-600 font-semibold text-xs",children:e("span",{class:"flex items-center",children:B()})})]}),e("div",{class:"ml-2 w-full flex-1",children:e("div",{children:n("div",{class:"flex justify-between mt-4 pr-4",children:[e("div",{class:"mt-1 text-base text-gray-600",children:t==null?void 0:t.heading}),e("div",{className:"font-bold leading-8 text-xl",children:t!=null&&t.loading?e("div",{class:"spinner2"}):Q(t==null?void 0:t.total)})]})})})]})});function te(t){const[d,c]=s.useState(!1),a=t==null?void 0:t.worflowDashData;return n(h,{children:[d&&n("div",{className:"inline",children:[" ",e(z,{})," "]}),e("div",{className:"  z-0 rounded-lg",children:n("div",{className:"grid md:grid-cols-3 grid-cols-1 mt-10",children:[e(I,{image:G,heading:"Application Forwarded",total:a==null?void 0:a.todayForwardCount}),e(I,{image:ee,heading:"Application Received",total:a==null?void 0:a.todayReceivedCount}),e(I,{image:X,heading:"Total Pending Application",total:a==null?void 0:a.pendingApplication})]})})]})}const ie=t=>{const d=P();return e("div",{className:" bg-white shadow-xl py-4 px-2 md:px-6 md:py-6 mt-4 mb-10",children:n("div",{className:"flex flex-col md:flex-row",children:[n("div",{className:"flex-initial ml-4",children:[e("div",{className:"text-2xl font-bold text-black google-roboto capitalize",children:t==null?void 0:t.heading}),e("div",{className:"mt-1",children:n("span",{className:"text-gray-600",children:[e(U,{className:"inline text-green-500 text-xl"}),t==null?void 0:t.subHeading]})}),e("div",{})]}),n("div",{className:"flex-1 flex text-right justify-center items-center md:justify-end md:items-end h-full mt-4 md:mt-0",children:[e(D,{anchorId:"button-3"}),e("button",{id:"button-3","data-tooltip-content":"Click to change password.",onClick:()=>d(t==null?void 0:t.changePasswordLink),className:"mr-4 cypress_floor_add_update text-gray-700 px-4 md:px-8 py-3 bg-white-600 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-500 hover:shadow-lg focus:bg-indigo-500 hover:text-white focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Change Password"}),!(t!=null&&t.button)&&n(h,{children:[e(D,{anchorId:"button-1"}),e("button",{id:"button-1","data-tooltip-content":"Click to go to water  workflow.",onClick:()=>d(t==null?void 0:t.mainWorkflowLink),className:"cypress_floor_add_update text-white px-4 md:px-8 py-3 bg-indigo-500 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Water Workflow"})]}),(t==null?void 0:t.button)&&n(h,{children:[e(D,{anchorId:"button-2"}),e("button",{id:"button-2","data-tooltip-content":"Click to apply water connection.",onClick:()=>d(t==null?void 0:t.applyLink),className:"cypress_floor_add_update text-white px-4 md:px-8 py-3 bg-indigo-500 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Apply Water Connection"})]})]})]})})};function oe(){var f,y;const[t,d]=s.useState(null),[c,a]=s.useState(null),[W,v]=s.useState(),[i,r]=s.useState(!1),[M,m]=s.useState(!0);V(),P(),$("Home");const{api_waterWorkflowDashboardData:p,api_waterApplicationDashboardData:C,header:u}=q(),{userName:T,roles:R,setuserName:A,setroles:k}=s.useContext(E);(f=J())==null||f.ulb_name,s.useEffect(()=>{_(),L()},[]);const _=()=>{m(!0),H.post(p,{},u).then(o=>{o.data.status?(setWorflowDashData(o.data.data),m(!0)):(console.log("Failed to get Workflow dashboard data",o),m(!0))}).catch(o=>{console.log("Exception while getting Workflow dashboard data",o),m(!0)})},L=()=>{r(!0),H.post(C,{},u).then(o=>{var g,b,w,N,l,x;o.data.status?(console.log("==>> Application Dashboard data",(g=o==null?void 0:o.data)==null?void 0:g.data),k(((w=(b=o==null?void 0:o.data)==null?void 0:b.data)==null?void 0:w.roleName)||"N/A"),A(((x=(l=(N=o==null?void 0:o.data)==null?void 0:N.data)==null?void 0:l.userDetails)==null?void 0:x.user_name)||"N/A"),a(o.data.data),r(!1)):(console.log("Failed to get Dashboard data",o),r(!1))}).catch(o=>{console.log("Exception while getting dashboard data",o),r(!1)})};return S(Date()).format("DD-MMM-yy"),s.useEffect(()=>{const o=setInterval(()=>{const g=S(Date().toLocaleString()).format("hh:mm:ss A");v(g)},1e3);return()=>clearInterval(o)},[]),n(h,{children:[e(ie,{button:c==null?void 0:c.canView,matchForApply:["JSK"],matchForWf:["dealing assistant","BACK OFFICE"],allRole:(y=K("userDetails"))==null?void 0:y.roles,heading:"Water Home Page",subHeading:"Verified Account",changePasswordLink:"/change-password/change",mainWorkflowLink:"/water-workflow-new",applyLink:"/water-jsk-apply"}),i&&e("div",{className:"flex justify-center",children:e(z,{})}),(c==null?void 0:c.canView)&&e(Z,{applicationDashboardData:c}),(t==null?void 0:t.canView)&&e(te,{workflowDashData:t}),e("div",{className:"w-full h-40"})]})}export{oe as default};
