import{u as T,p as b,j as e,I as W,B as k,C as F,_ as r}from"./index-FgAh2Vi0.js";import{P as S}from"./index-BxyVfkOV.js";import{u as U,b as I}from"./useCustomQuery-BhBLTzQ6.js";import{h as L}from"./moment-BjLXg0w5.js";import{u as O}from"./useScheduleIncharge-BaWJfdo5.js";import{u as B,b as H}from"./router-DLL89Qev.js";import"./axios-DmypytPv.js";import"./headlessui-DXpdh5LM.js";function Q(){var c,n,o,d,m,f,h,x;const{user:i}=T(),a=O(),P=B(),z=H(),C=U({}),s=new URLSearchParams(z.search).get("vehicle-type"),l=I({api:b.calculateUnOrganized,key:"calculateUnOrganized",config:{vehicle_type:s,area_id:(o=(n=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:n.data[0])==null?void 0:o.location_id},value:[s],options:{enabled:!!s&&!!((f=(m=(d=a==null?void 0:a.data)==null?void 0:d.data)==null?void 0:m.data[0])!=null&&f.location_id)}}),A=async()=>{var u,p,y,j,w,g,v,N,_;if(await F("Are you sure you want to pay ticket?",{title:"Please Confirm",subTitle:"You will be redirected to receipt page",buttonTitle:"Yes, I am sure"}))try{const t=await C.mutateAsync({api:(u=b)==null?void 0:u.addUnorganized,data:{vehicle_type:s,incharge_id:i==null?void 0:i.emp_id,area_id:(j=(y=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:y.data[0])==null?void 0:j.location_id,in_time:L().format("HH:mm"),amount:(g=(w=l.data)==null?void 0:w.data)==null?void 0:g.areaAmount,payment_mode:"cash"}});(v=t==null?void 0:t.data)!=null&&v.success?(r.success("Successfully Paid"),P(`/parking-app/unorganized-receipt?receipt_no=${(_=(N=t==null?void 0:t.data)==null?void 0:N.data)==null?void 0:_.receipt_no}`,{replace:!0})):r.error("Failed to pay ticket")}catch{r.error("Failed to pay ticket")}};return e.jsxs(S,{title:"Generate Ticket",children:[e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center  flex-col gap-2",children:e.jsx("div",{className:"flex flex-1 justify-center items-center flex-row py-4",children:e.jsxs("div",{className:"flex flex-1 justify-center items-center flex-row gap-6",children:[e.jsxs("div",{className:"flex justify-center items-center flex-row gap-1",children:[e.jsx("input",{type:"radio",id:"twoWheeler",name:"vehicleType",value:"two_wheeler",className:"w-5 h-5",checked:s==="two_wheeler",onChange:()=>{}}),e.jsx("label",{htmlFor:"twoWheeler",className:"text-white",children:"Two Wheeler"})]}),e.jsxs("div",{className:"flex justify-center items-center flex-row gap-1",children:[e.jsx("input",{type:"radio",id:"fourWheeler",name:"vehicleType",value:"four_wheeler",className:"w-5 h-5",checked:s==="four_wheeler",onChange:()=>{}}),e.jsx("label",{htmlFor:"fourWheeler",className:"text-white",children:"Four Wheeler"})]})]})})})}),l.isLoading?e.jsx("div",{className:"flex justify-center items-center h-96 bg-white",children:e.jsx(W,{})}):e.jsxs("div",{className:"bg-white py-4",children:[e.jsx("div",{className:"flex justify-center items-center flex-col gap-2",children:e.jsx("div",{className:"flex flex-1 justify-center items-center flex-row py-4 mt-8",children:e.jsx("div",{className:"flex flex-col mt-2",children:e.jsxs("div",{className:"flex flex-1 flex-row py-6",children:[e.jsx("h1",{className:"font-bold",style:{fontSize:"2rem"},children:"â‚¹"}),e.jsx("div",{className:"flex justify-center items-center flex-row text-4xl",children:e.jsx("h1",{className:"font-semibold",style:{fontSize:"4.5rem"},children:((x=(h=l.data)==null?void 0:h.data)==null?void 0:x.areaAmount)??0})})]})})})}),e.jsxs("div",{className:"px-8 mt-6 w-full flex gap-3",children:[e.jsx(k,{onClick:A,variant:"default",className:"h-12 mt-6 w-full rounded-sm",size:"lg",children:"Cash"}),e.jsx(k,{variant:"default",className:"h-12 mt-6 w-full rounded-sm",size:"lg",children:"Online"})]})]})]})}export{Q as default};
