var ue={exports:{}};(function(o){var n=function(a){var u=Object.prototype,v=u.hasOwnProperty,L=Object.defineProperty||function(t,e,r){t[e]=r.value},p,w=typeof Symbol=="function"?Symbol:{},O=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",T=w.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch{f=function(e,r,i){return e[r]=i}}function m(t,e,r,i){var s=e&&e.prototype instanceof B?e:B,d=Object.create(s.prototype),E=new y(i||[]);return L(d,"_invoke",{value:V(t,r,E)}),d}a.wrap=m;function N(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(i){return{type:"throw",arg:i}}}var g="suspendedStart",C="suspendedYield",I="executing",P="completed",j={};function B(){}function D(){}function $(){}var K={};f(K,O,function(){return this});var H=Object.getPrototypeOf,U=H&&H(H(b([])));U&&U!==u&&v.call(U,O)&&(K=U);var M=$.prototype=B.prototype=Object.create(K);D.prototype=$,L(M,"constructor",{value:$,configurable:!0}),L($,"constructor",{value:D,configurable:!0}),D.displayName=f($,T,"GeneratorFunction");function Y(t){["next","throw","return"].forEach(function(e){f(t,e,function(r){return this._invoke(e,r)})})}a.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===D||(e.displayName||e.name)==="GeneratorFunction":!1},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,f(t,T,"GeneratorFunction")),t.prototype=Object.create(M),t},a.awrap=function(t){return{__await:t}};function F(t,e){function r(d,E,k,A){var S=N(t[d],t,E);if(S.type==="throw")A(S.arg);else{var Z=S.arg,J=Z.value;return J&&typeof J=="object"&&v.call(J,"__await")?e.resolve(J.__await).then(function(G){r("next",G,k,A)},function(G){r("throw",G,k,A)}):e.resolve(J).then(function(G){Z.value=G,k(Z)},function(G){return r("throw",G,k,A)})}}var i;function s(d,E){function k(){return new e(function(A,S){r(d,E,A,S)})}return i=i?i.then(k,k):k()}L(this,"_invoke",{value:s})}Y(F.prototype),f(F.prototype,_,function(){return this}),a.AsyncIterator=F,a.async=function(t,e,r,i,s){s===void 0&&(s=Promise);var d=new F(m(t,e,r,i),s);return a.isGeneratorFunction(e)?d:d.next().then(function(E){return E.done?E.value:d.next()})};function V(t,e,r){var i=g;return function(d,E){if(i===I)throw new Error("Generator is already running");if(i===P){if(d==="throw")throw E;return z()}for(r.method=d,r.arg=E;;){var k=r.delegate;if(k){var A=c(k,r);if(A){if(A===j)continue;return A}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(i===g)throw i=P,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);i=I;var S=N(t,e,r);if(S.type==="normal"){if(i=r.done?P:C,S.arg===j)continue;return{value:S.arg,done:r.done}}else S.type==="throw"&&(i=P,r.method="throw",r.arg=S.arg)}}}function c(t,e){var r=e.method,i=t.iterator[r];if(i===p)return e.delegate=null,r==="throw"&&t.iterator.return&&(e.method="return",e.arg=p,c(t,e),e.method==="throw")||r!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),j;var s=N(i,t.iterator,e.arg);if(s.type==="throw")return e.method="throw",e.arg=s.arg,e.delegate=null,j;var d=s.arg;if(!d)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,j;if(d.done)e[t.resultName]=d.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=p);else return d;return e.delegate=null,j}Y(M),f(M,T,"Generator"),f(M,O,function(){return this}),f(M,"toString",function(){return"[object Generator]"});function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}a.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function s(){for(;r.length;){var d=r.pop();if(d in e)return s.value=d,s.done=!1,s}return s.done=!0,s}};function b(t){if(t){var e=t[O];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,i=function s(){for(;++r<t.length;)if(v.call(t,r))return s.value=t[r],s.done=!1,s;return s.value=p,s.done=!0,s};return i.next=i}}return{next:z}}a.values=b;function z(){return{value:p,done:!0}}return y.prototype={constructor:y,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(h),!t)for(var e in this)e.charAt(0)==="t"&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(A,S){return d.type="throw",d.arg=t,e.next=A,S&&(e.method="next",e.arg=p),!!S}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],d=s.completion;if(s.tryLoc==="root")return r("end");if(s.tryLoc<=this.prev){var E=v.call(s,"catchLoc"),k=v.call(s,"finallyLoc");if(E&&k){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(E){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else if(k){if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&v.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&(t==="break"||t==="continue")&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var d=s?s.completion:{};return d.type=t,d.arg=e,s?(this.method="next",this.next=s.finallyLoc,j):this.complete(d)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),j},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),h(r),j}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if(i.type==="throw"){var s=i.arg;h(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:b(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=p),j}},a}(o.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(ue);var x=(o,n)=>`${o}-${n}-${Math.random().toString(16).slice(3,8)}`;const fe=x;let te=0;var ae=({id:o,action:n,payload:a={}})=>{let u=o;return typeof u>"u"&&(u=fe("Job",te),te+=1),{id:u,action:n,payload:a}},W={};let ee=!1;W.logging=ee;W.setLogging=o=>{ee=o};W.log=(...o)=>ee?void 0:null;const de=ae,{log:q}=W,pe=x;let re=0;var he=()=>{const o=pe("Scheduler",re),n={},a={};let u=[];re+=1;const v=()=>u.length,L=()=>Object.keys(n).length,p=()=>{if(u.length!==0){const f=Object.keys(n);for(let m=0;m<f.length;m+=1)if(typeof a[f[m]]>"u"){u[0](n[f[m]]);break}}},w=(f,m)=>new Promise((N,g)=>{const C=de({action:f,payload:m});u.push(async I=>{u.shift(),a[I.id]=C;try{N(await I[f].apply(void 0,[...m,C.id]))}catch(P){g(P)}finally{delete a[I.id],p()}}),q(`[${o}]: Add ${C.id} to JobQueue`),q(`[${o}]: JobQueue length=${u.length}`),p()});return{addWorker:f=>(n[f.id]=f,q(`[${o}]: Add ${f.id}`),q(`[${o}]: Number of workers=${L()}`),p(),f.id),addJob:async(f,...m)=>{if(L()===0)throw Error(`[${o}]: You need to have at least one worker before adding jobs`);return w(f,m)},terminate:async()=>{Object.keys(n).forEach(async f=>{await n[f].terminate()}),u=[]},getQueueLen:v,getNumWorkers:L}};function ve(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function ge(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var we=ge;const me=we;var ye=o=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":me()?n.type="electron":typeof window=="object"?n.type="browser":typeof process=="object"&&typeof ve=="function"&&(n.type="node"),typeof o>"u"?n:n[o]};const be=ye("type")==="browser",Le=be?o=>new URL(o,window.location.href).href:o=>o;var Ee=o=>{const n={...o};return["corePath","workerPath","langPath"].forEach(a=>{o[a]&&(n[a]=Le(n[a]))}),n},ke=o=>{const n=[],a=[],u=[],v=[],L=[];return o.blocks&&o.blocks.forEach(p=>{p.paragraphs.forEach(w=>{w.lines.forEach(O=>{O.words.forEach(_=>{_.symbols.forEach(T=>{L.push({...T,page:o,block:p,paragraph:w,line:O,word:_})}),v.push({..._,page:o,block:p,paragraph:w,line:O})}),u.push({...O,page:o,block:p,paragraph:w})}),a.push({...w,page:o,block:p})}),n.push({...p,page:o})}),{...o,blocks:n,paragraphs:a,lines:u,words:v,symbols:L}},ie={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Se=ie;var Oe={defaultOEM:Se.DEFAULT};const je="tesseract.js",Ae="4.1.1",Re="Pure Javascript Multilingual OCR",$e="src/index.js",_e="src/index.d.ts",Te="dist/tesseract.min.js",Ne="dist/tesseract.min.js",Ie={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Pe={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Me="",Ce=["jeromewu"],Ge="Apache-2.0",De={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Ue={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^4.0.4","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Fe={"@rollup/pluginutils":"^5.0.2"},ze={type:"git",url:"https://github.com/naptha/tesseract.js.git"},We={url:"https://github.com/naptha/tesseract.js/issues"},Be="https://github.com/naptha/tesseract.js",Ke={type:"opencollective",url:"https://opencollective.com/tesseractjs"},He={name:je,version:Ae,description:Re,main:$e,types:_e,unpkg:Te,jsdelivr:Ne,scripts:Ie,browser:Pe,author:Me,contributors:Ce,license:Ge,devDependencies:De,dependencies:Ue,overrides:Fe,repository:ze,bugs:We,homepage:Be,collective:Ke};var Je={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}},Ye={};const qe=o=>new URL(o,window.location.href).href,{version:Ve}=He,Ze=Je;var Qe={...Ze,workerPath:typeof process<"u"&&Ye.TESS_ENV==="development"?qe(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`):`https://cdn.jsdelivr.net/npm/tesseract.js@v${Ve}/dist/worker.min.js`,corePath:null},Xe=({workerPath:o,workerBlobURL:n})=>{let a;if(Blob&&URL&&n){const u=new Blob([`importScripts("${o}");`],{type:"application/javascript"});a=new Worker(URL.createObjectURL(u))}else a=new Worker(o);return a},xe=o=>{o.terminate()},et=(o,n)=>{o.onmessage=({data:a})=>{n(a)}},tt=async(o,n)=>{o.postMessage(n)};const Q=o=>new Promise((n,a)=>{const u=new FileReader;u.onload=()=>{n(u.result)},u.onerror=({target:{error:{code:v}}})=>{a(Error(`File could not be read! Code=${v}`))},u.readAsArrayBuffer(o)}),X=async o=>{let n=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?n=atob(o.split(",")[1]).split("").map(a=>a.charCodeAt(0)):n=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(n=await X(o.src)),o.tagName==="VIDEO"&&(n=await X(o.poster)),o.tagName==="CANVAS"&&await new Promise(a=>{o.toBlob(async u=>{n=await Q(u),a()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const a=await o.convertToBlob();n=await Q(a)}else(o instanceof File||o instanceof Blob)&&(n=await Q(o));return new Uint8Array(n)};var rt=X;const ot=Qe,nt=Xe,st=xe,at=et,it=tt,ct=rt;var lt={defaultOptions:ot,spawnWorker:nt,terminateWorker:st,onMessage:at,send:it,loadImage:ct};const ut=Ee,ft=ke,R=ae,{log:oe}=W,dt=x,{defaultOEM:pt}=Oe,{defaultOptions:ht,spawnWorker:vt,terminateWorker:gt,onMessage:wt,loadImage:ne,send:mt}=lt;let se=0;var ce=async(o={})=>{const n=dt("Worker",se),{logger:a,errorHandler:u,...v}=ut({...ht,...o}),L={},p={};let w,O;const _=new Promise((c,l)=>{O=c,w=l}),T=c=>{w(c.message)};let f=vt(v);f.onerror=T,se+=1;const m=(c,l)=>{L[c]=l},N=(c,l)=>{p[c]=l},g=({id:c,action:l,payload:h})=>new Promise((y,b)=>{oe(`[${n}]: Start ${c}, action=${l}`),m(l,y),N(l,b),mt(f,{workerId:n,jobId:c,action:l,payload:h})}),C=()=>{},I=c=>g(R({id:c,action:"load",payload:{options:v}})),P=(c,l,h)=>g(R({id:h,action:"FS",payload:{method:"writeFile",args:[c,l]}})),j=(c,l)=>g(R({id:l,action:"FS",payload:{method:"readFile",args:[c,{encoding:"utf8"}]}})),B=(c,l)=>g(R({id:l,action:"FS",payload:{method:"unlink",args:[c]}})),D=(c,l,h)=>g(R({id:h,action:"FS",payload:{method:c,args:l}})),$=(c="eng",l)=>g(R({id:l,action:"loadLanguage",payload:{langs:c,options:v}})),K=(c="eng",l=pt,h,y)=>g(R({id:y,action:"initialize",payload:{langs:c,oem:l,config:h}})),H=(c={},l)=>g(R({id:l,action:"setParameters",payload:{params:c}})),U=async(c,l={},h={blocks:!0,text:!0,hocr:!0,tsv:!0},y)=>g(R({id:y,action:"recognize",payload:{image:await ne(c),options:l,output:h}})),M=(c="Tesseract OCR Result",l=!1,h)=>g(R({id:h,action:"getPDF",payload:{title:c,textonly:l}})),Y=async(c,l)=>g(R({id:l,action:"detect",payload:{image:await ne(c)}})),F=async()=>(f!==null&&(gt(f),f=null),Promise.resolve());wt(f,({workerId:c,jobId:l,status:h,action:y,data:b})=>{if(h==="resolve"){oe(`[${c}]: Complete ${l}`);let z=b;y==="recognize"?z=ft(b):y==="getPDF"&&(z=Array.from({...b,length:Object.keys(b).length})),L[y]({jobId:l,data:z})}else if(h==="reject")if(p[y](b),y==="load"&&w(b),u)u(b);else throw Error(b);else h==="progress"&&a({...b,userJobId:l})});const V={id:n,worker:f,setResolve:m,setReject:N,load:C,writeText:P,readText:j,removeFile:B,FS:D,loadLanguage:$,initialize:K,setParameters:H,recognize:U,getPDF:M,detect:Y,terminate:F};return I().then(()=>O(V)).catch(()=>{}),_};const le=ce,yt=async(o,n,a)=>{const u=await le(a);return await u.loadLanguage(n),await u.initialize(n),u.recognize(o).finally(async()=>{await u.terminate()})},bt=async(o,n)=>{const a=await le(n);return await a.loadLanguage("osd"),await a.initialize("osd"),a.detect(o).finally(async()=>{await a.terminate()})};var Lt={recognize:yt,detect:bt},Et={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},kt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const St=he,Ot=ce,jt=Lt,At=Et,Rt=ie,$t=kt,{setLogging:_t}=W;var Tt={languages:At,OEM:Rt,PSM:$t,createScheduler:St,createWorker:Ot,setLogging:_t,...jt};export{Tt as s};
