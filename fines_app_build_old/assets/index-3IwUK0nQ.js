import{j as t,u as v,a as w,_ as p,P as L}from"./index-xq9jTTfh.js";import{r as C,d as P}from"./router-WshRxXk2.js";import{T as j,u as R,F as q,P as A,L as S}from"./TextArea-1v4UYNvG.js";import{c as T,a as u}from"./index.esm-Wdru5IDi.js";import{u as N}from"./useErrorFocusField-dZsYFtof.js";import{u as U}from"./useCustomQuery-9edUl8Ze.js";import"./reactQuery-2daanlHr.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-YpSsR79r.js";import"./tailwind-Ucrx0-S6.js";import"./reactLazyLoadImageComponent-2lnvQYCj.js";import"./reactIcons-UnuJhE_7.js";import"./headlessui-oHdMYZDI.js";const k=()=>{const[n,d]=C.useState(""),s=()=>{const i=Math.random().toString(36).slice(2,8).toUpperCase();d(i)},m=(i,r)=>i===n?!0:(r({captcha:""},!1),s(),!1),e=document.createElement("canvas");e.style.margin="0",e.style.padding="0",e.width=100,e.height=22;const c=e.getContext("2d");c.font="bold 15px Arial",c.fillStyle="blue",c.fillText(n,21,16);const o=e.toDataURL();return C.useEffect(()=>{s()},[]),{catptchaTextField:i=>t.jsx("div",{children:t.jsx(j,{name:"captcha",placeholder:"Enter captcha",formik:i})}),captcha:n,dataUrl:o,verifyCaptcha:m,generateCaptcha:s}},I=k;function X(){const{captcha:n,catptchaTextField:d,generateCaptcha:s,verifyCaptcha:m,dataUrl:e}=I(),{AutoFocusErrorField:c}=N(),o=v(),{mutateAsync:h,isLoading:i}=U({}),r=R({initialValues:{email:"",password:"",type:"mobile",captcha:""},validationSchema:T({email:u().required("Required").email("Invalid email address"),password:u().required("Required"),captcha:u().required("Required")}),onSubmit:async(l,{resetForm:F})=>{var x,f,g;if(m(l==null?void 0:l.captcha,F))try{const a=await h({api:w.login1,data:l});((x=a==null?void 0:a.data)==null?void 0:x.status)===!0?(o==null||o.login(a),p.success((f=a==null?void 0:a.data)==null?void 0:f.message)):p.error((g=a==null?void 0:a.data)==null?void 0:g.message)}catch(a){console.log(a)}else p.error("Invalid Captcha")}}),{isSubmitting:y,submitCount:b,errors:E}=r;return P.useEffect(()=>{c({formik:r})},[E,b,y]),t.jsx(L,{title:"Login",children:t.jsx("div",{children:t.jsxs(q,{formik:r,children:[t.jsx(j,{label:"Email",name:"email",type:"email",inputValidation:["email"],formik:r,placeholder:"Enter your register Email ID"}),t.jsx(A,{label:"Password",name:"password",formik:r}),t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("div",{className:"bg-gray-400 px-4 py-1 rounded-sm",children:t.jsx("img",{src:e,alt:"captcha"})}),t.jsx("button",{type:"button",onClick:s,className:"text-[#5846BE] text-sm",children:"Reload Captcha"})]}),d(r)," ",t.jsx("div",{className:"text-center mt-8",children:t.jsx(S,{type:"submit",loading:i,disabled:i,children:"Login"})})]})})})}export{X as default};
