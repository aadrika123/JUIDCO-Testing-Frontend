import{j as t,r as i,a as O,A as q,b as $,c as p,C as ee,d as G,e as V}from"./index-8c4905ff.js";function te({filter:e,setFilter:r}){return t.jsxs(t.Fragment,{children:["Search : "," ",t.jsx("input",{className:"border-2 border-gray-600 px-2 bg-gray-200",type:"text",value:e||"",onChange:u=>r(u.target.value)})]})}function ae(e){const[r,u]=i.useState("hidden"),w=i.useMemo(()=>e.columns,[]),g=i.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[x,C]=i.useState(0);i.useEffect(()=>{C(0)},[e==null?void 0:e.totalCount]),i.useEffect(()=>{let l=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?F(parseInt(l)+1):F(parseInt(l))},[e==null?void 0:e.totalCount,e.perPageData]);const{getTableBodyProps:P,headerGroups:v,prepareRow:h,setPageSize:F,state:S,rows:B,setGlobalFilter:T}=O.useTable({columns:w,data:g,initialState:{pageIndex:0}},O.useGlobalFilter,O.useSortBy,O.usePagination),{globalFilter:D,pageSize:M}=S,m=()=>{if(parseInt(x)>0&&parseInt(x)<=parseInt(e==null?void 0:e.lastPage))e==null||e.gotoPage(parseInt(x));else return!1},f=()=>{(e==null?void 0:e.lastPage)!=(e==null?void 0:e.currentPage)&&e.nextPage()},L=()=>{(e==null?void 0:e.currentPage)!=1&&e.prevPage()};return console.log(e.perPageData,"perPageC==>"),t.jsxs(t.Fragment,{children:[(e==null?void 0:e.search)==!1?t.jsxs("div",{className:"absolute -mt-[6.5vh] right-[2vw]",children:[t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-slate-600 px-3 pr-3  drop-shadow-lg rounded-sm py-1 text-white hover:shadow-2xl hover:bg-slate-800 text-center relative",onMouseEnter:()=>u(""),onMouseLeave:()=>u("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:r+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(q,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]}):t.jsxs("div",{className:"flex mb-2 pb-2 items-end max-sm:p-2",children:[t.jsx("div",{className:"flex-initial opacity-50",children:t.jsx(te,{filter:D,setFilter:T})}),t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-slate-600 px-3 pr-3  drop-shadow-lg rounded-sm py-1 text-white hover:shadow-2xl hover:bg-slate-800 text-center relative",onMouseEnter:()=>u(""),onMouseLeave:()=>u("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:r+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(q,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]}),t.jsx("div",{className:"flex w-full",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-gray-600",children:"Total Result : "}),t.jsx("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),t.jsx("div",{className:"px-2 py-2 overflow-x-auto bg-white",children:t.jsxs("div",{className:"inline-block min-w-full overflow-hidden bg-white",children:[t.jsxs("table",{...P,className:"min-w-full leading-normal",children:[t.jsx("thead",{className:"font-bold text-left text-sm bg-slate-200",children:v==null?void 0:v.map(l=>t.jsx("tr",{...l.getHeaderGroupProps(),children:l.headers.map(s=>t.jsxs("th",{...s.getHeaderProps(s.getSortByToggleProps()),className:(s==null?void 0:s.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[s.render("Header"),t.jsx("span",{children:s.isSorted?s.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),t.jsxs("tbody",{...P(),className:"text-sm",children:[B.map((l,s)=>{var k;return h(l),t.jsx("tr",{...l.getRowProps(),className:"bg-white hover:bg-slate-100 border-b border-gray-200",children:(k=l==null?void 0:l.cells)==null?void 0:k.map((E,A)=>t.jsx("td",{...E.getCellProps(),className:"px-2 py-2 text-sm text-left",children:E.render("Cell")}))})}),t.jsx("tr",{children:t.jsx("td",{})})]})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-12 items-center",children:[t.jsxs("div",{className:"sm:col-span-2 col-span-3 flex w-full ml-1 pr-10",children:[t.jsx("span",{children:t.jsx("input",{className:"h-10 w-[90%] placeholder:text-gray-600 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-1 ",type:"number",onChange:l=>{C(l.target.value)},placeholder:"Go to page..."})}),t.jsxs("abbr",{className:"cursor-pointer flex items-center w-[15%] no-underline",title:"Go",onClick:()=>m(),children:[" ",t.jsx("span",{className:"font-bold bg-green-300 text-xl px-2 pb-1 rounded-full hover:text-white hover:bg-green-500",children:"⇨"})," "]})]}),t.jsxs("div",{className:"col-span-2",children:[" ",t.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:e.perPageData,onChange:l=>{e.setPerPageData(Number(l.target.value)),e.perPageC(Number(l.target.value))},children:[5,10,25,50].map(l=>t.jsxs("option",{value:l,children:["show ",l]},l))})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-center sm:col-start-5 col-start-7",children:[" ",t.jsxs("span",{children:["page ","",t.jsxs("strong",{children:[e==null?void 0:e.currentPage," of ",e==null?void 0:e.lastPage]}),""]})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-right",children:[t.jsx("abbr",{title:"First Page",children:t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>e==null?void 0:e.goFirst(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:[t.jsx($,{})," "]})}),t.jsx("abbr",{title:"Previous Page",children:t.jsx("button",{className:((e==null?void 0:e.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>L(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:"⬅️"})}),t.jsx("abbr",{title:"Next Page",children:t.jsx("button",{className:((e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>f(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:"➡️"})}),t.jsx("abbr",{title:"Last Page",children:t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>e==null?void 0:e.goLast(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:[" ",t.jsx(p,{})]})})]})]})]})})]})}const ne=()=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col bg-white p-4 space-y-4 rounded-md",children:[t.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"}),t.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"}),t.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"}),t.jsx("div",{className:"bg-gray-200 w-full h-10 flex justify-center items-center p-4 animate"})]})}),ie=e=>{const[r,u]=i.useState(10),[w,g]=i.useState(1),[x,C]=i.useState(0),[P,v]=i.useState(0),[h,F]=i.useState(0),[S,B]=i.useState(),[T,D]=i.useState(!1),[M,m]=i.useState(!1),[f,L]=i.useState([]),[l,s]=i.useState(!1),[k,E]=i.useState(10),A=()=>{m(!1),s(!0),Object.keys(e==null?void 0:e.requestBody).length!==0&&typeof e.loader=="function"&&e.loader(!0),G.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:r,page:w},V()).then(a=>{var d,c,b,I,y,n,H,j,N,o;((d=a==null?void 0:a.data)==null?void 0:d.status)==!0?(e!=null&&e.getData&&(e==null||e.allData((c=a==null?void 0:a.data)==null?void 0:c.data)),L((I=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:I.data),F((n=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:n.total),C((j=(H=a==null?void 0:a.data)==null?void 0:H.data)==null?void 0:j.currentPage),v((o=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:o.lastPage),m(!1)):(console.log("false error while getting list => ",a),m(!0))}).catch(a=>(console.log("error while getting list => ",a),m(!0))).finally(()=>{s(!1),Object.keys(e==null?void 0:e.requestBody).length!==0&&typeof e.loader=="function"&&e.loader(!1),m(!1)})},z=()=>{g(x+1)},J=()=>{g(x-1)},K=a=>{let d=parseInt(h/a),c=parseInt(h%a);if(c==0){d<x&&g(d),u(a);return}if(c!=0){d+1<x&&g(d+1),u(a);return}},Q=()=>{g(1)},U=()=>{g(P)},W=a=>{g(a)},X=a=>a==null?void 0:a.map((c,b)=>{var y;const I=(y=e==null?void 0:e.columns)==null?void 0:y.map((n,H)=>{var N,o;var j=c[n==null?void 0:n.accessor];if(n!=null&&n.option&&((N=n==null?void 0:n.option)==null?void 0:N.length)>0){const R=(o=n==null?void 0:n.option)==null?void 0:o.find(_=>_.hasOwnProperty(c[n==null?void 0:n.accessor]));R?j=R[c[n==null?void 0:n.accessor]]:j=c[n==null?void 0:n.accessor]}return(n==null?void 0:n.Header.toLowerCase())!="action"&&{[n==null?void 0:n.Header]:n!=null&&n.accessor?j:b+1}});return Object.assign({},...I)}),Y=()=>{s(!0),D(!1),G.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:h},V()).then(a=>{var d,c,b;((d=a==null?void 0:a.data)==null?void 0:d.status)==!0&&(B(X((b=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:b.data)),Z()),s(!1)}).catch(a=>{s(!1)})},Z=()=>{D(!0)};return i.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(g(1),u(10),A())},[e==null?void 0:e.changeData]),i.useEffect(()=>{s(!0),A()},[w,r]),t.jsxs(t.Fragment,{children:[M&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Sorry! "}),t.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),T&&t.jsx(ee,{data:S}),l&&t.jsx(ne,{}),!l&&(f==null?void 0:f.length)>0?t.jsx("div",{className:"mb-10",children:t.jsx(ae,{search:e==null?void 0:e.search,currentPage:x,lastPage:P,goFirst:Q,goLast:U,count1:h,columns:e==null?void 0:e.columns,dataList:f,exportStatus:e==null?void 0:e.exportStatus,perPage:r,perPageC:K,totalCount:h,nextPage:z,prevPage:J,exportDataF:Y,exportData:S,gotoPage:a=>W(a),perPageData:k,setPerPageData:E})}):t.jsx(t.Fragment,{children:!l&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})};export{ie as default};
