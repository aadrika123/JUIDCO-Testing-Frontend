import{a as m,u as I,r as n,b as z,o as U,j as s,F as R,C as f,a0 as d,R as w,A as p,B as A,c as C,d as b,k as _,g as E,_ as j,I as T,H as N,L as q}from"./index-BhUdOP_r.js";import{S as Y}from"./star-BhssAKL8.js";const u=C().shape({citizenName:b().required("Citizen Name is required"),feedback:b().required("Feedback is required")});function B(a){const{currentLanguage:e}=m(),F=new URLSearchParams(_().search).get("complaintId"),y=I({}),{user:i}=m(),[x,S]=n.useState(0),c=z({defaultValues:{citizenName:(i==null?void 0:i.fullName)??"",citizenRating:"",suggestion:"",feedback:"",role:(i==null?void 0:i.role)??"",imageUrl:(i==null?void 0:i.imageUrl)??""},resolver:U(u)}),k=async t=>{var l,h;try{const o=await y.mutateAsync({api:E.createCitizenFeedback,data:{citizenName:t.citizenName,citizenRating:x,feedback:t.feedback,suggestion:t.suggestion,imageUrl:i==null?void 0:i.imageUrl,role:i==null?void 0:i.role,userId:i==null?void 0:i._id,complaintId:F}});(l=o.data)!=null&&l.success?j.success((h=o==null?void 0:o.data)==null?void 0:h.message):j.error("Feedback not submitted"),c.reset({ulbId:"",moduleId:""})}catch(o){console.log(o)}},v=t=>{S(t)};return n.useEffect(()=>{a==null||a.setUserImage(i==null?void 0:i.imageUrl)},[]),s.jsx(R,{methods:c,onSubmit:c.handleSubmit(k),children:s.jsxs("div",{className:"md:px-24 space-y-4",children:[s.jsx(f,{className:"text-xl text-primary font-bold",children:e==null?void 0:e.RU}),s.jsx("div",{className:"flex space-x-4",children:[...Array(5)].map((t,l)=>s.jsx("span",{onClick:()=>v(l+1),children:s.jsx(Y,{size:30,className:`inline cursor-pointer ${l<x?"text-yellow-500":"text-gray-300"}`})},l))}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"citizenName",children:e==null?void 0:e.WY_NAME}),s.jsx(w,{className:"bg-background w-full rounded-md p-4  border",name:"citizenName",placeholder:e==null?void 0:e.EYN})]}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"complaintTitle",children:e==null?void 0:e.FB}),s.jsx(p,{className:"bg-background w-full rounded-md p-4 h-40 border",name:"feedback",placeholder:e==null?void 0:e.EYF})]}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"complaintTitle",children:e==null?void 0:e.WG_SUG}),s.jsx(p,{className:"bg-background w-full rounded-md p-2  border",name:"suggestion",placeholder:e==null?void 0:e.EYS})]}),s.jsx("div",{className:"col-span-3",children:s.jsx(A,{isLoading:c.formState.isSubmitting,type:"submit",className:" w-auto rounded-xl px-10 float-right",children:e==null?void 0:e.SBMT})})]})})}function g(){const{currentLanguage:a}=m(),[e,r]=n.useState("");return s.jsxs("div",{className:"grid grid-cols-4",children:[s.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4",children:[s.jsx(f,{className:"text-xl text-primary font-bold"}),s.jsx(T,{src:e||"/images/complain_boy.png",className:"w-40"}),s.jsx(N,{className:"text-center",children:a==null?void 0:a.FFTGUYF}),s.jsxs(N,{className:"text-center",children:[a==null?void 0:a.YFIVIFU,s.jsx(q,{target:"_blank",className:"underline hover:text-primary",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:a==null?void 0:a.JSK2})," ",a==null?void 0:a.JSK2]})]}),s.jsx("div",{className:"col-span-4 md:col-span-3 p-10 bg-gray-50 h-screen",children:s.jsx(B,{setUserImage:r})})]})}export{g as default};
