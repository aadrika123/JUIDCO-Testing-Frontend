import{j as e,a as w,r as f,f as R,s as $,g as I,C as k,I as _,a3 as i}from"./index-BhUdOP_r.js";import{A as z,a as E,b as G,c as S}from"./accordion-DCHMDhy3.js";import{P as O,a as T,b as Y,c as B}from"./pagination-B5OvJmEf.js";import{P as F}from"./index-Dz8sjSL2.js";const H=[5,10,15,20];function U({page:n,perPage:c,totalPage:r,hasNextPage:t,hasPrevPage:d,setPage:l,setPerPage:o}){return e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsx("div",{children:e.jsx("select",{className:"border  border-gray-300  rounded-md px-2 py-1.5 ",value:c,onChange:a=>o(parseInt(a.target.value)),children:H.map(a=>e.jsx("option",{value:a,children:a},a))})}),e.jsxs(O,{children:[e.jsx(T,{className:"cursor-pointer",onClick:()=>{d&&l(a=>a-1)},children:"Previous"}),e.jsxs(Y,{children:[n,"of ",r]}),e.jsx(B,{className:"cursor-pointer","aria-disabled":n==r,onClick:()=>{t&&l(a=>a+1)},children:"Next"})]})]})}function V(){var g,j,p,m,v,N,u,P,b;const{currentLanguage:n}=w(),[c,r]=f.useState(1),[t,d]=f.useState(10),{user:l}=w(),o=R(),a=$({api:`${I.getCitizenComplaints}?page=${c}&limit=${t}&citizenId=${l==null?void 0:l._id}`,key:`getAllComplaint_${c}_${t}_${(l==null?void 0:l._id)||"noUser"}`,options:{enabled:!!(l!=null&&l._id)}});f.useEffect(()=>{l!=null&&l._id&&a.refetch()},[c,t,l==null?void 0:l._id]);const h=((j=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:j.totalDocs)||0,x=h>0?(m=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:m.totalPages:1,y=c<x,A=c>1;return console.log("complaintData?.data?.data?.totalPage",(N=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:N.totalPages),console.log("totalPages",x),e.jsxs("div",{className:"container  mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-center lg:flex",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs(k,{className:"text-3xl font-bold opacity-60",children:[n==null?void 0:n.ARG,"(",h,")"]}),e.jsx("h1",{className:"mt-2 pr-20 text-xl font-semibold text-gray-800 dark:text-white lg:text-3xl mb-4",children:n==null?void 0:n.YCRAROC})]}),e.jsx("div",{className:"md:flex items-center justify-center w-full mt-6 lg:mt-0 lg:w-1/2 hidden sm:block",children:e.jsx(_,{width:251,height:263,className:"w-52",src:"/images/complaint.png",alt:"email illustration vector art"})})]}),e.jsx(z,{type:"single",collapsible:!0,className:"w-full bg-white px-2",children:(b=(P=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:P.docs)==null?void 0:b.map((s,C)=>e.jsxs(E,{value:`item-${C+1}`,children:[e.jsx(G,{children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{children:C+1}),e.jsx(_,{className:"w-6",src:"/images/profile.png",alt:"Profile Icon"}),e.jsxs("div",{className:"text-lg",children:["Status:"," ",(s==null?void 0:s.wf_status)===3&&e.jsx(i,{className:"ml-2 bg-amber-500",children:"Pending (Re-opened)"}),(s==null?void 0:s.wf_status)===2&&e.jsx(i,{className:"ml-2",variant:"destructive",children:"Rejected"}),(s==null?void 0:s.wf_status)===1&&e.jsx(i,{className:"ml-2",variant:"success",children:"Resolved"}),(s==null?void 0:s.wf_status)===0&&e.jsx(i,{className:"ml-2",variant:"secondary",children:"Pending"}),e.jsxs("span",{className:"ml-6",children:["Grievance no: ",s.complaintRefNo]})]})]})}),e.jsxs(S,{className:"pl-10 flex",children:[e.jsx("div",{className:"flex-1 ml-8",children:s.complaintDescription}),e.jsx("div",{className:"flex-1 flex justify-end",children:e.jsxs("div",{children:[e.jsx(i,{className:"ml-4 cursor-pointer",variant:"secondary",onClick:()=>o(`/grievance/citizen-dashboard/citizen-review?complaintId=${s==null?void 0:s._id}`),children:"Give Your Feedback"}),e.jsx(i,{className:"ml-4 cursor-pointer",onClick:()=>o(`/grievance/citizen-dashboard/citizen-complaint-details?complaintRefNo=${s==null?void 0:s.complaintRefNo}`),children:"View Details"})]})})]})]},s==null?void 0:s._id))}),e.jsx("div",{className:"flex w-full justify-end mt-4",children:e.jsx(U,{page:c,perPage:t,totalPage:x,hasNextPage:y,hasPrevPage:A,setPage:r,setPerPage:d})})]})}function Q(){return e.jsx(F,{title:"",children:e.jsx(V,{})})}export{Q as default};
