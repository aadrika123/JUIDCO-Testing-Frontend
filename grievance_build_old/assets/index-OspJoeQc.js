import{a as B,r as n,k as T,u as ee,c as se,d as ae,b as te,o as re,j as e,b3 as ne,aP as E,_ as m,g as ie,C as le,I as ce,H as R}from"./index-BhUdOP_r.js";function oe(){const{currentLanguage:a}=B(),[de,I]=n.useState(null),i=new URLSearchParams(T().search).get("type"),[pe,C]=n.useState(null),U=ee({}),j={};n.useEffect(()=>{(async()=>{try{const o=await(await E.post("https://jharkhandegovernance.com/auth/api/property/details/get-owner-details")).data;C(o)}catch(l){console.error("Error fetching user details:",l)}})()},[]),n.useEffect(()=>{I(i?j[i]:null),Y()},[i,j]);const[x,h]=n.useState(""),[u,b]=n.useState([]),[M,f]=n.useState(!1),[p,F]=n.useState("default_type"),[O,g]=n.useState(!1),[D,y]=n.useState(!1),[s,v]=n.useState(null),[N,_]=n.useState(!1),[P,$]=n.useState(!1),[G,q]=n.useState();n.useState(!1),n.useState("");const[K,ue]=n.useState("");n.useState(null),n.useState(!1),n.useState(!1);const[H,xe]=n.useState(!1);n.useState({}),n.useEffect(()=>{b([]),f(!1)},[p]);const w=async()=>{var l;if(!x.trim()){alert("Please enter a valid search query.");return}const t={MOBILE_NUMBER:"mobileNo",HOLDING_NUMBER:"holdingNo",SAF_NUMBER:"safNo",CONSUMER_NUMBER:"consumerNo",APPLICATION_NUMBER:"applicationNo",LICENSE_NUMBER:"licenseNo",BOOKING_NUMBER:"bookingNo"};_(!0);try{const o=z(i)||"https://jharkhandegovernance.com/auth/api/property/details/get-owner-details",d=await E.post(o,{filterBy:t[p],filterValue:x});d.status===200&&((l=d.data)!=null&&l.data)?(b(d.data.data),f(!0),m.success("Data Search successful!"),h("")):(m.error("No results found."),b([]),f(!1))}catch(o){console.error("Error fetching data:",o),m.error("Failed to fetch owner details. Please try again later.")}finally{_(!1)}},V=async t=>{v(t),y(!0)},W=t=>{v(t),g(!0)},z=t=>({property:"https://jharkhandegovernance.com/auth/api/property/details/get-owner-details",water:"https://jharkhandegovernance.com/auth/api/water/consumer/get-owner-details",trade_License:"https://jharkhandegovernance.com/auth/api/trade/application-search/get-owner-details",septic_Tank_Cleaning:"https://jharkhandegovernance.com/auth/api/septic-tanker/serchSepticTankerInfo",pet_Registration:"https://jharkhandegovernance.com/auth/api/pet/application/searh-pet-details",water_Tanker_Booking:"https://jharkhandegovernance.com/auth/api/water-tanker/searchWaterTankerInfo",lodge_And_Banquet_Registration:"https://jharkhandegovernance.com/auth/api/lodge/details",solid_Waste_User_Charge:"https://jharkhandegovernance.com/auth/api/swm/consumerDetalsInformation",Rig_Machine_Registration:"https://jharkhandegovernance.com/auth/api/rig/application/searh-application"})[t],Y=t=>{},J=se().shape({description:ae().required("Description is required")}),{register:Q,handleSubmit:X,reset:Z,formState:{errors:k}}=te({resolver:re(J)}),L=async t=>{var l,o,d,A;try{const r=new FormData;r.append("citizenName",(s==null?void 0:s.owner_name)||""),r.append("email",""),r.append("mobileNo",(s==null?void 0:s.mobile_no)||""),r.append("complaintTitle",""),r.append("complaintDescription",t.description||""),r.append("moduleName",K),r.append("ulbName",(s==null?void 0:s.ulb_name)||""),r.append("ulbId","66f3fdb76609dc9d192199d1"),r.append("customAddress",""),r.append("complaintTypeId",""),r.append("imageUrl",void 0),r.append("isTransactionIssue","false"),r.append("transactionNo",""),r.append("isCitizen","1"),r.append("wardNo",""),r.append("area",""),r.append("latitude",""),r.append("longitude",""),r.append("holdingNo",(s==null?void 0:s.holding_no)||""),r.append("safNo",(s==null?void 0:s.saf_no)||""),r.append("grievanceLocation","");const c=await U.mutateAsync({api:ie.createComplaintApplicationDirect,data:r});(l=c.data)!=null&&l.success?(m.success(((o=c==null?void 0:c.data)==null?void 0:o.message)||"Grievance created successfully"),q((d=c==null?void 0:c.data)==null?void 0:d.data),$(!0),Z({description:""}),g(!1)):m.error(((A=c==null?void 0:c.data)==null?void 0:A.message)||"Grievance not created successfully")}catch(r){console.error("Error in onSubmit:",r),m.error("An error occurred while processing the grievance")}};if(n.useEffect(()=>{h("")},[p]),P)return e.jsx(ne,{currentLanguage:a,formResponse:G});const S=()=>i==="property"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Holding Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.holding_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SAF Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.saf_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):i==="water"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Consumer Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.consumer_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):i==="trade_License"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"License Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.license_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):i==="Rig_Machine_Registration"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a==null?void 0:a.MOBILE_NO}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})]}):i==="pet_Registration"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.application_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})}):i==="water_Tanker_Booking"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Booking number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.booking_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})}):i==="septic_Tank_Cleaning"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Booking number"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.booking_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]})}):null;return e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-100 ",children:e.jsxs("div",{className:"mx-auto max-w-7xl rounded-lg bg-white  md:p-8",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs("h1",{className:"mb-4 text-lg font-bold uppercase text-blue-800 md:mb-6 md:text-xl",children:["TRACK YOUR ",i?i.replace(/_/g," "):""," DETAILS"]})}),e.jsx("div",{className:"mt-1 border-b border-[#99B37C]"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsxs("select",{value:p,onChange:t=>F(t.target.value),className:"rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",children:[i==="property"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"SAF_NUMBER",children:"SAF Number"}),e.jsx("option",{value:"HOLDING_NUMBER",children:"Holding Number"})]}),i==="water"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CONSUMER_NUMBER",children:"Consumer Number"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),i==="trade_License"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"LICENSE_NUMBER",children:"License Number"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),i==="Rig_Machine_Registration"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),i==="solid_Waste_User_Charge"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CONSUMER_NUMBER",children:"Consumer Number"})]}),i==="pet_Registration"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"APPLICATION_NUMBER",children:"Application Number"})]}),i==="water_Tanker_Booking"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"BOOKING_NUMBER",children:"Booking Number"})]}),i==="septic_Tank_Cleaning"&&e.jsxs(e.Fragment,{children:["\\",e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"BOOKING_NUMBER",children:"Booking Number"})]})]}),e.jsx("input",{type:"text",value:x,onChange:t=>h(t.target.value),onKeyDown:t=>{t.key==="Enter"&&w()},placeholder:`Enter your ${p.replace(/_/g," ").toLowerCase()}`,className:"w-full rounded-lg border px-4 py-2 uppercase focus:outline-none focus:ring focus:ring-amber-500"}),e.jsx("button",{type:"button",onClick:w,disabled:N===!0,className:`px-4 py-2 ${N===!0?"bg-gray-500":"bg-amber-500 hover:bg-amber-600"}  rounded-lg font-semibold text-white transition`,children:N?"Searching...":"Search"})]}),M&&(u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"mt-16 w-full table-auto border-collapse px-8",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wide text-gray-700",children:a==null?void 0:a.GRIEVANCE_NO}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wide text-gray-700",children:(a==null?void 0:a.USER_NAME)||"User Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wide text-gray-700",children:(a==null?void 0:a.MOBILE_NO)||"Mobile Number"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wide text-gray-700",children:(a==null?void 0:a.ADDR_AT)||"Address"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wide text-gray-700",children:(a==null?void 0:a.STATUS)||"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wide text-gray-700",children:a==null?void 0:a.VIEW}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wide text-gray-700",children:(a==null?void 0:a.ACTION)||"Action"})]})}),e.jsx("tbody",{className:"bg-white",children:Array.isArray(u)&&u.length>0?u.map((t,l)=>e.jsxs("tr",{className:"transition-all duration-200 ease-in-out hover:bg-gray-50 hover:shadow-md",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:t.consumer_id||l+1}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:t.owner_name&&t.applicant_name&&applicant_name?`${t.owner_name} | ${t.applicant_name} | ${t.applicant_name}`:t.owner_name||t.applicant_name||t.applicant_name||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:t.mobile_no||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:t.prop_address&&t.address?`${t.prop_address} | ${t.address}`:t.prop_address||t.address||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:t.status==="Active"?e.jsx("span",{className:"inline-flex items-center rounded-full bg-green-500 px-4 py-2 text-xs font-medium capitalize text-white shadow-md",children:a==null?void 0:a.A}):e.jsx("span",{className:"inline-flex items-center rounded-full bg-red-500 px-4 py-2 text-xs font-medium capitalize text-white shadow-md",children:a==null?void 0:a.IA})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"transform rounded-lg bg-gray-600 px-6 py-3 text-sm font-semibold text-white shadow-md transition duration-300 ease-in-out hover:scale-105 hover:bg-gray-700",onClick:()=>V(t),children:H?e.jsx("span",{className:"animate-pulse",children:"Loading..."}):a==null?void 0:a.VIEW})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"transform rounded-lg bg-blue-600 px-6 py-3 text-sm font-semibold text-white shadow-md transition duration-300 ease-in-out hover:scale-105 hover:bg-blue-700",onClick:()=>W(t),children:"Proceed As Grievance"})})]},t.id||l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-700",children:"No data available"})})})]})}):e.jsx("div",{className:"text-base font-semibold text-gray-600 md:text-lg",children:(a==null?void 0:a.NO_DATA_FOUND)||"No Data Found"}))]})]})}),O&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-4xl rounded-lg bg-white p-6 shadow-lg",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Proceed with Grievance"}),e.jsxs("form",{onSubmit:X(L),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owner name"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.owner_name)||""} ${(s==null?void 0:s.applicant_name)||""}`,className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a==null?void 0:a.MOBILE_NO}),e.jsx("input",{type:"text",value:(s==null?void 0:s.mobile_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.prop_address)||""} ${(s==null?void 0:s.address)||""}`,className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ULB Name"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.ulb_name)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Khata Number:"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.khata_no)||"",className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",disabled:!0})]}),S()]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{...Q("description",{required:!0}),className:"w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring focus:ring-amber-500",placeholder:"Enter your description here"}),k.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:k.description.message})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"rounded-lg bg-gray-300 px-4 py-2 font-semibold text-gray-800 transition hover:bg-gray-400",children:"No"}),e.jsx("button",{type:"submit",className:"rounded-lg bg-amber-500 px-4 py-2 font-semibold text-white transition hover:bg-amber-600",children:"Proceed"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-white p-8 shadow-xl",children:[e.jsx("h2",{className:"mb-6 text-2xl font-bold text-gray-800",children:"View Details"}),e.jsxs("form",{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"User Name"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.owner_name)||""} ${(s==null?void 0:s.applicant_name)||""}`,className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:a==null?void 0:a.MOBILE_NO}),e.jsx("input",{type:"text",value:(s==null?void 0:s.mobile_no)||"",className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.prop_address)||""} ${(s==null?void 0:s.address)||""}`,className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ULB Name"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.ulb_name)||"",className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ULB ID"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.ulb_id)||"",className:"w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-amber-500",disabled:!0})]})]}),S(),e.jsx("div",{className:"mt-6 flex justify-end space-x-4",children:e.jsx("button",{type:"button",onClick:()=>y(!1),className:"rounded-lg bg-gray-300 px-5 py-2 font-semibold text-gray-800 transition hover:bg-gray-400",children:"Close"})})]})]})})]})}function be(){const{currentLanguage:a}=B();return e.jsxs("div",{className:"grid sm:grid-cols-4 grid-cols-1",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 hidden sm:block",children:[e.jsx(le,{className:"text-xl text-primary font-bold",children:a==null?void 0:a.TRACK_GR}),e.jsx(ce,{src:"/images/complain_boy.png",className:"w-40"}),e.jsx(R,{className:"text-center",children:a==null?void 0:a.FF_FB}),e.jsx(R,{className:"text-center",children:a==null?void 0:a.YF_FB})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-2 sm:p-10 bg-gray-50 h-screen",children:e.jsx(oe,{})})]})}export{be as default};
