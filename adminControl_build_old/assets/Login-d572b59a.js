import{c as D,g as w,j as a,s as E,a as g,n as u}from"./index-bd8b5d4a.js";import{r as h,u as _}from"./router-b87f8164.js";import{c as F,a as v,u as M,A as q}from"./ApiHeader-4ed27c1c.js";import{R as I}from"./Hourglass-24f12ff1.js";import{P}from"./ProjectApiList-40ad3813.js";import{A as y,c as R}from"./PowerupFunctions-54b8ae3f.js";import"./react-5403e0b7.js";import"./reactQuery-8705a202.js";import"./reactQueryDevtools-9a5be7d4.js";import"./axios-096c69c8.js";const{api_login:B,api_getFreeMenuList:C}=P(),V=F({username:v().required("Enter Username"),password:v().required("Enter Password")});function Q(){const{setmenuList:j,setuserDetails:k,setheartBeatCounter:p}=h.useContext(D),[N,i]=h.useState(!1),t=M({initialValues:{username:"",password:""},onSubmit:m=>{S()},validationSchema:V}),x=_();h.useEffect(()=>{w("token")!="null"&&w("token")!=null&&x("/home")},[]);const L={headers:{Accept:"application/json"}},S=m=>{i(!0);let e={email:t.values.username,password:t.values.password};y.post(B,e,L).then(function(r){var s,l,o,d,n;r.data.status==!0?(E("token",(l=(s=r==null?void 0:r.data)==null?void 0:s.data)==null?void 0:l.token),g("userDetails",(d=(o=r==null?void 0:r.data)==null?void 0:o.data)==null?void 0:d.userDetails),A(),p(c=>c+1),x("/home"),u.success("Login Successfull")):(i(!1),u.error((n=r==null?void 0:r.data)==null?void 0:n.message))}).catch(function(r){i(!1),u.error("Server Error")})},A=()=>{let m={moduleId:1};y.post(C,m,q()).then(function(e){var r,s,l,o,d,n,c,f,b;e.data.status==!0?(g("menuList",(s=(r=e==null?void 0:e.data)==null?void 0:r.data)==null?void 0:s.permission),g("userDetails",(o=(l=e==null?void 0:e.data)==null?void 0:l.data)==null?void 0:o.userDetails),j((n=(d=e==null?void 0:e.data)==null?void 0:d.data)==null?void 0:n.permission),k((f=(c=e==null?void 0:e.data)==null?void 0:c.data)==null?void 0:f.userDetails)):(i(!1),seterrorMsg(R(e.data.message)),u.error((b=e==null?void 0:e.data)==null?void 0:b.message))}).catch(function(e){i(!1),seterroState(!0),u.error("Server Error (Menu List)")})};return a.jsx(a.Fragment,{children:a.jsx("main",{className:"border h-[100vh] w-screen bg-gray-100 flex justify-center items-center p-4",children:a.jsxs("form",{onSubmit:t.handleSubmit,className:" p-4 md:p-10 py-10 md:py-16 bg-white shadow-lg w-full md:w-[25vw] animate__animated animate__slideInDown animate__faster",children:[a.jsx("div",{className:"text-center",children:a.jsx("h1",{className:"text-2xl leading-normal mb-3 font-bold text-gray-800 darks:text-gray-300 text-center",children:"Admin Login"})}),a.jsx("hr",{className:"block w-12 h-0.5 mx-auto my-5 bg-gray-700 border-gray-700"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{htmlFor:"inputemail",className:"inline-block mb-2",children:"Username"}),a.jsx("input",{...t.getFieldProps("username"),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600",defaultValue:!0,"aria-label":"email",type:"email",required:!0}),a.jsx("span",{className:"text-red-600",children:t.touched.username&&t.errors.username?t.errors.username:null})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex flex-wrap flex-row",children:a.jsx("div",{className:"flex-shrink max-w-full w-1/2",children:a.jsx("label",{htmlFor:"inputpass",className:"inline-block mb-2",children:"Password"})})}),a.jsx("input",{...t.getFieldProps("password"),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600","aria-label":"password",type:"password",defaultValue:!0,required:!0}),a.jsx("span",{className:"text-red-600",children:t.touched.password&&t.errors.password?t.errors.password:null})]}),a.jsx("div",{className:"grid",children:N?a.jsx("div",{className:"flex justify-center",children:a.jsx(I,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):a.jsxs("button",{type:"submit",className:"py-2 px-4 inline-block text-center rounded leading-normal text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:[a.jsxs("svg",{xmlnsXlink:"http://www.w3.org/2000/svg",fill:"currentColor",className:"inline-block w-4 h-4 ltr:mr-2 rtl:ml-2 bi bi-box-arrow-in-right",viewBox:"0 0 16 16",children:[a.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),a.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Login"]})})]})})})}export{Q as default};
