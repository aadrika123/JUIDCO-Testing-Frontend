import{j as l,c as H,n as R}from"./index-bd8b5d4a.js";import{r as b,b as A}from"./router-b87f8164.js";import{P as u,r as g}from"./tailwind-64fa9e48.js";import{F as W,d as _,g as I,A as S,u as U,c as Z,a as K}from"./ApiHeader-4ed27c1c.js";import{u as G,b as Q}from"./reactQuery-8705a202.js";import{a as T}from"./axios-096c69c8.js";function J({title:e,titleId:n,...a},d){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},a),e?b.createElement("title",{id:n},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const X=b.forwardRef(J),Y=X;function m({title:e,titleId:n,...a},d){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},a),e?b.createElement("title",{id:n},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const k=b.forwardRef(m),p=k;function ee({title:e,titleId:n,...a},d){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},a),e?b.createElement("title",{id:n},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const ae=b.forwardRef(ee),le=ae;q.propTypes={formik:u.object.isRequired,children:u.node.isRequired,className:u.string};function q({children:e,formik:n,className:a}){return l.jsx(W,{value:n,children:l.jsx(_,{id:"form22",onSubmit:n==null?void 0:n.handleSubmit,className:a,children:e})})}O.propTypes={name:u.string.isRequired,label:u.string,formik:u.object,isDynamic:u.bool,isRequiredLabel:u.bool,className:u.string};function O({label:e,name:n,formik:a,isDynamic:d,isRequiredLabel:h=!1,className:C,...x}){return l.jsxs("div",{className:"mb-1",children:[l.jsx("label",{htmlFor:n,className:"block text-gray-600 text-sm mb-1",children:e}),l.jsx("input",{type:"text",name:n,id:n,...a&&(a==null?void 0:a.getFieldProps(n)),className:`${C} w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600`,placeholder:e,...x}),l.jsx("span",{className:"text-red-600  text-xs",children:d?I(a==null?void 0:a.touched,n)&&I(a==null?void 0:a.errors,n):(a==null?void 0:a.touched[n])&&(a==null?void 0:a.errors[n])})]})}B.propTypes={name:u.string.isRequired,label:u.string,formik:u.object,isDynamic:u.bool,selectedText:u.string,isRequiredLabel:u.bool,children:u.node.isRequired};function B({label:e,name:n="",formik:a,selectedText:d,isDynamic:h,isRequiredLabel:C=!1,children:x,...f}){return l.jsxs("div",{children:[l.jsxs("label",{htmlFor:n,className:"block text-gray-600 text-sm mb-1",children:[e," "]}),l.jsx("select",{name:n,value:(a==null?void 0:a.values[n])??void 0,onChange:w=>(a==null||a.setFieldValue(n,w.target.value),a==null||a.setFieldValue(d,w.target.options[w.target.selectedIndex].text==="Select"?"":w.target.options[w.target.selectedIndex].text),a==null?void 0:a.handleChange(w)),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600",...f,children:x}),l.jsx("span",{className:"text-red-600 text-xs",children:h?I(a==null?void 0:a.touched,n)&&I(a==null?void 0:a.errors,n):a!=null&&a.touched[n]&&(a!=null&&a.errors[n])?a==null?void 0:a.errors[n]:null})]})}u.string.isRequired,u.string,u.object,u.bool,u.bool,u.string,u.func;u.node,u.bool,u.string,u.bool;function D({key:e,api:n,options:a,value:d,config:h}){return G({queryKey:[e??n,...d??[]],queryFn:async()=>{const x=await T.post(n,{...h},S());return x==null?void 0:x.data},refetchOnReconnect:"always",refetchOnWindowFocus:!1,...a})}const te=(e,n,a)=>T.post(e,n,{...S(a)}),$=({options:e})=>Q({mutationFn:({api:n,data:a,headers:d})=>te(n,a,d),...e});M.propTypes={name:u.string.isRequired,label:u.string,formik:u.object,isDynamic:u.bool,isRequiredLabel:u.bool,className:u.string,onChange:u.func.isRequired};function M({label:e,name:n,formik:a,isDynamic:d,className:h,onChange:C,...x}){return l.jsxs("div",{className:"mb-1",children:[l.jsx("label",{htmlFor:n,className:"block text-gray-600 text-sm mb-1",children:e}),l.jsx("input",{type:"file",name:n,id:n,...a&&(a==null?void 0:a.getFieldProps(n)),className:`${h} w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600`,placeholder:e,onChange:f=>{C(f.target.files[0],n)},value:void 0,...x}),l.jsx("span",{className:"text-red-600  text-xs",children:d?I(a==null?void 0:a.touched,n)&&I(a==null?void 0:a.errors,n):(a==null?void 0:a.touched[n])&&(a==null?void 0:a.errors[n])})]})}const ne=e=>{var x,f,w,o;const{setFormikInitialValues:n}=A.useContext(H),a=$({}),d=U({enableReinitialize:!0,initialValues:{...(x=e==null?void 0:e.formData)==null?void 0:x.reduce((t,s)=>(t[s==null?void 0:s.name]=s==null?void 0:s.value,t),{})},validationSchema:Z().shape({...(f=e==null?void 0:e.formData)==null?void 0:f.reduce((t,s)=>(s!=null&&s.isRequired&&(t[s==null?void 0:s.name]=K().required(`${s==null?void 0:s.label} is required`)),t),{})}),onSubmit:async t=>{var r,y,j,F,v,E;const s=new FormData(document.getElementById("form22"));for(let i in t)i=="id"&&s.append(i,t[i]);const c=Array.from(s.keys()).some(i=>s.get(i)instanceof File);try{if(e!=null&&e.isEdit){const i=await(a==null?void 0:a.mutateAsync({api:e==null?void 0:e.editApi,data:c?s:t,headers:c&&{"Content-Type":"multipart/form-data"}}));(r=i==null?void 0:i.data)!=null&&r.status?(R.success((y=i==null?void 0:i.data)==null?void 0:y.message),h()):R.error((j=i==null?void 0:i.data)==null?void 0:j.message)}else{const i=t==null?!0:delete t.id,N=await(a==null?void 0:a.mutateAsync({api:e==null?void 0:e.createApi,data:c?s:t,headers:c&&{"Content-Type":"multipart/form-data"}}));(F=N==null?void 0:N.data)!=null&&F.status?(R.success((v=N==null?void 0:N.data)==null?void 0:v.message),h()):R.error((E=N==null?void 0:N.data)==null?void 0:E.message)}e==null||e.refetch()}catch(i){R.error(i==null?void 0:i.message)}}}),h=()=>{e==null||e.setOpen(!(e!=null&&e.open))},C=(t,s)=>{d.setFieldValue(s,t)};return b.useEffect(()=>{var t;d==null||d.setValues({...(t=e==null?void 0:e.formData)==null?void 0:t.reduce((s,c)=>(c!=null&&c.type?s[c==null?void 0:c.name]="":s[c==null?void 0:c.name]=c==null?void 0:c.value,s),{})})},[e==null?void 0:e.addNew]),A.useEffect(()=>{n(d==null?void 0:d.values)},[d==null?void 0:d.values]),l.jsx(l.Fragment,{children:l.jsxs(g.Dialog,{open:e==null?void 0:e.open,handler:h,children:[l.jsx(g.DialogHeader,{className:"text-base",children:e!=null&&e.isEdit?"Edit":"Create"}),l.jsx("div",{className:"border-t border-gray-200"}),(w=e==null?void 0:e.editData)!=null&&w.isFetching?l.jsx(l.Fragment,{children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"flex justify-center items-center",children:l.jsx("span",{className:"ml-2",children:"Loading..."})})})}):l.jsxs(q,{formik:d,children:[l.jsx(g.DialogBody,{children:l.jsx("div",{className:"overflow-y-auto max-h-[400px]",children:l.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-${(e==null?void 0:e.noOfColumn)||"2"} gap-4`,children:(o=e==null?void 0:e.formData)==null?void 0:o.map((t,s)=>{var c;return l.jsxs(A.Fragment,{children:[(t==null?void 0:t.type)==="text"||(t==null?void 0:t.type)==="email"||(t==null?void 0:t.type)==="number"?l.jsx(O,{name:t==null?void 0:t.name,label:t==null?void 0:t.label,formik:d,type:t==null?void 0:t.type,maxLength:t==null?void 0:t.maxLength}):null,(t==null?void 0:t.type)==="file"?l.jsx(M,{name:t==null?void 0:t.name,label:t==null?void 0:t.label,formik:d,onChange:C,type:t==null?void 0:t.type,maxLength:t==null?void 0:t.maxLength}):null,(t==null?void 0:t.type)==="select"?l.jsxs(B,{name:t==null?void 0:t.name,label:t!=null&&t.isLabel?t==null?void 0:t.label:"",formik:d,children:[l.jsx("option",{value:"",children:"Select"}),(c=t==null?void 0:t.options)==null?void 0:c.map((r,y)=>l.jsx("option",{value:r==null?void 0:r.value,children:r==null?void 0:r.label},y))]}):null]},s)})})})}),l.jsxs(g.DialogFooter,{children:[l.jsx(g.Button,{variant:"text",color:"red",onClick:h,className:"mr-1",size:"sm",children:"Cancel"}),l.jsx(g.Button,{type:"submit",variant:"gradient",color:"green",size:"sm",loading:a==null?void 0:a.isLoading,disabled:a==null?void 0:a.isLoading,children:l.jsx("span",{children:e!=null&&e.isEdit?"Update":"Create"})})]})]})]})})},ce=A.memo(ne);function de({title:e,titleId:n,...a},d){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},a),e?b.createElement("title",{id:n},e):null,b.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const se=b.forwardRef(de),ue=se;function ie(e){var h,C,x,f,w,o,t,s;const n=$({}),a=(h=e==null?void 0:e.data)==null?void 0:h.filter(c=>Object.keys(c).some(r=>{var y;return c[r].toString().toLowerCase().includes((y=e==null?void 0:e.search)==null?void 0:y.toLowerCase())})),d=async(c,r,y)=>{var j,F;try{const v=await(n==null?void 0:n.mutateAsync({api:e==null?void 0:e.deleteApi,data:{[c]:r,status:y==1||y==!0?0:1}}));(j=v==null?void 0:v.data)!=null&&j.status&&((F=e==null?void 0:e.getAll)==null||F.refetch(),y==1||y==!0?R.error("Inactive"):R.success("Active"))}catch(v){R.error(v==null?void 0:v.message)}};return(C=e==null?void 0:e.getAll)!=null&&C.isLoading?l.jsx("div",{className:"flex justify-center items-center ",children:l.jsx(g.Typography,{variant:"h6",color:"blue-gray",className:"font-normal",children:"Loading..."})}):(x=e==null?void 0:e.getAll)!=null&&x.isError?l.jsx("div",{className:"flex justify-center items-center h-96",children:l.jsx(g.Typography,{variant:"h6",color:"blue-gray",className:"font-normal",children:(t=(o=(w=(f=e==null?void 0:e.getAll)==null?void 0:f.error)==null?void 0:w.response)==null?void 0:o.data)==null?void 0:t.message})}):l.jsx("div",{children:l.jsxs("table",{className:"mt-4 w-full min-w-max table-auto text-left",children:[l.jsx("thead",{children:l.jsx("tr",{children:(s=e==null?void 0:e.tableHead)==null?void 0:s.map(c=>l.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-4",children:l.jsx(g.Typography,{variant:"small",color:"blue-gray",className:"font-normal leading-none opacity-70",children:c})},c))})}),l.jsx("tbody",{children:a==null?void 0:a.map((c,r)=>{var F,v;const j=r===((F=e==null?void 0:e.data)==null?void 0:F.length)-1?"p-4":"p-4 border-b border-blue-gray-50";return l.jsxs("tr",{children:[(v=e==null?void 0:e.fields)==null?void 0:v.map((E,i)=>l.jsx("td",{className:j,children:l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("div",{className:"flex flex-col",children:l.jsx(g.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:c[E]})})})},i)),(e==null?void 0:e.isStatus)&&l.jsx("td",{className:j,children:l.jsx("div",{className:"w-max",children:l.jsx(g.Chip,{variant:"ghost",size:"sm",value:c.is_suspended==1||c.is_suspended==!0?"Active":"In-Active",color:c.is_suspended==1||c.is_suspended==!0?"green":"red"})})}),(e==null?void 0:e.edit)&&(e==null?void 0:e.action)&&l.jsx("td",{className:j,children:l.jsx(g.Tooltip,{content:"Edit User",className:"text-[11px] bg-gray-700",children:l.jsx(g.IconButton,{color:"green",variant:"text",onClick:()=>{e==null||e.setId(c.id),e==null||e.setOpen(!0),e==null||e.setIsEdit(!0)},children:l.jsx(ue,{className:"h-4 w-4"})})})}),(e==null?void 0:e.delete)&&(e==null?void 0:e.action)&&l.jsx("td",{className:j,children:l.jsx(g.Switch,{ripple:!1,className:"h-full w-full checked:bg-[#2ec946]",containerProps:{className:"w-11 h-6"},circleProps:{className:"before:hidden left-0.5 border-none"},checked:c.is_suspended==1||c.is_suspended==!0,onChange:()=>{d(Object.keys(c)[0],c[Object.keys(c)[0]],c.is_suspended)}})})]},r)})})]})})}const P=[{id:0,label:"5",value:5},{id:1,label:"10",value:10},{id:2,label:"20",value:20},{id:3,label:"50",value:50},{id:4,label:"100",value:100}];function ge(e){const n=()=>{(e==null?void 0:e.page)!==(e==null?void 0:e.noOfPage)&&(e==null||e.setPage((e==null?void 0:e.page)+1))},a=()=>{(e==null?void 0:e.page)!==1&&(e==null||e.setPage((e==null?void 0:e.page)-1))};return A.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[e==null?void 0:e.page]),l.jsxs("div",{className:"flex items-center gap-4 mt-2 mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(g.IconButton,{className:"w-7 h-7",size:"sm",variant:"outlined",onClick:a,disabled:(e==null?void 0:e.page)===1||(e==null?void 0:e.page)===0,children:l.jsx(Y,{strokeWidth:2,className:"h-3 w-3"})}),l.jsxs(g.Typography,{color:"gray",className:"font-normal text-sm",children:[l.jsx("strong",{className:"text-gray-900 text-sm",children:e==null?void 0:e.page})," of"," ",l.jsx("strong",{className:"text-gray-900",children:e==null?void 0:e.noOfPage})]}),l.jsx(g.IconButton,{className:"w-7 h-7",size:"sm",variant:"outlined",onClick:n,disabled:(e==null?void 0:e.page)===(e==null?void 0:e.noOfPage)||(e==null?void 0:e.page)===0,children:l.jsx(p,{strokeWidth:2,className:"h-3 w-3"})})]}),l.jsx("div",{className:"flex items-center gap-5",children:l.jsx("select",{className:"border border-gray-300 rounded-md text-gray-900 text-sm p-1.5",value:e==null?void 0:e.perPage,onChange:d=>e==null?void 0:e.setPerPage(parseInt(d.target.value)),children:P==null?void 0:P.map(d=>l.jsx("option",{value:d.value,children:d.label},d.id))})})]})}function ve(e){var N;const{isCreate:n=!0,action:a=!0}=e,[d,h]=A.useState(!1),[C,x]=A.useState(!1),[f,w]=A.useState(""),[o,t]=A.useState(""),[s,c]=A.useState(!1),[r,y]=A.useState(1),[j,F]=A.useState(5),v=D({api:e==null?void 0:e.getById,config:{[e==null?void 0:e.getIdByKey]:f},value:[f,d],options:{enabled:!!f,onSuccess:L=>{e==null||e.setEditData(L)}}}),E=D({api:e==null?void 0:e.listApi,options:{enabled:!0,onSuccess:L=>{e==null||e.setListData(L)}}}),i=L=>{const V=(r-1)*j,z=r*j;return L==null?void 0:L.slice(V,z)};return l.jsxs("div",{className:"p-2 ml-2",children:[l.jsx(ce,{editData:v,open:d,setOpen:h,editApi:e==null?void 0:e.editApi,createApi:e==null?void 0:e.createApi,isEdit:C,noOfColumn:1,refetch:E.refetch,formData:e==null?void 0:e.formData,addNew:s,setAddNew:c}),l.jsxs(g.Card,{className:"h-full w-full",children:[l.jsxs(g.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:[l.jsxs("div",{className:"mb-5 flex items-center justify-between gap-8",children:[l.jsx("div",{children:l.jsx(g.Typography,{variant:"h5",color:"blue-gray",children:e==null?void 0:e.title})}),l.jsx("div",{className:"flex shrink-0 flex-col gap-2 sm:flex-row",children:n&&l.jsx(g.Button,{className:"flex items-center gap-3",size:"sm",onClick:()=>{h(!0),x(!1),c(!s)},children:"Add"})})]}),l.jsx("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:l.jsx("div",{className:"w-full md:w-72",children:l.jsx(g.Input,{label:"Search",value:o,onChange:L=>{t(L.target.value)},icon:l.jsx(le,{className:"h-5 w-5"})})})})]}),l.jsx(g.CardBody,{className:"overflow-scroll px-0",children:l.jsx(ie,{action:a,search:o,getAll:E,data:o?e==null?void 0:e.data:i(e==null?void 0:e.data),tableHead:e==null?void 0:e.HEAD,fields:e==null?void 0:e.fields,isStatus:!0,edit:!0,view:!0,delete:!0,setId:w,setOpen:h,setIsEdit:x,deleteApi:e==null?void 0:e.deleteApi})}),l.jsx(g.CardFooter,{className:"flex items-center justify-end border-t border-blue-gray-50 p-4 ",children:l.jsx("div",{className:"flex gap-2",children:l.jsx(ge,{page:r,setPage:y,noOfPage:Math.ceil(((N=e==null?void 0:e.data)==null?void 0:N.length)/j),setPerPage:F,perPage:j})})})]})]})}export{ve as T,D as u};
