import{j as e,B as w,p as g,C as A,_ as r}from"./index-13YLhq3g.js";import{P as z}from"./index-Dz5KCr_l.js";import{u as W,b as F}from"./useCustomQuery-DT-eWy3B.js";import{h as N}from"./moment-BjLXg0w5.js";import{u as S}from"./useScheduleIncharge-B6xEjBmq.js";import{u as H,b as I}from"./router-DLL89Qev.js";import"./axios-DmypytPv.js";import"./headlessui-DXpdh5LM.js";function M(){var o,m;const v=H(),_=I(),b=W({}),t=S(),a=new URLSearchParams(_.search),s=a.get("receipt_no"),l=a.get("out_time"),k=a.get("in_time"),T=a.get("area_id"),P=a.get("ulb_id"),c=a.get("vehicle_type"),n=F({api:`${g.calculateAmount}`,key:"calculateAmount",config:{receipt_no:s,out_time:l},options:{enabled:!!s}}),C=async()=>{var d,u,f,h,x,p,j,y;if(await A("Are you sure you want to pay ticket?",{title:"Please Confirm",subTitle:"You will be redirected to receipt page",buttonTitle:"Yes, I am sure"}))try{const i=await b.mutateAsync({api:(d=g)==null?void 0:d.outTicket,data:{receipt_no:s,out_time:l,out_amount:(u=n.data)==null?void 0:u.data.amount,payment_mode:"cash",area_id:T,ulb_id:P,scheduler_id:(x=(h=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:h.data[0])==null?void 0:x.scheduler_id,schedular_id:(y=(j=(p=t==null?void 0:t.data)==null?void 0:p.data)==null?void 0:j.data[0])==null?void 0:y.scheduler_id}});i!=null&&i.data?(r.success("Successfully Paid"),v(`/parking-app/out-receipt?receipt_no=${s}`,{replace:!0})):r.error("Failed to pay ticket")}catch{r.error("Failed to pay ticket")}};return e.jsxs(z,{title:"Generate Ticket",children:[e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center  flex-col gap-2",children:e.jsx("div",{className:"flex flex-1 justify-center items-center flex-row py-4",children:e.jsxs("div",{className:"flex flex-1 justify-center items-center flex-row gap-6",children:[e.jsxs("div",{className:"flex justify-center items-center flex-row gap-1",children:[e.jsx("input",{type:"radio",id:"twoWheeler",name:"vehicleType",value:"two_wheeler",className:"w-5 h-5",checked:c==="two_wheeler",onChange:()=>{}}),e.jsx("label",{htmlFor:"twoWheeler",className:"text-white",children:"Two Wheeler"})]}),e.jsxs("div",{className:"flex justify-center items-center flex-row gap-1",children:[e.jsx("input",{type:"radio",id:"fourWheeler",name:"vehicleType",value:"four_wheeler",className:"w-5 h-5",checked:c==="four_wheeler",onChange:()=>{}}),e.jsx("label",{htmlFor:"fourWheeler",className:"text-white",children:"Four Wheeler"})]})]})})})}),e.jsxs("div",{className:"bg-white py-4",children:[e.jsxs("div",{className:"flex justify-center items-center flex-col gap-2",children:[e.jsx("div",{className:"flex flex-1 justify-center items-center flex-row py-4 mt-8",children:e.jsx("div",{className:"flex flex-col mt-2",children:e.jsxs("div",{className:"flex flex-1 flex-row py-6",children:[e.jsx("h1",{className:"font-bold",style:{fontSize:"2rem"},children:"â‚¹"}),e.jsx("div",{className:"flex justify-center items-center flex-row text-4xl",children:e.jsx("h1",{className:"font-semibold",style:{fontSize:"4.5rem"},children:((m=(o=n.data)==null?void 0:o.data)==null?void 0:m.amount)??0})})]})})}),e.jsx("div",{className:"flex justify-center items-center flex-row",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"flex flex-row",children:e.jsxs("h1",{className:"font-semibold text-gray-500",children:["Duration:"," ",N(l,"HH:mm").diff(N(k,"HH:mm"),"minutes")," ","mins"]})})})})]}),e.jsxs("div",{className:"px-8 mt-6 w-full flex gap-3",children:[e.jsx(w,{onClick:C,variant:"default",className:"h-12 mt-6 w-full rounded-sm",size:"lg",children:"Cash"}),e.jsx(w,{variant:"default",className:"h-12 mt-6 w-full rounded-sm",size:"lg",children:"Online"})]})]})]})}export{M as default};
