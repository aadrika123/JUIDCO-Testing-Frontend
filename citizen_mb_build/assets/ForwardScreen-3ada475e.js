import{R as k,f as s,u as L,r as l,j as a,F as M,M as P,b as f,d as r,A as F,P as O}from"./index-1b890fc2.js";import{I as E}from"./full.esm-93a9fb7b.js";import{R}from"./Hourglass-e95bc06e.js";import"./hoist-non-react-statics.cjs-8fc5caa0.js";const H=e=>{const{notify:c}=k.useContext(s),m=L(),{api_postApplicationToLevel:S,harvestingPostLevel:N,api_gbSafPostLevel:A}=O(),[o,I]=l.useState(""),[g,n]=l.useState(!1),[_,h]=l.useState(!1),z=()=>h(!0),u=()=>{h(!1)},C=()=>{};l.useEffect(()=>{console.log("enter in submission screen with application no.  =>  ",e==null?void 0:e.id),(e==null?void 0:e.openScreen)==!0&&z(),(e==null?void 0:e.openScreen)==!1&&u()},[e==null?void 0:e.openScreen]),console.log(e==null?void 0:e.roleName);const b=()=>{if(o==""){c("Write comment...","info");return}(e==null?void 0:e.roleName)=="tc"&&(e==null?void 0:e.canSubmit)!="true"&&(e==null||e.navigation()),n(!0),(e==null?void 0:e.roleName)=="tc"&&(e==null?void 0:e.canSubmit)=="false"&&n(!1),console.log("can submit => ",e==null?void 0:e.canSubmit),(e==null?void 0:e.roleName)=="tc"&&(e==null?void 0:e.canSubmit)=="true"&&n(!0);let i={applicationId:e==null?void 0:e.id,action:e==null?void 0:e.action,comment:o};console.log("data before forward => ",i);let d;(e==null?void 0:e.type)=="saf"&&(d=S),(e==null?void 0:e.type)=="gbSaf"&&(d=A),(e==null?void 0:e.type)=="harvesting"&&(d=N),((e==null?void 0:e.roleName)=="utc"||(e==null?void 0:e.canSubmit)=="true")&&r.post(d,i,F()).then(t=>{var x,w,v,y;((x=t==null?void 0:t.data)==null?void 0:x.status)==!0&&(n(!1),u(),console.log("success forward => ",t),c((w=t==null?void 0:t.data)==null?void 0:w.message,"success"),(e==null?void 0:e.type)=="saf"&&m("/search/property",{replace:!0}),(e==null?void 0:e.type)=="gbSaf"&&m("/search/gbSaf",{replace:!0}),(e==null?void 0:e.type)=="harvesting"&&m("/search/harvesting",{replace:!0})),((v=t==null?void 0:t.data)==null?void 0:v.status)==!1&&(n(!1),e.closePopUp(),console.log("error forward => ",t),c((y=t==null?void 0:t.data)==null?void 0:y.message,"error"))}).catch(t=>{n(!1),console.log("error forward => ",t),c(t,"error")})};l.useEffect(()=>{(e==null?void 0:e.canSubmit)!=""&&b()},[e==null?void 0:e.canSubmit]);const j=()=>{u(),e.closePopUp()};return a(M,{children:a(P,{isOpen:_,onAfterOpen:C,className:"z-40 h-screen w-screen backdrop-blur-sm flex flex-row justify-center items-center overflow-auto  animate__animated animate__zoomIn animate__faster",contentLabel:"Example Modal",children:f("div",{style:{zIndex:1e3},className:"absolute z-40 rounded-lg shadow-lg shadow-indigo-300 md:w-[50vw] md:h-max w-[90%] border-2 border-green-500 bg-gray-50 px-2 m-2 py-4 h-max border-t-2 border-l-2 overflow-auto",children:[!g&&a("div",{className:"absolute top-2 z-10 bg-red-200 hover:bg-red-300 right-2 rounded-full p-2 cursor-pointer",onClick:()=>j(),children:a(E,{fontSize:10})}),f("div",{className:"flex flex-col items-center px-4",children:[a("div",{className:"mt-6 mb-4 bg-[#12743B] font-semibold rounded-sm w-full 2xl:text-2xl text-lg text-center shadow-sm text-white px-4 py-2 poppins uppercase",children:"Workflow Action"}),f("div",{children:[a("label",{htmlFor:"comment",children:"Comment :"}),a("textarea",{name:"comment",onChange:i=>I(i.target.value),className:"bg-white px-2 py-1 w-full rounded-sm shadow-sm border-[1px] border-gray-400",id:"",cols:"30",rows:"3"})]}),g?a("div",{className:"flex justify-center",children:a(R,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):a("button",{onClick:()=>b(),className:"2xl:px-6 px-3 py-1.5 2xl:py-2.5 cursor-pointer bg-[#12743B] text-white font-medium text-xs  poppins rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out mt-4 capitalize",children:e==null?void 0:e.action})]})]})})})};export{H as default};
