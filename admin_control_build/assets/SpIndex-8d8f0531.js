import{R as M,r as i,j as e,n as k}from"./index-17e4d78a.js";import{G as L,S as K,L as Q,C as X}from"./ShimmerTable-080acb29.js";import{A as _,b as C,c as T,a as w,u as P,d as R,n as O}from"./PowerupFunctions-8fd96464.js";import{u as Z}from"./useSetTitle-ee984752.js";import{M as D}from"./index.esm-da3221bb.js";import{P as A}from"./ProjectApiList-ba47d93b.js";import{B as ee}from"./BottomErrorCard-502a205f.js";const te={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function ae(t){const[y,f]=M.useState(!1),{post_deleteSp:n}=A(),j=g=>{console.log("ID to be deleted",g);const u={schemeId:g};_.post(n,u,C()).then(r=>{var s,h;(s=r==null?void 0:r.data)!=null&&s.status?(k.success("Deleted successfully"),t==null||t.refresh()):t==null||t.activateBottomErrorCard(!0,(h=r==null?void 0:r.data)==null?void 0:h.message),m()}).catch(r=>{k.error("Failed to delete"),m(),t==null||t.activateBottomErrorCard(!0,"Oops! Server Error, please try again later.")})};i.useEffect(()=>{t.openDeleteModal>0&&f(!0)},[t.openDeleteModal]);function x(){}function m(){f(!1)}return e.jsx("div",{className:"",children:e.jsx(D,{isOpen:y,onAfterOpen:x,onRequestClose:m,style:te,contentLabel:"Example Modal",children:e.jsxs("div",{className:"bg-indigo-300 shadow-2xl p-5 m-5 rounded-md poppins",children:[e.jsxs("div",{className:"flow-root",children:[e.jsx("p",{className:"float-left text-center text-lg font-semibold",children:"Are you sure to Delete ?"}),e.jsxs("p",{onClick:m,className:"float-right cursor-pointer rounded-full bg-red-200 hover:bg-red-300 mx-3",children:[" ",e.jsx(L,{size:25})," "]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-10"}),e.jsx("div",{className:"col-span-2"})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("button",{onClick:()=>j(t.deleteId),className:"rounded-md bg-red-300 hover:bg-red-400 shadow-lg py-1.5 text-sm px-3 m-3",children:[" ","Yes, Delete"," "]}),e.jsxs("button",{onClick:m,className:"rounded-md bg-green-300 hover:bg-green-400 shadow-lg py-1.5 text-sm px-3 m-3",children:[" ","Cancel"," "]})]})]})})})}const ne={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function se(t){var r,s,h,c;const{post_editSp:y}=A();console.log("getting data to edit =?> ",t==null?void 0:t.editData);const f=T({type:w().required("Select type"),content:w().required("Enter content"),link:w().url("Invalid url")}),n=P({initialValues:{type:(r=t==null?void 0:t.editData)==null?void 0:r.scheme_type_id,content:(s=t==null?void 0:t.editData)==null?void 0:s.content,link:(h=t==null?void 0:t.editData)==null?void 0:h.link},enableReinitialize:!0,onSubmit:o=>{m(o)},validationSchema:f}),[j,x]=M.useState(!1),m=o=>{var E;const v={schemeId:(E=t==null?void 0:t.editData)==null?void 0:E.id,schemeTypeId:o==null?void 0:o.type,content:o==null?void 0:o.content,link:o==null?void 0:o.link};_.post(y,v,C()).then(d=>{var I,N;(I=d==null?void 0:d.data)!=null&&I.status?(k.success("Updated successfully"),t==null||t.refresh()):t==null||t.activateBottomErrorCard(!0,(N=d==null?void 0:d.data)==null?void 0:N.message)}).catch(d=>{k.error("Failed to update"),t==null||t.activateBottomErrorCard(!0,"Oops! Server Error, please try again later.")}).finally(()=>{u(),n.resetForm()})};i.useEffect(()=>{t.openEditSp>0&&x(!0)},[t.openEditSp]);function g(){}function u(){x(!1)}return e.jsx("div",{className:"",children:e.jsx(D,{isOpen:j,onAfterOpen:g,onRequestClose:u,style:ne,contentLabel:"Example Modal",children:e.jsxs("div",{className:"bg-indigo-300 shadow-2xl p-5 m-5 rounded-md poppins w-[100vw] md:w-[30vw]",children:[e.jsxs("div",{className:"flow-root",children:[e.jsxs("p",{className:"float-left text-center text-lg font-semibold",children:["Edit Scheme & Program"," "]}),e.jsxs("p",{onClick:u,className:"float-right cursor-pointer rounded-full bg-red-200 hover:bg-red-300 mx-3",children:[" ",e.jsx(L,{size:25})," "]})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsxs("form",{onSubmit:n.handleSubmit,onChange:n.handleChange,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"late",className:"text-sm",children:"Type : "}),e.jsxs("select",{type:"text",name:"type",id:"late",value:n.values.type,className:"animate__animated animate__fadeIn animate__faster form-control block w-full px-3 2xl:py-1 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e.jsx("option",{value:"",disabled:!0,children:"Select"}),Array.isArray(t==null?void 0:t.typeList)&&((c=t==null?void 0:t.typeList)==null?void 0:c.map(o=>e.jsx(e.Fragment,{children:e.jsx("option",{value:o==null?void 0:o.id,children:o==null?void 0:o.type})})))]}),e.jsx("span",{className:"text-red-600 text-xs",children:n.touched.type&&n.errors.type?n.errors.type:null})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"late",className:"text-sm",children:"Content : "}),e.jsx("textarea",{cols:2,rows:2,type:"text",value:n.values.content,placeholder:"Enter content",name:"content",id:"late",className:"animate__animated animate__fadeIn animate__faster form-control block w-full px-3 2xl:py-1 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 text-xs",children:n.touched.content&&n.errors.content?n.errors.content:null})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"late",className:"text-sm",children:"Link : "}),e.jsx("input",{type:"url",placeholder:"Provide link",name:"link",id:"late",value:n.values.link,className:"animate__animated animate__fadeIn animate__faster form-control block w-full px-3 2xl:py-1 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 text-xs",children:n.touched.link&&n.errors.link?n.errors.link:null})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{type:"submit",className:"rounded-md bg-green-300 hover:bg-green-400  hover:text-black shadow-lg  py-1 text-sm px-3 m-3",children:[" ","Update"," "]})})]})})]})})})}const le={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function oe(t){var r;const{post_addSp:y}=A(),f=T({type:w().required("Select type"),content:w().required("Enter content"),link:w().url("Invalid url")}),n=P({initialValues:{type:"",content:"",link:""},onSubmit:s=>{m(s)},validationSchema:f}),[j,x]=M.useState(!1),m=s=>{console.log("Data to be saved",s);const h={schemeTypeId:s==null?void 0:s.type,content:s==null?void 0:s.content,link:s==null?void 0:s.link};_.post(y,h,C()).then(c=>{var o,v;(o=c==null?void 0:c.data)!=null&&o.status?(k.success("Added successfully"),t==null||t.refresh()):t==null||t.activateBottomErrorCard(!0,(v=c==null?void 0:c.data)==null?void 0:v.message)}).catch(c=>{k.error("Failed to add"),t==null||t.activateBottomErrorCard(!0,"Oops! Server Error, please try again later.")}).finally(()=>{u(),n.resetForm()})};i.useEffect(()=>{t.openAddSp>0&&x(!0)},[t.openAddSp]);function g(){}function u(){x(!1)}return e.jsx("div",{className:"w-full",children:e.jsx(D,{isOpen:j,onAfterOpen:g,onRequestClose:u,style:le,contentLabel:"Example Modal",children:e.jsxs("div",{className:"bg-indigo-300 shadow-2xl p-5 m-5 rounded-md poppins w-[100vw] md:w-[30vw]",children:[e.jsxs("div",{className:"flow-root",children:[e.jsx("p",{className:"float-left text-center text-lg font-semibold",children:"Add Scheme & Program"}),e.jsx("p",{onClick:u,className:"float-right cursor-pointer rounded-full bg-red-200 hover:bg-red-300 mx-3",children:e.jsx(L,{size:25})})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsxs("form",{onSubmit:n.handleSubmit,onChange:n.handleChange,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"late",className:"text-sm",children:"Type : "}),e.jsxs("select",{type:"text",name:"type",id:"late",className:"animate__animated animate__fadeIn animate__faster form-control block w-full px-3 2xl:py-1 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e.jsx("option",{value:"",children:"Select"}),Array.isArray(t==null?void 0:t.typeList)&&((r=t==null?void 0:t.typeList)==null?void 0:r.map(s=>e.jsx(e.Fragment,{children:e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.type})})))]}),e.jsx("span",{className:"text-red-600 text-xs",children:n.touched.type&&n.errors.type?n.errors.type:null})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"late",className:"text-sm",children:"Content : "}),e.jsx("textarea",{cols:2,rows:2,type:"text",placeholder:"Enter content",name:"content",id:"late",className:"animate__animated animate__fadeIn animate__faster form-control block w-full px-3 2xl:py-1 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 text-xs",children:n.touched.content&&n.errors.content?n.errors.content:null})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"late",className:"text-sm",children:"Link : "}),e.jsx("input",{type:"url",placeholder:"Provide link",name:"link",id:"late",className:"animate__animated animate__fadeIn animate__faster form-control block w-full px-3 2xl:py-1 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 text-xs",children:n.touched.link&&n.errors.link?n.errors.link:null})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"rounded-md bg-green-300 hover:bg-green-400  hover:text-black shadow-lg  py-1 text-sm px-3 m-3",children:"Add"})})]})})]})})})}function he(){const{post_listSp:t,post_schemeList:y}=A();Z("Schemes & Programs Master");const[f,n]=i.useState(0),[j,x]=i.useState(0),[m,g]=i.useState(0),[u,r]=i.useState(0),[s,h]=i.useState([]),[c,o]=i.useState(),[v,E]=i.useState(),[d,I]=i.useState(),[N,b]=i.useState(!1),[q,H]=i.useState(""),[W,z]=i.useState(!1),$="border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white",U="border border-red-300 text-red-400 mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white",G="float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-[#113766] hover:text-white text-white flex items-center",p=(a,l)=>{console.log(a,l),z(a),H(R(l))},V=a=>{x(l=>l+1),o(a)},Y=a=>{g(l=>l+1),E(a),console.log("id to be edit is",a)};i.useEffect(()=>{console.log("entering 2"),b(!0),_.post(t,{},C()).then(a=>{var l,S,F,B;console.log("getting Sp master list => ",a),(l=a==null?void 0:a.data)!=null&&l.status?I((F=(S=a==null?void 0:a.data)==null?void 0:S.data)==null?void 0:F.Details):p(!0,R((B=a==null?void 0:a.data)==null?void 0:B.message)),b(!1)}).catch(a=>{console.log("getting Sp master list error =>",a),b(!1),p(!0,"Oops! Server error, please try again later.")}),_.post(y,{},C()).then(a=>{var l;console.log("getting module list list => ",a),h((l=a==null?void 0:a.data)==null?void 0:l.data),b(!1)}).catch(a=>{console.log("getting module list error =>",a),b(!1)})},[u]);const J=[{Header:"#",Cell:({row:a})=>e.jsx("div",{className:"pr-2",children:(a==null?void 0:a.index)+1})},{Header:"Type",accessor:"scheme_type",Cell:({cell:a})=>{var l;return O((l=a.row.original)==null?void 0:l.scheme_type)}},{Header:"Content",accessor:"content",Cell:({cell:a})=>{var l;return O((l=a.row.original)==null?void 0:l.content)}},{Header:"Link",accessor:"link",Cell:({cell:a})=>{var l;return e.jsx(e.Fragment,{children:e.jsx("a",{href:a==null?void 0:a.value,target:"_blank",rel:"noreferrer",className:"hover:underline cursor-pointer",children:O((l=a.row.original)==null?void 0:l.link)})})}},{Header:"Action",accessor:"id",Cell:({cell:a})=>e.jsxs("div",{className:"flex flex-row flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>{var l;return Y((l=a==null?void 0:a.row)==null?void 0:l.original)},className:$,children:"Edit"}),e.jsx("button",{onClick:()=>{var l,S;return V((S=(l=a==null?void 0:a.row)==null?void 0:l.original)==null?void 0:S.id)},className:U,children:"Delete"})]})}];return e.jsxs(e.Fragment,{children:[W&&e.jsx(ee,{activateBottomErrorCard:p,errorTitle:q}),e.jsx(oe,{openAddSp:f,activateBottomErrorCard:p,typeList:s,refresh:()=>(b(!0),r(a=>a+1))}),e.jsx(se,{openEditSp:m,editData:v,activateBottomErrorCard:p,typeList:s,refresh:()=>(b(!0),r(a=>a+1))}),e.jsx(ae,{openDeleteModal:j,activateBottomErrorCard:p,deleteId:c,refresh:()=>(b(!0),r(a=>a+1))}),e.jsxs("div",{className:"poppins p-4 px-6",children:[e.jsx("div",{className:"uppercase font-semibold text-gray-700 text-2xl py-2 text-center tracking-[0.7rem]",children:"Schemes & Programs Master"}),e.jsx("div",{className:"w-full h-[0.15rem] bg-gray-400 mb-6"}),N&&e.jsx(K,{}),!N&&(d==null?void 0:d.length)>0&&e.jsx(Q,{assessmentType:!1,columns:J,dataList:d,children:e.jsxs("button",{onClick:()=>n(a=>a+1),className:G,children:[e.jsx(X,{})," Add"]})})]}),!N&&(d==null?void 0:d.length)==0&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Oops! "}),e.jsx("span",{className:"block sm:inline",children:"No Data Available."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})]})}export{he as default};
