import{r as i,j as e,I as we,_ as U,s as jt,g as De}from"./index-17e4d78a.js";import{A as ve,M as Nt}from"./ApiList-e6d8a137.js";import{G as Be,L as be,S as ye,C as Se,r as Pe,a as wt}from"./ShimmerTable-080acb29.js";import{c as ke,a as q,u as Ce,f as _e,A as _,b as M,g as Ae,h as vt,j as Re,k as St,l as Oe}from"./PowerupFunctions-8fd96464.js";import{u as je}from"./useSetTitle-ee984752.js";import{R as te}from"./Hourglass-b82bf097.js";import{F as kt}from"./index.esm-c34cfcd6.js";import{B as Me}from"./BottomErrorCard-502a205f.js";import{t as ze,b as Ct,c as Mt}from"./index.esm-2ea7e4fd.js";import{a as Ge,b as Lt,c as Pt}from"./index.esm-da3221bb.js";function $e(t){const b=i.useRef(),P=ke({roleName:q().required("Enter menu role name")}),g=Ce({initialValues:{roleName:""},onSubmit:I=>{console.log("at submit form.....",I),t==null||t.postRole(I)},validationSchema:P});i.useEffect(()=>{(t==null?void 0:t.modalState)===!0?b.current.showModal():b.current.close(),(t==null?void 0:t.currentSelectedId)!==null&&F()},[t==null?void 0:t.modalState]);const F=()=>{g.setFieldValue("roleName",t==null?void 0:t.currentSelectedName)},v=I=>{let m=I.target.name,H=I.target.value;m=="roleName"&&g.setFieldValue("roleName",_e(H,g.values.roleName,100))};return e.jsxs("dialog",{ref:b,className:"shadow-xl relative",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{t==null||t.setmodalState(!1),t==null||t.setcurrentSelectedId(null),addEditModal.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold",children:"Add Menu Role "})})]}),e.jsx("div",{className:"w-full max-w-xs",children:e.jsxs("form",{onSubmit:g.handleSubmit,onChange:v,className:"bg-white  rounded px-8 pt-6 pb-8 mb-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm  mb-2",htmlFor:"rolename",children:"Role Name"}),e.jsx("input",{...g.getFieldProps("roleName"),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"rolename",type:"text"}),e.jsx("span",{className:"text-red-600",children:g.touched.roleName&&g.errors.roleName?g.errors.roleName:null})]}),e.jsx("div",{className:"flex items-center justify-between",children:t!=null&&t.addEditLoading?e.jsxs("button",{className:"w-full bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex justify-center items-center",type:"button",children:[" ",e.jsx(te,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}):e.jsx("button",{className:"w-full bg-[#1A4D8C]  hover:bg-[#113766] text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:(t==null?void 0:t.currentSelectedId)===null?"Save":"Update"})})]})})]})}function Ke(t){const b=i.useRef();return i.useEffect(()=>{(t==null?void 0:t.mappingModal)===!0&&b.current.showModal()},[t==null?void 0:t.mappingModal]),e.jsx("dialog",{ref:b,className:"relative bg-transparent",children:e.jsxs("div",{className:"bg-white shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("span",{onClick:()=>{t==null||t.setmappingModal(!1),b.current.close()},className:"cursor-pointer rounded-full hover:bg-gray-400",children:[e.jsx(Be,{size:25})," "]})}),e.jsxs("p",{className:"text-center text-xl",children:[t==null?void 0:t.title,e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.roleName})]}),e.jsxs("div",{className:"text-center",children:[" ",(t==null?void 0:t.isLoadingMappingUpdate)&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsx("div",{children:Array.isArray(t==null?void 0:t.menuListById)&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.menuListById})})})]})})}function Le(t){const b=i.useRef();return i.useEffect(()=>{(t==null?void 0:t.deleteModal)===!0?b.current.showModal():b.current.close()},[t==null?void 0:t.deleteModal]),e.jsx("dialog",{ref:b,className:"relative bg-transparent",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[e.jsx("button",{onClick:()=>{t==null||t.setdeleteModal(!1),deleteModal.close()},type:"button",className:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"w-full flex h-10",children:[" ",e.jsx("span",{className:"mx-auto",children:e.jsx(kt,{size:30})})]}),e.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure to delete ?"}),t!=null&&t.deleteLoading?e.jsxs("button",{className:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",type:"button",children:[" ",e.jsx(te,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}):e.jsx("button",{type:"button",className:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:t==null?void 0:t.enableDisableUser,children:"Yes, I'm sure"})]})]})})}function At(){const[t,b]=i.useState(!1),[P,g]=i.useState(!1),[F,v]=i.useState(!1),[I,m]=i.useState(null),[H,x]=i.useState(!1),[W,d]=i.useState(null),[L,D]=i.useState(null),[E,T]=i.useState(null),[z,V]=i.useState(null),[o,A]=i.useState([{menu_string:"Home",menuId:1,permission_status:!0}]),[R,S]=i.useState(!1),[$,X]=i.useState(!1),[K,O]=i.useState(!1),[ge,ne]=i.useState(!1),[me,ae]=i.useState(!1),[f,Y]=i.useState(!1);je("Menu Role",!0);const{getMenuRole:J,api_PostMenuRole:p,api_deleteMenuRole:re,api_updateMenuRole:le,api_getMenuListByMenuRoleId:ce,api_updateMenuRoleMapping:ue}=ve(),de=[{Header:"Sl.",Cell:({row:c})=>e.jsx("div",{className:"px-1",children:(c==null?void 0:c.index)+1})},{Header:"Menu Name",accessor:"menu_string"},{Header:"Module",accessor:"module_name"},{Header:"Permission",accessor:"is_suspended",Cell:c=>{var a;return e.jsx("div",{className:"",children:e.jsx("input",{checked:!((a=c.row.values)!=null&&a.is_suspended),onChange:l=>{var s;return w((s=c.row.original)==null?void 0:s.id,l.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],ie=[{Header:"#",Cell:({row:c})=>e.jsx("div",{className:"pr-2",children:c.index+1})},{Header:"Role Name",accessor:"menu_role_name"},{Header:"Created by",accessor:"created_by"},{Header:"Status",accessor:"is_suspended",Cell:c=>e.jsxs("p",{children:[c.value==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),c.value==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})},{Header:"Action",accessor:"id",Cell:({cell:c})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var a,l;T((a=c.row.values)==null?void 0:a.id),V((l=c.row.values)==null?void 0:l.menu_role_name),b(!0)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var a;T((a=c.row.values)==null?void 0:a.id),v(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"}),e.jsx("button",{onClick:()=>{var a,l;T((a=c.row.values)==null?void 0:a.id),se((l=c.row.values)==null?void 0:l.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Menu Mapping"})]})}],B=(c=null)=>{c===null?S(!0):X(!0),_.post(J,{},M()).then(function(a){var l,s;console.log("logout response via usesetlogout.",a),(l=a==null?void 0:a.data)!=null&&l.status?m((s=a==null?void 0:a.data)==null?void 0:s.data):m(null)}).catch(function(a){}).finally(()=>{c===null?S(!1):X(!1)})},Z=()=>{Y(!0);let c={id:500005};_.post(re,c,M()).then(function(a){var l,s,r;console.log("fetch view data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(s=a==null?void 0:a.data)!=null&&s.status?(v(!1),B("action")):y(!0,(r=res==null?void 0:res.data)==null?void 0:r.message)}).catch(function(a){y(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{Y(!1),T(null)})},he=c=>{ae(!0);let a=p,l={menuRoleName:c==null?void 0:c.roleName};E!==null&&(l.id=E,a=le),_.post(a,l,M()).then(function(s){var r,k,C;console.log("fetch view data response..",(r=s==null?void 0:s.data)==null?void 0:r.data),(k=s==null?void 0:s.data)!=null&&k.status?(b(!1),B("action")):y(!0,(C=res==null?void 0:res.data)==null?void 0:C.message)}).catch(function(s){y(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{ae(!1),T(null),V(null)})},se=c=>{O(!0);let a={menuRoleId:c};_.post(ce,a,M()).then(function(l){var s,r;console.log("logout response via usesetlogout.",l),(s=l==null?void 0:l.data)!=null&&s.status&&(d((r=l==null?void 0:l.data)==null?void 0:r.data),g(!0))}).catch(function(l){}).finally(()=>{O(!1)})},w=(c,a)=>{ne(!0);let l={menuRoleId:E,menuId:c,isSuspended:!a};console.log("before postmenumapping....",l),_.post(ue,l,M()).then(function(s){var r,k,C;console.log("fetch view data response..",(r=s==null?void 0:s.data)==null?void 0:r.data),(k=s==null?void 0:s.data)!=null&&k.status?(U.success("Mapping updated successfully!"),se(E)):U.error((C=s==null?void 0:s.data)==null?void 0:C.message)}).catch(function(s){U.error("Something went wrong")}).finally(()=>{ne(!1)})};i.useEffect(()=>{B()},[]);const y=(c,a)=>{D(a),x(c)};return e.jsxs(e.Fragment,{children:[e.jsx(we,{}),H&&e.jsx(Me,{activateBottomErrorCard:y,errorTitle:L}),R&&e.jsx(te,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0}),e.jsx($e,{currentSelectedId:E,setcurrentSelectedId:T,currentSelectedName:z,postRole:he,addEditLoading:me,setmodalState:b,modalState:t}),e.jsx(Ke,{title:"Menu Role Mapping",isLoadingMappingUpdate:ge,isLoadingMenuMappingUpdate:K,mappingModal:P,setmappingModal:g,columns:de,menuListById:W,menuList:o}),e.jsx(Le,{deleteLoading:f,deleteMenuRole:Z,setdeleteModal:v,deleteModal:F}),R&&e.jsx(ye,{}),!R&&I!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[K&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:$,exportStatus:!1,assessmentType:!1,columns:ie,dataList:I,children:e.jsxs("button",{onClick:()=>b(!0),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Se,{})," Add Rolee"]})})]})]})}function _t(){const[t,b]=i.useState(!1),[P,g]=i.useState(!1),[F,v]=i.useState(!1),[I,m]=i.useState(null),[H,x]=i.useState(!1),[W,d]=i.useState(!1),[L,D]=i.useState(!1),[E,T]=i.useState(!1),[z,V]=i.useState(!1),[o,A]=i.useState(!1),[R,S]=i.useState(!1),[$,X]=i.useState(null),[K,O]=i.useState(null),[ge,ne]=i.useState(null),[me,ae]=i.useState(!1);je("API Role",!0);const{getApiRole:f,api_PostApiRole:Y,api_deleteApiRole:J,api_updateApiRole:p,api_getApiListByApiRoleId:re,api_updateApiRoleMapping:le}=ve(),ce=[{Header:"Sl.",Cell:({row:w})=>e.jsx("div",{className:"px-1",children:(w==null?void 0:w.index)+1})},{Header:"API Name",Cell:w=>{var y;return e.jsx("div",{className:"line-clamp-1",children:(y=w.row.original)==null?void 0:y.end_point})}},{Header:"Permission",accessor:"is_suspended",Cell:w=>{var y;return e.jsx("div",{className:"",children:e.jsx("input",{checked:!((y=w.row.values)!=null&&y.is_suspended),onChange:c=>{var a;return he((a=w.row.original)==null?void 0:a.id,c.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],ue=[{Header:"#",Cell:({row:w})=>e.jsx("div",{className:"pr-2",children:w.index+1})},{Header:"API Role Name",accessor:"api_role_name"},{Header:"Created by",accessor:"created_by"},{Header:"Status",accessor:"is_suspended",Cell:w=>e.jsxs("p",{children:[w.value==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),w.value==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})},{Header:"Action",accessor:"id",Cell:({cell:w})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var y,c;O((y=w.row.values)==null?void 0:y.id),ne((c=w.row.values)==null?void 0:c.menu_role_name),b(!0)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var y;O((y=w.row.values)==null?void 0:y.id),v(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"}),e.jsx("button",{onClick:()=>{var y,c;O((y=w.row.values)==null?void 0:y.id),Z((c=w.row.values)==null?void 0:c.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"API Mapping"})]})}],de=(w=null)=>{w===null?x(!0):ae(!0),_.post(f,{},M()).then(function(y){var c,a;console.log("logout response via usesetlogout.",y),(c=y==null?void 0:y.data)!=null&&c.status?m((a=y==null?void 0:y.data)==null?void 0:a.data):m(null)}).catch(function(y){}).finally(()=>{w===null?x(!1):ae(!1)})},ie=()=>{V(!0);let w={id:K};_.post(J,w,M()).then(function(y){var c,a,l;console.log("fetch view data response..",(c=y==null?void 0:y.data)==null?void 0:c.data),(a=y==null?void 0:y.data)!=null&&a.status?(v(!1),de("action")):se(!0,(l=res==null?void 0:res.data)==null?void 0:l.message)}).catch(function(y){se(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{V(!1),O(null)})},B=w=>{d(!0);let y=Y,c={apiRoleName:w==null?void 0:w.roleName};K!==null&&(c.id=K,y=p),_.post(y,c,M()).then(function(a){var l,s,r;console.log("fetch view data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(s=a==null?void 0:a.data)!=null&&s.status?(b(!1),de("action")):se(!0,(r=res==null?void 0:res.data)==null?void 0:r.message)}).catch(function(a){se(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{d(!1),O(null),ne(null)})},Z=w=>{S(!0);let y={apiRoleId:w};_.post(re,y,M()).then(function(c){var a,l;console.log("menu by role list",c),(a=c==null?void 0:c.data)!=null&&a.status&&(D((l=c==null?void 0:c.data)==null?void 0:l.data),g(!0))}).catch(function(c){}).finally(()=>{S(!1)})},he=(w,y)=>{T(!0);let c={apiRoleId:K,apiId:w,isSuspended:!y};console.log("before postmenumapping....",c),_.post(le,c,M()).then(function(a){var l,s,r;console.log("fetch view data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(s=a==null?void 0:a.data)!=null&&s.status?(U.success("Successfully toasted!"),Z(K)):U.error((r=a==null?void 0:a.data)==null?void 0:r.message)}).catch(function(a){U.error("Something went wrong")}).finally(()=>{T(!1)})};i.useEffect(()=>{de()},[]);const se=(w,y)=>{X(y),A(w)};return e.jsxs(e.Fragment,{children:[o&&e.jsx(Me,{activateBottomErrorCard:se,errorTitle:$}),H&&e.jsx(te,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0}),e.jsx(we,{}),e.jsx($e,{currentSelectedId:K,currentSelectedName:ge,setcurrentSelectedId:O,addEditLoading:W,postRole:B,apiListByApiRoleId:L,setmodalState:b,modalState:t}),e.jsx(Ke,{title:"Api Role Mapping",isLoadingMappingUpdate:E,setmappingModal:g,mappingModal:P,columns:ce,menuListById:L}),e.jsx(Le,{deleteLoading:z,deleteApiRole:ie,setdeleteModal:v,deleteModal:F}),H&&e.jsx(ye,{}),!H&&I!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[R&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:me,exportStatus:!1,assessmentType:!1,columns:ue,dataList:I,children:e.jsxs("button",{onClick:()=>b(!0),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Se,{})," Add Role"]})})]})]})}function Ft(t){var I,m,H;let b=ke({menuName:q().required("Enter menu name"),route:q().required("Enter route"),parent:q(),moduleId:q().required("Select module"),workflowId:q()});const g=Ce({initialValues:{menuName:"",route:"",parent:"",moduleId:"",workflowId:""},enableReinitialize:!0,onSubmit:x=>{console.log("form values",x),t==null||t.postMenu(x)},validationSchema:b}),F=x=>{let W=x.target.name,d=x.target.value;W==="moduleId"&&(t==null||t.fetchWorkflowByModule(d)),W=="menuName"&&g.setFieldValue("menuName",_e(d,g.values.menuName,100))},v=x=>{g.setFieldValue("menuName",x==null?void 0:x.menu_string),g.setFieldValue("route",x==null?void 0:x.route),g.setFieldValue("parent",x==null?void 0:x.parent_id),g.setFieldValue("moduleId",x==null?void 0:x.module_id),g.setFieldValue("workflowId",x==null?void 0:x.workflow_id),t==null||t.fetchWorkflowByModule(x==null?void 0:x.module_id)};return i.useEffect(()=>{(t==null?void 0:t.currentSelectedId)!==null&&v(t==null?void 0:t.currentMenuData)},[t==null?void 0:t.currentMenuData]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0",children:e.jsx("form",{onChange:F,onSubmit:g.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2 px-10",children:[e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Menu Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...g.getFieldProps("menuName"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:g.touched.menuName&&g.errors.menuName?g.errors.menuName:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Route",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...g.getFieldProps("route"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:g.touched.route&&g.errors.route?g.errors.route:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Parent"}),e.jsxs("select",{...g.getFieldProps("parent"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"#",className:"font-semibold text-red-500",children:"No Parent"}),Array.isArray(t==null?void 0:t.parentMenuList)&&((I=t==null?void 0:t.parentMenuList)==null?void 0:I.map((x,W)=>e.jsx("option",{value:x==null?void 0:x.id,children:x==null?void 0:x.menu_string})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:g.touched.parent&&g.errors.parent?g.errors.parent:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Module"}),e.jsxs("select",{...g.getFieldProps("moduleId"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),Array.isArray(t==null?void 0:t.moduleList)&&((m=t==null?void 0:t.moduleList)==null?void 0:m.map((x,W)=>e.jsx("option",{value:x==null?void 0:x.id,children:x==null?void 0:x.module_name})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:g.touched.moduleId&&g.errors.moduleId?g.errors.moduleId:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label block mb-1 text-gray-600 text-xs  "}),e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Workflow ",e.jsx("span",{className:"text-xs text-gray-600",children:"(Select module to get workflow list)"})," "]}),e.jsxs("select",{...g.getFieldProps("workflowId"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"#",className:"font-semibold text-red-500",children:"No Workflow"}),Array.isArray(t==null?void 0:t.workflowListByModule)&&((H=t==null?void 0:t.workflowListByModule)==null?void 0:H.map((x,W)=>e.jsx("option",{value:x==null?void 0:x.id,children:x==null?void 0:x.workflow_name})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:g.touched.workflowId&&g.errors.workflowId?g.errors.workflowId:null})]}),e.jsx("div",{className:"col-span-12 mt-10",children:t!=null&&t.addEditLoading?e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:e.jsx(te,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:(t==null?void 0:t.currentSelectedId)===null?"Submit":"Update"})})]})})})})}function It(){const[t,b]=i.useState(!1),[P,g]=i.useState(null),[F,v]=i.useState(null),[I,m]=i.useState(null),[H,x]=i.useState(null),[W,d]=i.useState(!1),[L,D]=i.useState(!1),[E,T]=i.useState(!1),[z,V]=i.useState(!1),[o,A]=i.useState(!1),[R,S]=i.useState(!1),[$,X]=i.useState(null),[K,O]=i.useState(null),[ge,ne]=i.useState(null),[me,ae]=i.useState(!1),f=i.useRef();je("Menu List",!0);const{api_getMenuList:Y,api_deleteMenu:J,api_updateMenu:p,api_getModuleList:re,api_PostMenu:le,api_getWorkflowByModule:ce,api_getParentMenuList:ue,api_getMenuById:de}=ve(),ie=[{Header:"Sl.",Cell:({row:l})=>e.jsx("div",{className:"px-1",children:l.index+1})},{Header:"Parent Name",accessor:"parentName",Cell:({cell:l})=>{var s;return e.jsxs("div",{children:[((s=l.row.values)==null?void 0:s.parentName)||"#"," "]})}},{Header:"Menu List",accessor:"menu_string"},{Header:"Route List",accessor:"route"},{Header:"Module",accessor:"module_name"},{Header:"Status",accessor:"is_suspended",Cell:l=>e.jsxs("p",{children:[l.value==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),l.value==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})},{Header:"Action",accessor:"id",Cell:({cell:l})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var s,r;O((s=l.row.values)==null?void 0:s.id),Z((r=l.row.values)==null?void 0:r.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var s;O((s=l.row.values)==null?void 0:s.id),b(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"})]})}],B=(l=null)=>{l===null?d(!0):ae(!0),_.post(Y,{},M()).then(function(s){var r,k;console.log("logout response via usesetlogout.",s),(r=s==null?void 0:s.data)!=null&&r.status?g((k=s==null?void 0:s.data)==null?void 0:k.data):g(null)}).catch(function(s){}).finally(()=>{l===null?d(!1):ae(!1)})},Z=l=>{A(!0);let s={menuId:l};_.post(de,s,M()).then(function(r){var k,C;console.log("logout response via usesetlogout.",r),(k=r==null?void 0:r.data)!=null&&k.status&&(V((C=r==null?void 0:r.data)==null?void 0:C.data),menuAddEditModal.showModal())}).catch(function(r){}).finally(()=>{A(!1)})},he=()=>{_.post(re,{},M()).then(function(l){var s,r;console.log("logout response via usesetlogout.",l),(s=l==null?void 0:l.data)!=null&&s.status&&v((r=l==null?void 0:l.data)==null?void 0:r.data)}).catch(function(l){console.log("fetch module list...")}).finally(()=>{})},se=l=>{let s={moduleId:l};_.post(ce,s,M()).then(function(r){var k,C;console.log("logout response via usesetlogout.",r),(k=r==null?void 0:r.data)!=null&&k.status&&m((C=r==null?void 0:r.data)==null?void 0:C.data)}).catch(function(r){console.log("fetch module list...")}).finally(()=>{})},w=l=>{_.post(ue,{},M()).then(function(s){var r,k;console.log("parent menu list",s),(r=s==null?void 0:s.data)!=null&&r.status&&x((k=s==null?void 0:s.data)==null?void 0:k.data)}).catch(function(s){console.log("fetch module list...")}).finally(()=>{})},y=()=>{T(!0);let l={id:K};_.post(J,l,M()).then(function(s){var r,k,C;console.log("fetch view data response..",(r=s==null?void 0:s.data)==null?void 0:r.data),(k=s==null?void 0:s.data)!=null&&k.status?(U.success("Menu deleted successfully"),b(!1),B("action")):U.error((C=s==null?void 0:s.data)==null?void 0:C.message)}).catch(function(s){U.error("Something went wrong")}).finally(()=>{T(!1),O(null)})},c=l=>{D(!0);let s=le,r=(l==null?void 0:l.parent)==="#"?"":l==null?void 0:l.parent,k=(l==null?void 0:l.moduleId)==="#"?"":l==null?void 0:l.moduleId,C={menuName:l==null?void 0:l.menuName,route:l==null?void 0:l.route,parentId:r,moduleId:k,workflowId:l==null?void 0:l.workflowId};K!==null&&(C.id=K,C.isSuspended=!1,s=p),_.post(s,C,M()).then(function(ee){var xe,fe,oe;console.log("fetch view data response..",(xe=ee==null?void 0:ee.data)==null?void 0:xe.data),(fe=ee==null?void 0:ee.data)!=null&&fe.status?(U.success("Menu added successfully"),menuAddEditModal.close(),B("action")):U.error((oe=ee==null?void 0:ee.data)==null?void 0:oe.message)}).catch(function(ee){U.error("Something went wrong")}).finally(()=>{D(!1),O(null),ne(null)})};i.useEffect(()=>{B(),he(),w()},[]);const a=(l,s)=>{X(s),S(l)};return e.jsxs(e.Fragment,{children:[R&&e.jsx(Me,{activateBottomErrorCard:a,errorTitle:$}),e.jsx(we,{}),e.jsxs("dialog",{ref:f,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur ",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{O(null),f.current.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg",children:"Add API"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ft,{postMenu:c,parentMenuList:H,fetchWorkflowByModule:se,moduleList:F,workflowListByModule:I,addEditLoading:L,currentSelectedId:K,currentMenuData:z})})]}),e.jsx(Le,{deleteLoading:E,deleteMenuList:y,setdeleteModal:b,deleteModal:t}),W&&e.jsx(ye,{}),!W&&P!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[o&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:me,exportStatus:!1,assessmentType:!1,columns:ie,dataList:P,children:e.jsxs("button",{onClick:()=>f.current.showModal(),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Se,{})," Add Menu"]})})]})]})}function Et(t){var z,V;const[b,P]=i.useState([]),[g,F]=i.useState(!1),[v,I]=i.useState(""),[m,H]=i.useState(null);let x=ke({apiEndPoint:q().required("Enter end point"),category:q().required("Select category"),desc:q().required("Enter description"),usage:q().required("Enter usage"),preCondition:q().required("Enter pre condition"),postCondition:q().required("Enter post condition"),requestPayload:q().required("Enter request payload"),responsePayload:q().required("Enter response payload"),version:q().required("Enter version"),createdBy:q().required("Select created by"),revisionNo:q().required("Enter revision no."),remarks:q().required("Enter remarks")});const d=Ce({initialValues:{apiEndPoint:"",category:"",desc:"",usage:"",preCondition:"",postCondition:"",requestPayload:"",responsePayload:"",version:"",createdBy:"",revisionNo:"",remarks:""},enableReinitialize:!0,onSubmit:o=>{console.log("form values",o),t==null||t.saveApiForm(o,b)},validationSchema:x}),L=o=>{console.log("existing property details in prop address...",o),d.setFieldValue("apiEndPoint",o==null?void 0:o.end_point),d.setFieldValue("category",o==null?void 0:o.category_id),d.setFieldValue("desc",o==null?void 0:o.description),d.setFieldValue("usage",o==null?void 0:o.usage),d.setFieldValue("preCondition",o==null?void 0:o.pre_condition),d.setFieldValue("postCondition",o==null?void 0:o.post_condition),d.setFieldValue("requestPayload",o==null?void 0:o.request_payload),d.setFieldValue("responsePayload",o==null?void 0:o.response_payload),d.setFieldValue("version",o==null?void 0:o.version),d.setFieldValue("createdBy",o==null?void 0:o.created_by),d.setFieldValue("revisionNo",o==null?void 0:o.revision_no),d.setFieldValue("remarks",o==null?void 0:o.remarks)};i.useEffect(()=>{(t==null?void 0:t.currentSelectedId)!==null&&L(t==null?void 0:t.editData)},[t==null?void 0:t.editData]);const D=(o,A)=>{H(A),F(o)},E=o=>{let A=o.target.name,R=o.target.value;A=="usage"&&d.setFieldValue("usage",Ae(R,d.values.usage,100)),A=="preCondition"&&d.setFieldValue("preCondition",Ae(R,d.values.preCondition,100)),A=="postCondition"&&d.setFieldValue("postCondition",Ae(R,d.values.postCondition,100)),A=="version"&&d.setFieldValue("version",vt(R,d.values.version,10)),A=="revisionNo"&&d.setFieldValue("revisionNo",Re(R,d.values.revisionNo,10)),A=="remarks"&&d.setFieldValue("remarks",Ae(R,d.values.remarks,100))},T=o=>{if(console.log("value..",o.target.value),console.log("key code..",o.keyCode),o.keyCode===13){let A=[...b,o.target.value];P(A),I("")}};return e.jsxs(e.Fragment,{children:[g&&e.jsx(BottomErrorCard,{activateBottomErrorCard:D,errorTitle:m}),e.jsxs("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0   ",children:[e.jsx("form",{onChange:E,onSubmit:d.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2",children:[e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["API Endpoint",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...d.getFieldProps("apiEndPoint"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.apiEndPoint&&d.errors.apiEndPoint?d.errors.apiEndPoint:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Category"}),e.jsxs("select",{...d.getFieldProps("category"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(z=t==null?void 0:t.categoryList)==null?void 0:z.map((o,A)=>e.jsx("option",{value:o==null?void 0:o.id,children:o==null?void 0:o.category_name}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.category&&d.errors.category?d.errors.category:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Usage",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...d.getFieldProps("usage"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.usage&&d.errors.usage?d.errors.usage:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Pre Condition",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...d.getFieldProps("preCondition"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.preCondition&&d.errors.preCondition?d.errors.preCondition:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Post Condition",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...d.getFieldProps("postCondition"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.postCondition&&d.errors.postCondition?d.errors.postCondition:null})]}),e.jsx("div",{className:"col-span-12"}),e.jsx("div",{className:"form-group col-span-12 md:col-span-4 grid grid-cols-12",children:e.jsxs("div",{className:"col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Request Payload",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("textarea",{...d.getFieldProps("requestPayload"),class:"h-40 resize form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.requestPayload&&d.errors.requestPayload?d.errors.requestPayload:null})]})}),e.jsx("div",{className:"form-group col-span-12 md:col-span-4 grid grid-cols-12",children:e.jsxs("div",{className:"col-span-12  mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Response Payload",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("textarea",{...d.getFieldProps("responsePayload"),class:"h-40 resize form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.responsePayload&&d.errors.responsePayload?d.errors.responsePayload:null})]})}),e.jsx("div",{className:"form-group col-span-12 md:col-span-4 grid grid-cols-12",children:e.jsxs("div",{className:"col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Description",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("textarea",{...d.getFieldProps("desc"),class:"h-40 resize form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.desc&&d.errors.desc?d.errors.desc:null})]})}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Version",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...d.getFieldProps("version"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.version&&d.errors.version?d.errors.version:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Created By"}),e.jsxs("select",{...d.getFieldProps("createdBy"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(V=t==null?void 0:t.apiDeveloperList)==null?void 0:V.map((o,A)=>e.jsx("option",{value:o==null?void 0:o.id,children:o==null?void 0:o.developer_name}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.createdBy&&d.errors.createdBy?d.errors.createdBy:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Revision No.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...d.getFieldProps("revisionNo"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.revisionNo&&d.errors.revisionNo?d.errors.revisionNo:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Remarks",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...d.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:d.touched.remarks&&d.errors.remarks?d.errors.remarks:null})]})]})}),e.jsxs("div",{className:"form-group w-40 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Tags",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{onChange:o=>I(o.target.value),value:v,onKeyDown:T,type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("div",{className:"flex",children:Array.isArray(b)&&(b==null?void 0:b.map((o,A)=>e.jsx("div",{class:"flex justify-center items-center m-1 font-medium py-1 px-2 rounded-full text-blue-700 bg-blue-100 border border-blue-300 ",children:e.jsx("div",{class:"text-xs font-normal leading-none max-w-full flex-initial",children:o})})))})]}),e.jsx("div",{className:"col-span-12 mt-10",children:t!=null&&t.isSubmitLoading?e.jsx("button",{className:" px-6 py-2.5 bg-[#1A4D8C] text-white font-medium text-xs leading-tight  rounded   hover:bg-[#113766] hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:e.jsx(te,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{onClick:d.handleSubmit,type:"button",className:" px-6 py-2.5 bg-[#1A4D8C] text-white font-medium text-xs leading-tight  rounded   hover:bg-[#113766] hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:(t==null?void 0:t.currentSelectedId)===null?"Submit":"Update"})})]})]})}function Dt(){return{apiErrorMsg:"Something went wrong",formSubmitionMsg:"Submitted Successfully!"}}function Rt(){const[t,b]=i.useState(!1),[P,g]=i.useState(null),[F,v]=i.useState(!1),[I,m]=i.useState(!1),[H,x]=i.useState(null),[W,d]=i.useState(null),[L,D]=i.useState(null),[E,T]=i.useState(!1),[z,V]=i.useState(null),[o,A]=i.useState(null),[R,S]=i.useState(!1),[$,X]=i.useState(null),[K,O]=i.useState(!1),{formSubmitionMsg:ge,apiErrorMsg:ne}=Dt(),[me,ae]=i.useState(!1),f=i.useRef();je("API List",!0);const{api_getApiList:Y,api_deleteApi:J,api_PostApi:p,api_updateApi:re,api_getApiById:le,api_getApiCategory:ce,api_getApiDeveloperList:ue}=ve(),de=[{Header:"Sl.",Cell:({row:a})=>e.jsx("div",{className:"px-1",children:a.index+1})},{Header:"API EndPoint",accessor:"end_point",Cell:({cell:a})=>{var l;return e.jsx("div",{children:e.jsx("span",{className:"",children:(l=a.row.values)==null?void 0:l.end_point})})}},{Header:"Category",accessor:"category"},{Header:"Created At",accessor:"created_at"},{Header:"Status",accessor:"is_suspended",Cell:({cell:a})=>{var l,s;return e.jsxs("div",{children:[((l=a.row.values)==null?void 0:l.discontinued)&&e.jsx("span",{className:"font-semibold text-red-400",children:"Suspended"}),!((s=a.row.values)!=null&&s.discontinued)&&e.jsx("span",{className:"font-semibold text-green-400",children:"Active"})]})}},{Header:"Action",accessor:"id",Cell:({cell:a})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var l,s,r;A((l=a.row.values)==null?void 0:l.id),X((s=a.row.values)==null?void 0:s.menu_role_name),w((r=a.row.values)==null?void 0:r.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var l;A((l=a.row.values)==null?void 0:l.id),b(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"})]})}],ie=(a=null)=>{a===null?v(!0):ae(!0),_.post(Y,{},M()).then(function(l){var s,r;console.log("logout response via usesetlogout.",l),(s=l==null?void 0:l.data)!=null&&s.status?g((r=l==null?void 0:l.data)==null?void 0:r.data):g(null)}).catch(function(l){}).finally(()=>{a===null?v(!1):ae(!1)})},B=()=>{m(!0);let a={id:o};_.post(J,a,M()).then(function(l){var s,r,k;console.log("fetch view data response..",(s=l==null?void 0:l.data)==null?void 0:s.data),(r=l==null?void 0:l.data)!=null&&r.status?(b(!1),ie("action")):c(!0,(k=res==null?void 0:res.data)==null?void 0:k.message)}).catch(function(l){c(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{m(!1),A(null)})},Z=(a,l)=>{S(!0);let s,r,k={endPoint:a==null?void 0:a.apiEndPoint,category:a==null?void 0:a.category,description:a==null?void 0:a.desc,usage:a==null?void 0:a.usage,preCondition:a==null?void 0:a.preCondition,postCondition:a==null?void 0:a.postCondition,requestPayload:a==null?void 0:a.requestPayload,responsePayload:a==null?void 0:a.responsePayload,version:a==null?void 0:a.version,createdBy:a==null?void 0:a.createdBy,revisionNo:a==null?void 0:a.revisionNo,remarks:a==null?void 0:a.remarks,tags:l};o!==null?(s=re,r=k,r.id=o):(s=p,r=k),_.post(s,r,M()).then(function(C){var ee,xe,fe;console.log("submit api response",(ee=C==null?void 0:C.data)==null?void 0:ee.data),(xe=C==null?void 0:C.data)!=null&&xe.status?(U.success("Api Added Successfully"),ie("action"),apiSubmitModal.close()):U.error((fe=C==null?void 0:C.data)==null?void 0:fe.message)}).catch(function(C){U.error(ne)}).finally(()=>{S(!1)})},he=()=>{v(!0),_.post(ce,{},M()).then(function(a){var l,s,r;console.log("fetch category list response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(s=a==null?void 0:a.data)!=null&&s.status?d((r=a==null?void 0:a.data)==null?void 0:r.data):c(!0,"Error occured in submitting deactivation application. Please try again later.")}).catch(function(a){console.log("= edit data error...",a),c(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{v(!1)})},se=()=>{v(!0),_.post(ue,{},M()).then(function(a){var l,s,r;console.log("fetch edit data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(s=a==null?void 0:a.data)!=null&&s.status?D((r=a==null?void 0:a.data)==null?void 0:r.data):c(!0,"Error occured in submitting deactivation application. Please try again later.")}).catch(function(a){console.log("= edit data error...",a),c(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{v(!1)})},w=a=>{O(!0);let l={id:a};_.post(le,l,M()).then(function(s){var r,k,C;console.log("fetch edit api response..",(r=s==null?void 0:s.data)==null?void 0:r.data),(k=s==null?void 0:s.data)!=null&&k.status?(x((C=s==null?void 0:s.data)==null?void 0:C.data),f.current.showModal()):c(!0,"Error occured in submitting deactivation application. Please try again later.")}).catch(function(s){console.log("= edit data error...",s)}).finally(s=>{O(!1)})};i.useEffect(()=>{ie(),he(),se()},[]);const y=()=>{apiSubmitModal.close()},c=(a,l)=>{V(l),T(a)};return e.jsxs(e.Fragment,{children:[e.jsx(we,{}),E&&e.jsx(Me,{activateBottomErrorCard:c,errorTitle:z}),e.jsx(Le,{deleteLoading:I,deleteApi:B,setdeleteModal:b,deleteModal:t}),e.jsxs("dialog",{ref:f,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur ",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{A(null),f.current.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg",children:"Add API"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Et,{isSubmitLoading:R,editData:H,saveApiForm:Z,categoryList:W,apiDeveloperList:L,setcurrentSelectedId:A,currentSelectedId:o,fetchApiMasterList:ie,closeApiSubmitModal:y})})]}),F&&e.jsx(ye,{}),!F&&P!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[K&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:me,exportStatus:!1,assessmentType:!1,columns:de,dataList:P,children:e.jsxs("button",{onClick:()=>f.current.showModal(),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Se,{})," Add API"]})})]})]})}function Bt(t){var d;const[b,P]=i.useState(null),[g,F]=i.useState(null);let v=ke({userType:q().required("Enter user type"),fullName:q().required("Enter full name"),mobileNo:q().required("Enter mobile no."),altMobileNo:q().required("Select alternate mobile"),email:q().required("Enter email"),address:q().required("Enter address"),userImage:q().required("Select user image")});const m=Ce({initialValues:{userType:"",fullName:"",mobileNo:"",altMobileNo:"",email:"",address:"",userImage:""},enableReinitialize:!0,onSubmit:L=>{console.log("form values",L),t==null||t.postUser(L,b)},validationSchema:v}),H=L=>{let D=L.target.name,E=L.target.value;D==="userImage"&&x(L),D=="fullName"&&m.setFieldValue("fullName",_e(E,m.values.fullName,100)),D=="mobileNo"&&m.setFieldValue("mobileNo",Re(E,m.values.mobileNo,10)),D=="altMobileNo"&&m.setFieldValue("altMobileNo",Re(E,m.values.altMobileNo,10)),D=="email"&&m.setFieldValue("email",St(E,m.values.email,100)),D=="address"&&m.setFieldValue("address",_e(E,m.values.address,100))},x=L=>{P(L.target.files[0]),F(URL.createObjectURL(L.target.files[0]))},W=()=>{var L,D,E,T,z,V,o;m.setFieldValue("userType",(L=t==null?void 0:t.currentUserData)==null?void 0:L.user_type),m.setFieldValue("fullName",(D=t==null?void 0:t.currentUserData)==null?void 0:D.name),m.setFieldValue("fullName",(E=t==null?void 0:t.currentUserData)==null?void 0:E.name),m.setFieldValue("mobileNo",(T=t==null?void 0:t.currentUserData)==null?void 0:T.mobile),m.setFieldValue("altMobileNo",(z=t==null?void 0:t.currentUserData)==null?void 0:z.alternate_mobile),m.setFieldValue("email",(V=t==null?void 0:t.currentUserData)==null?void 0:V.email),m.setFieldValue("address",(o=t==null?void 0:t.currentUserData)==null?void 0:o.address)};return i.useEffect(()=>{(t==null?void 0:t.currentSelectedId)!==null&&W()},[t==null?void 0:t.currentUserData]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0",children:e.jsx("form",{onChange:H,onSubmit:m.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2 px-10",children:[e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["User Type",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...m.getFieldProps("userType"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),Array.isArray(t==null?void 0:t.userTypeList)&&((d=t==null?void 0:t.userTypeList)==null?void 0:d.map((L,D)=>e.jsx("option",{value:L,children:L})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:m.touched.userType&&m.errors.userType?m.errors.userType:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Full Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...m.getFieldProps("fullName"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:m.touched.fullName&&m.errors.fullName?m.errors.fullName:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Mobile NO.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...m.getFieldProps("mobileNo"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:m.touched.mobileNo&&m.errors.mobileNo?m.errors.mobileNo:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Alt Mobile No.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...m.getFieldProps("altMobileNo"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:m.touched.altMobileNo&&m.errors.altMobileNo?m.errors.altMobileNo:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Email",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...m.getFieldProps("email"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:m.touched.email&&m.errors.email?m.errors.email:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Address",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...m.getFieldProps("address"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:m.touched.address&&m.errors.address?m.errors.address:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["User Image",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...m.getFieldProps("userImage"),type:"file",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:m.touched.userImage&&m.errors.userImage?m.errors.userImage:null}),e.jsx("div",{className:"w-32 h-32 rounded-full border shadow-xl mx-auto overflow-hidden mt-10 flex justify-center items-center",children:e.jsx("img",{src:g||ze})})]}),e.jsx("div",{className:"col-span-12 mt-4",children:t!=null&&t.addEditLoading?e.jsx("button",{type:"submit",className:"w-full  cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out flex justify-center items-center",children:e.jsx(te,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{type:"submit",className:"w-full  cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:(t==null?void 0:t.currentSelectedId)===null?"Submit":"Update"})})]})})})})}function Ut(t){const b=i.useRef();return i.useEffect(()=>{(t==null?void 0:t.mappingModal)===!0&&b.current.showModal()},[t==null?void 0:t.mappingModal]),e.jsx("dialog",{ref:b,className:"relative bg-transparent",children:e.jsxs("div",{className:"bg-white shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("span",{onClick:()=>{t==null||t.setmappingModal(!1),mappingModal.close()},className:"cursor-pointer rounded-full hover:bg-gray-400",children:[e.jsx(Be,{size:25})," "]})}),e.jsxs("p",{className:"text-center text-xl",children:[t==null?void 0:t.title,e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.roleName})]}),e.jsxs("div",{className:"text-center",children:[" ",(t==null?void 0:t.isLoadingFetchRoles)&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{children:e.jsx("button",{onClick:()=>{t==null||t.fetchRoles(t==null?void 0:t.currentSelectedId,"menu"),t==null||t.setmappingTypeCurrentState(0)},type:"button",className:` rounded-md border  hover:bg-[#1A4D8C] hover:text-white px-3 py-2 text-sm font-semibold   shadow-sm  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black ${(t==null?void 0:t.mappingTypeCurrentState)===0?"bg-[#1A4D8C] text-white":"border-[#1A4D8C] text-[#1A4D8C]"}`,children:" Menu Role"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{t==null||t.fetchRoles(t==null?void 0:t.currentSelectedId,"api"),t==null||t.setmappingTypeCurrentState(1)},type:"button",className:` rounded-md border  hover:bg-[#1A4D8C] hover:text-white px-3 py-2 text-sm font-semibold   shadow-sm  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black ${(t==null?void 0:t.mappingTypeCurrentState)===1?"bg-[#1A4D8C] text-white":"border-[#1A4D8C] text-[#1A4D8C]"}`,children:" API Role"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{t==null||t.fetchRoles(t==null?void 0:t.currentSelectedId,"workflow"),t==null||t.setmappingTypeCurrentState(2)},type:"button",className:` rounded-md border  hover:bg-[#1A4D8C] hover:text-white px-3 py-2 text-sm font-semibold   shadow-sm  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black ${(t==null?void 0:t.mappingTypeCurrentState)===2?"bg-[#1A4D8C] text-white":"border-[#1A4D8C] text-[#1A4D8C]"}`,children:" Workflow Role"})})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsx("div",{children:Array.isArray(t==null?void 0:t.roleList)&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.roleList})})})]})})}function qt(t){const b=i.useRef();return i.useEffect(()=>{(t==null?void 0:t.wardMappingModalState)===!0&&b.current.showModal()},[t==null?void 0:t.wardMappingModalState]),console.log("dynamic column at role modal....",t==null?void 0:t.columns),console.log("changed ward list...",t==null?void 0:t.changedWardList),e.jsx("dialog",{ref:b,id:"wardMappingModal",className:"relative bg-transparent",children:e.jsxs("div",{className:"bg-white shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("span",{onClick:()=>{t==null||t.setwardMappingModalState(!1),mappingModal.close()},className:"cursor-pointer rounded-full hover:bg-gray-400",children:[e.jsx(Be,{size:25})," "]})}),e.jsxs("p",{className:"text-center text-xl",children:[t==null?void 0:t.title,e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.roleName})]}),e.jsx("div",{children:(t==null?void 0:t.wardMappingCurrentState)==="edit"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t==null?void 0:t.changeWardListType("read"),type:"button",className:"rounded-md border border-[#1A4D8C] px-10 py-2 text-sm font-semibold text-[#1A4D8C] shadow-sm hover:bg-[#1A4D8C]/80 hover:shadow-xl",children:[e.jsx(Ct,{className:"inline"}),"Back"]}),e.jsx("button",{onClick:()=>t==null?void 0:t.postWardToMapUser(),type:"button",className:"ml-4 rounded-md bg-[#1A4D8C] px-10 py-2 text-sm font-semibold text-white shadow-sm hover:bg-[#1A4D8C]/80 hover:shadow-xl",children:"Apply"})]}):e.jsx("button",{onClick:()=>t==null?void 0:t.changeWardListType("edit"),type:"button",className:"rounded-md border border-[#1A4D8C] px-10 py-2 text-sm font-semibold text-[#1A4D8C] shadow-sm hover:bg-[#1A4D8C]/80 hover:shadow-xl",children:"Edit"})}),e.jsxs("div",{className:"text-center",children:[" ",(t==null?void 0:t.isLoadingMappingUpdate)&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsxs("div",{children:[Array.isArray(t==null?void 0:t.wardListToMap)&&(t==null?void 0:t.wardMappingCurrentState)==="edit"&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.wardListToMap}),Array.isArray(t==null?void 0:t.wardListToMap)&&(t==null?void 0:t.wardMappingCurrentState)!=="edit"&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.wardListToMap})]})})]})})}function Tt({filter:t,setFilter:b}){return e.jsxs(e.Fragment,{children:["Search : "," ",e.jsx("input",{className:"border-2 border-gray-600 px-2 bg-gray-200",type:"text",value:t||"",onChange:P=>b(P.target.value)})]})}function Ht(t){const[b,P]=i.useState("hidden"),g=i.useMemo(()=>t.columns,[]),F=i.useMemo(()=>t.dataList,[t.dataList,t==null?void 0:t.totalCount]),[v,I]=i.useState(10),[m,H]=i.useState(0);i.useEffect(()=>{H(0)},[t==null?void 0:t.totalCount]),i.useEffect(()=>{let S=(t==null?void 0:t.totalCount)/(t==null?void 0:t.perPage);(t==null?void 0:t.totalCount)%(t==null?void 0:t.perPage)!=0?L(parseInt(S)+1):L(parseInt(S))},[t==null?void 0:t.totalCount,v]);const{getTableBodyProps:x,headerGroups:W,prepareRow:d,setPageSize:L,state:D,rows:E,setGlobalFilter:T}=Pe.useTable({columns:g,data:F,initialState:{pageIndex:0}},Pe.useGlobalFilter,Pe.useSortBy,Pe.usePagination),{globalFilter:z,pageSize:V}=D,o=()=>{if(parseInt(m)>0&&parseInt(m)<=parseInt(t==null?void 0:t.lastPage))t==null||t.gotoPage(parseInt(m));else return!1},A=()=>{(t==null?void 0:t.lastPage)!=(t==null?void 0:t.currentPage)&&t.nextPage()},R=()=>{(t==null?void 0:t.currentPage)!=1&&t.prevPage()};return e.jsxs(e.Fragment,{children:[(t==null?void 0:t.search)==!1?e.jsxs("div",{className:"absolute -mt-[6.5vh] right-[2vw]",children:[e.jsx("div",{className:"flex-initial ml-2",children:e.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>P(""),onMouseLeave:()=>P("hidden"),onClick:t.exportDataF,children:["Export",e.jsx("div",{className:b+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:e.jsx(Ge,{})})]})}),e.jsx("div",{className:"flex-1",children:t.children})]}):e.jsxs("div",{className:"flex mb-2 pb-2",children:[e.jsx("div",{className:"flex-initial opacity-50",children:e.jsx(Tt,{filter:z,setFilter:T})}),e.jsx("div",{className:"flex-initial ml-2",children:e.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>P(""),onMouseLeave:()=>P("hidden"),onClick:t.exportDataF,children:["Export",e.jsx("div",{className:b+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:e.jsx(Ge,{})})]})}),e.jsx("div",{className:"flex-1",children:t.children})]}),e.jsx("div",{className:"flex w-full",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"opacity-50",children:"Total Result : "}),e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.totalCount})," "]})}),(t==null?void 0:t.feedback)!=null&&e.jsx("div",{children:e.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[e.jsx(Mt,{className:"inline text-xs text-gray-400 mr-2"}),t.feedback]})}),e.jsx("div",{className:" py-2 overflow-x-auto bg-white",children:e.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[e.jsxs("table",{...x,className:"min-w-full leading-normal",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:W==null?void 0:W.map(S=>e.jsx("tr",{...S.getHeaderGroupProps(),children:S.headers.map($=>e.jsxs("th",{...$.getHeaderProps($.getSortByToggleProps()),className:($==null?void 0:$.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[$.render("Header"),e.jsx("span",{children:$.isSorted?$.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),e.jsxs("tbody",{...x(),className:"text-sm",children:[E.map((S,$)=>{var X;return d(S),e.jsx("tr",{...S.getRowProps(),className:"bg-white shadow-lg border-b border-gray-200",children:(X=S==null?void 0:S.cells)==null?void 0:X.map((K,O)=>e.jsx("td",{...K.getCellProps(),className:"px-2 py-2 text-sm text-left",children:K.render("Cell")}))})}),e.jsx("tr",{children:e.jsx("td",{})})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-12 items-center",children:[e.jsxs("div",{className:"sm:col-span-2 col-span-3 flex w-full ml-1 pr-10",children:[e.jsx("span",{children:e.jsx("input",{className:"h-10 w-[90%] placeholder:text-gray-600 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-1 ",type:"number",onChange:S=>{H(S.target.value)},placeholder:"Go to page..."})}),e.jsxs("abbr",{className:"cursor-pointer flex items-center w-[15%] no-underline",title:"Go",onClick:()=>o(),children:[" ",e.jsx("span",{className:"font-bold bg-green-300 text-xl px-2 pb-1 rounded-full hover:text-white hover:bg-green-500",children:"⇨"})," "]})]}),e.jsxs("div",{className:"col-span-2",children:["  ",e.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:v,onChange:S=>{I(Number(S.target.value)),t.perPageC(Number(S.target.value))},children:[5,10,25,50].map(S=>e.jsxs("option",{selected:S===10,value:S,children:["show ",S]},S))})]}),e.jsxs("div",{className:"col-span-3 sm:col-span-4 text-center sm:col-start-5 col-start-7",children:["   ",e.jsxs("span",{children:["page ","",e.jsxs("strong",{children:[t==null?void 0:t.currentPage," of ",t==null?void 0:t.lastPage]}),""]})]}),e.jsxs("div",{className:"col-span-3 sm:col-span-4 text-right",children:[e.jsx("abbr",{title:"First Page",children:e.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>t==null?void 0:t.goFirst(),disabled:(t==null?void 0:t.currentPage)==1&&!0,children:[e.jsx(Lt,{})," "]})}),e.jsx("abbr",{title:"Previous Page",children:e.jsx("button",{className:((t==null?void 0:t.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>R(),disabled:(t==null?void 0:t.currentPage)==1&&!0,children:"⬅️"})}),e.jsx("abbr",{title:"Next Page",children:e.jsx("button",{className:((t==null?void 0:t.currentPage)==(t==null?void 0:t.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>A(),disabled:(t==null?void 0:t.currentPage)==(t==null?void 0:t.lastPage)&&!0,children:"➡️"})}),e.jsx("abbr",{title:"Last Page",children:e.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>t==null?void 0:t.goLast(),disabled:(t==null?void 0:t.currentPage)==(t==null?void 0:t.lastPage)&&!0,children:["  ",e.jsx(Pt,{})]})})]})]})]})})]})}const Wt=t=>{const[b,P]=i.useState(10),[g,F]=i.useState(1),[v,I]=i.useState(0),[m,H]=i.useState(0),[x,W]=i.useState(0),[d,L]=i.useState(),[D,E]=i.useState(!1),[T,z]=i.useState(!1),[V,o]=i.useState(),[A,R]=i.useState(!1),S=()=>{z(!1),R(!0),console.log(`data before hitting api (${t==null?void 0:t.api}) => `,{...t==null?void 0:t.requestBody,perPage:b,page:g}),Oe.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:b,page:g},M()).then(f=>{var Y,J,p,re,le,ce,ue,de,ie,B;((Y=f==null?void 0:f.data)==null?void 0:Y.status)==!0?(console.log("search success => ",f),t!=null&&t.getData&&(t==null||t.allData((J=f==null?void 0:f.data)==null?void 0:J.data)),o((re=(p=f==null?void 0:f.data)==null?void 0:p.data)==null?void 0:re.data),W((ce=(le=f==null?void 0:f.data)==null?void 0:le.data)==null?void 0:ce.total),I((de=(ue=f==null?void 0:f.data)==null?void 0:ue.data)==null?void 0:de.current_page),H((B=(ie=f==null?void 0:f.data)==null?void 0:ie.data)==null?void 0:B.last_page),z(!1)):(console.log("error while search => ",f),z(!0)),R(!1)}).catch(f=>(console.log("error while search => ",f),R(!1),z(!0)))},$=()=>{F(v+1)},X=()=>{F(v-1)},K=f=>{let Y=parseInt(x/f),J=parseInt(x%f);if(J==0){Y<v&&F(Y),P(f);return}if(J!=0){Y+1<v&&F(Y+1),P(f);return}},O=()=>{F(1)},ge=()=>{F(m)},ne=f=>{F(f)},me=()=>{R(!0),E(!1),Oe.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:x},M()).then(f=>{var Y,J,p;((Y=f==null?void 0:f.data)==null?void 0:Y.status)==!0&&(L((p=(J=f==null?void 0:f.data)==null?void 0:J.data)==null?void 0:p.data),ae()),R(!1)}).catch(f=>{R(!1)})},ae=()=>{E(!0)};return i.useEffect(()=>{(t==null?void 0:t.requestBody)!=null&&(F(1),P(10),S())},[t==null?void 0:t.changeData]),i.useEffect(()=>{R(!0),S()},[g,b]),e.jsxs(e.Fragment,{children:[T&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Sorry! "}),e.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),D&&e.jsx(wt,{data:d}),A&&e.jsx(ye,{}),V!=null&&(V==null?void 0:V.length)!=0?e.jsx(e.Fragment,{children:e.jsx(Ht,{search:t==null?void 0:t.search,currentPage:v,lastPage:m,goFirst:O,goLast:ge,count1:x,columns:t==null?void 0:t.columns,dataList:V,exportStatus:!0,perPage:b,perPageC:K,totalCount:x,nextPage:$,prevPage:X,exportDataF:me,exportData:d,gotoPage:f=>ne(f)})}):e.jsx(e.Fragment,{children:!A&&!T&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})};function Vt(){const[t,b]=i.useState(!1),[P,g]=i.useState(!1),[F,v]=i.useState(!1),[I,m]=i.useState(0),[H,x]=i.useState(null),[W,d]=i.useState(!1),[L,D]=i.useState(!1),[E,T]=i.useState(null),[z,V]=i.useState(!1),[o,A]=i.useState(!1),[R,S]=i.useState(null),[$,X]=i.useState(!1),[K,O]=i.useState(!1),[ge,ne]=i.useState(null),[me,ae]=i.useState(null),[f,Y]=i.useState(null),[J,p]=i.useState(null),[re,le]=i.useState(null),[ce,ue]=i.useState(!1),[de,ie]=i.useState(null),[B,Z]=i.useState(null),[he,se]=i.useState(null),[w,y]=i.useState(0),[c,a]=i.useState({}),[l,s]=i.useState(!1),[r,k]=i.useState(!1),[C,ee]=i.useState(null),xe=i.useRef();je("User List",!0);const fe=ke({filterBy:q().required("This is a required field !"),parameter:q().required("Enter search text !")}),oe=Ce({initialValues:{filterBy:"",parameter:""},onSubmit:n=>{console.log("search values....",n),a({[n==null?void 0:n.filterBy]:n==null?void 0:n.parameter}),m(h=>h+1)},validationSchema:fe});console.log(c,I);const{api_getUserList:Ue,api_EnalbeDisableUser:Ye,api_updateUser:Je,api_PostUser:Qe,api_getUserById:Xe,api_getMenuRolesByUser:Ze,api_getApiRolesByUser:pe,api_getWardListByUser:et,api_getWorkflowRolesByUser:tt,api_getUserTypeList:at,api_postMenuRoleUserMapping:lt,api_postApiRoleUserMapping:it,api_postWorkflowRoleUserMapping:st,api_postWardUserMapping:nt}=ve(),qe=[{Header:"Sl.",Cell:({row:n})=>e.jsx("div",{className:"px-1",children:(n==null?void 0:n.index)+1})},{Header:"New Ward",accessor:"ward_name"},{Header:"Old Ward",accessor:"old_ward_name"},{Header:"Permission",accessor:"permission_status",Cell:n=>{var h;return e.jsx("div",{className:"",children:e.jsx("input",{checked:(h=n.row.values)==null?void 0:h.permission_status,type:"checkbox",className:" w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded"})})}}],Te=[{Header:"Sl.",Cell:({row:n})=>e.jsx("div",{className:"px-1",children:(n==null?void 0:n.index)+1})},{Header:"New Ward",accessor:"ward_name"},{Header:"Old Ward",accessor:"old_ward_name"},{Header:"Permission",accessor:"permission_status",Cell:n=>e.jsx("div",{className:"",children:e.jsx("input",{onChange:h=>{var u;return bt((u=n.row.original)==null?void 0:u.id,h.target.checked)},type:"checkbox",className:" w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}],dt=[{Header:"Sl.",Cell:({row:n})=>e.jsx("div",{className:"px-1",children:(n==null?void 0:n.index)+1})},{Header:"Role Name",accessor:"menu_role_name"},{Header:"Permission",accessor:"permission_status",Cell:n=>{var h;return e.jsx("div",{className:"",children:e.jsx(e.Fragment,{children:e.jsx("input",{checked:(h=n.row.values)==null?void 0:h.permission_status,onChange:u=>{var j;return Ee(B,"menu",(j=n.row.original)==null?void 0:j.id,u.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})})}}],ot=[{Header:"Sl.",Cell:({row:n})=>e.jsx("div",{className:"px-1",children:(n==null?void 0:n.index)+1})},{Header:"Role Name",accessor:"api_role_name"},{Header:"Permission",accessor:"permission_status",Cell:n=>{var h;return e.jsx("div",{className:"",children:e.jsx("input",{checked:(h=n.row.values)==null?void 0:h.permission_status,onChange:u=>{var j;return Ee(B,"api",(j=n.row.original)==null?void 0:j.id,u.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],rt=[{Header:"Sl.",Cell:({row:n})=>e.jsx("div",{className:"px-1",children:(n==null?void 0:n.index)+1})},{Header:"Role Name",accessor:"role_name"},{Header:"Permission",accessor:"permission_status",Cell:n=>{var h;return e.jsx("div",{className:"",children:e.jsx("input",{checked:(h=n.row.values)==null?void 0:h.permission_status,onChange:u=>{var j;return Ee(B,"workflow",(j=n.row.original)==null?void 0:j.id,u.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],ct=[{Header:"Sl.",Cell:({row:n})=>e.jsx("div",{className:"px-1",children:n.index+1})},{Header:"User Image",accessor:"photo",Cell:({cell:n})=>e.jsx("div",{className:"rounded-full border w-10 h-10 flex justify-center items-center",children:e.jsx("img",{className:"w-8",src:ze,alt:""})})},{Header:"Employee Name",accessor:"name",Cell:({cell:n})=>{var h;return e.jsxs("div",{children:[((h=n.row.values)==null?void 0:h.name)||"NA"," "]})}},{Header:"User Name",accessor:"user_name",Cell:({cell:n})=>{var h;return e.jsxs("div",{children:[((h=n.row.values)==null?void 0:h.user_name)||"NA"," "]})}},{Header:"Mobile No.",accessor:"mobile"},{Header:"Alt Mobile No.",accessor:"alternate_mobile"},{Header:"Email",accessor:"email"},{Header:"Address",accessor:"address"},{Header:"Status",accessor:"suspended",Cell:({cell:n})=>{var h,u;return e.jsxs("p",{children:[((h=n.row.values)==null?void 0:h.suspended)==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),((u=n.row.values)==null?void 0:u.suspended)==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})}},{Header:"Action",accessor:"id",Cell:({cell:n})=>{var h,u;return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var j,N;Z((j=n.row.values)==null?void 0:j.id),mt((N=n.row.values)==null?void 0:N.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),((h=n.row.values)==null?void 0:h.suspended)===!0&&e.jsx("button",{onClick:()=>{var j;Z((j=n.row.values)==null?void 0:j.id),ee(!1),v(!0)},className:"border border-green-500 text-green-600    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-green-800 hover:text-white ",children:"Enable"}),((u=n.row.values)==null?void 0:u.suspended)===!1&&e.jsx("button",{onClick:()=>{var j;Z((j=n.row.values)==null?void 0:j.id),ee(!0),v(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Disable"}),e.jsx("button",{onClick:()=>{var j,N,G;jt("currentUserId",(j=n.row.original)==null?void 0:j.id),Z((N=n.row.original)==null?void 0:N.id),Ie((G=n.row.original)==null?void 0:G.id,"menu")},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Roles Mapping"}),e.jsx("button",{onClick:()=>{var j,N;Z((j=n.row.values)==null?void 0:j.id),He((N=n.row.values)==null?void 0:N.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Ward Mapping"})]})}}],Fe=(n=null,h=null)=>{n===null?d(!0):k(!0);let u={};console.log("filter by before....",u),_.post(Ue,u,M()).then(function(j){var N,G,Q;console.log("logout response via usesetlogout.",j),(N=j==null?void 0:j.data)!=null&&N.status?m((Q=(G=j==null?void 0:j.data)==null?void 0:G.data)==null?void 0:Q.data):m(null)}).catch(function(j){}).finally(()=>{n===null?d(!1):k(!1)})},ut=()=>{d(!0),_.post(at,{},M()).then(function(n){var h,u;console.log("usertype list response..",n),(h=n==null?void 0:n.data)!=null&&h.status&&T((u=n==null?void 0:n.data)==null?void 0:u.data)}).catch(function(n){}).finally(()=>{d(!1)})},He=n=>{le(J==="edit"?Te:qe),O(!0);let h={userId:n};_.post(et,h,M()).then(function(u){var j,N,G;console.log("after userId response.",u),(j=u==null?void 0:u.data)!=null&&j.status?(ne((N=u==null?void 0:u.data)==null?void 0:N.data),ae((G=u==null?void 0:u.data)==null?void 0:G.data),g(!0)):ne(null)}).catch(function(u){}).finally(()=>{O(!1)})},mt=n=>{S(!0);let h={id:n};_.post(Xe,h,M()).then(function(u){var j,N;console.log("user fetch response.....",u),(j=u==null?void 0:u.data)!=null&&j.status&&(A((N=u==null?void 0:u.data)==null?void 0:N.data),xe.curent.showModal())}).catch(function(u){}).finally(()=>{S(!1)})},xt=n=>{V(!0);let h={id:B,isSuspended:C};console.log("print data...",h),_.post(Ye,h,M()).then(function(u){var j,N,G;console.log("fetch view data response..",(j=u==null?void 0:u.data)==null?void 0:j.data),(N=u==null?void 0:u.data)!=null&&N.status?(U.success("User deleted successfully"),v(!1),Fe("action")):U.error((G=u==null?void 0:u.data)==null?void 0:G.message)}).catch(function(u){U.error("Something went wrong")}).finally(()=>{V(!1),Z(null)})},gt=(n,h)=>{D(!0);let u=new FormData;u.append("userType",n==null?void 0:n.userType),u.append("name",n==null?void 0:n.fullName),u.append("mobile",n==null?void 0:n.mobileNo),u.append("altMobile",n==null?void 0:n.altMobileNo),u.append("email",n==null?void 0:n.email),u.append("address",n==null?void 0:n.address),u.append("photo",h);let j=Qe;B!==null&&(u.append("id",B),j=Je),_.post(j,u,M()).then(function(N){var G,Q,Ne;console.log("fetch view data response..",(G=N==null?void 0:N.data)==null?void 0:G.data),(Q=N==null?void 0:N.data)!=null&&Q.status?(U.success("User created successfully"),userAddEditModal.close(),Fe("action")):U.error((Ne=N==null?void 0:N.data)==null?void 0:Ne.message)}).catch(function(N){U.error("Something went wrong")}).finally(()=>{D(!1),Z(null)})},Ie=(n,h="menu")=>{s(!0),se(null);let u;h==="menu"&&(u=Ze,a(dt)),h==="api"&&(u=pe,a(ot)),h==="workflow"&&(u=tt,a(rt));let j={userId:n};_.post(u,j,M()).then(function(N){var G,Q;console.log("after role fetch response",N),(G=N==null?void 0:N.data)!=null&&G.status&&(se((Q=N==null?void 0:N.data)==null?void 0:Q.data),b(!0),Z(n))}).catch(function(N){}).finally(()=>{s(!1),console.log("at finally user id is...",B)})},ht=()=>{X(!0);let n={userId:B,wardList:Object.values(f)};console.log("before post ward mapping....",n),_.post(nt,n,M()).then(function(h){var u,j,N;console.log("afterward mapping  mapping..",(u=h==null?void 0:h.data)==null?void 0:u.data),(j=h==null?void 0:h.data)!=null&&j.status?(U.success("Mapping updated successfully!"),He(B)):U.error((N=h==null?void 0:h.data)==null?void 0:N.message)}).catch(function(h){U.error("Something went wrong")}).finally(()=>{X(!1)})},Ee=(n,h,u,j)=>{console.log("====1====at mapping....",B),console.log("====2====at mapping....",n),console.log("localstorage userid",De("currentUserId")),X(!0);let N,G={userId:De("currentUserId"),permissionStatus:j};h==="menu"&&(N=lt,G.menuRoleId=u),h==="api"&&(N=it,G.apiRoleId=u),h==="workflow"&&(N=st,G.wfRoleId=u),console.log("before postmenumapping....",G),_.post(N,G,M()).then(function(Q){var Ne,We,Ve;console.log("after roles and user mapping..",(Ne=Q==null?void 0:Q.data)==null?void 0:Ne.data),(We=Q==null?void 0:Q.data)!=null&&We.status?(U.success("Mapping updated successfully!"),Ie(De("currentUserId"),h)):U.error((Ve=Q==null?void 0:Q.data)==null?void 0:Ve.message)}).catch(function(Q){U.error("Something went wrong")}).finally(()=>{X(!1)})},bt=(n,h)=>{Y(u=>({...u,[n]:{wardId:n,permissionStatus:h}}))},ft=n=>{n==="edit"?(p(n),le(Te),console.log("====at edit running=====")):(p(n),le(qe),console.log("====at read running====="))};console.log("current selected id of user..",B),i.useEffect(()=>{Fe(),ut()},[]);const yt=(n,h)=>{ie(h),ue(n)};return e.jsxs(e.Fragment,{children:[ce&&e.jsx(Me,{activateBottomErrorCard:yt,errorTitle:de}),e.jsx(we,{}),e.jsxs("div",{className:"text-center",children:[" ",l&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsx(Ut,{title:"User Role Mapping",isLoadingMappingUpdate:$,isLoadingFetchRoles:l,mappingModal:t,setmappingModal:b,columns:c,currentUserData:o,mappingTypeCurrentState:w,setmappingTypeCurrentState:y,fetchRoles:Ie,currentSelectedId:B,roleList:he}),P&&e.jsx(qt,{title:"User Ward Mapping",isLoadingMappingUpdate:$,wardMappingModalState:P,setwardMappingModalState:g,columns:re,changeWardListType:ft,changedWardList:f,wardMappingCurrentState:J,wardListToMap:J==="edit"?me:ge,postWardToMapUser:ht}),e.jsxs("dialog",{ref:xe,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur ",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{Z(null),xe.current.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg",children:"Create User"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Bt,{postUser:gt,parentMenuList:H,addEditLoading:L,currentSelectedId:B,currentUserData:o,userTypeList:E})})]}),e.jsx(Le,{deleteLoading:z,enableDisableUser:xt,setdeleteModal:v,deleteModal:F}),W&&e.jsx(ye,{}),e.jsxs("div",{className:"px-4 pt-4 mb-40",children:[R&&e.jsx(te,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(Wt,{canFilter:!1,canExport:!1,isLoadingSingleFetch:r,api:Ue,columns:ct,requestBody:c,changeData:I,children:e.jsx("div",{className:"bg-white mt-2",children:e.jsx("form",{onSubmit:oe.handleSubmit,children:e.jsxs("div",{className:"flex  space-x-4 my-5 mx-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...oe.getFieldProps("filterBy"),className:"cypress_filterBy cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"mobile",children:"Mobile"}),e.jsx("option",{value:"email",children:"Email"})]}),e.jsx("p",{className:"text-red-500 text-xs",children:oe.touched.filterBy&&oe.errors.filterBy?oe.errors.filterBy:null})]}),(oe.values.filterBy==""||oe.values.filterBy!="khataNo")&&e.jsxs("div",{className:"mt-3 sm:mt-0",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...oe.getFieldProps("parameter"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("p",{className:"text-red-500 text-xs",children:oe.touched.parameter&&oe.errors.parameter?oe.errors.parameter:null})]}),e.jsxs("div",{className:"mt-6 flex w-full justify-between h-10",children:[e.jsx("button",{type:"submit",className:" border rounded-md border-[#1A4D8C] hover:bg-[#1A4D8C] text-[#1A4D8C] hover:text-white  shadow-lg text-base font-semibold px-5 py-1",children:"Search record"}),e.jsxs("button",{onClick:()=>xe.current.showModal(),type:"buton",className:" border rounded-md border-[#1A4D8C] bg-[#1A4D8C] hover:bg-[#113b6f] hover:shadow-xl text-white  shadow-lg text-base font-semibold px-5 py-1",children:[e.jsx(Se,{className:"inline"})," Create User"]})]})]})})})})]})]})}function Ot(){const[t,b]=i.useState(0),P=[{title:"Menu Role",tabIndex:0},{title:"API Role",tabIndex:1},{title:"Menu List",tabIndex:3},{title:"API List",tabIndex:4},{title:"User List",tabIndex:5}],g=F=>{b(F)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 rounded-lg mt-4 shadow-xl broder-2 border-sky-200 bg-white",children:[e.jsx("div",{className:"col-span-12 md:col-span-12 ",children:e.jsx(Nt,{tabs:P,fun:g})}),t==0&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(At,{})," "]}),t==1&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(_t,{})," "]}),t==3&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(It,{})," "]}),t==4&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(Rt,{})," "]}),t==5&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(Vt,{})," "]})]})})}function ea(){return je("User Role Management Workfow"),e.jsx(Ot,{})}export{ea as default};
