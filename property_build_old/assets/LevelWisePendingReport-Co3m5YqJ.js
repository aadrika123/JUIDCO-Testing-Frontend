import{r as s,at as N,j as e,aw as I,l as A,b as D,p as H,m as T,o as R,A as L,aL as k,G as M,bX as W,cI as $,bM as B}from"./index-DwHujmir.js";function U(a){const[f,o]=s.useState("hidden"),x=s.useMemo(()=>a.columns,[]),y=s.useMemo(()=>a.dataList,[a.dataList,a==null?void 0:a.totalCount]),[u,g]=s.useState(0),h=()=>{var d;const n=window.location.pathname.split("/").pop(),t=n?n.replace(/-/g," "):"Table",l=window.open("","_blank");l.document.write("<html><head><title>"+t+"</title>"),l.document.write("<style>"),l.document.write("table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }"),l.document.write("th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }"),l.document.write("th { background-color: #f2f2f2; }"),l.document.write("tr:nth-child(even) { background-color: #f2f2f2;; }"),l.document.write("</style></head><body>"),l.document.write("<table>"),l.document.write("<tr>"),(d=m[0])==null||d.headers.forEach(r=>{r.render("Header")!=="Action"&&l.document.write("<th>"+r.render("Header")+"</th>")}),l.document.write("</tr>"),c.forEach((r,P)=>{var C;l.document.write("<tr>"),(C=r==null?void 0:r.cells)==null||C.forEach((F,E)=>{E===0?l.document.write("<td>"+(P+1)+"</td>"):F.column.render("Header")!=="Action"&&l.document.write("<td>"+(r==null?void 0:r.original[F.column.id])+"</td>")}),l.document.write("</tr>")}),l.document.write("</table>"),l.document.write("</body></html>"),l.document.close(),l.print()};s.useEffect(()=>{g(0)},[a==null?void 0:a.totalCount]),s.useEffect(()=>{let i=(a==null?void 0:a.totalCount)/(a==null?void 0:a.perPage);(a==null?void 0:a.totalCount)%(a==null?void 0:a.perPage)!=0?j(parseInt(i)+1):j(parseInt(i))},[a==null?void 0:a.totalCount,a.perPageData]);const{getTableBodyProps:v,headerGroups:m,prepareRow:w,setPageSize:j,state:b,rows:c,setGlobalFilter:S}=N.useTable({columns:x,data:y,initialState:{pageIndex:0}},N.useGlobalFilter,N.useSortBy,N.usePagination);return e.jsxs(e.Fragment,{children:[(a==null?void 0:a.exportStatus)!==!1&&(a==null?void 0:a.search)==!1?e.jsxs("div",{className:"absolute -mt-[1vh] right-[3.3vw] flex items-center gap-2",children:[e.jsx("div",{className:"flex-initial ml-2",children:e.jsxs("button",{className:"text-sm hover:bg-slate-500 px-3 pr-3  shadow-lg rounded py-0.5 border border-slate-500 text-slate-500 hover:text-white hover:shadow-2xl  text-center relative",onMouseEnter:()=>o(""),onMouseLeave:()=>o("hidden"),onClick:()=>a==null?void 0:a.exportDataF("csv"),children:["CSV",e.jsx("div",{className:f+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:e.jsx(I,{})})]})}),e.jsx("button",{onClick:()=>a==null?void 0:a.exportDataF("excel"),className:"text-sm hover:bg-slate-500 px-3 pr-3  shadow-lg rounded py-0.5 border border-slate-500 text-slate-500 hover:text-white hover:shadow-2xl text-center relative",children:"Excel"}),e.jsx("button",{onClick:h,className:"text-sm hover:bg-red-500 px-3 pr-3  shadow-lg rounded py-0.5 border border-slate-500 text-slate-500 hover:text-white hover:shadow-2xl text-center relative",children:"PDF"})]}):e.jsxs("div",{className:"flex mb-2 pb-2 items-end max-sm:p-2 mt-10",children:[e.jsxs("div",{className:"absolute -mt-[1vh] left-[25.3vw] flex items-center gap-2",children:[e.jsx("div",{className:"flex-initial ml-2",children:e.jsxs("button",{className:"text-sm hover:bg-slate-500 px-3 pr-3  shadow-lg rounded py-0.5 border border-slate-500 text-slate-500 hover:text-white hover:shadow-2xl  text-center relative",onMouseEnter:()=>o(""),onMouseLeave:()=>o("hidden"),onClick:()=>a==null?void 0:a.exportDataF("csv"),children:["CSV",e.jsx("div",{className:f+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:e.jsx(I,{})})]})}),e.jsx("button",{onClick:()=>a==null?void 0:a.exportDataF("excel"),className:"text-sm hover:bg-slate-500 px-3 pr-3  shadow-lg rounded py-0.5 border border-slate-500 text-slate-500 hover:text-white hover:shadow-2xl text-center relative",children:"Excel"}),e.jsx("button",{onClick:h,className:"text-sm hover:bg-red-500 px-3 pr-3  shadow-lg rounded py-0.5 border border-slate-500 text-slate-500 hover:text-white hover:shadow-2xl text-center relative",children:"PDF"})]}),e.jsx("div",{className:"flex-1",children:a.children})]}),e.jsx("div",{className:"px-2 py-2 overflow-x-auto bg-white",children:e.jsx("div",{className:"inline-block min-w-full overflow-hidden bg-white",children:e.jsxs("table",{...v,className:"min-w-full leading-normal",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-slate-200",children:m==null?void 0:m.map(i=>e.jsx("tr",{...i.getHeaderGroupProps(),children:i.headers.map(n=>e.jsxs("th",{...n.getHeaderProps(n.getSortByToggleProps()),className:(n==null?void 0:n.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[n.render("Header"),e.jsx("span",{children:n.isSorted?n.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),e.jsxs("tbody",{...v(),className:"text-sm",children:[c.map((i,n)=>{var t;return w(i),e.jsx("tr",{...i.getRowProps(),className:"bg-white hover:bg-slate-100 border-b border-gray-200",children:(t=i==null?void 0:i.cells)==null?void 0:t.map((l,d)=>e.jsx("td",{...l.getCellProps(),className:"px-2 py-2 text-sm text-left",children:l.render("Cell")}))})}),e.jsx("tr",{children:e.jsx("td",{})})]})]})})})]})}const _=()=>{const{levelWisePendingCollection:a,api_getAllUlb:f}=B();A("Level Wise Pending Report");const o=D(),[x,y]=s.useState(),[u,g]=s.useState(!1),[h,v]=s.useState([]),[m,w]=s.useState(!1),j="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",b=window.localStorage.getItem("ulbId"),c=H({initialValues:{ulbId:b||""},onSubmit:t=>{i(t)},validationSchema:T({ulbId:R().required("Select ULB")})});s.useEffect(()=>{w(!0),!b&&S(),b&&i()},[]);const S=()=>{L.get(f,k()).then(t=>{var l,d;((l=t==null?void 0:t.data)==null?void 0:l.status)==!0&&v((d=t==null?void 0:t.data)==null?void 0:d.data)}).catch(t=>{}).finally(()=>w(!1))},i=t=>{g(!0),L.post(a,{ulbId:(t==null?void 0:t.ulbId)||""},k()).then(l=>{var d;g(!1),y((d=l==null?void 0:l.data)==null?void 0:d.data)}).catch(l=>g(!1))},n=[{Header:"S.No.",Cell:({row:t})=>e.jsx("div",{children:(t==null?void 0:t.index)+1})},{Header:"Employee Name",accessor:"role_name",Cell:t=>{if((t==null?void 0:t.value)==null||(t==null?void 0:t.value)==""||(t==null?void 0:t.value)==null)return e.jsx("i",{className:"font-semibold ",children:"N/A"});if((t==null?void 0:t.value)!=null)return t==null?void 0:t.value}},{Header:"Total No of Form(s)",accessor:"total",Cell:t=>{if((t==null?void 0:t.value)==null||(t==null?void 0:t.value)==""||(t==null?void 0:t.value)==null)return e.jsx("i",{className:"font-semibold ",children:"N/A"});if((t==null?void 0:t.value)!=null)return t==null?void 0:t.value}},{Header:e.jsx("div",{className:"w-full text-center",children:"Actions"}),accessor:"id",Cell:({cell:t})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex justify-evenly",children:[e.jsx("button",{className:"w-max px-4 py-1 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-sky-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",onClick:()=>{var l,d;return o(`/saf-wise-details/${(d=(l=t==null?void 0:t.row)==null?void 0:l.values)==null?void 0:d.id}/${c.values.ulbId}`)},children:"View SAF Wise Details"}),e.jsx("button",{className:"w-max px-4 py-1 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-sky-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",onClick:()=>{var l,d;return o(`/employee-wise-details/${(d=(l=t==null?void 0:t.row)==null?void 0:l.values)==null?void 0:d.id}/${c.values.ulbId}`)},children:"View Employee Wise Details"})]})})}];return e.jsxs(e.Fragment,{children:[!b&&e.jsxs("form",{onChange:c.handleChange,onSubmit:c.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md",children:[e.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Report"}),e.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-[15%]",children:[e.jsx("div",{className:"col-span-6 font-semibold",children:"Select ULB :"}),e.jsx("div",{className:"col-span-6",children:e.jsxs("select",{name:"ulbId",id:"",className:j,disabled:u,children:[m?e.jsx("option",{disabled:!0,children:"Loading..."}):e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(t=>e.jsx("option",{value:t.id,children:t.ulb_name}))]})}),e.jsx("div",{className:"col-span-12 text-start",children:c.touched.ulbId&&c.errors.ulbId&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-red-600 text-xs",children:c.errors.ulbId})})})]}),e.jsx("div",{className:"mt-4 w-full md:w-[20%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:e.jsx("div",{className:" ",children:u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(M,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):e.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[e.jsx("span",{className:"",children:e.jsx(W,{fontSize:""})}),e.jsx("span",{children:"Search Record"})]})})})]})]}),e.jsx("div",{className:"mt-4"}),u&&e.jsx($,{}),x!=null&&(x==null?void 0:x.length)!=0&&!u?e.jsxs(e.Fragment,{children:[e.jsx(U,{dataList:x,columns:n})," "]}):e.jsx(e.Fragment,{children:!u&&e.jsx("div",{className:"w-full my-4 text-center text-red-500 text-lg font-bold",children:"No Data Found"})}),e.jsx("div",{className:"h-[20vh]"})]})};export{_ as default};
