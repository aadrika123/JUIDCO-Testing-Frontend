import{r,s as ge,c as fe,a as be,b as je,j as e,t as Ne,v as pe,k as ve,B as ye,D as we,L as Se,A as j,e as N,n as p,Q as _e,J as Ce,l as De,g as Ee}from"./index-de640f8f.js";import{B as Fe}from"./BottomErrorCard-511fba4a.js";const Ae=()=>{const[b,T]=r.useState([]),[S,Ie]=r.useState(!0),[_,H]=r.useState(!1),[R,i]=r.useState(!1),[C,U]=r.useState(!1),[q,V]=r.useState(null),[m,$]=r.useState(null),[G,D]=r.useState(!1),[E,ke]=r.useState(),[v,J]=r.useState([]),[c,F]=r.useState(1),[y,O]=r.useState(10),[w,K]=r.useState(),[I,Q]=r.useState(),[Y,z]=r.useState(),{api_schoollistactiveall:W,api_searchSectionGroupData:X,api_schoolistData:Z,api_schoollistdeleteData:ee,api_roleUpdateApi:te,api_getSectionGroupDataByID:Be,api_editSectionGroupData:ae}=Ee();ge("Role Map");const u=[{id:1,fee_head:10,fee_head_type:10,desc:"hello"},{id:2,fee_head:10,fee_head_type:10,desc:"hello"},{id:3,fee_head:10,fee_head_type:10,desc:"hello"},{id:4,fee_head:10,fee_head_type:10,desc:"hello"},{id:5,fee_head:10,fee_head_type:10,desc:"hello"}],le=fe({id:be().required("Select School")}),o=je({initialValues:{id:"",roleId:2,roleName:"Super Admin"},onSubmit:(t,a)=>{console.log("at submit ",t),ce(t),o.resetForm()},validationSchema:le}),h=t=>{console.log(t);let a,s;t===void 0?(s={perPage:y,page:c},a=Z):(s={search:t},a=X),i(!0),j.post(a,s,N()).then(function(l){var d,x,g,f,k,B,L,P,A,M;(d=l==null?void 0:l.data)!=null&&d.status?(console.log("section group data",(g=(x=l==null?void 0:l.data)==null?void 0:x.data)==null?void 0:g.data),T((k=(f=l==null?void 0:l.data)==null?void 0:f.data)==null?void 0:k.data),K((L=(B=l==null?void 0:l.data)==null?void 0:B.data)==null?void 0:L.last_page),Q((A=(P=l==null?void 0:l.data)==null?void 0:P.data)==null?void 0:A.total)):n(!0,`${(M=l==null?void 0:l.data)==null?void 0:M.message}`),i(!1)}).catch(function(l){n(!0,"Error occured while fetching data."),i(!1)})};console.log(I);const se=b;console.log(b);const re=t=>{O(parseInt(t))},oe=t=>{F(t-1)},de=t=>{F(t+1)};r.useEffect(()=>{h()},[c]),r.useEffect(()=>{h()},[y]);const ie=[{Header:"Sl No.",Cell:({cell:t})=>e.jsx("span",{children:p(t.row.index+1)})},{Header:"School Code",accessor:"school_code"},{Header:"School Name",accessor:"school_name"},{Header:"Role Name",accessor:"role_name"},{Header:"Mobile No",accessor:"mobile"},{Header:"Status",Cell:({cell:t})=>{var a,s;return e.jsx("span",{className:((a=t.row.original)==null?void 0:a.status)==="Active"?"text-[green]":"text-[red]",children:p((s=t.row.original)==null?void 0:s.status)})}},{Header:"Created Date & Time",Cell:({cell:t})=>{var a,s;return e.jsxs("span",{children:[p((a=t.row.original)==null?void 0:a.date)," |"," ",p((s=t.row.original)==null?void 0:s.time)]})}}];console.log(c),console.log(m);const ce=t=>{console.log(t),i(!0);let a,s,l={id:parseInt(t.id),roleId:t.roleId};m!==null?(a=ae,s=l,s.id=m):(t==null?void 0:t.id)!==""&&m==null&&(a=te,s=l),j.post(a,s,N()).then(function(d){var x,g,f;console.log("bank master..",(x=d==null?void 0:d.data)==null?void 0:x.data),((g=d==null?void 0:d.data)==null?void 0:g.status)===!0?(_e.success(m!==null?"Data Updated Successfully!":"Data Added Successfully"),h(),$(null)):n(!0,`${(f=d==null?void 0:d.data)==null?void 0:f.message}`),i(!1)}).catch(function(d){console.log("==2 error list...",d),n(!0,"Error occured in submitting form."),i(!1)})},ne=()=>{i(!0),D(!1);let t={id:m,status:E};j.post(ee,t,N()).then(function(a){var s,l,d;console.log("delete response..",(s=a==null?void 0:a.data)==null?void 0:s.data),((l=a==null?void 0:a.data)==null?void 0:l.status)===!0?h():n(!0,`${(d=a==null?void 0:a.data)==null?void 0:d.message}`),i(!1)}).catch(function(a){console.log("==delete error...",a),n(!0,"Error occured in deletion."),i(!1)})},me=()=>{i(!0),j.post(W,{},N()).then(function(t){t!=null&&t.data?(console.log(t==null?void 0:t.data),J(t==null?void 0:t.data.data)):n(!0,"Error occured while fetching data."),i(!1)}).catch(function(t){console.log("==2 error list...",t),n(!0,"Error occured while fetching data."),i(!1)})};r.useEffect(()=>{h(),me()},[]);const ue=t=>{let a=t.target.name,s=t.target.value;a=="sectionName"&&o.setFieldValue("sectionName",Ce(s.toUpperCase().trim(),o.values.sectionName,1))},n=(t,a)=>{V(a),U(t)},he=[{title:"School",feild:"school_name"},{title:"Role",feild:"role_name"},{title:"Created Date  ",feild:"date"},{title:"Created Time ",feild:"time"},{title:"Status",feild:"status"}],xe=()=>{const t=new De;t.text("Role Map Details",10,10),t.autoTable({theme:"grid",columns:he.map(a=>({...a,dataKey:a.feild})),body:b}),t.save("rolemap.pdf")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-[76vh] lg:h-auto overflow-auto ",children:[e.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[e.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"Role Map Form"}),e.jsx("h1",{className:"text-gray-600 text-sm",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),e.jsx("div",{className:" mt-1 ml-3 mr-3 ",children:e.jsx("div",{className:"flex h-auto  items-start justify-start w-full",children:e.jsxs("div",{className:"grid grid-cols-12 w-full  ml-3 mr-3 ",children:[e.jsx("div",{className:"col-span-12  lg:col-span-4 w-full flex justify-center",children:e.jsxs("div",{className:"mt-8 border w-full  rounded-md relative",children:[e.jsxs("div",{className:"bg-white px-3 ",children:[" ",e.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"Add"})]}),e.jsxs("div",{className:"w-full mb-6 mt-[14vh] pb-10  ",children:[e.jsxs("form",{onSubmit:o.handleSubmit,onChange:ue,children:[e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:" col-span-12 lg:col-span-2",children:e.jsxs("label",{className:" flex items-start justify-start ml-2 text-gray-800 text-md w-[20vh]   font-bold",htmlFor:"",children:["School Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]})}),e.jsxs("div",{className:"col-span-12 lg:col-span-10",children:[e.jsxs("select",{...o.getFieldProps("id"),className:" h-10 w-[90%] lg:w-[60%] px-7 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",type:"text",placeholder:"Enter school",children:[e.jsx("option",{value:"",children:"Select"}),v==null?void 0:v.map((t,a)=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.school_name}))]}),e.jsx("br",{}),e.jsx("span",{className:"text-red-600  text-xs",children:o.touched.id&&o.errors.id?o.errors.id:null})]})]}),e.jsxs("div",{className:"grid grid-cols-12 mt-6",children:[e.jsx("div",{className:" col-span-12 lg:col-span-2",children:e.jsxs("label",{className:" flex items-start justify-start ml-2 text-gray-800 text-md w-[20vh]    font-bold",htmlFor:"",children:["Role Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]})}),e.jsxs("div",{className:"col-span-12 lg:col-span-10 hidden",children:[e.jsx("input",{...o.getFieldProps("roleId"),className:"h-10  w-[90%] lg:w-[60%] px-7 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",type:"text",disabled:!0,placeholder:"Enter role"}),e.jsx("br",{}),e.jsx("span",{className:"text-red-600  text-xs",children:o.touched.roleId&&o.errors.roleId?o.errors.roleId:null})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-10",children:[e.jsx("input",{...o.getFieldProps("roleName"),className:"h-10  w-[90%] lg:w-[60%] px-7 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",type:"text",disabled:!0,placeholder:"Enter role"}),e.jsx("br",{}),e.jsx("span",{className:"text-red-600  text-xs",children:o.touched.roleId&&o.errors.roleId?o.errors.roleId:null})]})]}),e.jsx("div",{className:"mt-7",children:e.jsx("button",{type:"submit",className:"px-9 py-2.5 bg-[#6AB783] text-white font-medium text-sm leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out",children:m!==null?"Update":"Save"})})]}),e.jsx("div",{className:"flex justify-center items lg:ml-16 mt-11 text-[1.5vh]",children:e.jsxs("h1",{className:"text-red-600",children:["Note : (*) is a mandatory field"," "]})})]})]})}),e.jsx("div",{className:" col-span-12 md:col-span-12 lg:col-span-8 w-full lg:ml-2 ",children:e.jsxs("div",{className:"mt-8 border   rounded-md relative",children:[e.jsxs("div",{className:"bg-white px-3 ",children:[" ",e.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"View List"})]}),e.jsx("div",{className:"mt-5  ",children:e.jsxs("div",{className:"flex flex-wrap justify-between",children:[e.jsxs("div",{className:"ml-9 text-3xl gap-x-3 flex",children:[e.jsx("div",{className:"text-red-700 cursor-pointer",children:e.jsx(Ne,{onClick:xe})}),e.jsx("div",{className:"text-green-700 cursor-pointer",children:e.jsx(pe,{onClick:()=>H(!_)})}),_&&e.jsx(ve,{data:b,target:"_blank"})]}),e.jsxs("div",{className:" mr-9 justify-start  max-[870px]:block max-[870px]:mt-2",children:[e.jsx("div",{className:"main-sub-inner-div"}),e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"global-filter-div",children:e.jsx("form",{onSubmit:o.handleSubmit,children:e.jsxs("div",{className:"global-filter flex",children:[e.jsx("input",{type:"search",placeholder:"Search...",name:"search",onChange:t=>{z(t.target.value)},className:"bg-[#F2F4F4] h-10 pl-4 w-[90%] "}),e.jsx("button",{className:"bg-[#3b82f6] w-14 max-[320px]:w-8 h-10 rounded-r-[5px] flex items-center justify-center text-white",type:"search",onClick:()=>h(Y),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5 ",children:e.jsx("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})})})," "]})})})})]})]})}),e.jsx("div",{className:"-mt-5 main-div",children:e.jsxs("div",{className:" rounded-md h-[80vh] 2xl:p-6 p-4 overflow-y-auto",children:[R&&e.jsx(ye,{}),C&&e.jsx(Fe,{activateBottomErrorCard:n,errorTitle:q}),C&&e.jsxs("div",{className:"alert-msg",role:"alert",children:[e.jsx("strong",{className:"sorry-msg",children:"Sorry! "}),e.jsx("span",{className:"some-error-msg",children:"Some error occured while fetching list. Please try again later"}),e.jsx("span",{className:"absolute-span"})]}),G&&e.jsx(we,{setdeleteStatus:D,deleteItem:ne,deactivate:E}),e.jsxs("div",{className:"h-[57vh] overflow-auto max-[1004px]:h-full",children:[S&&(u==null?void 0:u.length)!=0&&e.jsx(Se,{filter:!1,exportStatus:!1,assessmentType:!1,columns:ie,dataList:se,pageNumber:I}),e.jsxs("div",{className:"mt-3 grid grid-cols-12 mr-3",children:[e.jsxs("div",{className:"col-span-2",children:[" ",e.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:y,onChange:t=>re(t.target.value),children:[5,10,25,50].map(t=>e.jsxs("option",{value:t,children:["show ",t]},t))})]}),e.jsxs("div",{className:"col-span-4 text-center col-start-5",children:[" ",e.jsxs("span",{children:["Page ","",e.jsxs("strong",{children:[c," of ",w]}),""]})]}),e.jsxs("div",{className:"col-span-4 text-right",children:[e.jsx("button",{className:(c===1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>oe(c),disabled:c===1,children:"⬅️"}),e.jsx("button",{className:(c===w?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>de(c),disabled:c===w,children:"➡️"})]})]})]}),S&&(u==null?void 0:u.length)==0&&e.jsx("div",{className:"data-not-found",children:"Data Not Found"})]})})]})})]})})})]})})};export{Ae as default};
