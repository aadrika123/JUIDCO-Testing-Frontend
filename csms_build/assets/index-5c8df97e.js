import{r as a,u as G,A as B,e as P,Q as y,c as se,a as ae,b as le,j as e,B as H,C as ie,g as K,k as re,n as c,l as ce}from"./index-de640f8f.js";import{s as de}from"./studentModal-e47a81f5.js";import{E as ne,P as oe,T as xe,a as U}from"./image 46-449674c3.js";import{L as J,a as me,R as fe}from"./left-4be81ad8.js";import"./BottomErrorCard-511fba4a.js";function he(l){const{isOpen:_,toggle:m}=l;a.useState(!1);const[g,b]=a.useState([]);a.useState(null);const[D,n]=a.useState(!1),{api_getRoleStudentById:N,get_active_role:p}=K(),S=G(),I={id:"",roleId:""};a.useEffect(()=>{w()},[]);const w=()=>{n(!0),B.post(p,{},P()).then(function(s){var x,f,h,i;console.log("view Employee Data..",(x=s==null?void 0:s.data)==null?void 0:x.data),((f=s==null?void 0:s.data)==null?void 0:f.status)===!0?b((h=s==null?void 0:s.data)==null?void 0:h.data):y.error(`${(i=s==null?void 0:s.data)==null?void 0:i.message}`),n(!1)}).catch(function(s){console.log("==2 error list...",s),y.warning("Error occured while fetching data."),n(!1)})},E=se({roleId:ae().required("Select Role")}),o=le({initialValues:I,onSubmit:s=>{console.log(s),v(s)},validationSchema:E}),v=s=>{n(!0);let x,f,h={id:l==null?void 0:l.currentId,roleId:parseInt(s.roleId)};x=N,f=h,B.post(x,f,P()).then(function(i){var L,R,k;console.log("category master..",(L=i==null?void 0:i.data)==null?void 0:L.data),((R=i==null?void 0:i.data)==null?void 0:R.status)===!0?(y.success("Role Successfully updated"),S("/role/student"),m()):y.error(`${(k=i==null?void 0:i.data)==null?void 0:k.message}`),n(!1)}).catch(function(i){console.log("==2 error list...",i),y.warning("Error occured while fetching data."),n(!1)})},F=s=>{s.target.name,s.target.value};return e.jsxs(e.Fragment,{children:[D&&e.jsx(H,{}),e.jsxs(ie,{isOpen:_,children:[e.jsx("div",{toggle:m,className:"flex justify-between w-full px-[20px] py-[20px] text-[2.5vh] font-bold bg-[#0F766E] text-white rounded-t-[15px]",close:e.jsx("button",{onClick:()=>m(),children:"Ã—"}),children:e.jsx("h1",{children:"Student Role"})}),e.jsx("div",{className:"flex items-center  justify-center overflow-hidden bg-white rounded-b-[15px] h-auto max-[606px]:h-[35vh]",children:e.jsx("div",{className:"block w-full   m-[20px] max[784px]:m-[10]",children:e.jsxs("form",{onSubmit:o.handleSubmit,onChange:F,children:[e.jsx("div",{className:"w-full h-auto bg-white px-[20px] py-[20px] max[784px]:px-[0px]",children:e.jsx("div",{className:"m-3 block ",children:e.jsxs("div",{className:"flex max-[425px]:block",children:[e.jsxs("label",{className:"w-[25vh] text-teal-900 mr-2 text-[2vh] flex items-center justify-center max-[625px]:w-full",children:["Role",e.jsx("span",{className:"text-red-600 ml-1 mr-1",children:"*"})]}),e.jsxs("div",{className:"block",children:[e.jsxs("select",{name:"roleId",className:"w-[40vh] h-11  p-2 flex text-[2vh]  items-start justify-start  border border-[#E5E7E9] bg-white rounded-[5px] max-[825px]:w-full max-[825px]:h-full",onChange:o.handleChange,value:o.values.roleId,children:[e.jsx("option",{value:"",children:"Select"}),g==null?void 0:g.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.role_name}))]}),e.jsx("p",{className:"text-red-500 text-sm flex items-start justify-start ml-[40px]",children:o.touched.roleId&&o.errors.roleId?o.errors.roleId:null})]})]})})}),e.jsxs("div",{className:" w-full h-[8vh] flex items-center justify-center max-[768px]:block mb-5 max-[768px]:ml-5",children:[e.jsx("button",{type:"submit",className:"text-[2vh] bg-[#0F766E] text-white border border-[#0F766E]  py-[7px] px-[20px] rounded-[5px] m-[20px] hover:text-[#0F766E] hover:border-[#0F766E] hover:bg-white",children:"Update"}),e.jsx("button",{onClick:()=>{m(),l!=null&&l.Link&&S(`${l==null?void 0:l.Link}`)},type:"cancel",className:"text-[2vh] border-red-600 border text-white bg-red-600 px-[20px] py-[7px]  rounded-[5px] hover:border-red-600 hover:bg-white hover:text-red-600",children:"Cancel"})]}),e.jsx("div",{className:"mb-5 w-full flex justify-center items-center max-[350px]:items-end max-[350px]:mt-12",children:e.jsxs("h1",{className:"text-gray-500",children:["Note : (",e.jsx("span",{className:"text-red-600",children:"*"}),") marks is mandatory."]})})]})})})]})]})}function pe(){G();const[l,_]=a.useState(),[m,g]=a.useState(!0),[b,D]=a.useState(""),[n,N]=a.useState([]),[p,S]=a.useState(!1),[I,w]=a.useState(!1);a.useState(!1),a.useState(null);const[E,o]=a.useState(null);a.useState(!1);const[v,F]=a.useState(!1),s=()=>F(!v),[x,f]=a.useState(!1),h=()=>f(!x);console.log(E);const{api_addEmployeeData:i,api_editEmployeeData:L,api_deleteEmployeeData:R,api_retrieve_all_student:k,api_getEmployeeDataById:ue}=K();a.useRef();const[u,Q]=a.useState([]),[Y,je]=a.useState([]),[d,O]=a.useState(1),[j,ge]=a.useState(10),z=()=>{w(!0),B.post(k,{},P()).then(function(t){var r,C,T,q;console.log("view Employee Data..",(r=t==null?void 0:t.data)==null?void 0:r.data),((C=t==null?void 0:t.data)==null?void 0:C.status)===!0?(_((T=t==null?void 0:t.data)==null?void 0:T.data),Q((q=t==null?void 0:t.data)==null?void 0:q.data)):activateBottomErrorCard(!0,"Error occured while fetching data."),w(!1)}).catch(function(t){console.log("==2 error list...",t),activateBottomErrorCard(!0,"Error occured while fetching data."),w(!1)})};console.log(Y),a.useEffect(()=>{z()},[]);const $=d*j,W=$-j,M=u.slice(W,$),A=Math.ceil((u==null?void 0:u.length)/j);for(let t=1;t<=Math.ceil(u.length/j);t++);const X=()=>{d!==1&&O(d-1)},Z=()=>{d!==A&&O(d+1)},V=[{title:"Admission No",feild:"admission_no"},{title:"Name",feild:"full_name"},{title:"Class",feild:"class_name"},{title:"Category",feild:"category_name"},{title:"Section",feild:"section_name"},{title:"Admission date",feild:"admission_date"},{title:"DOB",feild:"dob"},{title:"Gender",feild:"gender_name"},{title:"Mobile",feild:"mobile"}],ee=()=>{const t=new ce;t.text("Student Details",10,10),t.autoTable({theme:"grid",columns:V.map(r=>({...r,dataKey:r.feild})),body:l}),t.save("student.pdf")},te=t=>{if(D(t),b!==""){const r=l.filter(C=>Object.values(C).join("").toLowerCase().includes(b.toLowerCase()));N(r)}else N(l)};return console.log(l,u),e.jsxs(e.Fragment,{children:[I&&e.jsx(H,{}),v&&e.jsx(he,{isOpen:v,toggle:s,currentId:E}),e.jsx("div",{className:"bg-white h-[80vh] overflow-auto  flex  justify-center",children:e.jsxs("div",{className:"block w-full mx-[10px]",children:[e.jsxs("div",{className:"flex  max-[694px]:block",children:[e.jsx("div",{className:"flex w-full items-start justify-start ml-5 mt-5",children:e.jsxs("div",{className:"block w-full",children:[e.jsx("h1",{className:"text-4xl font-semibold text-gray-700 flex justify-start w-full ",children:"Student List"}),e.jsx("h1",{className:"text-gray-600 flex justify-start text-sm w-full",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),e.jsx("div",{className:"flex items-end justify-end w-full",children:e.jsxs("a",{title:"Add Studentss",children:[" ",e.jsx("button",{type:"submit",className:"text-black text-[2.2vh] bg-[#fde047] font-bold py-[5px] px-[10px] rounded-[5px] h-[40px] w-[100px] flex items-center mr-2 justify-center ",onClick:()=>{h()},children:"+ ADD"}),x&&e.jsx(de,{isOpen:x,toggle:h})]})})]}),e.jsxs("div",{className:"flex float-right mt-2",children:[e.jsx("a",{title:"Download CSV",children:e.jsx("img",{src:ne,onClick:()=>S(!p),className:"  font-bold  mr-4 w-17 h-17 "})}),p&&e.jsx(re,{data:l,target:"_blank"}),e.jsx("a",{title:"Download PDF",children:e.jsx("img",{src:oe,className:"  font-bold  w-17 h-17",onClick:ee})})]}),e.jsx("div",{className:"block  py-2",children:e.jsx("div",{className:"w-auto mt-[10vh] h-[70vh] overflow-y-auto overflow-x-hidden flex pt-[3vh]  pr-[3vh] bg-white max-[1024px]:overflow-auto  max-[768px]:w-[95%] max-[425px]:overflow-auto mr-2",children:e.jsxs("div",{className:"block w-full mt-[-20px]",children:[e.jsxs("div",{className:"flex items-center text-[2.4vh] justify-end mr-4 mb-[10px] max-[918px]:block",children:[e.jsx("div",{className:"float-left w-full flex ml-4 max-[918px]:ml-0",children:e.jsxs("div",{className:"ml-5",children:[" ",e.jsx("h1",{className:"font-bold text-gray-500",children:"List Of Student"})]})}),e.jsx("div",{className:"items-center float-left  flex mr-4 max-[618px]:ml-4",children:e.jsx("div",{className:"flex w-full mr-4",children:e.jsx("div",{className:`${m?" text-[#4ade80]":""}`,children:e.jsx("h1",{onClick:()=>g(!0),children:e.jsx("a",{title:"List View",children:e.jsx("img",{src:xe,alt:"table",className:"w-8 h-8"})})})})})}),e.jsx("input",{placeholder:"search...",onChange:t=>te(t.target.value),className:"ml-2 bg-white border border-[gainsboro] pl-[10px] rounded-[5px] h-10 max-[618px]:w-full"})]}),e.jsx("div",{className:"ml-4 mb-4",children:e.jsx("hr",{className:" border-b-2"})}),m?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-[60vh] block   ",children:[e.jsxs("table",{className:"w-full mx-4 my-1   border-b border-b-gray overflow-auto max-[1000px]:w-[100vh] max-[1000px]:relative max-[1000px]:overflow-auto",children:[e.jsx("thead",{className:" text-gray-600 bg-[#E7EFFC] text-[1.7vh] p-12 w-full border-b border-b-gray h-[6vh] ",children:e.jsxs("tr",{className:"py-2 pl-4 w-full flex items-start justify-start text-left",children:[e.jsx("th",{className:"w-[100%]"}),e.jsx("th",{className:"w-[100%]",children:"Sl no."}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Admission no"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Full Name"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start ",children:"Aadhar"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Mobile"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Email"}),e.jsx("th",{className:"w-[100%] flex items-center justify-center",children:"Role"})]})}),e.jsx("tbody",{children:b.length>1?n&&n.map((t,r)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"py-2 pl-4 w-full text-[2vh] flex items-center justify-center text-[#696969] text-left verdana even:bg-gray-100",children:[e.jsx("td",{className:"w-[100%] flex items-start justify-start text-[1.5vh]",children:e.jsx("img",{src:J,className:"w-6 h-6"})}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c((d-1)*j+r+1)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.admission_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.first_name)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.aadhar_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.mobile)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:t.email}),e.jsx("td",{className:" w-[100%] flex items-center center",children:e.jsx("a",{title:"Role",children:e.jsx("img",{src:U,className:"mr-2 text-indigo-600  hover:text-gray-500 w-6 h-6",onClick:()=>{o(t.id),s()}})})})]})})):M&&M.map((t,r)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"py-2 pl-4 w-full text-[2vh] flex items-center justify-center text-[#696969] text-left verdana even:bg-gray-100 border-b border-gray-b",children:[e.jsx("td",{className:"w-[100%] flex items-start justify-start text-[2.2vh]",children:e.jsx("img",{src:J,className:"w-6 h-6 hover:border-2 hover:border-[#4338ca]"})}),e.jsx("td",{className:"w-[100%] flex items-start justify-start text-[2.2vh]  px-1",children:c((d-1)*j+r+1)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.admission_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.first_name)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.aadhar_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.mobile)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.email)}),e.jsx("td",{className:" w-[100%] flex items-center justify-center  ",children:e.jsx("a",{title:"Role",children:e.jsx("img",{src:U,className:"mr-2 text-indigo-600  hover:text-gray-500 w-6 h-6",onClick:()=>{o(t.id),s()}})})})]})}))})]}),e.jsxs("div",{className:"flex justify-between mt-10 ",children:[e.jsxs("div",{className:"ml-10",children:[" ","Page ",d," to ",A," "]}),e.jsxs("div",{className:"flex float-right",children:[e.jsx("img",{src:me,className:d===1?"opacity-50 mr-2":"opacity-100 mr-2",onClick:X}),e.jsx("img",{src:fe,onClick:Z,className:d===A?"opacity-50":"opacity-100"})]})]})]})}):null]})})})]})})]})}export{pe as default};
