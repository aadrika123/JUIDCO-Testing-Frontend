import{r as o,u as w,K as q,c as R,a as T,Y as $,b as M,j as t,B as P,A as m,e as b,J as V,g as p}from"./index-de640f8f.js";import{B as I}from"./BottomErrorCard-511fba4a.js";import{T as J}from"./Tabs-018c5deb.js";function z(){const[h,j]=o.useState(!1),[v,N]=o.useState(null),[g,r]=o.useState(!1),[O,S]=o.useState([]),{api_getSubjectData:y,api_editSubjectData:E,api_postSubjectData:B,api_getSubjectDataByID:F}=p(),n=w(),{id:d}=q(),D=R({subjectName:T().matches($,"Please Enter value between A-Z to a-z").required("Subject is required feild")}),c=M({initialValues:{subjectName:""},onSubmit:(e,a)=>{k(e)},validationSchema:D}),k=e=>{r(!0);let a,s,l={subjectName:e.subjectName};d!==void 0?(a=E,s=l,s.id=d):(a=B,s=l),m.post(a,s,b()).then(function(i){var x,f;((x=i==null?void 0:i.data)==null?void 0:x.status)===!0?n("/subject"):u(!0,`${(f=i==null?void 0:i.data)==null?void 0:f.message}`),r(!1)}).catch(function(i){u(!0,"Error occured in submitting form."),r(!1)})},A=()=>{r(!0);let e={id:d};m.post(F,e,b()).then(function(a){var s,l,i;(s=a==null?void 0:a.data)!=null&&s.status?C((l=a==null?void 0:a.data)==null?void 0:l.data):u(!0,`${(i=a==null?void 0:a.data)==null?void 0:i.message}`),r(!1)}).catch(function(a){j(!0),r(!1)})},C=e=>{c.setFieldValue("id",e==null?void 0:e.id),c.setFieldValue("subjectName",e==null?void 0:e.subject_name)},L=()=>{m.post(y,{},b()).then(function(e){var a,s,l;(a=e==null?void 0:e.data)!=null&&a.status?S((s=e==null?void 0:e.data)==null?void 0:s.data):u(!0,`${(l=e==null?void 0:e.data)==null?void 0:l.message}`),r(!1)}).catch(function(e){u(!0,"Error occured while fetching data.")})};o.useEffect(()=>{L(),d!==void 0&&A()},[]);const _=e=>{let a=e.target.name,s=e.target.value;a=="subjectName"&&c.setFieldValue("subjectName",V(s,c.values.subjectName,50))},u=(e,a)=>{N(a),j(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[g&&t.jsx(P,{}),h&&t.jsx(I,{activateBottomErrorCard:u,errorTitle:v}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Subject Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),d===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>n("/subject-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),d!==void 0?"":t.jsx(J,{listRoute:"/subject",formRoute:"/subject-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Subject "})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:c.handleSubmit,onChange:_,children:t.jsxs("div",{className:"form",children:[t.jsx("div",{className:"col-span-4 grid grid-cols-12",children:t.jsxs("div",{className:" mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Subject Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...c.getFieldProps("subjectName"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Subject"}),t.jsx("span",{className:"text-red-600 text-xs",children:c.touched.subjectName&&c.errors.subjectName?c.errors.subjectName:null})]})}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>n("/subject"),type:"button",className:" cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:d!==void 0?"Update":"Save"})})]})]})})})]})})})}export{z as default};
