import{r as u,u as D,K as w,c as q,a as M,Y as T,b as $,j as t,B as p,A as m,e as x,J as P,g as V}from"./index-de640f8f.js";import{B as I}from"./BottomErrorCard-511fba4a.js";import{T as J}from"./Tabs-018c5deb.js";function z(){const[b,f]=u.useState(!1),[N,g]=u.useState(null),[j,o]=u.useState(!1),[O,y]=u.useState([]),{api_getRouteData:E,api_postRouteData:R,api_editRouteData:B,api_getRouteDataById:S}=V(),n=D(),{id:d}=w(),F=q({routeName:M().matches(T,"Please Enter value between A-Z to a-z").required("Category is required feild")}),r=$({initialValues:{routeName:""},onSubmit:(e,a)=>{C(e)},validationSchema:F}),C=e=>{o(!0);let a,i,l={routeName:e.routeName};d!==void 0?(a=B,i=l,i.id=d):(a=R,i=l),m.post(a,i,x()).then(function(s){var h,v;((h=s==null?void 0:s.data)==null?void 0:h.status)===!0?n("/route"):c(!0,`${(v=s==null?void 0:s.data)==null?void 0:v.message}`),o(!1)}).catch(function(s){c(!0,"Error occured in submitting form."),o(!1)})},k=()=>{o(!0);let e={id:d};m.post(S,e,x()).then(function(a){var i,l,s;(i=a==null?void 0:a.data)!=null&&i.status?A((l=a==null?void 0:a.data)==null?void 0:l.data):c(!0,`${(s=a==null?void 0:a.data)==null?void 0:s.message}`),o(!1)}).catch(function(a){f(!0),o(!1)})},A=e=>{r.setFieldValue("id",e==null?void 0:e.id),r.setFieldValue("routeName",e==null?void 0:e.route_name)},L=()=>{m.post(E,{},x()).then(function(e){var a,i,l;(a=e==null?void 0:e.data)!=null&&a.status?y((i=e==null?void 0:e.data)==null?void 0:i.data):c(!0,`${(l=e==null?void 0:e.data)==null?void 0:l.message}`),o(!1)}).catch(function(e){c(!0,"Error occured while fetching data.")})};u.useEffect(()=>{L(),d!==void 0&&k()},[]);const _=e=>{let a=e.target.name,i=e.target.value;a=="routeName"&&r.setFieldValue("routeName",P(i,r.values.routeName,50))},c=(e,a)=>{g(a),f(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[j&&t.jsx(p,{}),b&&t.jsx(I,{activateBottomErrorCard:c,errorTitle:N}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Route Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),d===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>n("/route-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),d!==void 0?"":t.jsx(J,{listRoute:"/route",formRoute:"/route-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Route "})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:r.handleSubmit,onChange:_,children:t.jsxs("div",{className:"form",children:[t.jsx("div",{className:"col-span-4 grid grid-cols-12",children:t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Route Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...r.getFieldProps("routeName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter route"}),t.jsx("span",{className:"text-red-600  text-xs flex items-center ml-8",children:r.touched.routeName&&r.errors.routeName?r.errors.routeName:null})]})}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>n("/route"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:d!==void 0?"Update":"Save"})})]})]})})})]})})})}export{z as default};
