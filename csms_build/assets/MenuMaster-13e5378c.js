import{r as c,s as Te,c as Pe,a as w,b as Le,j as t,a9 as pe,aa as Ie,T as M,t as Ve,v as qe,k as He,I as Oe,B as $e,D as Re,L as ze,A as v,e as b,Q as u,n as k,S as Ue,w as Je,J as We,o as Ye,l as Ke,g as Qe}from"./index-de640f8f.js";import{B as Ge}from"./BottomErrorCard-511fba4a.js";import{I as Xe}from"./iconify-0b74132a.js";const lt=()=>{const[g,D]=c.useState([]),[ee,te]=c.useState(null),[F,Ze]=c.useState(!0),[A,ae]=c.useState(!1),[le,se]=c.useState([]),[ie,d]=c.useState(!1),[E,B]=c.useState(!1),[re,ce]=c.useState(null),[x,T]=c.useState(null),[de,y]=c.useState(!1),[P,oe]=c.useState(),[o,L]=c.useState(1),[N,ne]=c.useState(10),[S,p]=c.useState(),[I,V]=c.useState(),[_,ue]=c.useState(),[q,me]=c.useState([]),{api_geticonData:he,menu_crud_store:xe,menu_crud_get_by_id:fe,menu_crud_get:ge,menu_crud_search:Ne,menu_crud_delete:je,menu_crud_edit:ve}=Qe();Te("Exam Term Master");const be=()=>{v.post(he,{},b()).then(function(e){e!=null&&e.data?me(e==null?void 0:e.data):C(!0,"error"),d(!1)}).catch(function(e){console.log("==2 error list...",e),C(!0,"Error occured while fetching data.")})};c.useEffect(()=>{be()},[]);const f=[{id:1,fee_head:10,fee_head_type:10,desc:"hello"},{id:2,fee_head:10,fee_head_type:10,desc:"hello"},{id:3,fee_head:10,fee_head_type:10,desc:"hello"},{id:4,fee_head:10,fee_head_type:10,desc:"hello"},{id:5,fee_head:10,fee_head_type:10,desc:"hello"}];Pe({menuName:w().required("Required"),isSubMenu:w().required("Required"),orderNo:w().required("Required"),iconName:w().required("Required")});const i=Le({initialValues:{menuName:"",isSubMenu:0,orderNo:"",iconName:""},onSubmit:async(e,s)=>{console.log("at submit ",e);const l={...e,isSubMenu:e.isSubMenu?1:0};De(l),i.resetForm()}}),m=e=>{console.log(e);let s,l;e===void 0?(l={perPage:N,page:o},s=ge):(l={search:e,perPage:N,page:o},s=Ne),d(!0),v.post(s,l,b()).then(function(a){var r,n,h,j,H,O,$,R,z,U,J,W,Y,K,Q,G,X,Z;((r=a==null?void 0:a.data)==null?void 0:r.status)===!0?((h=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:h.total)===0?(u.error("Data not Found"),D((H=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:H.data),p(($=(O=a==null?void 0:a.data)==null?void 0:O.data)==null?void 0:$.last_page),V((z=(R=a==null?void 0:a.data)==null?void 0:R.data)==null?void 0:z.total)):(console.log("exam term data",(J=(U=a==null?void 0:a.data)==null?void 0:U.data)==null?void 0:J.data),D((Y=(W=a==null?void 0:a.data)==null?void 0:W.data)==null?void 0:Y.data),p((Q=(K=a==null?void 0:a.data)==null?void 0:K.data)==null?void 0:Q.last_page),V((X=(G=a==null?void 0:a.data)==null?void 0:G.data)==null?void 0:X.total)):u.error(`${(Z=a==null?void 0:a.data)==null?void 0:Z.message}`),d(!1)}).catch(function(a){u.warning("Error occured while fetching data."),d(!1)})};console.log(I);const we=g;console.log(g);const ye=e=>{ne(parseInt(e))},Se=e=>{L(e-1)},_e=e=>{L(e+1)};c.useEffect(()=>{m()},[o]),c.useEffect(()=>{m()},[N]);const Ce=[{Header:"Sl No.",Cell:({cell:e})=>t.jsxs("span",{children:[" ",(o-1)*N+e.row.index+1," "]})},{Header:"Menu Name",accessor:"menu_name"},{Header:"Order no",accessor:"order_no"},{Header:"Created Date & Time",Cell:({cell:e})=>{var s,l;return t.jsxs("span",{children:[k((s=e.row.original)==null?void 0:s.date)," |"," ",k((l=e.row.original)==null?void 0:l.time)]})}},{Header:"Status",Cell:({cell:e})=>{var s,l;return t.jsx("span",{className:((s=e.row.original)==null?void 0:s.status)==="Active"?"text-[green]":"text-[red]",children:k((l=e.row.original)==null?void 0:l.status)})}},{Header:"Action",Cell:({cell:e})=>{var s,l;return t.jsxs("div",{className:"flex",children:[t.jsx("button",{onClick:()=>{Ue.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(a=>{var r,n;a.value&&(T((r=e.row.original)==null?void 0:r.id),Me((n=e.row.original)==null?void 0:n.id))})},className:"edit-button-master",children:t.jsx("a",{title:"edit",children:t.jsx(Je,{size:23})})}),t.jsx("button",{onClick:()=>{var a,r;te((a=e.row.original)==null?void 0:a.id),oe(((r=e.row.original)==null?void 0:r.status)==="Active"?"deactive":"active"),y(!0)},className:`${((s=e.row.original)==null?void 0:s.status)=="Active"?"deactivate-button-master":"deactivate-second-button-master"}`,children:((l=e.row.original)==null?void 0:l.status)==="Active"?"Deactivate":"Activate"})]})}}];console.log(o);const Me=e=>{d(!0);let s={id:e};v.post(fe,s,b()).then(function(l){var a,r,n,h;console.log("fetch edit data response..",(a=l==null?void 0:l.data)==null?void 0:a.data),(r=l==null?void 0:l.data)!=null&&r.status?ke((n=l==null?void 0:l.data)==null?void 0:n.data):u.error(`${(h=l==null?void 0:l.data)==null?void 0:h.message}`),d(!1)}).catch(function(l){console.log("= edit data error...",l),B(!0),d(!1)})},ke=e=>{console.log("existing property details in prop address...",e),i.setFieldValue("menuName",e==null?void 0:e.menu_name),i.setFieldValue("iconName",e==null?void 0:e.icon_name),i.setFieldValue("isSubMenu",e==null?void 0:e.is_sub_menu),i.setFieldValue("orderNo",e==null?void 0:e.order_no)};console.log(x);const De=e=>{console.log(e),d(!0);let s,l=e,a=e;x!==null?(s=ve,l=a,l.id=x):(e==null?void 0:e.menuName)!==""&&(e==null?void 0:e.orderNo)!==""&&x==null&&(s=xe,l=a),v.post(s,e,b()).then(function(r){var n,h,j;console.log("bank master..",(n=r==null?void 0:r.data)==null?void 0:n.data),((h=r==null?void 0:r.data)==null?void 0:h.status)===!0?(u.success(x!==null?"Data Updated Successfully!":"Data Added Successfully"),m(),T(null)):u.error(`${(j=r==null?void 0:r.data)==null?void 0:j.message}`),d(!1)}).catch(function(r){console.log("==2 error list...",r),u.warning("Error occured in submitting form."),d(!1)})},Fe=()=>{d(!0),y(!1);let e={id:ee,status:P};v.post(je,e,b()).then(function(s){var l,a;((l=s==null?void 0:s.data)==null?void 0:l.status)===!0?(m(),(e==null?void 0:e.status)=="active"?u.success("Activated Successfully"):u.error("Deactivated Successfully")):u.error(`${(a=s==null?void 0:s.data)==null?void 0:a.message}`),d(!1)}).catch(function(s){u.warning("Error occured in deletion."),d(!1)})};c.useEffect(()=>{m()},[]);const Ae=e=>{let s=e.target.name,l=e.target.value;s=="menuName"&&i.setFieldValue("menuName",We(l,i.values.menuName,50)),s=="orderNo"&&i.setFieldValue("orderNo",Ye(l,i.values.orderNo,3))},C=(e,s)=>{ce(s),B(e)},Ee=[{title:"Menu Name",feild:"menu_name"},{title:"Order no",feild:"order_no"},{title:"Created Date  ",feild:"date"},{title:"Created Time ",feild:"time"},{title:"Status",feild:"status"}],Be=()=>{const e=new Ke;e.text("Menu Master Details",10,10),e.autoTable({theme:"grid",columns:Ee.map(s=>({...s,dataKey:s.feild})),body:g}),e.save("MenuMasters.pdf")};return c.useEffect(()=>{const e=g.map(s=>{const{id:l,...a}=s;return a});console.log(e),se(e)},[g]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full h-[76vh] lg:h-auto overflow-auto ",children:[t.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"Menu Master"}),t.jsx("h1",{className:"text-gray-600 text-sm",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),t.jsx("div",{className:" mt-1 ml-3 mr-3 ",children:t.jsx("div",{className:"flex h-auto  items-start justify-start w-full",children:t.jsxs("div",{className:"grid grid-cols-12 w-full  ml-3 mr-3 ",children:[t.jsx("div",{className:"col-span-12  lg:col-span-4 w-full flex justify-center",children:t.jsxs("div",{className:"mt-8 border w-full  rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"Add"})]}),t.jsxs("div",{className:"w-full mb-6 h-[70vh] mt-14 pb-10 overflow-scroll ",children:[t.jsx(pe,{value:i,children:t.jsxs(Ie,{autoComplete:"off",onChange:Ae,onSubmit:i.handleSubmit,children:[t.jsxs("div",{className:"px-10 gap-4",children:[t.jsx("div",{className:"mt-4",children:t.jsx("div",{children:t.jsx(M,{...i.getFieldProps("orderNo"),label:"Order No",name:"orderNo",fullWidth:!0,size:"small",error:i.touched.orderNo&&!!i.errors.orderNo,helperText:i.touched.orderNo&&i.errors.orderNo})})}),t.jsx("div",{className:"mt-4",children:t.jsx(M,{...i.getFieldProps("menuName"),label:"Menu Name",name:"menuName",fullWidth:!0,size:"small",error:i.touched.menuName&&!!i.errors.menuName,helperText:i.touched.menuName&&i.errors.menuName})}),t.jsxs("div",{className:"mt-4 flex justify-start",children:[t.jsx("input",{...i.getFieldProps("isSubMenu"),className:"mr-2 leading-tight w-4 h-4 text-green-600",type:"checkbox"}),t.jsx("label",{className:"text-sm text-gray-600",children:"Is Sub Menu"})]}),t.jsx("div",{className:"mt-4",children:q&&q.map(e=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex row justify-start items-center mt-4",children:[t.jsxs("label",{className:"form-check-label text-gray-800 ml-6",children:[" ",t.jsxs("span",{className:"flex text-gray-700 text-sm font-semibold ",children:[" ",t.jsx(Xe,{icon:e==null?void 0:e.iconName,className:"w-8 h-8"})]})]}),t.jsx("input",{name:"iconName",value:e==null?void 0:e.iconName,checked:i.values.iconName===(e==null?void 0:e.iconName),onChange:s=>i.setFieldValue("iconName",s.target.value),type:"checkbox",className:"text-slat-500  ml-[10px]  text-[#6b7280] w-5 h-5 font-bold mt-2   "})]})}))})]}),t.jsx("div",{className:"mt-7",children:t.jsx("button",{type:"submit",className:"px-9 py-2.5 bg-[#6AB783] text-white font-medium text-sm leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out",children:x!==null?"Update":"Save"})})]})}),t.jsx("div",{className:"flex justify-center items lg:ml-16 mt-11 text-[1.5vh]",children:t.jsxs("h1",{className:"text-red-600",children:["Note : (*) is a mandatory field"," "]})})]})]})}),t.jsx("div",{className:" col-span-12 md:col-span-12 lg:col-span-8 w-full lg:ml-2 ",children:t.jsxs("div",{className:"mt-8 border   rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"View List"})]}),t.jsx("div",{className:"mt-5  ",children:t.jsxs("div",{className:"flex flex-wrap justify-between",children:[t.jsxs("div",{className:"ml-9 text-3xl gap-x-3 flex",children:[t.jsx("div",{className:"text-red-700 cursor-pointer",children:t.jsx(Ve,{onClick:Be})}),t.jsx("div",{className:"text-green-700 cursor-pointer",children:t.jsx(qe,{onClick:()=>ae(!A)})}),A&&t.jsx(He,{data:le,target:"_blank"})]}),t.jsxs("div",{className:" mr-9 justify-start  max-[870px]:block max-[870px]:mt-2",children:[t.jsx("div",{className:"main-sub-inner-div"}),t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"global-filter-div",children:t.jsx(M,{id:"search",type:"search",label:"Search",size:"small",fullWidth:!0,onChange:e=>{e.target.value===""?m():ue(e.target.value)},onKeyDown:e=>e.key==="Enter"&&m(_),sx:{width:"100%"},InputProps:{endAdornment:t.jsx(Oe,{position:"end",sx:{marginRight:"-14px"},children:t.jsx("button",{onClick:()=>{_===""?m():m(_)},className:"bg-[#3b82f6] w-14 max-[320px]:w-8 h-10 rounded-r-[5px] flex items-center justify-center text-white",type:"submit",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5 ",children:t.jsx("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})})})})}})})})]})]})}),t.jsx("div",{className:"-mt-5 main-div",children:t.jsxs("div",{className:" rounded-md h-[80vh] 2xl:p-6 p-4 overflow-y-auto",children:[ie&&t.jsx($e,{}),E&&t.jsx(Ge,{activateBottomErrorCard:C,errorTitle:re}),E&&t.jsxs("div",{className:"alert-msg",role:"alert",children:[t.jsx("strong",{className:"sorry-msg",children:"Sorry! "}),t.jsx("span",{className:"some-error-msg",children:"Some error occured while fetching list. Please try again later"}),t.jsx("span",{className:"absolute-span"})]}),de&&t.jsx(Re,{setdeleteStatus:y,deleteItem:Fe,deactivate:P}),t.jsxs("div",{className:"h-[57vh] overflow-auto max-[1004px]:h-full",children:[F&&(f==null?void 0:f.length)!=0&&t.jsx(ze,{filter:!1,exportStatus:!1,assessmentType:!1,columns:Ce,dataList:we,pageNumber:I}),t.jsxs("div",{className:"mt-3 grid grid-cols-12",children:[t.jsxs("div",{className:"col-span-2",children:[" ",t.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:N,onChange:e=>ye(e.target.value),children:[5,10,25,50].map(e=>t.jsxs("option",{value:e,children:["show ",e]},e))})]}),t.jsxs("div",{className:"col-span-4 text-center col-start-5",children:[" ",t.jsxs("span",{children:["Page ","",t.jsxs("strong",{children:[o," of ",S]}),""]})]}),t.jsxs("div",{className:"col-span-4 text-right",children:[t.jsx("button",{className:(o===1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>Se(o),disabled:o===1,children:"⬅️"}),t.jsx("button",{className:(o===S?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>_e(o),disabled:o===S,children:"➡️"})]})]})]}),F&&(f==null?void 0:f.length)==0&&t.jsx("div",{className:"data-not-found",children:"Data Not Found"})]})})]})})]})})})]})})};export{lt as default};
