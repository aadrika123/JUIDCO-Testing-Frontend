import{r as l,u as gt,c as ht,a as bt,b as wt,j as t,B as vt,n as o,S as w,P as yt,A as v,e as y,g as Nt}from"./index-de640f8f.js";import{D as St}from"./delete-e88f32cb.js";import{E as pt}from"./image 40-6da97afb.js";import{T as Ct,E as kt,P as _t,a as Et}from"./image 46-449674c3.js";function $t(){var D;const[Ft,J]=l.useState(!1),[N,K]=l.useState(!1),[At,R]=l.useState(null),[H,d]=l.useState(!1);l.useState("");const[S,Dt]=l.useState();l.useState(!1);const[Q,W]=l.useState(!0);l.useState(!1);const b=gt(),{api_bulkdataaddstudent:X,api_retrieve_all_student:Z,api_masters_student_crud_delete:V,api_searchStudentByIdList:tt}=Nt(),et={uploadCSV:""},st=ht({uploadCSV:bt().required("Select CSV File")}),n=wt({initialValues:et,onSubmit:e=>{const a=new FormData;a.append("uploadCSV",e.uploadCSV),at(a)},validationSchema:st}),at=e=>{d(!0);let a,i;a=X,i=e,v.post(a,i,y()).then(function(s){var c;console.log("Registration.....",s==null?void 0:s.data),s!=null&&s.data?(w.fire({icon:"success",title:"Student",text:"Csv Data Added Successfully.",showConfirmButton:!1,timer:1500}),b("/view-student-list")):x(!0,`${(c=s==null?void 0:s.data)==null?void 0:c.response}`),d(!1)}).catch(function(s){console.log("==2 error list...",s),x(!0,"Error occured in submitting form."),d(!1)})},lt=e=>{n.setFieldValue("uploadCSV",e)},it=e=>{if(e.target.name=="uploadCSV"){let i=e.target.files[0];lt(i);return}},[p,C]=l.useState([]),[rt,k]=l.useState(),[dt,_]=l.useState(),[E,nt]=l.useState();l.useState([]);const[j,F]=l.useState(1),[g,ot]=l.useState(10),m=(e=null)=>{let a,i;e===null?(i={perPage:g,page:j},a=Z):(i={search:E},a=tt),d(!0),v.post(a,i,y()).then(function(s){var c,h,r,f,u,B,P,L,T,$,M,O,q,I,U,Y,z,G;((c=s==null?void 0:s.data)==null?void 0:c.status)===!0?((r=(h=s==null?void 0:s.data)==null?void 0:h.data)==null?void 0:r.total)===0?(toast.error("Data not Found"),C((u=(f=s==null?void 0:s.data)==null?void 0:f.data)==null?void 0:u.data),k((P=(B=s==null?void 0:s.data)==null?void 0:B.data)==null?void 0:P.last_page),_((T=(L=s==null?void 0:s.data)==null?void 0:L.data)==null?void 0:T.total)):(console.log("exam term data",(M=($=s==null?void 0:s.data)==null?void 0:$.data)==null?void 0:M.data),C((q=(O=s==null?void 0:s.data)==null?void 0:O.data)==null?void 0:q.data),k((U=(I=s==null?void 0:s.data)==null?void 0:I.data)==null?void 0:U.last_page),_((z=(Y=s==null?void 0:s.data)==null?void 0:Y.data)==null?void 0:z.total)):toast.error(`${(G=s==null?void 0:s.data)==null?void 0:G.message}`),d(!1)}).catch(function(s){console.log("==2 error list...",s),x(!0,"Error occured while fetching data."),d(!1)})};l.useEffect(()=>{m()},[]),console.log(dt);const A=p;console.log(p);const ct=e=>{ot(parseInt(e))},mt=e=>{F(e-1)},xt=e=>{F(e+1)};l.useEffect(()=>{m()},[j]),l.useEffect(()=>{m()},[g]);const ft=[{title:"Admission No",feild:"admission_no"},{title:"Name",feild:"full_name"},{title:"Class",feild:"class_name"},{title:"Category",feild:"category_name"},{title:"Section",feild:"section_name"},{title:"Admission date",feild:"admission_date"},{title:"DOB",feild:"dob"},{title:"Gender",feild:"gender_name"},{title:"Mobile",feild:"mobile"}],ut=()=>{const e=new jsPDF;e.text("Student Details",10,10),e.autoTable({theme:"grid",columns:ft.map(a=>({...a,dataKey:a.feild})),body:S}),e.save("student.pdf")},jt=(e,a)=>{w.fire({icon:"warning",title:"Are you sure to delete?",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(s=>{s.value&&i(e,a)});const i=(s,c)=>{d(!0);let h={id:s,status:c==="Active"?"deactive":"active"};v.post(V,h,y()).then(function(r){var f,u;console.log("delete response..",(f=r==null?void 0:r.data)==null?void 0:f.data),((u=r==null?void 0:r.data)==null?void 0:u.status)===!0?m():x(!0,"Error occured in deletion."),d(!1)}).catch(function(r){console.log("==delete error...",r),x(!0,"Error occured in deletion."),d(!1)})}},x=(e,a)=>{R(a),J(e)};return t.jsxs(t.Fragment,{children:[" ",H&&t.jsx(vt,{}),t.jsxs("div",{className:"block w-full mx-[10px]",children:[t.jsx("div",{className:"flex  max-[694px]:block",children:t.jsx("div",{className:"flex w-full items-start justify-start ml-5 mt-5",children:t.jsxs("div",{className:"block w-full",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-700 flex justify-start w-full ",children:"Student Bulk List"}),t.jsx("h1",{className:"text-teal-600 flex justify-start text-sm w-full",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})})}),t.jsx("div",{className:"flex mt-[5vh]",children:t.jsx("form",{onSubmit:n.handleSubmit,onChange:it,encType:"multipart/form-data",className:"flex  items-center justify-center w-full",children:t.jsx("div",{className:"flex  items-end justify-center w-full",children:t.jsxs("div",{className:"flex  items-center justify-center",children:[t.jsxs("label",{htmlFor:"uploadCSV",className:" inline-flex items-center px-4 py-2 bg-white border border-gray-600 rounded-l font-semibold cursor-pointer text-sm text-black tracking-widest  active:bg-white focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ",children:[" ","Choose Student CSV File"]}),t.jsxs("div",{children:[" ",t.jsx("input",{type:"file",name:"uploadCSV",accept:".csv",id:"uploadCSV",className:"sr-only inline-flex items-center px-4 py-2 bg-white border border-gray-600 rounded-l font-semibold cursor-pointer text-sm text-black tracking-widest  active:bg-white focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ",value:n.values.uploadCSV[0],onChange:e=>{n.setFieldValue("uploadCSV",e.target.files[0])}}),n.values.uploadCSV?(D=n.values.uploadCSV)==null?void 0:D.name:"No file selected",t.jsx("br",{}),t.jsx("span",{className:"text-red-600 text-xs",children:n.touched.uploadCSV&&n.errors.uploadCSV?n.errors.uploadCSV:null})]}),t.jsx("button",{type:"submit",className:"next-btn",children:"Upload"})]})})})}),t.jsx("div",{className:"block ",children:t.jsx("div",{className:"w-auto  h-[60vh] overflow-y-auto overflow-x-hidden flex pt-[3vh]  pr-[3vh] bg-white max-[1024px]:overflow-auto  max-[768px]:w-[95%] max-[425px]:overflow-auto mr-2",children:t.jsxs("div",{className:"block w-full mt-[-20px]",children:[t.jsxs("div",{className:"flex items-center text-[2.4vh] justify-end mr-4 mb-[10px] max-[918px]:block",children:[t.jsx("div",{className:"float-left w-full flex ml-4 max-[918px]:ml-0",children:t.jsxs("div",{className:"ml-5",children:[" ",t.jsx("h1",{className:"font-bold text-[#0F766E]",children:"List Of Student"})]})}),t.jsx("div",{className:"items-center float-left  flex mr-4 max-[618px]:ml-4",children:t.jsx("div",{className:"flex w-full mr-4",children:t.jsxs("div",{className:`${Q?" text-[#4ade80] flex":""}`,children:[t.jsx("h1",{onClick:()=>W(!0),className:"mr-5",children:t.jsx("a",{title:"List View",children:t.jsx("img",{src:Ct,alt:"table",className:"w-8 h-8"})})}),t.jsxs("h2",{className:"flex",children:[t.jsx("a",{title:"Download CSV",className:"mr-5",children:t.jsx("img",{src:kt,onClick:()=>K(!N),className:"  font-bold  mr-4 w-17 h-17 "})}),N&&t.jsx(CSVDownload,{data:S,target:"_blank"}),t.jsx("a",{title:"Download PDF",children:t.jsx("img",{src:_t,className:"  font-bold  w-17  h-17",onClick:ut})})]})]})})}),t.jsx("input",{type:"search",placeholder:"Search...",name:"search",onKeyUp:e=>nt(e.target.value),className:"bg-[#F2F4F4] h-10 pl-4 "}),t.jsx("button",{className:"bg-[#0F766E] w-14 max-[320px]:w-8 h-10 rounded-r-[5px] flex items-center justify-center text-white",type:"search",onClick:()=>m(E),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5 ",children:t.jsx("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})})})]}),t.jsx("div",{className:"ml-4 mb-4",children:t.jsx("hr",{className:" border-b-2"})}),t.jsxs("div",{className:"w-full h-[60vh] block   ",children:[t.jsxs("table",{className:"w-full mx-4 my-1   border-b border-b-gray overflow-auto max-[1000px]:w-[100vh] max-[1000px]:relative max-[1000px]:overflow-auto",children:[t.jsx("thead",{className:" text-white bg-[#0F766E] text-[1.7vh] p-12 w-full border-b border-b-gray h-[6vh] ",children:t.jsxs("tr",{className:"py-2 pl-4 w-full flex items-start justify-start text-left",children:[t.jsx("th",{className:"w-[50vh] flex items-start justify-start",children:"Sl No."}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Admission no"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"First name"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Class"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Gender"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Mobile"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Email"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Status"}),t.jsx("th",{className:"w-[100%] flex items-end justify-end pr-1 mr-[2vh]",children:"Action"})]})}),t.jsx("tbody",{children:A&&A.map((e,a)=>t.jsx(t.Fragment,{children:t.jsxs("tr",{className:"py-2 pl-4 w-full text-[1.6vh] flex items-center justify-center text-[#696969] text-left verdana even:bg-gray-100 border-b border-gray-b",children:[t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:o((j-1)*g+a+1)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start ",children:o(e==null?void 0:e.admission_no)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:o(e==null?void 0:e.first_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:o(e==null?void 0:e.class_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:o(e==null?void 0:e.section_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:o(e==null?void 0:e.admission_date)})," ",t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:o(e==null?void 0:e.gender_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:o(e==null?void 0:e.mobile)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:t.jsx("span",{className:`text-xs font-semibold inline-block py-1 px-2 rounded ${e.status=="Active"?"text-green-600 bg-green-200":"text-red-600 bg-red-200"}  last:mr-0 `,children:(e==null?void 0:e.status)=="Active"?"Active":"Deactivate"})}),t.jsxs("td",{className:" w-[100%] flex items-end justify-end pr-1 mr-[2vh] ",children:[t.jsx("a",{title:"Edit",children:t.jsx("img",{src:Et,className:"mr-2 text-indigo-600  hover:text-gray-500 w-6 h-6",onClick:()=>{w.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(i=>{i.value&&b(`/edit-student/${e==null?void 0:e.id}`)})}})}),t.jsx("a",{title:"Delete",children:t.jsx("img",{src:St,className:" text-red-600 hover:text-gray-500 mr-2 w-6 h-6",onClick:()=>jt(e==null?void 0:e.id,e==null?void 0:e.status)})}),t.jsx("a",{title:"View",children:t.jsx("img",{src:pt,className:"text-[#06b6d4] hover:text-gray-500 w-6 h-6",onClick:()=>b(`/view-student-details/${e==null?void 0:e.id}`)})})]})]})}))})]}),t.jsx(yt,{ChangePage:ct,number:j,lastPage:rt,nextPage:xt,prevPage:mt,postperpage:g})]})]})})})]})]})}export{$t as default};
