import{u as ut,r as s,j as t,B as ht,k as ft,n as d,S as y,P as jt,A as W,e as z,l as gt,g as wt}from"./index-de640f8f.js";import{B as vt}from"./BottomErrorCard-511fba4a.js";import{s as bt}from"./studentModal-e47a81f5.js";import{D as pt}from"./delete-e88f32cb.js";import{E as yt}from"./image 40-6da97afb.js";import{E as Nt,P as Et,T as kt,a as Ct}from"./image 46-449674c3.js";import{C as St}from"./image 44-251afc63.js";function Ot(){const h=ut(),[N,_t]=s.useState([]),[b,E]=s.useState(!0);s.useState(""),s.useState([]);const[k,Q]=s.useState(!1),[X,n]=s.useState(!1),[Z,tt]=s.useState(!1),[et,at]=s.useState(null);s.useState(null),s.useState(!1);const[p,st]=s.useState(!0),C=()=>st(!p),{api_addEmployeeData:Dt,api_editEmployeeData:At,api_deleteEmployeeData:Bt,api_getEmployeeData:Ft,api_getEmployeeDataById:Pt,api_retrieve_all_student:lt,api_masters_student_crud_delete:it,api_searchStudentByIdList:rt}=wt();s.useRef();const[S,_]=s.useState([]),[f,D]=s.useState(),[dt,A]=s.useState(),[B,ct]=s.useState();s.useState([]);const[i,F]=s.useState(1),[o,nt]=s.useState(10),x=(e=null)=>{let l,c;e===null?(c={perPage:o,page:i},l=lt):(c={search:B},l=rt),n(!0),W.post(l,c,z()).then(function(a){var w,v,r,m,u,$,I,V,M,Y,O,G,U,q,J,K,R,H;((w=a==null?void 0:a.data)==null?void 0:w.status)===!0?((r=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:r.total)===0?(toast.error("Data not Found"),_((u=(m=a==null?void 0:a.data)==null?void 0:m.data)==null?void 0:u.data),D((I=($=a==null?void 0:a.data)==null?void 0:$.data)==null?void 0:I.last_page),A((M=(V=a==null?void 0:a.data)==null?void 0:V.data)==null?void 0:M.total)):(console.log("exam term data",(O=(Y=a==null?void 0:a.data)==null?void 0:Y.data)==null?void 0:O.data),_((U=(G=a==null?void 0:a.data)==null?void 0:G.data)==null?void 0:U.data),D((J=(q=a==null?void 0:a.data)==null?void 0:q.data)==null?void 0:J.last_page),A((R=(K=a==null?void 0:a.data)==null?void 0:K.data)==null?void 0:R.total)):toast.error(`${(H=a==null?void 0:a.data)==null?void 0:H.message}`),n(!1)}).catch(function(a){console.log("==2 error list...",a),g(!0,"Error occured while fetching data."),n(!1)})};s.useEffect(()=>{x()},[]),console.log(dt);const j=S;console.log(S);const P=e=>{nt(parseInt(e))},T=e=>{F(e-1)},L=e=>{F(e+1)};s.useEffect(()=>{x()},[i]),s.useEffect(()=>{x()},[o]);const ot=[{title:"Admission No",feild:"admission_no"},{title:"Name",feild:"full_name"},{title:"Class",feild:"class_name"},{title:"Category",feild:"category_name"},{title:"Section",feild:"section_name"},{title:"Admission date",feild:"admission_date"},{title:"DOB",feild:"dob"},{title:"Gender",feild:"gender_name"},{title:"Mobile",feild:"mobile"}],xt=()=>{const e=new gt;e.text("Employee Details",10,10),e.autoTable({theme:"grid",columns:ot.map(l=>({...l,dataKey:l.feild})),body:N}),e.save("employee.pdf")},mt=(e,l)=>{y.fire({icon:"warning",title:"Are you sure to delete?",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(a=>{a.value&&c(e,l)});const c=(a,w)=>{n(!0);let v={id:a,status:w==="Active"?"deactive":"active"};W.post(it,v,z()).then(function(r){var m,u;console.log("delete response..",(m=r==null?void 0:r.data)==null?void 0:m.data),((u=r==null?void 0:r.data)==null?void 0:u.status)===!0?x():g(!0,"Error occured in deletion."),n(!1)}).catch(function(r){console.log("==delete error...",r),g(!0,"Error occured in deletion."),n(!1)})}},g=(e,l)=>{at(l),tt(e)};return t.jsxs(t.Fragment,{children:[X&&t.jsx(ht,{}),Z&&t.jsx(vt,{activateBottomErrorCard:g,errorTitle:et}),t.jsx("div",{className:"bg-white h-[80vh] overflow-auto  flex  justify-center",children:t.jsxs("div",{className:"block w-full mx-[10px]",children:[t.jsxs("div",{className:"flex  max-[694px]:block",children:[t.jsx("div",{className:"flex w-full items-start justify-start ml-5 mt-5",children:t.jsxs("div",{className:"block w-full",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-700 flex justify-start w-full ",children:"Student List"}),t.jsx("h1",{className:"text-teal-600 flex justify-start text-sm w-full",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),t.jsx("div",{className:"flex items-end justify-end w-full",children:t.jsxs("a",{title:"Add Employees",children:[" ",t.jsx("button",{type:"submit",className:"text-white text-[2.2vh] bg-[#0F766E] font-bold py-[5px] px-[10px] rounded-[5px] h-[40px] w-[100px] flex items-center mr-2 justify-center ",onClick:()=>{C()},children:"+ ADD"}),p&&t.jsx(bt,{isOpen:p,toggle:C,Link:"/view-student-list"})]})})]}),t.jsxs("div",{className:"flex float-right mt-2",children:[t.jsx("a",{title:"Download CSV",children:t.jsx("img",{src:Nt,onClick:()=>Q(!k),className:"  font-bold  mr-4 w-17 h-17 "})}),k&&t.jsx(ft,{data:N,target:"_blank"}),t.jsx("a",{title:"Download PDF",children:t.jsx("img",{src:Et,className:"  font-bold  w-17 h-17",onClick:xt})})]}),t.jsx("div",{className:"block  py-2",children:t.jsx("div",{className:"w-auto mt-[10vh] h-[70vh] overflow-y-auto overflow-x-hidden flex pt-[3vh]  pr-[3vh] bg-white max-[1024px]:overflow-auto  max-[768px]:w-[95%] max-[425px]:overflow-auto mr-2",children:t.jsxs("div",{className:"block w-full mt-[-20px]",children:[t.jsxs("div",{className:"flex items-center text-[2.4vh] justify-end mr-4 mb-[10px] max-[918px]:block",children:[t.jsx("div",{className:"float-left w-full flex ml-4 max-[918px]:ml-0",children:t.jsxs("div",{className:"ml-5",children:[" ",t.jsx("h1",{className:"font-bold text-[#0F766E]",children:"List Of Student"})]})}),t.jsxs("div",{className:"items-center float-left  flex mr-4 max-[618px]:ml-4",children:[t.jsx("div",{className:"flex w-full mr-4",children:t.jsx("div",{className:`${b?" text-[#4ade80]":""}`,children:t.jsx("h1",{onClick:()=>E(!0),children:t.jsx("a",{title:"List View",children:t.jsx("img",{src:kt,alt:"table",className:"w-8 h-8"})})})})}),t.jsx("div",{className:"flex w-full",children:t.jsxs("div",{className:`${b?"":" text-[#4ade80]"}`,children:[" ",t.jsx("h2",{onClick:()=>E(!1),children:t.jsx("a",{title:"Card View",children:t.jsx("img",{src:St,alt:"card",className:"w-14 h-10"})})})]})})]}),t.jsx("input",{type:"search",placeholder:"Search...",name:"search",onKeyUp:e=>ct(e.target.value),className:"bg-[#F2F4F4] h-10 pl-4 "}),t.jsx("button",{className:"bg-[#0F766E] w-14 max-[320px]:w-8 h-10 rounded-r-[5px] flex items-center justify-center text-white",type:"search",onClick:()=>x(B),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5 ",children:t.jsx("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})})})]}),t.jsx("div",{className:"ml-4 mb-4",children:t.jsx("hr",{className:" border-b-2"})}),b?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full h-[60vh] block   ",children:[t.jsxs("table",{className:"w-full mx-4 my-1   border-b border-b-gray overflow-auto max-[1000px]:w-[100vh] max-[1000px]:relative max-[1000px]:overflow-auto",children:[t.jsx("thead",{className:" text-white bg-[#0F766E] text-[1.7vh] p-12 w-full border-b border-b-gray h-[6vh] ",children:t.jsxs("tr",{className:"py-2 pl-4 w-full flex items-start justify-start text-left",children:[t.jsx("th",{className:"w-[50vh] flex items-start justify-start",children:"Sl No."}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Admission no"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"First name"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Class"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Gender"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Mobile"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Email"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Status"}),t.jsx("th",{className:"w-[100%] flex items-end justify-end pr-1 mr-[2vh]",children:"Action"})]})}),t.jsx("tbody",{children:j&&j.map((e,l)=>t.jsx(t.Fragment,{children:t.jsxs("tr",{className:"py-2 pl-4 w-full text-[1.6vh] flex items-center justify-center text-[#696969] text-left verdana even:bg-gray-100 border-b border-gray-b",children:[t.jsx("td",{className:"w-[50vh] flex items-start justify-start px-1",children:d((i-1)*o+l+1)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:d(e.admission_no)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:d(e.first_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:d(e.class_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:d(e.gender_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:d(e.mobile)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:d(e.email)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:t.jsx("span",{className:`text-xs font-semibold inline-block py-1 px-2 rounded ${e.status=="Active"?"text-green-600 bg-green-200":"text-red-600 bg-red-200"} last:mr-0`,children:e.status=="Active"?"Active":"Deactivate"})}),t.jsxs("td",{className:" w-[100%] flex items-end justify-end pr-1 mr-[2vh] ",children:[t.jsx("a",{title:"Edit",children:t.jsx("img",{src:Ct,className:"mr-2 text-indigo-600  hover:text-gray-500 w-6 h-6",onClick:()=>{y.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(c=>{c.value&&h(`/edit-student/${e==null?void 0:e.id}`)})}})}),t.jsx("a",{title:"Delete",children:t.jsx("img",{src:pt,className:" text-red-600 hover:text-gray-500 mr-2 w-6 h-6",onClick:()=>mt(e.id,e.status)})}),t.jsx("a",{title:"View",children:t.jsx("img",{src:yt,className:"text-[#06b6d4] hover:text-gray-500 w-6 h-6",onClick:()=>h(`/view-student-details/${e.id}`)})})]})]})}))})]}),t.jsxs("div",{className:"mt-3 px-4 grid grid-cols-12",children:[t.jsxs("div",{className:"col-span-2",children:[" ",t.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:o,onChange:e=>P(e.target.value),children:[5,10,25,50].map(e=>t.jsxs("option",{value:e,children:["show ",e]},e))})]}),t.jsxs("div",{className:"col-span-4 text-center col-start-5",children:[" ",t.jsxs("span",{className:"text-[#0F766E]",children:["Page ","",t.jsxs("strong",{children:[i," of ",f]}),""]})]}),t.jsxs("div",{className:"col-span-4 text-right",children:[t.jsx("button",{className:(i===1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>T(i),disabled:i===1,children:"⬅️"}),t.jsx("button",{className:(i===f?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>L(i),disabled:i===f,children:"➡️"})]})]})]})}):t.jsx(t.Fragment,{children:t.jsxs("div",{className:"block",children:[t.jsx("div",{className:"w-full h-auto mx-4 inline-grid grid-cols-5 gap-1 ",children:j&&j.map((e,l)=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:" w-full my-2  border  h-auto block border-gray-100 shadow-md  rounded-[5px] bg-white",children:[t.jsx("div",{className:"my-2 h-[15vh] flex items-center justify-center w-full",children:t.jsx("img",{src:e.upload_images,alt:"Generic placeholder image",className:"w-[150px] height-[150px] rounded-full "})}),t.jsxs("div",{className:"block items-center justify-center w-full",children:[t.jsx("h1",{className:"font-bold",children:d(e.full_name)}),t.jsx("h1",{children:d(e.email)}),t.jsx("h1",{children:d(e.dob)})]}),t.jsxs("div",{className:"flex w-full ",children:[t.jsx("button",{className:"text-[2vh] max-[1260px]:px-1 max-[840px]:mx-1 w-full py-[5px] px-[25px]  border  mx-[8px] mt-[20px] mb-[10px] text-indigo-600 border-indigo-600 bg-white hover:border-[gainsboro] hover:text-gray-500",onClick:()=>{y.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(c=>{c.value&&h(`/editstep-form/${e.id}`)})},children:"EDIT"}),t.jsx("button",{className:"text-[2vh] max-[1260px]:px-1 max-[840px]:mx-1 w-full  border py-[5px] px-[25px]  mx-[8px] mt-[20px] mb-[10px] text-[#22d3ee] border-[#22d3ee] bg-white hover:border-[gainsboro] hover:text-gray-500",onClick:()=>h(`/view-student-details/${e.id}`),children:"VIEW"})," "]})]})}))}),t.jsx(jt,{ChangePage:P,number:i,lastPage:f,nextPage:L,prevPage:T,postperpage:o})]})})]})})})]})})]})}export{Ot as default};
