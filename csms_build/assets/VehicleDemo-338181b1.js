import{r as d,s as pt,c as It,a as D,b as Lt,j as e,O as Pt,B as Bt,D as qt,L as Ht,P as kt,A as y,e as b,Q as r,n as T,S as Rt,w as $t,W as Q,l as Ut,g as Ot}from"./index-de640f8f.js";const zt=()=>{const[S,W]=d.useState([]),[v,w]=d.useState(!1),[u,F]=d.useState([]),[G,X]=d.useState(null),[C,Mt]=d.useState(!0),[Z,tt]=d.useState([]),[et,at]=d.useState(!1),[lt,o]=d.useState(!1),[Yt,it]=d.useState(!1);d.useState(null);const[x,E]=d.useState(null),[st,_]=d.useState(!1),[V,ct]=d.useState(),[m,A]=d.useState(1),[f,dt]=d.useState(10),[ot,p]=d.useState(),[I,L]=d.useState(),[rt,nt]=d.useState(),{api_getvehicleDataById:ht,api_getvehicleData:mt,api_searchvehicleData:ut,api_postvehicleData:xt,api_editvehicleData:ft,api_deletevehicleData:gt,api_getActivevehicleTypeData:Nt}=Ot();pt("Vehicle Master");const g=[{id:1,fee_head:10,fee_head_type:10,desc:"hello"},{id:2,fee_head:10,fee_head_type:10,desc:"hello"},{id:3,fee_head:10,fee_head_type:10,desc:"hello"},{id:4,fee_head:10,fee_head_type:10,desc:"hello"},{id:5,fee_head:10,fee_head_type:10,desc:"hello"}],vt=It({vehicleTypesId:D().required("Vehicle type is Required"),registrationNo:D().required("Registration no is Required"),chasisNo:D().required("Chasis no is Required")}),s=Lt({initialValues:{vehicleTypesId:"",registrationNo:"",chasisNo:""},onSubmit:(t,i)=>{console.log("at submit ",t),Tt(t),s.resetForm()},validationSchema:vt}),N=t=>{console.log(t);let i,l;t===void 0?(l={perPage:f,page:m},i=mt):(l={search:t,search:t,perPage:f,page:m},i=ut),o(!0),y.post(i,l,b()).then(function(a){var c,n,h,j,P,B,q,H,k,R,$,U,O,M,Y,J,z,K;((c=a==null?void 0:a.data)==null?void 0:c.status)===!0?((h=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:h.total)===0?(r.error("Data not Found"),F((P=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:P.data),p((q=(B=a==null?void 0:a.data)==null?void 0:B.data)==null?void 0:q.last_page),L((k=(H=a==null?void 0:a.data)==null?void 0:H.data)==null?void 0:k.total),w(!1)):(console.log("exam term data",($=(R=a==null?void 0:a.data)==null?void 0:R.data)==null?void 0:$.data),F((O=(U=a==null?void 0:a.data)==null?void 0:U.data)==null?void 0:O.data),p((Y=(M=a==null?void 0:a.data)==null?void 0:M.data)==null?void 0:Y.last_page),L((z=(J=a==null?void 0:a.data)==null?void 0:J.data)==null?void 0:z.total),w(!1)):r.error(`${(K=a==null?void 0:a.data)==null?void 0:K.message}`),o(!1)}).catch(function(a){r.warning("Error occured while fetching data."),o(!1)})};console.log(I);const jt=u;console.log(u);const yt=t=>{dt(parseInt(t)),w(!0)},bt=t=>{A(t-1)},wt=t=>{A(t+1)};d.useEffect(()=>{m&&v&&N()},[m,v]),d.useEffect(()=>{f&&v&&N()},[f,v]);const St=[{Header:"Sl No.",Cell:({cell:t})=>e.jsxs("span",{children:[" ",(m-1)*f+t.row.index+1," "]})},{Header:"Vehicle type Name",accessor:"vehicle_type_name"},{Header:"Registration No",accessor:"registration_no"},{Header:"Chasis no",accessor:"chasis_no"},{Header:"Created Date & Time",Cell:({cell:t})=>{var i,l;return e.jsxs("span",{children:[T((i=t.row.original)==null?void 0:i.date)," |"," ",T((l=t.row.original)==null?void 0:l.time)]})}},{Header:"Status",Cell:({cell:t})=>{var i,l;return e.jsx("span",{className:((i=t.row.original)==null?void 0:i.status)==="Active"?"text-[green]":"text-[red]",children:T((l=t.row.original)==null?void 0:l.status)})}},{Header:"Action",Cell:({cell:t})=>{var i,l;return e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>{Rt.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(a=>{var c,n;a.value&&(E((c=t.row.original)==null?void 0:c.id),_t((n=t.row.original)==null?void 0:n.id))})},className:"edit-button-master",children:e.jsx("a",{title:"edit",children:e.jsx($t,{size:23})})}),e.jsx("button",{onClick:()=>{var a,c;X((a=t.row.original)==null?void 0:a.id),ct(((c=t.row.original)==null?void 0:c.status)==="Active"?"deactive":"active"),_(!0)},className:`${((i=t.row.original)==null?void 0:i.status)=="Active"?"deactivate-button-master":"deactivate-second-button-master"}`,children:((l=t.row.original)==null?void 0:l.status)==="Active"?"Deactivate":"Activate"})]})}}];console.log(m);const _t=t=>{o(!0);let i={id:t};y.post(ht,i,b()).then(function(l){var a,c,n,h;console.log("fetch edit data response..",(a=l==null?void 0:l.data)==null?void 0:a.data),(c=l==null?void 0:l.data)!=null&&c.status?Dt((n=l==null?void 0:l.data)==null?void 0:n.data):r.error(`${(h=l==null?void 0:l.data)==null?void 0:h.message}`),o(!1)}).catch(function(l){console.log("= edit data error...",l),it(!0),o(!1)})},Dt=t=>{console.log("existing property details in prop address...",t),s.setFieldValue("id",t==null?void 0:t.id),s.setFieldValue("vehiclesTypeName",t==null?void 0:t.vehicle_type_name),s.setFieldValue("vehicleTypesId",t==null?void 0:t.vehicle_types_id),s.setFieldValue("registrationNo",t==null?void 0:t.registration_no),s.setFieldValue("chasisNo",t==null?void 0:t.chasis_no)};console.log(x);const Tt=t=>{console.log(t),o(!0);let i,l,a={vehicleTypesId:t.vehicleTypesId,registrationNo:t.registrationNo,chasisNo:t.chasisNo};x!==null?(i=ft,l=a,l.id=x):(t==null?void 0:t.registrationNo)!==""&&(t==null?void 0:t.chasisNo)!==""&&x==null&&(i=xt,l=a),y.post(i,l,b()).then(function(c){var n,h,j;console.log("bank master..",(n=c==null?void 0:c.data)==null?void 0:n.data),((h=c==null?void 0:c.data)==null?void 0:h.status)===!0?(r.success(x!==null?"Data Updated Successfully!":"Data Added Successfully"),N(),E(null)):r.error(`${(j=c==null?void 0:c.data)==null?void 0:j.message}`),o(!1)}).catch(function(c){console.log("==2 error list...",c),r.warning("Error occured in submitting form."),o(!1)})},Ft=()=>{o(!0),_(!1);let t={id:G,status:V};y.post(gt,t,b()).then(function(i){var l,a;((l=i==null?void 0:i.data)==null?void 0:l.status)===!0?(N(),(t==null?void 0:t.status)=="active"?r.success("Activated Successfully"):r.error("Deactivated Successfully")):r.error(`${(a=i==null?void 0:i.data)==null?void 0:a.message}`),o(!1)}).catch(function(i){r.warning("Error occured in deletion."),o(!1)})},Ct=()=>{y.post(Nt,{},b()).then(function(t){var i,l,a;t!=null&&t.data?(console.log((i=t==null?void 0:t.data)==null?void 0:i.data),W((l=t==null?void 0:t.data)==null?void 0:l.data)):r.error(`${(a=t==null?void 0:t.data)==null?void 0:a.message}`),o(!1)}).catch(function(t){console.log("==2 error list...",t),r.warning("Error occured while fetching data.")})};d.useEffect(()=>{Ct(),N()},[]);const Et=t=>{let i=t.target.name,l=t.target.value;i=="registrationNo"&&s.setFieldValue("registrationNo",Q(l.toUpperCase(),s.values.registrationNo,30)),i=="chasisNo"&&s.setFieldValue("chasisNo",Q(l.toUpperCase(),s.values.chasisNo,30))},Vt=[{title:"Vehicle type Name",feild:"vehicle_type_name"},{title:"Registration No",feild:"registration_no"},{title:"Chasis no",feild:"chasis_no"},{title:"Created Date  ",feild:"date"},{title:"Created Time ",feild:"time"},{title:"Status",feild:"status"}],At=()=>{const t=new Ut;t.text("Vehicle Details",10,10),t.autoTable({theme:"grid",columns:Vt.map(i=>({...i,dataKey:i.feild})),body:u}),t.save("VehicleDetails.pdf")};return d.useEffect(()=>{const t=u.map(i=>{const{id:l,...a}=i;return a});console.log(t),tt(t)},[u]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-[76vh] lg:h-auto overflow-auto ",children:[e.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[e.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"Vehicle Details Form"}),e.jsx("h1",{className:"common-header-smalltext",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),e.jsx("div",{className:" mt-1 ml-3 mr-3 ",children:e.jsx("div",{className:"flex h-auto  items-start justify-start w-full",children:e.jsxs("div",{className:"grid grid-cols-12 w-full  ml-3 mr-3 ",children:[e.jsx("div",{className:"col-span-12  lg:col-span-4 w-full flex justify-center",children:e.jsxs("div",{className:"mt-8 border border-teal-300 w-full  rounded-md relative",children:[e.jsxs("div",{className:"bg-white px-3 ",children:[" ",e.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-[#0F766E] ml-9",children:"Add"})]}),e.jsxs("div",{className:"w-full mb-6 mt-[14vh] pb-10  ",children:[e.jsxs("form",{onSubmit:s.handleSubmit,onChange:Et,children:[e.jsxs("div",{className:"grid grid-cols-12 mt-6",children:[e.jsx("div",{className:" col-span-12 lg:col-span-3",children:e.jsxs("label",{className:" flex items-start justify-start ml-2 text-teal-900 text-md w-[20vw] font-bold",htmlFor:"",children:["Vehicle Type",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600  ",children:"*"})]})}),e.jsxs("div",{className:"col-span-12 lg:col-span-9",children:[e.jsxs("select",{...s.getFieldProps("vehicleTypesId"),type:"text",className:"common-input-css",placeholder:"Select country",children:[e.jsx("option",{value:"",children:"Select"}),S==null?void 0:S.map((t,i)=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.vehicle_type_name}))]}),e.jsx("br",{}),e.jsx("span",{className:"text-red-600  text-xs",children:s.touched.vehicleTypesId&&s.errors.vehicleTypesId?s.errors.vehicleTypesId:null})]})]}),e.jsxs("div",{className:"grid grid-cols-12 mt-6",children:[e.jsx("div",{className:" col-span-12 lg:col-span-3",children:e.jsxs("label",{className:" flex items-start justify-start ml-2 text-teal-900 text-md w-[20vw] font-bold",htmlFor:"",children:["Registration No",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600  ",children:"*"})]})}),e.jsxs("div",{className:"col-span-12 lg:col-span-9",children:[e.jsx("input",{...s.getFieldProps("registrationNo"),className:"common-input-css",type:"text",placeholder:"Enter registration no"}),e.jsx("br",{}),e.jsx("span",{className:"text-red-600  text-xs",children:s.touched.registrationNo&&s.errors.registrationNo?s.errors.registrationNo:null})]})]}),e.jsxs("div",{className:"grid grid-cols-12 mt-6",children:[e.jsx("div",{className:" col-span-12 lg:col-span-3",children:e.jsxs("label",{className:" flex items-start justify-start ml-2 text-teal-900 text-md w-[20vw] font-bold",htmlFor:"",children:["Chasis No",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600  ",children:"*"})]})}),e.jsxs("div",{className:"col-span-12 lg:col-span-9",children:[e.jsx("input",{...s.getFieldProps("chasisNo"),className:"common-input-css",type:"text",placeholder:"Enter chasis no"}),e.jsx("br",{}),e.jsx("span",{className:"text-red-600  text-xs",children:s.touched.chasisNo&&s.errors.chasisNo?s.errors.chasisNo:null})]})]}),e.jsx("div",{className:"mt-7",children:e.jsx("button",{type:"submit",className:"save-button",children:x!==null?"Update":"Save"})})]}),e.jsx("div",{className:"mandatorytext",children:e.jsx("h1",{children:"Note : (*) is a mandatory field "})})]})]})}),e.jsx("div",{className:" col-span-12 md:col-span-12 lg:col-span-8 w-full lg:ml-2 ",children:e.jsxs("div",{className:"mt-8 border border-teal-300  rounded-md relative",children:[e.jsxs("div",{className:"bg-white px-3 ",children:[" ",e.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-[#0F766E] ml-9",children:"View List"})]}),e.jsx("div",{className:"mt-5  ",children:e.jsx(Pt,{generatePdf:At,enable:et,setenable:at,csvdata:Z,readymadeListData:u,fetchMasterList:N,setSearchTableData:nt,searchTableData:rt})}),e.jsx("div",{className:"-mt-5 main-div",children:e.jsxs("div",{className:" rounded-md h-[80vh] 2xl:p-6 p-4 overflow-y-auto",children:[lt&&e.jsx(Bt,{}),st&&e.jsx(qt,{setdeleteStatus:_,deleteItem:Ft,deactivate:V}),e.jsxs("div",{className:"h-[57vh] overflow-auto max-[1004px]:h-full",children:[C&&(g==null?void 0:g.length)!=0&&e.jsx(Ht,{filter:!1,exportStatus:!1,assessmentType:!1,columns:St,dataList:jt,pageNumber:I}),e.jsx(kt,{ChangePage:yt,number:m,lastPage:ot,nextPage:wt,prevPage:bt,postperpage:f,blockToast:v,setBlockToast:w})]}),C&&(g==null?void 0:g.length)==0&&e.jsx("div",{className:"data-not-found",children:"Data Not Found"})]})})]})})]})})})]})})};export{zt as default};
