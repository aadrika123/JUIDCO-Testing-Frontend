import{r as l,u as gt,c as yt,a as wt,b as bt,j as t,B as vt,n as o,S as y,P as Nt,A as w,e as b,g as pt}from"./index-de640f8f.js";import{D as St}from"./delete-e88f32cb.js";import{T as Ct,E as Et,P as Dt,a as kt}from"./image 46-449674c3.js";function Mt(){var B;const[Ft,J]=l.useState(!1),[_t,z]=l.useState(null);l.useState(""),l.useState([]);const[v,K]=l.useState(!1),[R,d]=l.useState(!1),[N,Bt]=l.useState(),[H,Q]=l.useState(!0),[p,S]=l.useState([]),[W,C]=l.useState(),[X,E]=l.useState(),[D,Z]=l.useState();l.useState(null);const[Pt,tt]=l.useState(!1);l.useState(!1);const k=gt(),{api_bulkdataaddemployee:et,api_deleteEmployeeData:at,api_getEmployeeData:lt,api_searchEmployeeData:st}=pt(),it={uploadCSV:""},rt=yt({uploadCSV:wt().required("Select CSV File")}),c=bt({initialValues:it,onSubmit:a=>{const s=new FormData;s.append("uploadCSV",a.uploadCSV),ct(s)},validationSchema:rt}),ct=a=>{d(!0);let s,i;s=et,i=a,w.post(s,i,b()).then(function(e){var n;console.log("Registration.....",e==null?void 0:e.data),e!=null&&e.data?(y.fire({icon:"success",title:"Employee",text:"Csv Data Added Successfully.",showConfirmButton:!1,timer:1500}),k("/employee/view")):x(!0,`${(n=e==null?void 0:e.data)==null?void 0:n.response}`),d(!1)}).catch(function(e){console.log("==2 error list...",e),x(!0,"Error occured in submitting form."),d(!1)})},dt=a=>{c.setFieldValue("uploadCSV",a)},ot=a=>{if(a.target.name=="uploadCSV"){let i=a.target.files[0];dt(i);return}};l.useState([]);const[h,F]=l.useState(1),[j,nt]=l.useState(10),m=(a=null)=>{d(!0);let s,i;a===null?(i={perPage:j,page:h},s=lt):(i={search:D},s=st),w.post(s,i,b()).then(function(e){var n,g,r,u,f,P,A,T,L,M,$,O,V,q,G,I,U,Y;((n=e==null?void 0:e.data)==null?void 0:n.status)===!0?((r=(g=e==null?void 0:e.data)==null?void 0:g.data)==null?void 0:r.total)===0?(toast.error("Data not Found"),S((f=(u=e==null?void 0:e.data)==null?void 0:u.data)==null?void 0:f.data),C((A=(P=e==null?void 0:e.data)==null?void 0:P.data)==null?void 0:A.last_page),E((L=(T=e==null?void 0:e.data)==null?void 0:T.data)==null?void 0:L.total)):(console.log("exam term data",($=(M=e==null?void 0:e.data)==null?void 0:M.data)==null?void 0:$.data),S((V=(O=e==null?void 0:e.data)==null?void 0:O.data)==null?void 0:V.data),C((G=(q=e==null?void 0:e.data)==null?void 0:q.data)==null?void 0:G.last_page),E((U=(I=e==null?void 0:e.data)==null?void 0:I.data)==null?void 0:U.total)):toast.error(`${(Y=e==null?void 0:e.data)==null?void 0:Y.message}`),d(!1)}).catch(function(e){console.log("==2 error list...",e),x(!0,"Error occured while fetching data.")})};l.useEffect(()=>{m()},[]),console.log(X);const _=p;console.log(p);const mt=a=>{nt(parseInt(a))},xt=a=>{F(a-1)},ut=a=>{F(a+1)};l.useEffect(()=>{m()},[h]),l.useEffect(()=>{m()},[j]);const ft=[{title:"Emp No",feild:"empNo"},{title:"Name",feild:"full_name"},{title:"Gender",feild:"gender_name"},{title:"Category",feild:"category_name"},{title:"DOB",feild:"dob"},{title:"DOJ",feild:"doj"},{title:"Mobile",feild:"mobile"},{title:"Email",feild:"email"},{title:"Blood Group",feild:"blood_group_name"},{title:"Department",feild:"department_name"}],ht=()=>{const a=new jsPDF;a.text("Employee Details",10,10),a.autoTable({theme:"grid",columns:ft.map(s=>({...s,dataKey:s.feild})),body:N}),a.save("employee.pdf")},jt=(a,s)=>{y.fire({icon:"warning",title:"Are you sure to delete?",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(e=>{e.value&&i(a,s)});const i=(e,n)=>{d(!0),tt(!1);let g={id:e,status:n==="Active"?"deactive":"active"};w.post(at,g,b()).then(function(r){var u,f;console.log("delete response..",(u=r==null?void 0:r.data)==null?void 0:u.data),((f=r==null?void 0:r.data)==null?void 0:f.status)===!0?m():x(!0,"Error occured in deletion."),d(!1)}).catch(function(r){console.log("==delete error...",r),x(!0,"Error occured in deletion."),d(!1)})}},x=(a,s)=>{z(s),J(a)};return t.jsxs(t.Fragment,{children:[" ",R&&t.jsx(vt,{}),t.jsxs("div",{className:"block  w-full mx-[10px]",children:[t.jsx("div",{className:"flex  max-[694px]:block",children:t.jsx("div",{className:"flex w-full items-start justify-start ml-5 mt-5",children:t.jsxs("div",{className:"block w-full",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-700 flex justify-start w-full ",children:"Bulk Employee List"}),t.jsx("h1",{className:"text-teal-600 flex justify-start text-sm w-full",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})})}),t.jsx("div",{className:"flex mt-[5vh]",children:t.jsx("form",{onSubmit:c.handleSubmit,onChange:ot,encType:"multipart/form-data",className:"flex  items-center justify-center w-full",children:t.jsx("div",{className:"flex  items-center justify-center w-full",children:t.jsxs("div",{className:"flex  items-center justify-center",children:[t.jsxs("label",{htmlFor:"uploadCSV",className:" h-[5vh] flex justify-center items-center px-4 bg-white border border-gray-600 rounded-l font-semibold cursor-pointer text-sm text-black tracking-widest  active:bg-white focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ",children:[" ","Choose Employee CSV File"]}),t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("input",{type:"file",name:"uploadCSV",accept:".csv",id:"uploadCSV",className:"sr-only h-[5vh]  inline-flex items-center px-4 py-2 bg-white border  active:bg-white focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition ",value:c.values.uploadCSV[0],onChange:a=>{c.setFieldValue("uploadCSV",a.target.files[0])}}),c.values.uploadCSV?(B=c.values.uploadCSV)==null?void 0:B.name:"No file selected",t.jsx("br",{}),t.jsx("span",{className:"text-red-600 text-xs ",children:c.touched.uploadCSV&&c.errors.uploadCSV?c.errors.uploadCSV:null})]}),t.jsx("button",{type:"submit",className:"next-btn",children:"Upload"})]})})})}),t.jsx("div",{className:"block ",children:t.jsx("div",{className:"w-auto  h-[60vh] overflow-y-auto overflow-x-hidden flex pt-[3vh]  pr-[3vh] bg-white max-[1024px]:overflow-auto  max-[768px]:w-[95%] max-[425px]:overflow-auto mr-2",children:t.jsxs("div",{className:"block w-full mt-[-20px]",children:[t.jsxs("div",{className:"flex items-center text-[2.4vh] justify-end mr-4 mb-[10px] max-[918px]:block",children:[t.jsx("div",{className:"float-left w-full flex ml-4 max-[918px]:ml-0",children:t.jsxs("div",{className:"ml-5",children:[" ",t.jsx("h1",{className:"font-bold text-[#0F766E]",children:"List Of Employee"})]})}),t.jsx("div",{className:"items-center float-left  flex mr-4 max-[618px]:ml-4",children:t.jsx("div",{className:"flex w-full mr-4",children:t.jsxs("div",{className:`${H?" text-[#4ade80] flex":""}`,children:[t.jsx("h1",{onClick:()=>Q(!0),className:"mr-5",children:t.jsx("a",{title:"List View",children:t.jsx("img",{src:Ct,alt:"table",className:"w-8 h-8"})})}),t.jsxs("h2",{className:"flex",children:[t.jsx("a",{title:"Download CSV",className:"mr-5",children:t.jsx("img",{src:Et,onClick:()=>K(!v),className:"  font-bold  mr-4 w-17 h-17 "})}),v&&t.jsx(CSVDownload,{data:N,target:"_blank"}),t.jsx("a",{title:"Download PDF",children:t.jsx("img",{src:Dt,className:"  font-bold  w-17  h-17",onClick:ht})})]})]})})}),t.jsx("input",{type:"search",placeholder:"Search...",name:"search",onKeyUp:a=>Z(a.target.value),className:"bg-[#F2F4F4] h-10 pl-4 "}),t.jsx("button",{className:"bg-[#0F766E] w-14 max-[320px]:w-8 h-10 rounded-r-[5px] flex items-center justify-center text-white",type:"search",onClick:()=>m(D),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5 ",children:t.jsx("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})})})]}),t.jsx("div",{className:"ml-4 mb-4",children:t.jsx("hr",{className:" border-b-2"})}),t.jsxs("div",{className:"w-full h-[60vh] block   ",children:[t.jsxs("table",{className:"w-full mx-4 my-1   border-b border-b-gray overflow-auto max-[1000px]:w-[100vh] max-[1000px]:relative max-[1000px]:overflow-auto",children:[t.jsx("thead",{className:" text-white bg-[#0F766E] text-[1.7vh] p-12 w-full border-b border-b-gray h-[6vh] ",children:t.jsxs("tr",{className:"py-2 pl-4 w-full flex items-start justify-start text-left",children:[t.jsx("th",{className:"w-[50vh]",children:"Sl No."}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Emp ID"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Full Name"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Gender"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start ",children:"Department"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start ",children:"Blood Group"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Mobile"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Email"}),t.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Status"}),t.jsx("th",{className:"w-[100%] flex items-center justify-center pr-1 mr-[2vh]",children:"Action"})]})}),t.jsx("tbody",{children:_&&_.map((a,s)=>t.jsx(t.Fragment,{children:t.jsxs("tr",{className:"py-2 pl-4 w-full text-[1.6vh] flex items-center justify-center text-[#696969] text-left verdana even:bg-gray-100",children:[t.jsx("td",{className:"w-[50vh] flex items-start justify-start text-[1.5vh]  px-1",children:o((h-1)*j+s+1)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:o(a.emp_no)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:o(a.full_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:o(a.gender_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:o(a.department_name)}),t.jsx("td",{className:"w-[100%] flex items-center justify-center   px-1",children:o(a.blood_group_name)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:o(a.mobile)}),t.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:a.email}),t.jsx("td",{className:"w-[100%] flex items-start justify-start px-1",children:t.jsxs("span",{className:`text-xs font-semibold inline-block py-1 px-2 rounded ${a.status=="Active"?"text-green-600 bg-green-200":"text-red-600 bg-red-200"}  last:mr-0 `,children:[" ",o(a==null?void 0:a.status)]})}),t.jsxs("td",{className:" w-[100%] flex items-center justify-center",children:[t.jsx("a",{title:"Edit",children:t.jsx("img",{src:kt,className:"mr-2 text-indigo-600  hover:text-gray-500 w-6 h-6",onClick:()=>{y.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(i=>{i.value&&k(`/editstep-form/${a.id}`)})}})}),t.jsx("a",{title:"Delete",children:t.jsx("img",{src:St,className:" text-red-600 hover:text-gray-500 mr-2 w-6 h-6",onClick:()=>jt(a.id,a==null?void 0:a.status)})})]})]})}))})]}),t.jsx(Nt,{ChangePage:mt,number:h,lastPage:W,nextPage:ut,prevPage:xt,postperpage:j})]})]})})})]})]})}export{Mt as default};
