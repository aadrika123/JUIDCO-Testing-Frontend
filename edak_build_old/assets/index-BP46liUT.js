import{r as c,u as q,s as G,j as e,Y as E,Z as J,$ as K,C as z,L as A,aY as L,aZ as U,a_ as V,a$ as Z,B as W,J as m,a0 as P,t as O,x as Q,y as X,I,H as D,g as k,_ as F,w as R}from"./index-BM0oc_dR.js";import{P as ee}from"./index-D9n-mIVU.js";import{S as se}from"./index-5TntktDp.js";import{i as ae,F as te,a as re,C as ne}from"./FormSubmitSuccess-CNLMD4xe.js";import{C as B}from"./chevron-right-BvunEKs_.js";import"./pagination-CQ-KYJ4s.js";import"./circle-check-big-DCfAJpH9.js";function ie(){var u,j,f,g,N,v,y,C,w;const[d,_]=c.useState(1),[x,$]=c.useState(10),[p,H]=c.useState(""),[r,i]=c.useState(0),[s,o]=c.useState({}),[M,T]=c.useState({}),h=q({}),a=G({api:`${k.getAllComplaintDirect}?page=${d}&limit=${x}&q=${p}`,key:"SeachCitizenComplaints",value:[d,x],options:{enabled:!0}}),Y=async()=>{var t,b,S;try{const n=new FormData;n.append("citizenName",s==null?void 0:s.name),n.append("email",s==null?void 0:s.email),n.append("mobileNo",s==null?void 0:s.mobileNo),n.append("complaintTitle",s==null?void 0:s.complaintTitle),n.append("complaintDescription",s==null?void 0:s.complaintDescription),n.append("moduleId",s==null?void 0:s.module),n.append("ulbId",s==null?void 0:s.ulb),n.append("imageUrl",s==null?void 0:s.complaintDocument);const l=await h.mutateAsync({api:k.createComplaintApplication,data:n});(t=l.data)!=null&&t.success?(T((b=l==null?void 0:l.data)==null?void 0:b.data),o({}),F.success((S=l==null?void 0:l.data)==null?void 0:S.message),i(6)):F.error("Complaint not created successfully")}catch(n){console.log(n)}};return e.jsxs(E,{children:[e.jsx(J,{}),e.jsxs(K,{className:"sm:max-w-[500px] z-50",children:[e.jsxs(z,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:["Complaint Registration ",e.jsx(A,{to:"/grievance/citizen/complaint-registration-info",target:"_blank",children:e.jsx("span",{className:"text-amber-600 underline cursor-pointer",children:"Know How it works?"})})," "]}),e.jsxs("div",{className:"py-4",children:[r<5&&e.jsx(ae,{status:r-1}),r===1&&e.jsx(L,{setcomplaintData:o,complaintData:s,setformStep:i}),r===2&&e.jsx(U,{setcomplaintData:o,complaintData:s,setformStep:i}),r===3&&e.jsx(V,{setcomplaintData:o,complaintData:s,setformStep:i}),r===4&&e.jsx(Z,{setcomplaintData:o,complaintData:s,setformStep:i}),r===5&&e.jsx(te,{complaintData:s}),r===6&&e.jsx(re,{formResponse:M}),r===5&&e.jsx("div",{className:"px-10 mb-5",children:e.jsx(W,{isLoading:h.isPending,onClick:Y,className:"w-full flex justify-center items-center",children:e.jsx("span",{className:"text-xs",children:"Submit"})})}),r<6&&e.jsx("div",{className:"px-10",children:e.jsxs(m,{onClick:()=>i(r-1),variant:"outline",className:"w-full flex justify-center items-center",children:[e.jsx(ne,{size:20,className:"inline mr-2"})," ",e.jsx("span",{className:"text-xs",children:"Go Back"})]})})]})]}),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4",children:[e.jsxs("div",{className:"flex w-full justify-between gap-2",children:[e.jsx("div",{children:e.jsx(se,{search:p,setSearch:H,refetch:a.refetch,isFetching:a.isLoading})}),e.jsx("div",{children:e.jsx(P,{onClick:()=>i(1),asChild:!0,children:e.jsxs(m,{className:"flex justify-center items-center",children:[e.jsx("span",{className:"text-xs",children:"Register Custom Complaint"}),e.jsx(B,{size:15,className:"inline"})]})})})]}),e.jsx(O,{className:"shadow-none border-none rounded-none",children:e.jsx(Q,{children:a.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(X,{})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col justify-center w-full px-4",children:(f=(j=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:j.docs)==null?void 0:f.map(t=>e.jsxs("div",{className:"w-full px-8 py-2 bg-white rounded-md shadow-lg mb-2 relative",children:[e.jsxs("div",{className:"flex mt-6  pr-10",children:[e.jsx(I,{className:"flex-initial object-cover mx-2 rounded-full w-14 h-14",src:"https://images.unsplash.com/photo-1488508872907-592763824245?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"}),e.jsxs("div",{className:"mx-2 flex-1",children:[e.jsx("h1",{className:"font-semibold text-gray-800 dark:text-white",children:t==null?void 0:t.titleName}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t==null?void 0:t.description})]})]}),e.jsx(P,{onClick:()=>i(1),asChild:!0,children:e.jsxs(m,{className:"absolute right-0 bottom-0 flex justify-center items-center",variant:"secondary",children:[e.jsx("span",{className:"text-xs",children:"Register"}),e.jsx(B,{size:15,className:"inline"})]})})]},`complaint${t==null?void 0:t._id}`))}),e.jsx(D,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(ee,{page:d,perPage:x,totalPage:(N=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:N.totalDocs,hasNextPage:(y=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:y.hasNextPage,hasPrevPage:(w=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:w.hasPrevPage,setPage:_,setPerPage:$})})]})})})]})})]})}function he(){return e.jsxs("div",{className:"grid grid-cols-4 h-screen",children:[e.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 h-screen overflow-hidden",children:[e.jsx(z,{className:"text-xl text-primary font-bold",children:"Search existing Complaint or Register custom complaint"}),e.jsx(I,{src:"/images/complain_boy.png",className:"w-40"}),e.jsx(R,{className:"text-center",children:"Fill the form to process your complaint."}),e.jsxs(R,{className:"text-center",children:["You can register your grievance here or you can visit our nearest ",e.jsx(A,{target:"_blank",className:"underline hover:text-primary",to:"https://maps.app.goo.gl/ncVp959LoSja4uAh8",children:"Jan Seva Kendra"})," for further query. & Feel free to contact us on +918458697845"]})]}),e.jsx("div",{className:"col-span-4 md:col-span-3 p-10 bg-gray-50 h-screen",children:e.jsx(ie,{})})]})}export{he as default};
