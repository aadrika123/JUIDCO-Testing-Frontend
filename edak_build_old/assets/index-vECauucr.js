import{j as e,Y as u,$ as p,Z as N,a4 as Ce,J as n,a5 as Se,a6 as ke,a7 as we,a8 as Te,a9 as Fe,r,A as Ae,f as $e,a as Ee,s as je,b as Pe,o as Re,K as _e,I as fe,a0 as ue,t as Ie,x as ze,F as Be,G as Le,C as pe,L as Ye,c as Me,d as qe,k as Oe,z as f,_ as Ne}from"./index-BM0oc_dR.js";import{P as Ve}from"./index-lAQ15i_6.js";import{X as He}from"./x-BF-Fg6G0.js";import{C as Qe}from"./circle-check-big-DCfAJpH9.js";import{C as Ue}from"./circle-x-C57h7kFw.js";import"./badge-272lERzh.js";import"./index-CeYUPDYe.js";function We({sendTo:l,setSendTo:i,open:t,onOpenChange:d,onSubmit:o,userDetailsList:c}){return e.jsx(u,{open:t,onOpenChange:d,children:e.jsxs(p,{className:"sm:max-w-md",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ce,{children:"Send To"}),e.jsx(n,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d(!1),children:e.jsx(He,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Send To"}),e.jsxs(Se,{value:l,onValueChange:a=>i(a),children:[e.jsx(ke,{children:e.jsx(we,{placeholder:"SELECT..."})}),e.jsx(Te,{children:c==null?void 0:c.map(a=>e.jsx(Fe,{value:a==null?void 0:a._id,children:a==null?void 0:a.fullName}))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(n,{className:"bg-[#7C3AED] hover:bg-[#6D28D9]",onClick:()=>o(),children:"Send"})})]})]})})}const Xe=Me().shape({comment:qe().required("Comment is required")});function Ge(){var y,C,S,k,w,T,F,A,$,E,P,R,_,I,z,B,L,Y,M,q,O,V,H,Q,U,W,X,G,J,K,Z,D,ee,se,ae,le,de,re,ie,te,ce,ne,oe,xe,me;const[l,i]=r.useState(),[t,d]=r.useState(0),[o,c]=r.useState(!1),[a,g]=r.useState(!1),b=Ae({}),ge=$e(),{user:x}=Ee(),v=new URLSearchParams(Oe().search),m=v.get("refNo"),h=v.get("page");console.log(t,"page");const s=je({api:`${f.getFileById}/${m}`,key:"EdakDetails",options:{enabled:!0}}),j=je({api:`${f.getUsersDetails}`,key:"edakDraft",options:{enabled:!0}}),be=async()=>{var he;let ye={sendTo:l,receivedFrom:x==null?void 0:x._id};(he=(await b.mutateAsync({api:`${f.forwardFilesById}/${m}`,data:ye})).data)!=null&&he.success?(Ne.success("File Sent Successfully"),c(!1),ge("/e-dak/dashboard/list-workflow")):Ne.error("File Not Created!")},ve=Pe({defaultValues:{comment:""},resolver:Re(Xe)});return e.jsx("main",{className:"grid flex-1 items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-8 lg:col-span-2",children:[e.jsx("div",{className:"",children:e.jsx("div",{className:" bg-background",children:e.jsxs("div",{className:"mx-auto max-w-7xl  rounded-lg p-8 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"mb-6 text-xl font-bold uppercase text-blue-800",children:["File Ref No : ",(S=(C=(y=s==null?void 0:s.data)==null?void 0:y.data)==null?void 0:C.fileData)==null?void 0:S.fileRefNo]}),e.jsxs("h1",{children:[e.jsx("span",{className:"text-md mb-6 pr-2 font-bold",children:"Priority -"}),e.jsx("span",{className:`font-bold capitalize ${((T=(w=(k=s==null?void 0:s.data)==null?void 0:k.data)==null?void 0:w.fileData)==null?void 0:T.priority)=="normal"?"text-green-400":"text-red-500"}`,children:($=(A=(F=s==null?void 0:s.data)==null?void 0:F.data)==null?void 0:A.fileData)==null?void 0:$.priority})]}),e.jsxs("h1",{className:"text-md mb-6  flex items-center font-bold",children:["Status -",e.jsx("span",{className:"pl-2 text-orange-500",children:(R=(P=(E=s==null?void 0:s.data)==null?void 0:E.data)==null?void 0:P.sentTo)==null?void 0:R.name}),e.jsx("span",{className:" text-orange-500",children:((z=(I=(_=s==null?void 0:s.data)==null?void 0:_.data)==null?void 0:I.fileData)==null?void 0:z.draft)===!0&&"In Draft"})]})]}),e.jsxs("p",{className:"mb-2 text-gray-600",children:[e.jsx("span",{className:"font-bold",children:"Created on : "}),_e((M=(Y=(L=(B=s==null?void 0:s.data)==null?void 0:B.data)==null?void 0:L.fileData)==null?void 0:Y.fileData)==null?void 0:M.createdAt).format("DD-MM-YYYY")]}),e.jsx("div",{className:"mt-1 border-b border-[#99B37C]"}),e.jsxs("div",{className:"mt-4  grid grid-cols-1 space-y-4   md:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center  space-x-4 capitalize",children:[e.jsx("div",{className:"font-semibold",children:"SenT To : "}),e.jsxs("div",{children:[e.jsx("p",{className:"capitalize opacity-90",children:(O=(q=s==null?void 0:s.data)==null?void 0:q.data)!=null&&O.sentTo?(Q=(H=(V=s==null?void 0:s.data)==null?void 0:V.data)==null?void 0:H.sentTo)==null?void 0:Q.name:"Not Assigned"})," "]})]}),e.jsxs("div",{className:"flex items-center  space-x-4 ",children:[e.jsx("div",{className:"font-semibold",children:"Title : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(X=(W=(U=s==null?void 0:s.data)==null?void 0:U.data)==null?void 0:W.fileData)==null?void 0:X.title})," "]})]}),e.jsxs("div",{className:"flex items-center  space-x-4 capitalize",children:[e.jsx("div",{className:"font-semibold",children:"Department : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(K=(J=(G=s==null?void 0:s.data)==null?void 0:G.data)==null?void 0:J.fileData)==null?void 0:K.department})," "]})]}),e.jsx("div",{className:"col-span-3 my-20 border-b border-[#99B37C]"}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ee=(D=(Z=s==null?void 0:s.data)==null?void 0:Z.data)==null?void 0:D.fileData)==null?void 0:ee.description})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"File Document"}),e.jsxs(u,{children:[e.jsx(N,{}),e.jsx(p,{className:"sm:max-w-[800px] ",children:e.jsx("div",{className:"py-4",children:e.jsx(fe,{src:(le=(ae=(se=s==null?void 0:s.data)==null?void 0:se.data)==null?void 0:ae.fileData)==null?void 0:le.document})})}),e.jsx(ue,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer ",children:e.jsx(fe,{src:(ie=(re=(de=s==null?void 0:s.data)==null?void 0:de.data)==null?void 0:re.fileData)==null?void 0:ie.document,className:"w-40"})})})]})]})]})]})})}),e.jsx(Ie,{"x-chunk":"dashboard-05-chunk-3",children:e.jsx(ze,{className:"grid grid-cols-3 py-10",children:e.jsx("div",{className:"col-span-2 pr-10",children:e.jsxs(Be,{methods:ve,children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:e.jsx("div",{className:"col-span-4",children:e.jsx(Le,{className:"w-full rounded-lg border bg-background p-4",label:"Comment",name:"comment",placeholder:"Enter comment"})})}),e.jsxs(u,{open:o,children:[e.jsx(N,{}),e.jsx(p,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4"})}),e.jsx("div",{className:"",children:e.jsx(We,{open:a,onOpenChange:g,setSendTo:i,sendTo:l,onSubmit:be,userDetailsList:(ce=(te=j==null?void 0:j.data)==null?void 0:te.data)==null?void 0:ce.docs})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between",children:[e.jsxs("div",{className:"mr-10",children:[((oe=(ne=s==null?void 0:s.data)==null?void 0:ne.data)==null?void 0:oe.wf_status)===1&&e.jsxs(pe,{className:"mb-4 flex items-center",children:[e.jsx(Qe,{className:"mr-2 inline text-green-500"}),"Complaint Resolved"]}),((me=(xe=s==null?void 0:s.data)==null?void 0:xe.data)==null?void 0:me.wf_status)===2&&e.jsxs(pe,{className:"mb-4 flex items-center",children:[e.jsx(Ue,{className:"mr-2 inline text-red-500"}),"Complaint Rejected"]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsxs("div",{className:"col-span-4",children:[h!="sent"&&h!="report"&&e.jsx(ue,{onClick:()=>{g(!0),d(5)},asChild:!0,children:e.jsx(n,{name:"approve",disabled:b.isPending,type:"button",className:"pl-7 pr-7",children:"Send"})}),h=="draft"&&e.jsx(Ye,{to:`/e-dak/dashboard/create-file?refNo=${m}&page=edit`,children:e.jsx(n,{className:"ml-5 bg-primary",onClick:()=>{},children:"Edit"})})]}),e.jsx(e.Fragment,{})]})]})]})]})})})})]})})}function rs(){const[l,i]=r.useState(""),[t,d]=r.useState("");return console.log(i),console.log(d),e.jsx(Ve,{title:"Workflow Details",subTitle:"",searchLink:l,searchLabel:t,children:e.jsx("div",{className:"",children:e.jsx(Ge,{})})})}export{rs as default};
