import{r as s,a as J,s as K,z as W,j as a,C as Q,S as Y,t as O,v as D,w as L,x as F,y as I,L as B,J as $,H as z}from"./index-BM0oc_dR.js";import{P as Z}from"./index-lAQ15i_6.js";import{T as X,a as H,b as o,c,d as V,e as r}from"./table-BWoLNWxy.js";import{P as M}from"./index-D9n-mIVU.js";import{S as U}from"./index-5TntktDp.js";import{d as m,e as aa,b as q,c as G}from"./tabs-sd9narhZ.js";import"./badge-272lERzh.js";import"./index-CeYUPDYe.js";import"./circle-check-big-DCfAJpH9.js";import"./pagination-CQ-KYJ4s.js";function ea(){var b,v,w,P,y,S,T,A,C,k,_,R,E;const[x,i]=s.useState(1),[h,t]=s.useState(10),[j,g]=s.useState(""),[p,N]=s.useState("si_pending"),{user:n}=J(),[f,u]=s.useState(!1),l=K({api:`${W.getEdak}?draft=false&role=${p}&edakRefNo=${j}&departmentAlloted=${n==null?void 0:n.uniqueString}`,key:"edakDraft",value:[x,h],options:{enabled:!0}});return s.useEffect(()=>{(async()=>{u(!0);try{await l.refetch()}catch(d){console.error("API call failed:",d)}finally{u(!1)}})()},[p]),a.jsx("main",{className:"grid items-start",children:a.jsxs(m,{defaultValue:"INBOX",className:"w-full",children:[a.jsxs("div",{className:"flex",children:[a.jsx(Q,{className:"flex-1 text-2xl font-bold",children:"E DAK List"}),a.jsx("div",{className:"flex flex-1 justify-end",children:a.jsxs(aa,{className:"flex gap-5",children:[(n==null?void 0:n.roleId)!==Y&&a.jsx(q,{value:"INBOX",onClick:()=>{N("si_pending")},children:"Inbox"}),a.jsx(q,{value:"OUTBOX",onClick:()=>{N("si_acknowledge")},children:"Outbox"})]})})]}),a.jsx(G,{value:"INBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsx("div",{className:"flex w-full justify-between gap-2",children:a.jsx("div",{children:a.jsx(U,{search:j,setSearch:g,refetch:l.refetch,isFetching:l.isLoading})})}),a.jsxs(O,{children:[a.jsx(D,{className:"px-7",children:a.jsxs(L,{children:["E-Dak List Inbox (",(b=l.data)==null?void 0:b.totalDocs,")"]})}),a.jsx(F,{children:f?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(I,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(X,{children:[a.jsx(H,{children:a.jsxs(o,{children:[a.jsx(c,{className:"",children:"S No"}),a.jsx(c,{className:"",children:"Edak Ref No"}),a.jsx(c,{className:"",children:"Receved Date"}),a.jsx(c,{className:"",children:"Receved From"}),a.jsx(c,{className:"",children:"Category"}),a.jsx(c,{className:"",children:"Department"}),a.jsx(c,{className:"",children:"Date"}),a.jsx(c,{className:"",children:"Status"}),a.jsx(c,{children:"Action"})]})}),a.jsx(V,{children:(w=(v=l==null?void 0:l.data)==null?void 0:v.data)==null?void 0:w.map((e,d)=>a.jsxs(o,{children:[a.jsx(r,{children:d+1}),a.jsx(r,{children:e==null?void 0:e.edakRefNo}),a.jsx(r,{children:e==null?void 0:e.receivedDate}),a.jsx(r,{children:e==null?void 0:e.receivedFrom}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.category)=="e_mail"?"E-Mail":e==null?void 0:e.category}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.departmentAlloted)==""?"N/A":e==null?void 0:e.departmentAlloted}),"                              ",a.jsx(r,{children:e==null?void 0:e.createdAt.split("T",[1])}),a.jsx(r,{className:"text-green-500 font-bold",children:(e==null?void 0:e.role)=="si_pending"&&"Pending"}),a.jsx(r,{children:a.jsx(B,{to:`/e-dak/dashboard/workflow-details?refNo=${e==null?void 0:e.edakRefNo}&page=inbox`,children:a.jsx($,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},e._id))})]}),a.jsx(z,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(M,{page:x,perPage:h,setPage:i,setPerPage:t})})]})})]})]})}),a.jsx(G,{value:"OUTBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsx("div",{className:"flex w-full justify-between gap-2",children:a.jsx("div",{children:a.jsx(U,{search:j,setSearch:g,refetch:l.refetch,isFetching:l.isLoading})})}),a.jsxs(O,{children:[a.jsx(D,{className:"px-7",children:a.jsxs(L,{children:["E-Dak List Outbox (",(y=(P=l.data)==null?void 0:P.data)==null?void 0:y.totalDocs,")"]})}),a.jsx(F,{children:f?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(I,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(X,{children:[a.jsx(H,{children:a.jsxs(o,{children:[a.jsx(c,{className:"",children:"S No"}),a.jsx(c,{className:"",children:"Edak Ref No"}),a.jsx(c,{className:"",children:"Receved Date"}),a.jsx(c,{className:"",children:"Receved From"}),a.jsx(c,{className:"",children:"Category"}),a.jsx(c,{className:"",children:"Department"}),a.jsx(c,{className:"",children:"Date"}),a.jsx(c,{className:"",children:"Status"}),a.jsx(c,{children:"Action"})]})}),a.jsx(V,{children:(T=(S=l==null?void 0:l.data)==null?void 0:S.data)==null?void 0:T.map((e,d)=>a.jsxs(o,{children:[a.jsx(r,{children:d+1}),a.jsx(r,{children:e==null?void 0:e.edakRefNo}),a.jsx(r,{children:e==null?void 0:e.receivedDate}),a.jsx(r,{children:e==null?void 0:e.receivedFrom}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.category)=="e_mail"?"E-Mail":e==null?void 0:e.category}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.departmentAlloted)==""?"N/A":e==null?void 0:e.departmentAlloted}),"                              ",a.jsx(r,{children:e==null?void 0:e.createdAt.split("T",[1])}),a.jsx(r,{className:"text-green-500 font-bold",children:e!=null&&e.role?a.jsxs(a.Fragment,{children:[(e==null?void 0:e.role)==="no_pending"&&"Pending at Nodal Officer",(e==null?void 0:e.role)==="co_pending"&&"Pending at Commissioner",(e==null?void 0:e.role)==="si_acknowledge"&&"Acknowledge",(e==null?void 0:e.role)==="si_pending"&&"Pending at Section Incharge"]}):(e==null?void 0:e.draft)===!1&&"Sent to Nodal Officer"}),a.jsx(r,{children:a.jsx(B,{to:`/e-dak/dashboard/workflow-details?refNo=${e==null?void 0:e.edakRefNo}&page=outbox`,children:a.jsx($,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},e._id))})]}),a.jsx(z,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(M,{page:x,perPage:h,totalPage:(C=(A=l==null?void 0:l.data)==null?void 0:A.data)==null?void 0:C.totalDocs,hasNextPage:(_=(k=l==null?void 0:l.data)==null?void 0:k.data)==null?void 0:_.hasNextPage,hasPrevPage:(E=(R=l==null?void 0:l.data)==null?void 0:R.data)==null?void 0:E.hasPrevPage,setPage:i,setPerPage:t})})]})})]})]})})]})})}function ia(){return a.jsx(Z,{title:"",subTitle:"",children:a.jsx("div",{className:"pb-12",children:a.jsx(ea,{})})})}export{ia as default};
