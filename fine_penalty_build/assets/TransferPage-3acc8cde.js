import{r as i,d as j,a as D,A as I,f as n,j as S,P as B}from"./index-5a588281.js";import{B as E}from"./BarLoader-6d7dc457.js";import{A as P}from"./AxiosInterceptors-aea314b9.js";function y(){const{api_getFreeMenuList:g}=B(),{setmenuList:L,setuserDetails:x}=i.useContext(j),e=D(),[A,u]=i.useState(!1);i.useEffect(()=>{let a=window.localStorage.getItem("token");if(u(!0),a==null){e("/");return}h()},[]);const h=()=>{let a={moduleId:14};P.post(g,a,I()).then(function(t){var d,r,f,o,c,l,m,s;t.data.status==!0&&(n("menuList",(r=(d=t==null?void 0:t.data)==null?void 0:d.data)==null?void 0:r.permission),n("userDetails",(o=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:o.userDetails),L((l=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:l.permission),x((s=(m=t==null?void 0:t.data)==null?void 0:m.data)==null?void 0:s.userDetails),e("/home"))}).catch(function(t){}).finally(()=>u(!1))};if(A)return S.jsx(E,{})}export{y as default};
