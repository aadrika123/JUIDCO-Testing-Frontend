import{u as C,r as l,c as F,a as O,b as R,d as D,e as T,j as e,L as M,A as P,f as _,P as B}from"./index-9299af8a.js";const J="/assets/logo1-3109eaef.png";const z=()=>{const b=C(),{notify:n,setisLoggedIn:v,setheartBeatCounter:y}=l.useContext(F),[o,p]=l.useState(null),[t,j]=l.useState(),{api_login:k}=B(),[N,d]=l.useState(!1),S=O({email:R().required("Enter email"),password:D().required("Enter password")}),s=T({initialValues:{email:"",password:""},onSubmit:r=>{E()},validationSchema:S}),g=["TAX COLLECTOR","ULB TAX COLLECTOR","TEAM LEADER"],A=l.useMemo(()=>Array.isArray(o)&&o.some(r=>g.includes(r)),[o]);l.useEffect(()=>{var r,a,i;o!=null&&(A?(n("Login Successfull !!! ","success"),window.localStorage.setItem("menuList",JSON.stringify((r=t==null?void 0:t.userDetails)==null?void 0:r.menuPermission)),window.localStorage.setItem("userName",JSON.stringify((a=t==null?void 0:t.userDetails)==null?void 0:a.userName)),window.localStorage.setItem("roles",JSON.stringify((i=t==null?void 0:t.userDetails)==null?void 0:i.role)),b("/municipal-rental")):n("You don't have permission of Tax Collector !!!","warn"))},[o]);const c=JSON.parse(window.localStorage.getItem("roles")),L=window.localStorage.getItem("token");l.useMemo(()=>Array.isArray(c)&&c.some(r=>g.includes(r)),[c,L]),l.useEffect(()=>{},[]);const E=()=>{d(!0);let r={email:s.values.email,password:s.values.password,type:"mobile"};console.log("--1--before login send...",r),P.post(k,r,_()).then(function(a){var i,m,u,x,w,h,f;console.log("login response => ",a),a.data.status==!0?(console.log("--2--login response...",a),window.localStorage.setItem("token",(m=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:m.token),window.localStorage.setItem("isLoggedIn",!0),j((u=a==null?void 0:a.data)==null?void 0:u.data),p((h=(w=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:w.userDetails)==null?void 0:h.role),y(I=>I+1),v(!0)):(d(!1),n((f=a==null?void 0:a.data)==null?void 0:f.message,"error"))}).catch(function(a){d(!1),console.log("--2--login error...",a),n("Something went wrong !!! ","error")})};return e.jsxs(e.Fragment,{children:[N&&e.jsx(M,{}),e.jsx("div",{className:"",children:e.jsx("div",{className:"py-8 h-screen bg-[#DDE3F1] darks:bg-gray-900 darks:bg-opacity-40",children:e.jsx("div",{className:"container mx-auto px-4 ",children:e.jsx("div",{className:"flex flex-wrap -mx-4 flex-row ",children:e.jsx("div",{className:"flex-shrink max-w-full px-4 w-full lg:w-full",children:e.jsx("div",{className:"max-w-full w-full px-2 sm:px-12 lg:pr-20 mb-12 lg:mb-0",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"p-3 sm:py-3 sm:px-12 mt-24 bg-[#FFFFFF]  rounded-lg  darks:bg-gray-800 shadow-xl h-3/4 sm:w-1/2 lg:w-1/3 w-full  hover:scale-105 duration-500 animate__animated animate__fadeInDown  darks:bg-gray-800 ",children:e.jsxs("form",{onChange:s.handleChange,onSubmit:s.handleSubmit,className:"p-3",children:[e.jsx("div",{children:e.jsx("img",{src:J,className:"w-20 mt-3 mx-auto opacity-95"})}),e.jsx("div",{className:"text-lg mt-1 text-gray-600 text-center capitalize tracking-wide font-semibold",children:"UD&HD"}),e.jsx("hr",{className:"block w-12 h-0.5 mx-auto my-5 bg-gray-700 border-gray-700"}),e.jsxs("div",{class:"relative w-full mb-6",children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Username"}),e.jsx("input",{type:"email",name:"email",id:"email",class:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600",placeholder:"Email"}),s.errors.email&&s.touched.email&&e.jsx("span",{className:"text-red-600 text-xs",children:s.errors.email})]}),e.jsxs("div",{class:"relative w-full mb-6",children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",class:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600",placeholder:"Password"}),s.errors.password&&s.touched.password&&e.jsx("span",{className:"text-red-600 text-xs",children:s.errors.password})]}),e.jsx("div",{class:"text-center mt-8 mb-6",children:e.jsxs("button",{type:"submit",name:"signin",id:"signin",value:"Sign In",class:"w-full py-2 px-4 inline-block text-center rounded leading-normal text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:[e.jsxs("svg",{xmlnsXlink:"http://www.w3.org/2000/svg",fill:"currentColor",className:"inline-block w-4 h-4 ltr:mr-2 rtl:ml-2 bi bi-box-arrow-in-right",viewBox:"0 0 16 16",children:[e.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),e.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Sign In"]})})]})})})})})})})})})]})};export{z as default};
